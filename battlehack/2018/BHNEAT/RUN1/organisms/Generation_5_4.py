edge = [(0,85,1.65611743522446),(0,89,-1.43292031617176),(0,90,2.0959349345378),(0,93,-2.31641590624714),(0,98,1.3206579790643),(0,101,-4.36799218726157),(0,105,0.304788354136784),(0,108,2.99058503982666),(0,113,-0.830835901974547),(0,114,-1.11520737327189),(0,117,-0.691778313547166),(0,118,1.3713339640492),(1,86,1.58438367870113),(1,92,3.83748893704032),(1,98,-1.8626209295938),(1,102,-2.97109897152623),(1,104,-0.0622272408215583),(1,107,-0.632724997711112),(1,108,0.304803613391522),(1,109,-0.694524979400006),(1,113,2.66208380382702),(2,87,-4.50671407208472),(2,88,-0.147556993316446),(2,100,2.16040528580584),(2,106,-0.259788811914426),(2,108,-1.91773735770745),(2,110,0.950193792535173),(2,113,0.143848994415113),(2,118,3.34884182256539),(3,89,1.68272957548753),(3,92,-1.45052949613941),(3,97,2.39806817835017),(3,99,1.02510147404401),(3,101,-0.610583819086276),(3,103,1.70300912503433),(3,105,1.9577929013947),(3,108,4.32517471846675),(3,109,-1.19281594286935),(3,111,0.600253303628651),(3,112,1.18097476119266),(3,116,-0.711813715018158),(4,90,-0.662007507553331),(4,91,0.647465437788018),(4,97,-1.17491683706168),(4,99,1.16234321115757),(4,101,-0.406994842371899),(4,108,-0.827890865810114),(4,113,-0.0530564287240211),(4,118,2.39898373363445),(5,86,-2.12475966673788),(5,87,2.47708059938353),(5,89,1.54411450544755),(5,92,1.20456556901761),(5,93,2.45063631092257),(5,99,-0.530747398297067),(5,104,0.995605334635456),(5,114,-0.295419171727653),(5,118,-2.92738120670186),(6,89,3.23438215277566),(6,92,-2.92382580034791),(6,94,3.57066560869167),(6,100,-0.238670003357036),(6,101,1.55619983520005),(6,103,-1.81086153752251),(6,107,-2.30086672566912),(6,110,2.55946531571398),(6,113,0.419370097964415),(7,85,1.12422559282205),(7,86,0.13441877498703),(7,90,-1.9170354319895),(7,95,1.01615955076754),(7,99,-0.305825983458968),(7,100,2.39492477187414),(7,104,-0.0784325693533128),(7,106,1.57811212500381),(7,108,0.67658009582812),(7,112,2.29584643086032),(7,116,0.0354777672658467),(8,92,1.55957213049715),(8,93,3.57213049714652),(8,95,0.219901120029298),(8,99,-3.96922208319346),(8,106,-2.02177495651112),(8,107,1.13016144291513),(8,115,0.631580553605762),(8,116,1.23206274605548),(8,118,1.81310464796899),(9,85,2.69377727591784),(9,87,-0.8209784234138),(9,98,-2.23863948484756),(9,101,-3.15625476851711),(9,103,-0.292062135685293),(9,105,0.277077547532578),(9,106,2.56360057374798),(9,113,-3.30944242683187),(10,89,-2.34720908230842),(10,96,0.0572985015411847),(10,106,-0.267067476424451),(10,108,-1.55064546647542),(10,109,-0.569643238624226),(10,111,-2.12489700003052),(10,112,-4.23635059663686),(10,114,-0.406292916653951),(10,115,-2.02639851069674),(10,116,-0.243919186986908),(10,117,0.403149510177923),(11,89,-2.9228186895352),(11,97,-1.10353404339732),(11,105,0.289895321512498),(11,112,2.00810266426588),(11,115,-0.401699880977813),(12,92,2.000640888699),(12,93,-2.46914578691977),(12,94,1.6422772911771),(12,97,-2.28603473006378),(12,98,-1.76258125553148),(12,99,-1.55293435468612),(12,108,-3.00636310922575),(12,116,2.24449903866695),(13,86,2.39028595843379),(13,87,-0.84392834253975),(13,90,-0.632541886654256),(13,99,-2.43734550004578),(13,102,-0.633411664174322),(13,104,0.152302621539964),(13,113,-0.441007721182897),(13,116,-1.72783593249306),(13,118,0.158162175359356),(14,90,-2.09451582384716),(14,93,0.217932676168096),(14,95,-2.49206518753624),(14,102,-1.99734488967559),(14,104,-2.49870296334727),(14,106,1.60917996765038),(14,109,1.44821008941923),(14,110,0.395428327280496),(14,111,0.285500656147954),(15,85,-0.523819696646016),(15,92,0.91346476638081),(15,99,-2.4841761528367),(15,101,0.469298379467147),(15,104,-2.82818079165014),(15,108,-1.55211035493027),(15,117,-1.80312509537034),(16,86,-2.39288003173925),(16,87,-1.35518967253639),(16,88,3.92118594927824),(16,90,-1.55301065095981),(16,91,0.00793481246375927),(16,95,1.14485610522782),(16,97,-2.35157322916349),(16,98,-1.64093447676016),(16,99,3.65739921262246),(16,101,-0.249259926145207),(16,108,1.32723471785638),(16,110,2.29706717123936),(17,89,3.29702139347514),(17,96,0.224036378063295),(17,99,-2.06769005401776),(17,101,-4.11333048493912),(17,106,1.98991363261818),(17,107,-0.315820795312357),(17,109,-3.11188085573901),(18,90,1.48297067171239),(18,91,-0.97354045228431),(18,93,1.24547563097018),(18,99,-1.82737205114902),(18,102,-1.92979216895047),(18,103,-3.51539658803064),(18,104,-1.48754844813379),(18,110,0.839609973448897),(18,111,0.905545213171789),(18,116,-2.195806756798),(18,117,-0.183111056855983),(18,118,-0.28606524857326),(19,87,3.16051210058901),(19,89,1.4568315683462),(19,93,1.13277077547533),(19,95,-0.0666066469313639),(19,101,-1.78853724784082),(19,105,-1.226325266274),(19,115,-1.11748100222785),(20,88,-0.907086397900327),(20,101,-2.13896603289895),(20,103,-0.0545060579241312),(20,104,0.530213324381237),(20,105,2.64416943876461),(20,106,-0.0379802850428788),(20,111,-0.483947264015625),(20,116,-2.19933164464248),(21,86,0.351573229163488),(21,87,-1.67235328226569),(21,94,-2.32518997772149),(21,96,3.77079073458052),(21,101,3.89342936490982),(21,102,0.771874141666921),(21,105,-1.00213629566332),(21,107,2.38364818262276),(21,108,0.958708456678976),(22,86,-1.22234260078738),(22,88,-4.2399822992645),(22,91,3.13724173711356),(22,92,-0.598315378276925),(22,93,-1.41650135807367),(22,98,-3.77306436353649),(22,106,-1.87684255500961),(22,115,0.854411450544756),(22,117,1.87528611102634),(23,85,0.612750633259072),(23,86,-2.50451673940245),(23,88,-2.03086947233497),(23,90,1.77285073397015),(23,97,-0.309976500747703),(23,104,-1.39539780877102),(23,112,3.29737235633412),(23,114,2.2753990295114),(23,115,0.878475295266579),(23,116,-3.29425946836757),(24,89,-3.13368633075961),(24,90,-1.86365855891598),(24,91,-0.462660603656117),(24,101,-1.69537949766533),(24,107,-1.72478408154546),(24,108,-1.73303933835871),(24,110,2.23203222754601),(24,112,-1.10022278511917),(25,90,0.687810907315287),(25,92,0.577669606616413),(25,94,-2.98489333780938),(25,98,3.96613971373638),(25,105,3.58313241981262),(25,108,1.03938413647877),(25,109,2.44460890530106),(25,115,-2.73996704000977),(26,85,0.960097048860134),(26,87,0.0138248847926266),(26,89,0.465559862056337),(26,95,2.14009521774957),(26,98,0.465498825037385),(26,100,-1.39950254829554),(26,101,-3.58275093844417),(26,102,3.32761619922483),(26,103,1.14723654896695),(26,104,1.01915036469619),(26,107,1.36667989135411),(26,109,3.04744102298044),(26,112,3.19309060945463),(26,113,-1.38300729392376),(26,117,1.3444318979461),(27,85,1.75153355510117),(27,87,0.213644825586718),(27,94,-3.93725394451735),(27,100,2.33622241889706),(27,102,-0.795236060670797),(27,103,0.803018280587176),(27,104,-1.48187200537126),(27,105,-1.71904660176397),(27,108,-2.52510147404401),(27,110,4.11876277962584),(27,114,1.76120792260506),(28,87,3.1872157963805),(28,88,-1.59730826746422),(28,97,2.10623493148595),(28,99,-1.77878658406323),(28,104,1.27544480727561),(28,113,4.13237403485214),(28,114,2.07098605304117),(29,88,-0.76357310708945),(29,91,0.728888821069979),(29,102,-0.792199468977935),(29,105,0.184774315622425),(29,116,0.624256111331523),(30,95,-3.52613910336619),(30,96,0.0961638233588671),(30,99,-0.849406414990692),(30,101,-1.04896694845424),(30,104,-2.88972136600848),(30,109,0.639698477126377),(30,110,-0.48155156102176),(30,114,0.656331064790796),(30,118,0.980895413068026),(31,85,0.655827509384441),(31,92,1.13188573870052),(31,94,1.04257332071902),(31,96,-1.56572161015656),(31,99,-0.235297708059938),(31,103,0.284569841608936),(31,107,0.876110110782189),(31,108,1.65457625049593),(31,109,-4.20709860530412),(31,111,1.60824915311136),(31,112,-1.38622699667348),(31,117,3.84864345225379),(32,86,-2.14720603045747),(32,87,0.262596514786218),(32,89,-1.86867885372478),(32,92,-4.66533402508622),(32,98,-2.91859187597278),(32,99,-2.54980620746483),(32,104,0.995056001464888),(32,106,2.44103823969237),(32,109,-1.54460280159917),(32,116,-2.41259498886074),(32,118,2.28797265541551),(33,96,1.88670003357036),(33,98,-0.226493118076113),(33,108,-0.558900723288675),(33,110,-0.761619922482986),(33,111,-0.0685140537736137),(33,114,-0.45074312570574),(34,85,-1.88077944273202),(34,90,1.77022614215522),(34,99,-2.26332895901364),(34,104,1.79509872737815),(34,109,1.31733146153142),(35,86,0.227973265785699),(35,87,-1.21115756706442),(35,97,-0.557802056947539),(35,98,-0.312662129581591),(35,100,2.53816339609973),(35,104,0.0469679860835597),(35,107,-0.850917081209754),(35,109,-1.65959654530473),(35,110,0.0465254676961575),(35,112,-2.24196600238044),(36,85,0.508667256691183),(36,87,1.33510849330119),(36,90,-0.349513229773858),(36,91,2.42851039155248),(36,104,0.611514633625294),(36,107,1.31719412823878),(36,109,-2.09509567552721),(36,112,-0.627231666005432),(36,115,-1.13727225562304),(36,117,-3.01916562395093),(36,118,3.16257209997864),(37,85,2.54002502517777),(37,86,-0.11093478194525),(37,87,0.928830835901975),(37,91,-0.849635303811762),(37,99,-1.97280800805689),(37,105,-0.0921964171269873),(37,111,-3.45864741966002),(37,112,0.867442854091006),(37,118,0.2609027375103),(38,87,1.94973601489303),(38,90,4.36962492751854),(38,103,-0.934675130466628),(38,105,2.77341532639546),(38,106,3.21047090060121),(38,111,2.98445081942198),(38,115,3.56175420392468),(39,87,3.34827723014008),(39,89,-0.32235175634022),(39,91,2.43377483443709),(39,94,2.1699880977813),(39,97,-4.06572161015656),(39,98,-1.27610095522935),(39,107,-0.152226325266274),(39,108,0.353831598864711),(39,109,3.98959318826868),(39,111,-1.38006225775933),(39,113,-2.46018860438856),(39,116,-0.928540910061953),(39,118,-2.14815210425123),(40,88,-0.0338297677541428),(40,92,2.53173924985504),(40,99,0.497192297128208),(40,104,-2.58311716055788),(40,110,-2.83240760521256),(40,116,-1.27916806543168),(40,118,0.243308816797387),(41,88,-0.536362804040651),(41,93,-2.03587450788903),(41,96,-0.817545091097751),(41,97,-2.11142307809687),(41,100,1.80288094729453),(41,101,2.40803247169408),(41,104,2.15030365916929),(41,105,-0.32967619861446),(41,106,0.850245674001282),(41,107,1.23378704184088),(41,109,1.08484145634327),(41,110,1.30819116794336),(41,111,-2.30759605700858),(41,112,0.215323343607899),(42,85,-1.55595568712424),(42,86,4.53685110019227),(42,87,-2.91317484054079),(42,99,-0.288094729453413),(42,100,0.676641132847072),(42,103,-3.10434278389843),(42,109,-3.67981505783258),(42,113,-2.52552873317667),(43,85,0.435544907986694),(43,88,0.518356883449812),(43,89,1.17099520859401),(43,93,2.03218176824244),(43,97,2.79761650440992),(43,98,0.512894070253609),(43,101,1.95745719779046),(43,102,2.5925626392407),(43,103,-3.84281441694388),(43,105,0.523010956144902),(43,110,1.30857264931181),(43,112,0.262398144474624),(43,114,-1.88229010895108),(43,116,1.11674855800043),(44,89,3.94032105471969),(44,98,-2.62909329508347),(44,99,-1.52363658558916),(45,87,-0.731299783318583),(45,88,0.962034974211859),(45,90,2.100756859035),(45,91,3.13869136631367),(45,95,-1.05575731681265),(45,98,1.68001342814417),(45,108,-0.574694051942503),(45,109,-2.10478530228584),(45,112,2.35923337504196),(45,115,-2.65268410290841),(46,85,1.26369518112735),(46,89,2.44987334818567),(46,91,0.852793969542527),(46,94,-2.18945890682699),(46,97,1.96018860438856),(46,100,-1.82598345896786),(46,101,-0.748680074465163),(46,108,1.33854182561724),(46,112,0.453810235908078),(47,86,0.198248237556078),(47,91,0.349818414868618),(47,92,2.9205298013245),(47,94,-0.965117343668935),(47,95,-2.31872005371258),(47,100,-2.33671071504868),(47,101,1.45352031006806),(47,104,-1.88032166508988),(47,105,-0.307260353404339),(47,108,3.12448500015259),(47,112,1.64036988433485),(47,114,-0.43092135380108),(47,118,0.35316019165624),(48,86,3.61235389263588),(48,91,-0.640797143467513),(48,98,3.80582598345897),(48,99,2.16754661702322),(48,100,-0.139072847682119),(48,103,-2.21720023194067),(48,105,-1.3795281838435),(48,106,-0.531968138676107),(48,111,-3.85763115329447),(48,115,0.251243629261147),(49,87,3.4559465315714),(49,89,3.39957884456923),(49,93,-0.713553270058291),(49,94,2.43255409405805),(49,95,-1.77016510513627),(49,102,3.43975646229438),(49,113,1.37415692617573),(49,114,3.01733451338237),(50,89,0.677831354716636),(50,105,2.79222998748741),(50,107,-0.392239143040254),(51,87,1.24637592699973),(51,92,0.863704336680197),(51,97,-2.01243629261147),(51,98,-2.79973754081851),(51,103,0.867885372478408),(51,106,1.97955259865108),(51,112,-3.02545243690298),(51,118,-0.156971953489792),(52,89,0.634601886043886),(52,97,2.8028656880398),(52,106,-2.56530961027863),(52,110,-4.23825800347911),(52,111,-4.3132267220069),(52,113,-1.05182042909024),(52,114,1.19618823816645),(52,118,0.582186346018861),(53,88,-1.6994232001709),(53,90,0.188604388561663),(53,92,-0.811792352061525),(53,94,2.65617847224342),(53,104,0.686254463332011),(53,105,2.89405499435408),(53,109,-0.367900631733146),(54,85,0.237250892666402),(54,91,-1.7680898464919),(54,94,3.38921781060213),(54,96,-2.9338206122013),(54,111,1.81035798211615),(54,112,-3.27935117648854),(54,113,2.63744010742515),(54,118,-2.1116367076632),(55,87,-1.99887081514939),(55,95,-0.562456129642628),(55,107,-0.124286629840999),(55,110,-0.994674520096438),(55,117,2.02743614001892),(56,107,-0.0716879787591173),(56,111,-0.825693533127842),(56,113,-1.4724112674337),(56,114,-2.77663502914518),(57,87,0.0663167210913422),(57,90,2.51780755027924),(57,91,1.67981505783258),(57,92,1.90812402722251),(57,93,1.05220191045869),(57,94,1.69458601641896),(57,95,-1.22745445112461),(57,96,-1.15553758354442),(57,100,-1.01158177434614),(57,102,-1.25392925809503),(57,103,2.16360972930082),(57,115,-0.899990844447157),(58,86,2.21932126834925),(58,87,-1.94727927488021),(58,89,4.37293618579669),(58,90,-1.9579149754326),(58,95,-2.17697683645131),(58,96,-1.01908932767724),(58,101,1.41325113681448),(58,103,-0.411221655934324),(58,109,-0.926541947691275),(58,110,1.18980986968596),(58,113,-1.13338114566485),(58,114,2.05351420636616),(58,115,-1.82819605090487),(58,118,0.687124240852077),(59,85,1.00630207220679),(59,86,1.472975859859),(59,90,1.49334696493423),(59,91,0.630893887142552),(59,93,0.354747154148991),(59,97,1.07805108798486),(59,98,1.49032563249611),(59,100,0.122226630451369),(59,102,-0.672444837794122),(59,112,1.51379436628315),(59,114,1.81345561082797),(60,85,-1.66791283913694),(60,87,-1.73770867030854),(60,90,-0.0726798303170872),(60,91,0.908917508468886),(60,96,1.99275185399945),(60,100,1.48591570787683),(60,101,-4.10380870998261),(60,105,-3.80161442915128),(60,107,-0.121570482497635),(60,109,2.25605029450362),(60,110,0.0905789361247598),(60,114,0.0194402905362101),(61,89,1.34743797112949),(61,94,-2.69075594347972),(61,96,2.58612323374126),(61,98,0.836664937284463),(61,100,-3.22161015655995),(61,102,1.90687276833399),(61,103,1.78823206274606),(61,114,-1.45808282723472),(61,115,-3.54464857936338),(62,93,-4.49151585436567),(62,95,1.0628070925016),(62,107,-1.8351542710654),(62,109,-4.30048524430067),(62,110,0.0343333231604968),(62,111,-2.26300851466414),(63,87,-3.52272103030488),(63,90,1.06863612781152),(63,93,-2.50297555467391),(63,97,0.900860621967223),(63,100,1.33629871517075),(63,103,0.0891750846888638),(63,104,-2.82978301339763),(63,108,1.86010315256203),(63,111,-2.62849818414869),(63,114,-0.396481215857418),(63,117,-1.33877071443831),(64,87,-0.358821375164037),(64,94,4.29358806115909),(64,99,0.836436048463393),(64,110,-0.241248817407758),(64,112,1.3906521805475),(64,116,3.0330515457625),(65,87,2.10185552537614),(65,88,-0.425809503463851),(65,90,-1.87124240852077),(65,97,-0.955870235297708),(65,99,0.262092959379864),(65,107,0.795815912350841),(65,110,-3.19316690572832),(65,111,-0.0995208594012269),(65,114,-0.9984740745262),(65,116,0.407498397778253),(65,117,-0.0255592516861477),(66,85,5.17079683828242),(66,102,0.322565385906552),(66,105,0.777336954863125),(66,108,-1.37308877834407),(66,111,4.62762840662862),(66,115,-0.779900509659108),(66,118,1.02647480697043),(67,86,0.0446333201086459),(67,90,1.79096346934416),(67,92,0.265755180516984),(67,104,2.07437360759301),(67,109,-2.87385174108097),(67,111,1.65511032441176),(68,87,0.829355754264962),(68,88,-3.29264198736534),(68,90,-1.93592638935514),(68,93,-2.36663411358989),(68,95,0.651051362651448),(68,96,0.277169103061007),(68,97,-0.719290749839778),(68,103,-1.00062562944426),(68,107,0.952177495651112),(68,112,0.808130130924406),(68,114,-0.246726889858699),(69,87,2.02446058534501),(69,88,0.0271614734336376),(69,92,-1.38782921842097),(69,94,2.35366374706259),(69,95,-0.309381389812922),(69,97,3.96700949125645),(69,108,0.617465742973113),(69,113,-0.603152562028871),(69,114,-1.40206610309153),(69,118,0.197058015686514),(70,85,-2.45895260475478),(70,86,0.115680410168767),(70,87,2.16837061677908),(70,90,-0.817026276436659),(70,96,-4.18004394665365),(70,97,-2.66550187688833),(70,99,3.22014526810511),(70,105,-2.1181829279458),(70,107,1.5649739066744),(70,109,2.12202826013977),(70,110,1.69248023926511),(70,111,-0.186986907559435),(71,85,3.13426618243965),(71,93,-1.109027375103),(71,96,-2.73932615131077),(71,100,1.92316965239418),(71,104,-1.56941434980316),(71,106,-1.65080721457564),(71,111,3.31267738883633),(71,113,1.00688192388684),(72,94,-1.14502395702994),(72,96,1.41531113620411),(72,99,-0.734138004699851),(72,110,-1.28765221106601),(72,112,2.55383465071566),(72,114,0.255058442945647),(72,115,1.08584856715598),(72,116,-0.645100253303629),(73,88,1.94730979338969),(73,94,1.9225745414594),(73,99,0.139164403210547),(73,100,-0.515457625049593),(73,106,2.3917355876339),(73,110,-3.87348551896725),(73,115,-2.44232001709037),(74,90,-1.09019745475631),(74,94,0.278221991637928),(74,99,-4.62652974028748),(74,102,0.967528305917539),(74,106,0.395977660451064),(74,107,-2.73709830011902),(74,110,-0.141071810052797),(74,113,1.41235084078494),(74,116,2.42446668904691),(75,85,-1.94337290566729),(75,86,0.666219061861019),(75,93,0.949430829798273),(75,98,2.44154179509873),(75,103,-2.1326792199469),(75,105,0.58226264229255),(75,111,0.508865627002777),(75,117,-1.79633472701193),(76,86,-0.379589220862453),(76,89,1.73111667226173),(76,92,-1.49385052034059),(76,94,-0.919446394238105),(76,99,-1.65291299172948),(76,101,2.20229194006165),(76,103,-0.813318277535325),(76,106,1.27375102999969),(76,110,2.77642139957884),(76,113,-0.345088045899838),(77,88,0.988906521805475),(77,91,0.80619220557268),(77,93,-1.76549577318644),(77,98,0.0988494521927549),(77,101,-2.88239692373424),(77,102,0.207037568285165),(77,103,0.591525009918516),(77,104,-2.15712454603717),(77,105,2.31408124027223),(77,109,0.601168858912931),(78,88,1.94396801660207),(78,93,-1.04281746879482),(78,94,1.95760979033784),(78,101,2.04962309640797),(78,104,-0.568971831415754),(78,110,1.66977446821497),(78,114,1.96310312204352),(78,116,1.39858699301126),(78,117,0.521851252784814),(78,118,-2.28904080324717),(79,87,1.91918698690756),(79,92,-1.56460768456069),(79,94,0.535294656208991),(79,107,0.194326609088412),(79,108,0.595355082857753),(79,114,1.56094546342357),(79,118,0.671941282387768),(80,87,-1.20313119907224),(80,88,1.87490462965789),(80,91,-1.94393749809259),(80,99,-4.20824304940947),(80,101,-0.430433057649464),(80,107,0.144886623737297),(80,113,-0.0937681203650014),(81,85,-1.9487594225898),(81,86,-1.9197668385876),(81,90,-0.883297219763787),(81,93,-0.249427777947325),(81,96,0.194860683004242),(81,97,-0.516846217230751),(81,106,0.499511703848384),(81,107,1.74039429914243),(81,110,1.47387615588855),(81,115,-0.843913083285012),(82,86,1.28756065553758),(82,92,-0.13495284890286),(82,110,1.17954039124729),(82,112,1.15672780541398),(83,87,1.45275734733116),(83,91,1.73773918881802),(83,93,-1.25052644428846),(83,101,0.823892941068758),(83,103,2.38761558885464),(83,105,-3.60901211584826),(83,108,-0.672017578661458),(84,85,-0.0431379131443219),(84,86,0.642246772667623),(84,89,-3.00010681478317),(84,95,-1.13251136814478),(84,99,-0.267189550462355),(84,104,2.60025330362865),(84,111,2.3673207800531),(84,113,1.40090639973144),(84,114,-1.58595538193915)]
orgname='BHNEAT_5_4'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()