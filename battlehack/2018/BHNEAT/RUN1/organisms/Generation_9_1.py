edge = [(0,85,0.106463820307016),(0,89,-0.32670064394055),(0,90,2.01406903286843),(0,93,1.91297647022919),(0,98,0.863643299661245),(0,101,-1.1985381633961),(0,105,-0.134739219336528),(0,108,1.80227057710501),(0,113,1.20642719809565),(0,114,-1.47892696920682),(0,117,-3.19895016327403),(0,118,-0.602969450972014),(1,86,-2.49670400097659),(1,92,-0.181340983306375),(1,98,1.4699240089114),(1,102,-1.50704977568896),(1,104,-1.65468306527909),(1,107,-0.885250404370251),(1,108,-0.0518051698355053),(1,109,3.4241004669332),(1,113,2.30867946409497),(2,87,-0.48254341257973),(2,88,-0.249259926145207),(2,100,0.80619220557268),(2,106,-3.56619464705344),(2,108,1.26412244026002),(2,110,-2.29483932004761),(2,113,1.52862636188849),(2,118,1.20532853175451),(3,89,0.582445753349407),(3,92,-0.804605243079928),(3,97,1.97820978423414),(3,99,0.516357921079134),(3,101,-0.13563951536607),(3,103,-1.84040345469527),(3,105,-1.17256691183203),(3,108,-0.934080019531846),(3,109,0.52806176946318),(3,111,-3.57852412488174),(3,112,-0.334101382488479),(3,116,-0.351695303201392),(4,90,1.08623004852443),(4,91,-0.268547624134037),(4,97,1.74619281594287),(4,99,-1.4644611957152),(4,101,1.14047669911802),(4,108,-1.82401501510666),(4,113,-1.89988402966399),(4,118,-3.12526322214423),(5,86,-0.457319864497818),(5,87,1.78560747093112),(5,89,-1.78807947019868),(5,92,1.4635761589404),(5,93,0.507370220038453),(5,99,-0.152699362163152),(5,104,1.60910367137669),(5,114,0.86649678029725),(5,118,-0.0761131626331369),(6,89,-0.80397961363567),(6,92,-2.40485854670858),(6,94,-0.534607989745781),(6,100,0.406414990691855),(6,101,0.627292703024384),(6,103,-1.43459883419294),(6,107,-0.773720511490219),(6,110,2.19309060945463),(6,113,0.269524216437269),(7,85,0.65668202764977),(7,86,2.59199804681539),(7,90,0.0500503555406353),(7,95,-2.35537278359325),(7,99,-2.59959715567492),(7,100,3.70950956755272),(7,104,1.73552659688101),(7,106,0.631962034974212),(7,108,3.44866786706137),(7,112,-0.636600848414564),(7,116,-0.251472518082217),(8,92,-0.260017700735496),(8,93,-2.69621875667592),(8,95,-2.19113742484817),(8,99,1.76076540421766),(8,106,2.8518173772393),(8,107,-2.12997833185827),(8,115,0.623462630085146),(8,116,1.27181310464797),(8,118,-1.60435804315317),(9,85,-1.94328135013886),(9,87,-0.465437788018433),(9,98,0.930967131565294),(9,101,1.30565813165685),(9,103,3.09900204474013),(9,105,0.310647907956175),(9,106,-0.101351969969787),(9,113,0.263817255165258),(10,89,-2.40168462172307),(10,96,1.61630603961303),(10,106,0.499099703970458),(10,108,1.98713644825587),(10,109,0.23543504135258),(10,111,-0.772774437696463),(10,112,0.65469832453383),(10,114,-0.640140995513779),(10,115,1.63602099673452),(10,116,0.264595477156896),(10,117,-0.230033265175329),(11,89,1.30033265175329),(11,97,1.31719412823878),(11,105,-0.686773277993103),(11,112,-0.165105136265145),(11,115,0.642414624469741),(12,92,-1.08600115970336),(12,93,2.19263283181249),(12,94,-0.190359202856532),(12,97,-1.44029053621021),(12,98,-1.21120334482864),(12,99,-2.31872005371258),(12,108,-1.64546647541734),(12,116,0.0499893185216833),(13,86,2.14633625293741),(13,87,-0.40804773094882),(13,90,3.27878658406323),(13,99,0.873912778099917),(13,102,0.64783165990173),(13,104,0.0305185094759972),(13,113,1.57284768211921),(13,116,-2.6044495986816),(13,118,2.49168370616779),(14,90,2.18771935178686),(14,93,3.20436719870602),(14,95,1.15550706503494),(14,102,0.267128513443404),(14,104,-2.42622150334178),(14,106,-4.09739982299264),(14,109,1.29192480239265),(14,110,0.467467268898587),(14,111,-1.05464339121677),(15,85,-2.57786797692801),(15,92,-0.0274208807641834),(15,99,0.256126590777306),(15,101,-1.28864406262398),(15,104,2.01869258705405),(15,108,-0.713690603350932),(15,117,-2.09060945463424),(16,86,0.370342112491226),(16,87,0.832453382976776),(16,88,2.13522751548814),(16,90,4.00201422162542),(16,91,0.782876064333018),(16,95,-2.38326670125431),(16,97,0.978606524857326),(16,98,-0.386440626239814),(16,99,0.607303079317606),(16,101,-0.0687734611041597),(16,108,-1.34838404492325),(16,110,-0.0571306497390669),(17,89,-2.65591906491287),(17,96,1.23763237403485),(17,99,1.18695638904996),(17,101,-4.42782372508927),(17,106,-1.32801293984802),(17,107,1.02229377117222),(17,109,0.139255958738975),(18,90,3.32903530991546),(18,91,-0.137104403820917),(18,93,-0.125644703512681),(18,99,-1.92762535477767),(18,102,-1.44950712607196),(18,103,-1.51796014282662),(18,104,-3.39220862453078),(18,110,1.07147434919279),(18,111,-2.77872554704428),(18,116,-1.15817743461409),(18,117,2.47421185949278),(18,118,0.188802758873256),(19,87,-1.49014252143925),(19,89,3.44569231238746),(19,93,0.970412305063021),(19,95,-1.46984771263771),(19,101,3.91062654499954),(19,105,1.202795495468),(19,115,-1.00563066499832),(20,88,1.3165227210303),(20,101,-0.0508133182775352),(20,103,-0.319223609118931),(20,104,1.9876705221717),(20,105,-3.26868495742668),(20,106,1.77777947325053),(20,111,1.13116855372784),(20,116,0.579241309854427),(21,86,-2.98905911435285),(21,87,1.62570574053163),(21,94,2.85151219214454),(21,96,-3.42295602282784),(21,101,0.695776238288522),(21,102,-1.89352092043825),(21,105,1.29285561693167),(21,107,-0.0460371715445418),(21,108,0.558992278817102),(22,86,3.08545182653279),(22,88,-1.54039124729148),(22,91,-2.16368602557451),(22,92,-0.366542558061464),(22,93,1.79877620777001),(22,98,3.31057161168249),(22,106,-1.22481460005493),(22,115,1.29387798699911),(22,117,2.61795403912473),(23,85,1.77510910367138),(23,86,-0.402478102969451),(23,88,-3.46424756614887),(23,90,2.03920102542192),(23,97,1.09250160222175),(23,104,0.0779747917111729),(23,112,2.14377269814142),(23,114,-2.93899349955748),(23,115,-3.50833155308695),(23,116,0.409009063997314),(24,89,-0.226752525406659),(24,90,-0.362407300027467),(24,91,2.28644672994171),(24,101,2.82203131199072),(24,107,0.774681844538713),(24,108,-1.95666371654408),(24,110,-0.404766991180151),(24,112,-0.846919156468398),(25,90,-0.608508560441908),(25,92,1.83991515854366),(25,94,0.886715292825099),(25,98,2.92667928098392),(25,105,-0.649555955687124),(25,108,-2.30872524185919),(25,109,-0.381237220374157),(25,115,0.139912106692709),(26,85,1.26512955107273),(26,87,0.334650715659047),(26,89,-0.134815515610217),(26,95,0.139378032776879),(26,98,-0.256263924069948),(26,100,-2.49153111362041),(26,101,0.936048463393048),(26,102,-1.90348521378216),(26,103,1.97485274819178),(26,104,-1.75154881435591),(26,107,0.795373393963439),(26,109,-0.104129154332102),(26,112,-3.08532975249489),(26,113,-2.20578630939665),(26,117,-1.37409588915677),(27,85,-1.64654988250374),(27,87,2.54699850459304),(27,94,1.66899624622333),(27,100,-1.38195440534684),(27,102,-4.70748008667257),(27,103,-3.54464857936338),(27,104,1.53251747184667),(27,105,3.14827417828913),(27,108,-4.6225623340556),(27,110,-2.66563921018097),(27,114,-0.687963499862667),(28,87,-1.94700460829493),(28,88,-2.00869777520066),(28,97,-2.71774956511124),(28,99,1.86681722464675),(28,104,0.49534592730491),(28,113,0.623416852320933),(28,114,-1.80722983489486),(29,88,1.3275246436964),(29,91,-0.336619159520249),(29,102,0.136707663197729),(29,105,2.1185033722953),(29,116,-0.787026581621754),(30,95,0.86603900265511),(30,96,-2.18443861201819),(30,99,0.802697836237678),(30,101,0.82204657124546),(30,104,-0.357676931058687),(30,109,-0.97499008148442),(30,110,-1.67119357890561),(30,114,-2.39735099337748),(30,118,-2.26714377269814),(31,85,0.198751792962432),(31,92,1.59550767540513),(31,94,2.45788445692312),(31,96,-2.36358226264229),(31,99,-1.00054933317057),(31,103,1.59146397289956),(31,107,0.690023499252296),(31,108,0.196234015930662),(31,109,1.62266914883877),(31,111,2.04564043092135),(31,112,1.26300851466414),(31,117,3.01045258949553),(32,86,1.84263130588702),(32,87,-1.90307321390423),(32,89,-1.00424207281716),(32,92,-0.319299905392621),(32,98,0.192464980010377),(32,99,0.372783593249306),(32,104,1.54365672780541),(32,106,0.597323526718955),(32,109,3.04324472792749),(32,116,-2.24474318674276),(32,118,0.674764244514298),(33,96,4.95220801416059),(33,98,-1.52017273476363),(33,108,-0.679982909634693),(33,110,-1.57155064546648),(33,111,1.15161595507675),(33,114,1.75809503463851),(34,85,0.919736320078127),(34,90,-0.685674611651967),(34,99,1.6415143284402),(34,104,0.95318460646382),(34,109,-0.783562730796228),(35,86,1.3487655262917),(35,87,0.32494582964568),(35,97,2.48184148686178),(35,98,2.9902035584582),(35,100,1.63893551438948),(35,104,0.323389385662404),(35,107,-2.06959746086001),(35,109,1.74733726004822),(35,110,0.905102694784387),(35,112,2.66380809961242),(36,85,0.474166081728568),(36,87,1.28337961973937),(36,90,-0.410626544999542),(36,91,1.78914761803034),(36,104,1.96035645619068),(36,107,-0.489196447645497),(36,109,2.45979186376537),(36,112,0.567949461348308),(36,115,-2.47123630481887),(36,117,-3.16855372783593),(36,118,0.986907559434797),(37,85,-0.0548112430188908),(37,86,-1.35174108096561),(37,87,-1.12521744438002),(37,91,-0.176015503402814),(37,99,2.56111331522568),(37,105,-0.0358897671437728),(37,111,-2.21854304635762),(37,112,0.93099765007477),(37,118,1.71765800958281),(38,87,-1.00727866451003),(38,90,2.41064180425428),(38,103,-2.10928678243355),(38,105,-0.381817072054201),(38,106,1.03167821283609),(38,111,-1.21730704672384),(38,115,-0.199804681539353),(39,87,-1.24620807519761),(39,89,0.523316141239662),(39,91,-0.0637073885311441),(39,94,1.70377208777123),(39,97,1.6497085482345),(39,98,2.43105868709372),(39,107,-0.635486922818689),(39,108,1.36246833704642),(39,109,1.56054872280038),(39,111,-0.145344401379437),(39,113,-2.15437788018433),(39,116,1.26139103366192),(39,118,-1.16270943327128),(40,88,1.03541673024689),(40,92,2.28179265724662),(40,99,3.06364635151219),(40,104,1.02465895565661),(40,110,-1.4669484542375),(40,116,-1.48547318948943),(40,118,-1.30588702047792),(41,88,-1.09088412121952),(41,93,-2.23104037598804),(41,96,1.20735801263466),(41,97,3.39136936552019),(41,100,-0.679265724662008),(41,101,3.10942411572619),(41,104,-0.97628711813715),(41,105,-2.42593157750176),(41,106,-0.690511795403912),(41,107,-1.37531662953581),(41,109,0.885113071077609),(41,110,1.23242896816919),(41,111,-0.710638752403333),(41,112,0.440321054719688),(42,85,-0.21385845515305),(42,86,0.338038270210883),(42,87,1.33256019775994),(42,99,0.534607989745781),(42,100,-4.10850856044191),(42,103,-0.65614795373394),(42,109,-0.0888088625751518),(42,113,0.06076235236671),(43,85,-2.50411999877926),(43,88,3.39396343882565),(43,89,-2.58452101199377),(43,93,-0.65591906491287),(43,97,0.0346232490005187),(43,98,0.140949736014893),(43,101,2.46230964079714),(43,102,-1.5001220740379),(43,103,1.52844325083163),(43,105,2.65793328653829),(43,110,0.850779747917112),(43,112,3.21933652760399),(43,114,-3.11363567003388),(43,116,1.01069673757134),(44,89,1.04632709738456),(44,98,-1.14825891903439),(44,99,0.621204260383923),(45,87,1.89277321695608),(45,88,1.44575334940642),(45,90,-2.8786431470687),(45,91,3.40130314035463),(45,95,2.38670003357036),(45,98,-0.628452406384472),(45,108,4.09006012146367),(45,109,0.142033143101291),(45,112,-1.57858516190069),(45,115,-0.31023590807825),(46,85,-2.31124301889096),(46,89,0.686346018860439),(46,91,-0.219702749717704),(46,94,-3.40424817651906),(46,97,-0.347315897091586),(46,100,0.854152043214209),(46,101,-0.498214667195654),(46,108,-0.237586596270638),(46,112,0.0582140568254646),(47,86,-1.3847468489639),(47,91,1.07058931241798),(47,92,0.97788933988464),(47,94,0.224188970610675),(47,95,0.810419019135106),(47,100,-0.833903012176885),(47,101,4.32325205236976),(47,104,0.707953123569445),(47,105,-0.0486159855952635),(47,108,0.237662892544328),(47,112,-2.29438154240547),(47,114,0.451902829065828),(47,118,-1.06671346171453),(48,86,1.03003021332438),(48,91,1.60986663411359),(48,98,-0.648884548478652),(48,99,-0.854167302468948),(48,100,-0.965361491744743),(48,103,0.823847163304544),(48,105,1.60626544999542),(48,106,-0.754905850398267),(48,111,-0.204336680196539),(48,115,2.13438825647755),(49,87,1.14432203131199),(49,89,-2.85000152592547),(49,93,4.48352000488296),(49,94,2.46627704702902),(49,95,1.2752006591998),(49,102,1.59659108249153),(49,113,-1.69447920163579),(49,114,0.311517685476241),(50,89,1.85508285775323),(50,105,-2.09082308420057),(50,107,-2.17517624439222),(51,87,-0.457701345866268),(51,92,0.0410016174810022),(51,97,-2.31472212897122),(51,98,-2.42672505874813),(51,103,-2.36548966948454),(51,106,-0.520523697622608),(51,112,-0.886257515182959),(51,118,1.71452986236152),(52,89,0.0924710837122715),(52,97,3.08073671681875),(52,106,-1.23813592944121),(52,110,-2.35999633777886),(52,111,-2.1454512161626),(52,113,1.36480300302133),(52,114,-1.25589770195624),(52,118,-0.729544969023713),(53,88,2.72037415692618),(53,90,3.2181768242439),(53,92,-1.04336680196539),(53,94,3.1076235236671),(53,104,0.245262001403852),(53,105,-3.26519058809168),(53,109,-1.66510513626514),(54,85,-0.374950407422102),(54,91,-0.98193304239021),(54,94,1.26207770012513),(54,96,-3.80367442854091),(54,111,2.85233619190039),(54,112,-1.4864650410474),(54,113,-0.227103488265633),(54,118,0.242240668965728),(55,87,-0.746162297433393),(55,95,-0.490966521195105),(55,107,-1.52012695699942),(55,110,-4.10237434003723),(55,117,2.08191167943358),(56,107,-3.41163365581225),(56,111,1.04007080294198),(56,113,-5.30957976012452),(56,114,1.40653706472976),(57,87,1.81464583269753),(57,90,-0.607211523789178),(57,91,-1.90610980559709),(57,92,3.80553605761895),(57,93,1.87604907376324),(57,94,0.776131473738823),(57,95,-1.88315988647114),(57,96,3.23882259590442),(57,100,-0.789559617908261),(57,102,-0.956526383251442),(57,103,2.44041261024812),(57,115,-1.74916837061678),(58,86,1.13635670033876),(58,87,-0.160985137485885),(58,89,0.350825525681326),(58,90,1.44528031250954),(58,95,3.45423749504074),(58,96,0.510422070986053),(58,101,-2.77549058503983),(58,103,0.289101840266121),(58,109,-0.283135471663564),(58,110,-1.26815088351085),(58,113,0.718146305734428),(58,114,-1.23722037415693),(58,115,0.042435987426374),(58,118,1.48648030030213),(59,85,0.404248176519059),(59,86,-4.53321939756462),(59,90,-1.81768242439039),(59,91,-2.31383709219642),(59,93,0.396176030762658),(59,97,-0.449461348307749),(59,98,0.303765984069338),(59,100,-0.22148808252205),(59,102,1.86849574266793),(59,112,3.2624286629841),(59,114,-3.46430860316782),(60,85,1.2101046784875),(60,87,-2.94792016357921),(60,90,-0.829340495010224),(60,91,-1.30802331614124),(60,96,-1.98113956114383),(60,100,1.15916928617206),(60,101,-0.686742759483627),(60,105,0.321054719687491),(60,107,3.26273384807886),(60,109,0.295190282906583),(60,110,-0.380397961363567),(60,114,-1.87217322305979),(61,89,-3.21886349070711),(61,94,0.32334360789819),(61,96,0.683309427167577),(61,98,-2.38593707083346),(61,100,1.92800683614612),(61,102,-2.00437940610981),(61,103,-1.35441145054476),(61,114,1.00796533097324),(61,115,2.38532670064394),(62,93,-0.532731101413007),(62,95,-1.48266548661763),(62,107,-2.05755790887173),(62,109,-0.0576494644001588),(62,110,-1.69850764488662),(62,111,0.73970763267922),(63,87,2.98306222724082),(63,90,1.35436567278054),(63,93,-1.14886928922391),(63,97,2.3810541093173),(63,100,1.94994964445936),(63,103,1.30472731711783),(63,104,1.57869197668386),(63,108,-2.68617816705832),(63,111,-0.789605395672475),(63,114,-0.426999725333415),(63,117,0.28621784112064),(64,87,-2.22708822901089),(64,94,1.80449842829676),(64,99,1.08575701162755),(64,110,-1.81279946287423),(64,112,2.43809320352794),(64,116,-0.665532395397809),(65,87,-2.11549729911191),(65,88,-0.0712607196264534),(65,90,2.22762230292673),(65,97,-1.30423902096622),(65,99,0.763588366344188),(65,107,3.2242805261391),(65,110,-1.29909665211951),(65,111,0.350199896237068),(65,114,0.448332163457137),(65,116,-3.98283333841975),(65,117,-1.12788781395917),(66,85,-1.87936033204138),(66,102,2.22058778649251),(66,105,-0.69983520004883),(66,108,-0.938444166386914),(66,111,-1.60046693319498),(66,115,1.80272835474715),(66,118,1.57962279122288),(67,86,-1.75453962828455),(67,90,1.70207831049532),(67,92,1.87925351725822),(67,104,3.01472518082217),(67,109,1.67174291207617),(67,111,-1.46946623126926),(68,87,-1.32692953276162),(68,88,0.334879604480117),(68,90,-2.89107943968017),(68,93,-3.00341807306131),(68,95,-2.04800561540574),(68,96,2.28025147251808),(68,97,-5.25464644306772),(68,103,2.38311410870693),(68,107,0.627994628742332),(68,112,-3.17644276253548),(68,114,-2.08706930753502),(69,87,2.37778862880337),(69,88,-2.09129612109745),(69,92,0.267799920651876),(69,94,1.56254768517106),(69,95,0.65179906613361),(69,97,-0.210974456007569),(69,108,-4.9438612018189),(69,113,-1.31221961119419),(69,114,2.69348735007782),(69,118,0.495223853267007),(70,85,-1.322946867275),(70,86,-2.27002777184362),(70,87,1.30779442732017),(70,90,-2.00312814722129),(70,96,0.527970213934751),(70,97,1.02403332621235),(70,99,1.10415967284158),(70,105,-0.729285561693167),(70,107,2.19016083254494),(70,109,-1.04860072634053),(70,110,-0.766853846858119),(70,111,0.773186437574389),(71,85,-0.936902981658376),(71,93,1.38502151554918),(71,96,-0.289376506851405),(71,100,1.30562761314737),(71,104,2.44949186681722),(71,106,1.52258369701224),(71,111,1.96787926877651),(71,113,0.519196142460402),(72,94,-1.13502914517655),(72,96,-0.960036011841182),(72,99,2.61358989226966),(72,110,1.85308389538255),(72,112,2.97102267525254),(72,114,-2.80930509353923),(72,115,1.82416760765404),(72,116,0.601580858790857),(73,88,1.09070101016266),(73,94,-1.66638691366314),(73,99,0.807672353282266),(73,100,0.786095767082736),(73,106,-1.51921140171514),(73,110,4.10000915555284),(73,115,0.935468611713004),(74,90,-0.416638691366314),(74,94,2.01640369884335),(74,99,-0.936765648365734),(74,102,-1.71657460249641),(74,106,-0.987334818567461),(74,107,0.163991210669271),(74,110,-1.70957060457167),(74,113,-1.92637409588916),(74,116,-0.34408093508713),(75,85,0.491241187780389),(75,86,3.03270058290353),(75,93,-1.63026825769829),(75,98,2.19031342509232),(75,103,-2.30411694692831),(75,105,-1.12475966673788),(75,111,3.39896847437971),(75,117,-3.5753349406415),(76,86,-1.03176976836451),(76,89,1.55533005767998),(76,92,0.128101443525498),(76,94,1.53904843287454),(76,99,1.09886471144749),(76,101,0.687429425946837),(76,103,-1.90829187902463),(76,106,-0.535676137577441),(76,110,-1.49189733573412),(76,113,-1.56346324045534),(77,88,-0.568376720480972),(77,91,3.61186559648427),(77,93,1.25667592394787),(77,98,0.946348460341197),(77,101,0.603320413830989),(77,102,-1.27524643696402),(77,103,2.27462080751976),(77,104,1.0681478316599),(77,105,2.27990050965911),(77,109,0.264549699392682),(78,88,-1.95005645924253),(78,93,-1.00411999877926),(78,94,0.895596179082614),(78,101,-1.23497726371044),(78,104,-2.08360545670949),(78,110,-0.700598162785729),(78,114,-1.60931730094302),(78,116,-0.375377666554765),(78,117,-2.08267464217048),(78,118,0.450529496139409),(79,87,-0.0785088656270028),(79,92,0.284356212042604),(79,94,2.55764946440016),(79,107,-2.85134434034242),(79,108,2.62590411084323),(79,114,0.772301400799585),(79,118,-1.70047608874783),(80,87,-0.687749870296335),(80,88,1.10744041261025),(80,91,-1.96911526841029),(80,99,1.81252479628895),(80,101,-1.23093356120487),(80,107,1.54141361735893),(80,113,0.829187902462844),(81,85,-1.42361217078158),(81,86,0.0466017639698479),(81,90,-2.08000427259133),(81,93,-0.648457289345988),(81,96,-1.71858882412183),(81,97,0.76265755180517),(81,106,1.54084902493362),(81,107,0.602649006622517),(81,110,0.980010376293222),(81,115,0.876247444074831),(82,86,4.25769829401532),(82,92,-1.78264717551195),(82,110,-0.626163518173772),(82,112,2.41637928403577),(83,87,0.0380718405713067),(83,91,1.30497146519364),(83,93,1.12495803704947),(83,101,-0.00453199865718545),(83,103,-3.24755088961455),(83,105,1.78342539750359),(83,108,0.0796227912228766),(84,85,-3.14458143864254),(84,86,-3.02279732657857),(84,89,2.04368724631489),(84,95,1.91293069246498),(84,99,-0.65027314065981),(84,104,-1.97325052644429),(84,111,1.3182470168157),(84,113,-2.38384655293435),(84,114,0.467253639332255),(35,105,-3.06808679464095)]
orgname='BHNEAT_9_1'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()