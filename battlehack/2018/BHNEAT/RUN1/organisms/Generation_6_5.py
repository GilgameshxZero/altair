edge = [(0,85,1.04521317178869),(0,89,1.73485518967254),(0,90,-3.90171514023255),(0,93,-1.25269325846126),(0,98,2.30755027924436),(0,101,-1.53648487807855),(0,105,0.6767326883755),(0,108,2.0661793877987),(0,113,-0.681676686910611),(0,114,-0.838099307229835),(0,117,-1.02999969481491),(0,118,-2.47468489638966),(1,86,1.14293343913083),(1,92,-0.705038605914487),(1,98,1.63533433027131),(1,102,-2.45983764152959),(1,104,-2.97598193304239),(1,107,-2.56857509079257),(1,108,-0.697882015442366),(1,109,1.6457716605121),(1,113,1.10243537705618),(2,87,0.192144535660878),(2,88,1.95753349406415),(2,100,-1.28806421094394),(2,106,-0.878276924954985),(2,108,2.20805993835261),(2,110,-0.968443861201819),(2,113,-2.65080721457564),(2,118,0.37443159276101),(3,89,-0.315393536179693),(3,92,3.31653798028504),(3,97,-0.482802819910276),(3,99,0.46134830774865),(3,101,-1.54841761528367),(3,103,0.505096591082491),(3,105,4.39393292031617),(3,108,-2.86765648365734),(3,109,-3.15292825098422),(3,111,-0.960615863521225),(3,112,4.58668782616657),(3,116,-0.271050141911069),(4,90,3.87456892605365),(4,91,2.40769676808985),(4,97,1.1087069307535),(4,99,1.75814081240272),(4,101,-2.04614398632771),(4,108,0.295800653096103),(4,113,-1.35901974547563),(4,118,-3.10229804376354),(5,86,2.00943021942808),(5,87,1.5226905117954),(5,89,-0.514511551255837),(5,92,0.575716422009949),(5,93,1.71413312173833),(5,99,-1.23702200384533),(5,104,-0.878994109927671),(5,114,-0.277413251136815),(5,118,0.116687520981475),(6,89,-1.97810296945097),(6,92,1.03099154637288),(6,94,-0.097430341502121),(6,100,1.2531510361034),(6,101,-1.35518967253639),(6,103,-2.44137394329661),(6,107,-0.795739616077151),(6,110,-1.15845210119938),(6,113,-2.04049806207465),(7,85,0.556886501663259),(7,86,1.02067629016999),(7,90,-0.571092867824335),(7,95,1.43906979583117),(7,99,3.69911801507614),(7,100,-0.679815057832576),(7,104,0.912823877681814),(7,106,0.0202948088015381),(7,108,0.753563035981323),(7,112,-2.07440412610248),(7,116,-0.894878994109928),(8,92,-2.09154026917325),(8,93,0.445661793877987),(8,95,2.34223456526383),(8,99,-3.29422894985809),(8,106,-1.51759392071291),(8,107,-1.20023194067202),(8,115,0.779793694875942),(8,116,2.0179906613361),(8,118,-0.500122074037904),(9,85,0.835963011566515),(9,87,-0.940916165654469),(9,98,1.81231116672262),(9,101,1.76813562425611),(9,103,1.80181279946287),(9,105,0.721808526871548),(9,106,3.05807672353282),(9,113,0.771111178930021),(10,89,0.280968657490768),(10,96,0.757896664326914),(10,106,-0.998290963469344),(10,108,-0.212759788811914),(10,109,0.741431928464614),(10,111,0.0134586626789148),(10,112,-1.79120761741996),(10,114,-2.7122714926603),(10,115,1.50543229468673),(10,116,1.17549668874172),(10,117,-2.01518295846431),(11,89,-1.74205755790887),(11,97,2.34109012115848),(11,105,0.397930845057527),(11,112,-2.65359965819269),(11,115,1.97538682210761),(12,92,-0.486495559556871),(12,93,-1.58937345500046),(12,94,-0.985595263527329),(12,97,-2.67766350291452),(12,98,1.58789330729087),(12,99,2.18442335276345),(12,108,-0.471648304696799),(12,116,-2.35601367229224),(13,86,3.22310556352428),(13,87,0.875713370159001),(13,90,2.8772392956328),(13,99,1.15819269386883),(13,102,1.54507583849605),(13,104,-2.52584917752617),(13,113,-1.3345896786401),(13,116,-0.664036988433485),(13,118,-0.612735374004334),(14,90,-0.27767265846736),(14,93,-1.39603869747002),(14,95,-0.829798272652364),(14,102,0.611529892880032),(14,104,-1.8984801782281),(14,106,0.986602374340037),(14,109,-1.34034241767632),(14,110,-4.14763328959014),(14,111,0.322550126651814),(15,85,3.60060426648762),(15,92,2.51583910641804),(15,99,0.220755638294625),(15,101,0.118182927945799),(15,104,-4.86620685445723),(15,108,1.86405529953917),(15,117,0.491790520950957),(16,86,1.24645222327342),(16,87,-1.22067934202094),(16,88,2.27509384441664),(16,90,4.15453047273171),(16,91,3.83411664174322),(16,95,-2.90372936185797),(16,97,-3.58421582689901),(16,98,-4.69377727591784),(16,99,-0.656468398083438),(16,101,-2.35628833887753),(16,108,2.13277077547533),(16,110,2.62750633259072),(17,89,-1.92187261574145),(17,96,-1.93911557359539),(17,99,-4.06207464827418),(17,101,-0.0473494674520096),(17,106,-0.526718955046235),(17,107,2.1532792138432),(17,109,-2.36692403942991),(18,90,-2.54535050508133),(18,91,0.725272377697073),(18,93,1.27904599139378),(18,99,-0.145725882747886),(18,102,1.82825708792383),(18,103,-3.05685598315378),(18,104,-1.96310312204352),(18,110,2.48219244972076),(18,111,1.88206122013001),(18,116,0.828577532273324),(18,117,0.103686635944701),(18,118,-1.43684194463942),(19,87,-1.39635914181951),(19,89,-0.946882534257027),(19,93,-1.56659138767663),(19,95,1.44901882992035),(19,101,0.859233375041963),(19,105,-1.68921475875118),(19,115,-1.03813287759026),(20,88,5.25203711050752),(20,101,1.74082155827509),(20,103,-0.337717825861385),(20,104,-0.864864040040284),(20,105,-0.653279213843196),(20,106,-1.19852290414136),(20,111,-0.400250251777704),(20,116,0.12762840662862),(21,86,0.43786431470687),(21,87,0.229407635731071),(21,94,-2.60222174748985),(21,96,1.71704763939329),(21,101,2.1689809869686),(21,102,1.09063997314371),(21,105,-4.78704184087649),(21,107,-2.46760460219123),(21,108,-2.30433057649464),(22,86,-2.08194219794305),(22,88,0.0318460646382032),(22,91,-0.944685201574755),(22,92,-1.00178533280435),(22,93,-2.07432782982879),(22,98,-2.68759727774895),(22,106,-1.3729819635609),(22,115,-1.00515762810144),(22,117,3.30317087313456),(23,85,0.123767815179906),(23,86,-2.37023529770806),(23,88,-0.30481887264626),(23,90,-2.18013550218207),(23,97,0.766716513565477),(23,104,-2.372219000824),(23,112,1.04205450605792),(23,114,0.281624805444502),(23,115,-0.778038880581072),(23,116,1.91196935941649),(24,89,-2.08835108493301),(24,90,0.202673421430097),(24,91,0.727011932737205),(24,101,2.00962858973968),(24,107,-2.9245429853206),(24,108,-1.5326090273751),(24,110,0.820856349375896),(24,112,-2.49705496383557),(25,90,-2.0267036957915),(25,92,-0.235953856013672),(25,94,0.229544969023713),(25,98,-2.5344553971984),(25,105,2.12495803704947),(25,108,-0.623035370952483),(25,109,-2.07463301492355),(25,115,0.489654225287637),(26,85,-1.49732963042085),(26,87,3.16371654408399),(26,89,-2.1637623218482),(26,95,-1.45735038300729),(26,98,1.30056154057436),(26,100,1.73390911587878),(26,101,2.28153324991607),(26,102,-0.782311471907712),(26,103,-2.90722373119297),(26,104,2.70598467970824),(26,107,-1.37006744590594),(26,109,0.915723136082034),(26,112,3.36895352031007),(26,113,-2.91915646839808),(26,117,-2.71269875179296),(27,85,-2.03039643543809),(27,87,2.55883968626972),(27,94,-1.77517014069033),(27,100,-1.49400311288797),(27,102,-1.78655354472488),(27,103,-1.89291055024873),(27,104,-0.923993652150029),(27,105,2.24156926175726),(27,108,-1.99972533341472),(27,110,1.29190954313791),(27,114,2.5424054689169),(28,87,0.124835963011567),(28,88,1.58088930936613),(28,97,4.42297128208258),(28,99,0.173863948484756),(28,104,-0.229697561571093),(28,113,-2.32038331247902),(28,114,0.0598773155919065),(29,88,0.861049226355785),(29,91,-1.46417126987518),(29,102,-1.43110446485794),(29,105,0.139225440229499),(29,116,-0.666783654286325),(30,95,3.04434339426862),(30,96,-3.02076784569842),(30,99,-0.526230658894619),(30,101,-0.205130161442915),(30,104,-1.67905209509568),(30,109,-1.3877986999115),(30,110,-0.210547196874905),(30,114,3.43008209479049),(30,118,5.18222602008118),(31,85,-0.453520310068056),(31,92,0.0739616077150792),(31,94,-2.1053346354564),(31,96,0.777489547410504),(31,99,1.2564470351268),(31,103,-3.94735557115391),(31,107,-0.644550920133061),(31,108,-0.171880245368816),(31,109,1.70883816034425),(31,111,-4.25894955290384),(31,112,-1.49029511398663),(31,117,-0.441572313608203),(32,86,-0.431073946348461),(32,87,1.16129032258065),(32,89,-0.246238593707083),(32,92,-0.994872890408033),(32,98,0.840449232459487),(32,99,-0.425336466566973),(32,104,0.268135624256111),(32,106,1.94465468306528),(32,109,-1.06210516678365),(32,116,-0.491378521073031),(32,118,0.0164952543717765),(33,96,-0.257301553392132),(33,98,-0.398617511520737),(33,108,-1.04918057802057),(33,110,0.891415143284402),(33,111,0.863567003387555),(33,114,0.171300393688772),(34,85,-1.33069856868191),(34,90,-3.85027619251076),(34,99,-2.68097476119266),(34,104,-0.0186773277993104),(34,109,-2.38909573656423),(35,86,-1.08241523483993),(35,87,-0.27805413983581),(35,97,2.14766380809961),(35,98,0.0299081392864773),(35,100,-1.03440961943419),(35,104,-0.800836207159642),(35,107,1.4405652027955),(35,109,1.5260628070925),(35,110,-2.53053376873074),(35,112,-2.76055177465133),(36,85,1.36118655964843),(36,87,0.899197363200781),(36,90,-0.515152439954833),(36,91,0.637379070406201),(36,104,2.61520737327189),(36,107,1.04992828150273),(36,109,-1.61305581835383),(36,112,-1.30549027985473),(36,115,0.690404980620747),(36,117,-1.45112460707419),(36,118,3.00723288674581),(37,85,0.25472273934141),(37,86,1.01123081148717),(37,87,1.61618396557512),(37,91,1.05128635517441),(37,99,-2.68892483291116),(37,105,1.92332224494156),(37,111,-1.50157170323801),(37,112,1.40830713827937),(37,118,-0.193517868587298),(38,87,-1.33779412213508),(38,90,0.579760124515519),(38,103,-1.99794000061037),(38,105,1.8795281838435),(38,106,2.26912747581408),(38,111,-1.65108188116092),(38,115,-1.397961363567),(39,87,0.749626148258919),(39,89,-3.99884029663991),(39,91,0.242088076418348),(39,94,-1.62346263008515),(39,97,-0.0842768639179661),(39,98,-1.52047791985839),(39,107,-2.66298409985656),(39,108,0.917737357707449),(39,109,0.701147495956297),(39,111,2.0536515396588),(39,113,2.0765404217658),(39,116,1.50119022186956),(39,118,-3.17220068971831),(40,88,-0.0193334757530441),(40,92,1.23027741325114),(40,99,2.78966643269143),(40,104,0.146305734427931),(40,110,-1.07202368236335),(40,116,0.881160924100467),(40,118,0.208975493636891),(41,88,1.07844782860805),(41,93,4.21904660176397),(41,96,3.83240760521256),(41,97,2.47985778374584),(41,100,0.957136753440962),(41,101,-2.09566026795251),(41,104,0.240531632435072),(41,105,-0.212729270302438),(41,106,-0.480468153935362),(41,107,-4.91760002441481),(41,109,2.22005371257668),(41,110,-1.44473097933897),(41,111,0.913556321909238),(41,112,-3.11592455824458),(42,85,2.39626758629109),(42,86,-1.05589465010529),(42,87,-1.37801751762444),(42,99,-1.41773735770745),(42,100,-0.270958586382641),(42,103,-0.314569536423841),(42,109,-1.73395489364299),(42,113,-0.566927091280862),(43,85,-0.975249488814966),(43,88,2.50579851680044),(43,89,1.07434308908353),(43,93,0.972121341593677),(43,97,2.08127079073458),(43,98,-1.04377880184332),(43,101,0.585833307901242),(43,102,-2.90862758262886),(43,103,1.84171575060274),(43,105,-2.69997253334147),(43,110,2.55533005767998),(43,112,2.57310708944975),(43,114,-1.89442121646779),(43,116,-2.06381420331431),(44,89,-1.23165074617756),(44,98,1.82859279152806),(44,99,1.81304361095004),(45,87,-1.9042634357738),(45,88,2.36321604052858),(45,90,-0.379406109805597),(45,91,2.07046723838008),(45,95,-0.121585741752373),(45,98,-0.452696310312204),(45,108,1.40870387890255),(45,109,1.95048371837519),(45,112,-2.59660634174627),(45,115,-1.22212897122105),(46,85,-1.73709830011902),(46,89,-1.31200598162786),(46,91,0.980132450331126),(46,94,2.09839167455061),(46,97,1.29412213507492),(46,100,-1.06241035187841),(46,101,-2.23172704245125),(46,108,-0.662633136997589),(46,112,-1.41433454390088),(47,86,-0.907208471938231),(47,91,0.663609729300821),(47,92,-0.148335215308084),(47,94,-2.27268288216803),(47,95,-2.04298532059694),(47,100,3.33805352946562),(47,101,0.200201422162541),(47,104,-1.46458326975311),(47,105,2.50036622211371),(47,108,-1.58848841822565),(47,112,-4.25711844233528),(47,114,-2.14712973418378),(47,118,-0.857966856898709),(48,86,0.735679189428388),(48,91,-2.01496932889798),(48,98,0.574526200140385),(48,99,0.0726035340433973),(48,100,-0.209341715750603),(48,103,-1.36443678090762),(48,105,0.370784630878628),(48,106,1.25122837000641),(48,111,-0.768166142765587),(48,115,0.0936155278176214),(49,87,-1.29151280251473),(49,89,-2.20224616229743),(49,93,-0.847148045289468),(49,94,0.832773827326273),(49,95,3.29972228156377),(49,102,-0.426862392040773),(49,113,2.99766533402509),(49,114,2.58740501113926),(50,89,0.95287942136906),(50,105,-0.904248176519059),(50,107,-1.17882320627461),(51,87,0.270149845881527),(51,92,2.22452467421491),(51,97,3.20920438245796),(51,98,0.226935636463515),(51,103,-1.8485671559801),(51,106,-1.53625598925748),(51,112,2.6860103152562),(51,118,-4.05006561479537),(52,89,0.335291604358043),(52,97,0.458433790093692),(52,106,1.23340556047243),(52,110,-3.40945158238472),(52,111,1.0977050080874),(52,113,2.15301980651265),(52,114,-2.60321359904782),(52,118,-0.0164342173528245),(53,88,-0.330866420484023),(53,90,-1.21219519638661),(53,92,1.6823938718833),(53,94,0.933942686239204),(53,104,1.66055787835322),(53,105,-0.419949949644459),(53,109,-0.867809076204718),(54,85,-1.11639759514145),(54,91,-1.14040040284433),(54,94,0.334543900875881),(54,96,-1.93014313180944),(54,111,-1.01733451338237),(54,112,-2.99896237067782),(54,113,-1.42945646534623),(54,118,-0.910122989593188),(55,87,0.84652241584521),(55,95,-1.98149052400281),(55,107,-2.02330088198492),(55,110,1.17679372539445),(55,117,-2.29902035584582),(56,107,-1.28762169255654),(56,111,-1.29079561754204),(56,113,-0.869289223914304),(56,114,-2.01130710776086),(57,87,-0.920499282815027),(57,90,3.17242957853938),(57,91,-0.309152500991852),(57,92,1.32369457075716),(57,93,4.24330881679739),(57,94,2.92318491164892),(57,95,-0.829355754264962),(57,96,-1.1328012939848),(57,100,2.42320017090365),(57,102,-3.59317300943022),(57,103,4.52352977080599),(57,115,-2.03604235969115),(58,86,-1.83704641865291),(58,87,1.27967162083804),(58,89,0.00962858973967717),(58,90,3.34887234107486),(58,95,-1.44560075685903),(58,96,0.464339121677297),(58,101,-0.436323129978332),(58,103,0.386684774315622),(58,109,0.852000488296152),(58,110,2.33425397503586),(58,113,1.41801202429273),(58,114,-2.36907559434797),(58,115,1.58934293649098),(58,118,-2.64748069704276),(59,85,-1.39718314157537),(59,86,1.7169713431196),(59,90,4.46649067659536),(59,91,0.0126651814325388),(59,93,2.81980346079897),(59,97,-0.755043183690908),(59,98,1.46636860255745),(59,100,-1.69846186712241),(59,102,1.88264107181005),(59,112,1.33854182561724),(59,114,0.00103762932218399),(60,85,0.771248512222663),(60,87,-2.62411877803888),(60,90,-2.36172063356426),(60,91,1.77732169560839),(60,96,3.13719595934935),(60,100,0.115100558488723),(60,101,2.57776116214484),(60,105,-2.74689474166082),(60,107,0.941084017456587),(60,109,0.681295205542161),(60,110,0.718420972319712),(60,114,-0.203039643543809),(61,89,-2.20285653248695),(61,94,-1.16978972746971),(61,96,1.61212500381481),(61,98,0.833460493789483),(61,100,-0.341502121036408),(61,102,-1.8092135380108),(61,103,-1.17442854091006),(61,114,-0.67284157841731),(61,115,-2.22350230414747),(62,93,-2.8657948545793),(62,95,-2.20755638294626),(62,107,-2.16505935850093),(62,109,0.441022980437636),(62,110,-0.491042817468795),(62,111,-1.70619830927457),(63,87,1.2395397808771),(63,90,0.799539170506912),(63,93,0.907010101626637),(63,97,1.35673085726493),(63,100,-1.88317514572588),(63,103,-1.55737479781487),(63,104,0.80924405652028),(63,108,-1.94404431287576),(63,111,1.77707754753258),(63,114,1.41784417249062),(63,117,-0.631321146275216),(64,87,-0.302819910275582),(64,94,-0.229941709646901),(64,99,1.27451399273659),(64,110,0.265495773186438),(64,112,0.14844203009125),(64,116,-1.12105166783654),(65,87,0.339335306863613),(65,88,-2.72899563585315),(65,90,0.0414288766136662),(65,97,1.51406903286843),(65,99,1.93130283516953),(65,107,-1.75774407177953),(65,110,0.910428174687948),(65,111,-1.28615680410169),(65,114,-0.46073793755913),(65,116,2.29947813348796),(65,117,0.846430860316782),(66,85,2.70909756767479),(66,102,-0.929609057893612),(66,105,0.0733512375255592),(66,108,1.49916074098941),(66,111,0.494430372020631),(66,115,0.425412762840663),(66,118,1.48913541062654),(67,86,3.4196447645497),(67,90,0.0734580523087253),(67,92,-1.65553758354442),(67,104,-1.41511276589251),(67,109,-2.36448255867183),(67,111,0.291390728476821),(68,87,-0.663991210669271),(68,88,3.04522843104343),(68,90,1.8511764885403),(68,93,0.448912015137181),(68,95,2.5994293038728),(68,96,0.277169103061007),(68,97,0.901928769798883),(68,103,1.17297891170995),(68,107,1.4165929136021),(68,112,0.0254066591387677),(68,114,0.725516525772881),(69,87,-0.958571123386334),(69,88,1.56743064668722),(69,92,0.610827967162084),(69,94,-2.95019379253517),(69,95,0.901058992278817),(69,97,0.257957701345866),(69,108,1.214560380871),(69,113,1.75191503646962),(69,114,-3.52595599230934),(69,118,0.990844447157201),(70,85,-0.357799005096591),(70,86,1.18985564745018),(70,87,2.61249122592853),(70,90,1.80611590929899),(70,96,2.63618884853664),(70,97,1.40980254524369),(70,99,1.60550248725852),(70,105,-0.960997344889676),(70,107,0.187292092654195),(70,109,2.39289529099399),(70,110,0.0257881405072176),(70,111,-0.147389141514328),(71,85,-1.92251350444044),(71,93,-2.16399121066927),(71,96,-2.28324228644673),(71,100,0.0372325815607166),(71,104,-1.13582262642293),(71,106,4.11017181920835),(71,111,2.01590014343699),(71,113,0.171361430707724),(72,94,3.21858882412183),(72,96,1.0150608844264),(72,99,-0.775872066408277),(72,110,2.11180455946532),(72,112,1.97489852595599),(72,114,1.75191503646962),(72,115,-2.9246650593585),(72,116,4.54876857814264),(73,88,0.570970793786431),(73,94,1.06927701651051),(73,99,-1.28482924893948),(73,100,-2.58093508713034),(73,106,-0.21904660176397),(73,110,-0.0178533280434583),(73,115,-0.0560930204168828),(74,90,0.257820368053224),(74,94,1.93606372264779),(74,99,1.52951139866329),(74,102,-0.518723105563524),(74,106,1.977752006592),(74,107,3.27143162327952),(74,110,2.37992492446669),(74,113,0.295037690359203),(74,116,-1.99888607440413),(75,85,1.38421277504807),(75,86,1.91999572740867),(75,93,-3.79265724662007),(75,98,1.60083315530869),(75,103,-0.393917661061434),(75,105,0.0763420514542069),(75,111,1.32030701620533),(75,117,1.3487655262917),(76,86,1.25766777550584),(76,89,2.07780693990905),(76,92,1.79131443220313),(76,94,1.00268562883389),(76,99,-0.207098605304117),(76,101,-0.343333231604968),(76,103,0.467802972502823),(76,106,0.824289681691946),(76,110,-2.48046815393536),(76,113,0.151066621906186),(77,88,1.38351084933012),(77,91,0.0203405865657521),(77,93,-0.299844355601672),(77,98,1.44685201574755),(77,101,-3.1296273689993),(77,102,0.391857661671804),(77,103,-0.281151768547624),(77,104,0.423749504074221),(77,105,1.58772545548875),(77,109,0.143925290688803),(78,88,0.6511123996704),(78,93,0.238731040375988),(78,94,-1.96276741843928),(78,101,-0.601947080904569),(78,104,1.31615649891659),(78,110,-1.52749717703787),(78,114,-0.494399853511155),(78,116,-1.01458784752953),(78,117,-0.210287789544359),(78,118,1.7944730979339),(79,87,0.894375438703574),(79,92,0.242164372692038),(79,94,-0.626575518051698),(79,107,1.94737083040864),(79,108,0.85003204443495),(79,114,-2.17253639332255),(79,118,0.250877407147435),(80,87,2.05723746452223),(80,88,-0.941343424787133),(80,91,-1.76586199530015),(80,99,2.14242988372448),(80,101,0.353740043336283),(80,107,0.89150669881283),(80,113,1.70209356975005),(81,85,-1.25507370220038),(81,86,-0.775337992492447),(81,90,-0.0252540665913877),(81,93,0.391842402417066),(81,96,-0.541947691274758),(81,97,0.595400860621967),(81,106,1.86346018860439),(81,107,0.00723288674581135),(81,110,0.926145207068087),(81,115,-0.567583239234596),(82,86,-0.725119785149693),(82,92,-1.9667500839259),(82,110,1.18915372173223),(82,112,2.27381206701865),(83,87,-0.142216254158147),(83,91,1.53616443372906),(83,93,0.0527665028839991),(83,101,0.510773033845027),(83,103,1.78739280373547),(83,105,-2.42721335489975),(83,108,1.16577654347362),(84,85,0.623081148716697),(84,86,-0.829813531907102),(84,89,1.59102145451216),(84,95,-1.35692922757653),(84,99,-0.954695272682882),(84,104,-3.21504867702261),(84,111,-2.92916653950621),(84,113,1.56631672109134),(84,114,0.557496871852779),(35,105,-1.4139835810419)]
orgname='BHNEAT_6_5'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()