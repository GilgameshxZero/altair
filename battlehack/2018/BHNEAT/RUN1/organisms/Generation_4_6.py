edge = [(0,85,2.11511581774346),(0,89,-1.64285714285714),(0,90,-0.356334116641743),(0,93,-1.10866115298929),(0,98,1.94712668233283),(0,101,1.90524002807703),(0,105,1.73937192907498),(0,108,-0.483520004882961),(0,113,1.59920041505173),(0,114,-0.518997772148808),(0,117,-0.054246650593585),(0,118,1.66295358134709),(1,86,1.56335642567217),(1,92,-2.05479598376415),(1,98,2.94030579546495),(1,102,-0.965269936216315),(1,104,1.8525803399762),(1,107,1.14400158696249),(1,108,-0.907605212561418),(1,109,0.514465773491623),(1,113,1.89629810480056),(2,87,1.44935453352458),(2,88,-0.514755699331645),(2,100,0.190466017639699),(2,106,-0.518616290780358),(2,108,1.78452406384472),(2,110,-0.419110690633869),(2,113,-1.1075014496292),(2,118,0.937116611224708),(3,89,1.68845179601428),(3,92,1.50579851680044),(3,97,-0.831019013031404),(3,99,1.76155888546403),(3,101,1.12012085329752),(3,103,2.42997528000732),(3,105,1.29271828363903),(3,108,1.3208563493759),(3,109,0.261940366832484),(3,111,1.23465681936094),(3,112,-2.18865016632588),(3,116,0.371364482558672),(4,90,1.31400494399854),(4,91,2.78901028473769),(4,97,1.27788628803369),(4,99,-0.750923184911649),(4,101,-0.0562608722190008),(4,108,0.75838496047853),(4,113,-1.95588549455245),(4,118,1.85773796807764),(5,86,-3.23061311685537),(5,87,1.84945219275491),(5,89,1.07367168187506),(5,92,-2.12837611011078),(5,93,3.06915494247261),(5,99,-0.356257820368053),(5,104,-1.69208349864193),(5,114,-0.715506454664754),(5,118,0.168340098269601),(6,89,1.66779076509903),(6,92,-0.808145390179144),(6,94,-0.970274971770379),(6,100,-1.98619037446211),(6,101,-2.36123233741264),(6,103,2.06424146244697),(6,107,0.569200720236824),(6,110,2.08001953184606),(6,113,2.35767693105869),(7,85,-1.30634479812006),(7,86,0.861232337412641),(7,90,-1.67593920712912),(7,95,0.178746910000916),(7,99,-0.363658558915983),(7,100,2.08027893917661),(7,104,1.27100436414686),(7,106,0.69403668324839),(7,108,-0.129184850611896),(7,112,-1.08580278939177),(7,116,0.226325266273995),(8,92,2.13660084841456),(8,93,-0.69144260994293),(8,95,-1.51805169835505),(8,99,-1.88679158909879),(8,106,-1.35312967314676),(8,107,-2.24089785454878),(8,115,-1.44232001709037),(8,116,1.66489150669881),(8,118,-0.943327127903073),(9,85,-1.50199896237068),(9,87,2.49212622455519),(9,98,2.2979674672689),(9,101,1.37978759117405),(9,103,3.20383312479019),(9,105,-2.49000518814661),(9,106,1.98504593035676),(9,113,0.278832361827448),(10,89,-1.28157902768029),(10,96,2.06825464644307),(10,106,-0.0258186590166937),(10,108,0.350169377727592),(10,109,2.22302926725059),(10,111,1.28653828547014),(10,112,-1.68729209265419),(10,114,0.258323923459578),(10,115,0.971434675130467),(10,116,0.790734580523087),(10,117,-0.58806115909299),(11,89,-1.53320413830988),(11,97,2.2037568285165),(11,105,0.275093844416639),(11,112,-1.73386333811457),(11,115,0.534150212103641),(12,92,2.11189611499374),(12,93,0.816248054445021),(12,94,-2.11912900173955),(12,97,1.77184362315745),(12,98,-1.78318124942778),(12,99,1.98529007843257),(12,108,0.51928769798883),(12,116,-1.5954924161504),(13,86,1.07147434919279),(13,87,0.89898373363445),(13,90,1.23862422559282),(13,99,2.33771782586139),(13,102,1.15150914029359),(13,104,1.89841914120914),(13,113,-1.86637470625935),(13,116,-1.26097903378399),(13,118,2.9185613574633),(14,90,-0.330774864955595),(14,93,-0.422360911893063),(14,95,0.598361156041139),(14,102,-0.866023743400372),(14,104,0.780816064943388),(14,106,1.68044068727683),(14,109,1.40723899044771),(14,110,-0.965392010254219),(14,111,1.57777642139958),(15,85,-2.77925962096011),(15,92,-0.655644398327586),(15,99,-1.91142002624592),(15,101,-1.78571428571429),(15,104,0.0380108035523544),(15,108,-1.62265388958403),(15,117,2.48023926511429),(16,86,2.59437849055452),(16,87,-2.07824945829646),(16,88,-1.52343821527757),(16,90,2.48249763481552),(16,91,1.55369731742302),(16,95,1.14844203009125),(16,97,-1.6043275246437),(16,98,-0.339320047608875),(16,99,-1.57583849604785),(16,101,0.507187108981597),(16,108,-2.05571153904843),(16,110,-1.55623035370952),(17,89,-1.16455580309458),(17,96,-1.12831507309183),(17,99,-1.84098330637532),(17,101,2.00753807184057),(17,106,-0.517334513382366),(17,107,1.70789208655049),(17,109,-1.68277535325175),(18,90,1.4655446028016),(18,91,0.424756614886929),(18,93,0.399273659474471),(18,99,0.0910824915311136),(18,102,2.00042725913266),(18,103,0.246360667744987),(18,104,1.26087221900082),(18,110,0.604846339304788),(18,111,2.10209967345195),(18,116,2.68552201910459),(18,117,2.15453047273171),(18,118,1.67003387554552),(19,87,-1.44363231299783),(19,89,-1.69008453627125),(19,93,-1.81661427655873),(19,95,0.21408734397412),(19,101,2.13489181188391),(19,105,-0.368526261177404),(19,115,0.0186468092898343),(20,88,0.76296273689993),(20,101,-1.4347056489761),(20,103,-0.699896237067782),(20,104,1.04374828333384),(20,105,0.856547746208075),(20,106,1.03379924924467),(20,111,0.550767540513321),(20,116,1.21439252906888),(21,86,2.95716727195044),(21,87,1.57951597643971),(21,94,0.0580767235328228),(21,96,1.61130100405896),(21,101,-0.375118259224219),(21,102,-0.866634113589892),(21,105,1.04864650410474),(21,107,-0.0529038361766411),(21,108,-2.57853938413648),(22,86,-2.58999908444472),(22,88,-0.702505569627979),(22,91,-1.22637104403821),(22,92,-0.0336008789330729),(22,93,-0.278771324808496),(22,98,0.0399945066682943),(22,106,1.65570543534654),(22,115,-1.20291756950591),(22,117,0.167394024475845),(23,85,1.03564561906796),(23,86,-2.65640736106449),(23,88,-0.30436109500412),(23,90,-1.92413098544267),(23,97,-0.930219428083132),(23,104,-0.333063753166295),(23,112,-0.570665608691671),(23,114,1.84035767693106),(23,115,1.11578722495193),(23,116,-1.82139042329173),(24,89,-1.32583086642048),(24,90,-3.05372783593249),(24,91,0.428922391430403),(24,101,1.34928434095279),(24,107,1.91384624774926),(24,108,1.81427961058382),(24,110,-1.03176976836451),(24,112,-2.70633564256722),(25,90,2.05102694784387),(25,92,2.23949400311289),(25,94,-0.0296334727011933),(25,98,-1.97856074709311),(25,105,-0.0399639881588183),(25,108,0.950697347941527),(25,109,1.73743400372326),(25,115,1.25855281228065),(26,85,2.49191259498886),(26,87,-0.817728202154607),(26,89,-0.860545670949431),(26,95,1.89182714316233),(26,98,-0.530655842768639),(26,100,0.747810296945097),(26,101,2.68529313028352),(26,102,2.00346385082553),(26,103,1.97949156163213),(26,104,0.439985351115452),(26,107,1.32317575609607),(26,109,0.923841059602649),(26,112,1.30629902035585),(26,113,-0.631031220435194),(26,117,1.56677449873348),(27,85,-0.258415478988006),(27,87,-2.17651905880917),(27,94,-0.834757530442213),(27,100,-0.996002075258644),(27,102,1.42551957762383),(27,103,-1.90275276955474),(27,104,-0.959700308236946),(27,105,-0.178548539689322),(27,108,-0.22179326761681),(27,110,2.45641956846828),(27,114,0.837107455671865),(28,87,1.51060518204291),(28,88,0.595614490188299),(28,97,0.360393078402051),(28,99,0.338892788476211),(28,104,-1.59692678609577),(28,113,0.107715079195532),(28,114,0.353892635883663),(29,88,0.47849971007416),(29,91,1.24561296426283),(29,102,-1.25223548081912),(29,105,2.26644184698019),(29,116,0.299966429639576),(30,95,-1.23961607715079),(30,96,-1.42556535538804),(30,99,-2.8335062715537),(30,101,0.666966765343181),(30,104,0.225135044404431),(30,109,0.681539353617969),(30,110,-0.570619830927457),(30,114,-2.59851374858852),(30,118,2.44158757286294),(31,85,-1.71233252967925),(31,92,2.29741813409833),(31,94,0.877086703085421),(31,96,0.801171910763878),(31,99,1.82264168218024),(31,103,-2.42326120792261),(31,107,1.82973723563341),(31,108,0.761299478133488),(31,109,-1.51522873622852),(31,111,-2.86051515243995),(31,112,1.25768303476058),(31,117,0.711081270790735),(32,86,-0.205999938962981),(32,87,0.933851130710776),(32,89,0.710211493270669),(32,92,-0.952757347331156),(32,98,-3.05116428113651),(32,99,-2.05792413098544),(32,104,-0.21858882412183),(32,106,-0.103381450849941),(32,109,-2.05888546403394),(32,116,-1.44720297860652),(32,118,1.62445448164312),(33,96,-1.10539567247536),(33,98,1.35741752372814),(33,108,0.00825525681325734),(33,110,-0.11169774468215),(33,111,-1.85087130344554),(33,114,2.12614825891903),(34,85,2.23325296792505),(34,90,1.36739707632679),(34,99,1.73883785515915),(34,104,-0.863155003509628),(34,109,-1.34469130527665),(35,86,2.43762016663106),(35,87,-0.446745200964385),(35,97,-1.83091219824824),(35,98,-1.71291238135929),(35,100,-1.13809625537889),(35,104,-0.952513199255348),(35,107,-2.12193670461135),(35,109,-2.40809350871303),(35,110,1.22576067384869),(35,112,2.2270882290109),(36,85,-1.9120151371807),(36,87,-2.03900265511032),(36,90,2.48776207770013),(36,91,-1.14230780968658),(36,104,-1.09201330607013),(36,107,-0.713660084841456),(36,109,0.97575304422132),(36,112,-1.96102786339915),(36,115,-1.43101290932951),(36,117,1.64772484511856),(36,118,2.48323007904294),(37,85,2.1504715109714),(37,86,-0.740653706472976),(37,87,1.84635456404309),(37,91,-0.89265114291818),(37,99,-2.90003662221137),(37,105,1.17287209692679),(37,111,-1.32235175634022),(37,112,3.03730887783441),(37,118,-2.43754387035737),(38,87,1.17995239112522),(38,90,0.472182378612629),(38,103,2.02363658558916),(38,105,-0.350291451765496),(38,106,-0.635166478469192),(38,111,-1.17674794763024),(38,115,-1.08217108676412),(39,87,-1.66319772942289),(39,89,1.41158787804804),(39,91,1.67859431745354),(39,94,1.67360454115421),(39,97,-0.344370860927152),(39,98,-1.61976989043855),(39,107,-2.06390575884274),(39,108,1.81536301767022),(39,109,-0.378612628559221),(39,111,2.31382183294168),(39,113,0.416562395092624),(39,116,2.48487807855464),(39,118,-0.667394024475845),(40,88,-0.940839869380779),(40,92,1.58490249336222),(40,99,-1.51226844080935),(40,104,-0.0970030823694571),(40,110,0.766640217291787),(40,116,1.46070741904965),(40,118,-0.838496047853023),(41,88,0.319071016571551),(41,93,2.41738639484848),(41,96,-0.0127719962157048),(41,97,-0.591372417371136),(41,100,-0.183553575243385),(41,101,-2.2685323648793),(41,104,2.2050843836787),(41,105,-0.458647419660024),(41,106,1.64458143864254),(41,107,-2.50054933317057),(41,109,2.15623950926237),(41,110,-1.55648976104007),(41,111,-1.46887112033448),(41,112,-0.861156041138951),(42,85,1.77297280800806),(42,86,0.948179570909757),(42,87,1.32996612445448),(42,99,0.425046540726951),(42,100,-0.893658253730888),(42,103,1.42262031922361),(42,109,-1.83283486434523),(42,113,-0.349253822443312),(43,85,-0.740607928708762),(43,88,2.28408154545732),(43,89,-1.43084505752739),(43,93,0.759361552781762),(43,97,2.29543443098239),(43,98,-1.83657338175604),(43,101,1.02647480697043),(43,102,1.49900814844203),(43,103,2.04709006012146),(43,105,0.467848750267037),(43,110,2.10007019257179),(43,112,2.49824518570513),(43,114,-0.96035645619068),(43,116,-2.89216284676656),(44,89,3.16965239417707),(44,98,1.20548112430189),(44,99,-0.140064699240089),(45,87,-1.73404644917142),(45,88,-1.59007538071841),(45,90,-0.590212714011048),(45,91,2.894466994232),(45,95,-0.591631824701682),(45,98,1.07359538560137),(45,108,-1.78055665761284),(45,109,-1.46049378948332),(45,112,2.01118503372295),(45,115,0.890087588122196),(46,85,1.82120731223487),(46,89,-0.668294320505386),(46,91,0.778084658345287),(46,94,-0.426328318124943),(46,97,1.25830866420484),(46,100,-0.698858607745598),(46,101,0.51829584643086),(46,108,1.75061799981689),(46,112,-0.407528916287729),(47,86,-0.0742820520645772),(47,91,3.13911862544633),(47,92,1.37562181463057),(47,94,-0.399456770531327),(47,95,1.17078157902768),(47,100,2.07542649616993),(47,101,-0.235145115512558),(47,104,1.29955442976165),(47,105,1.34775841547899),(47,108,2.51167332987457),(47,112,1.52018799401837),(47,114,1.92547379985961),(47,118,1.66249580370495),(48,86,-2.10342722861415),(48,91,0.0780663472396008),(48,98,0.82532731101413),(48,99,-0.010559404278695),(48,100,2.05383465071566),(48,103,-0.970137638477737),(48,105,-1.274315622425),(48,106,-1.88053529465621),(48,111,2.35189367351299),(48,115,0.433698538163396),(49,87,-1.43357646412549),(49,89,1.93060090945158),(49,93,0.647038178655355),(49,94,1.33539841914121),(49,95,1.80050050355541),(49,102,2.96702475051119),(49,113,-0.122928556169317),(49,114,2.81965086825159),(50,89,1.00744651631214),(50,105,0.377529221472823),(50,107,-1.45524460585345),(51,87,0.0833002716147344),(51,92,0.786568803979614),(51,97,2.35398419141209),(51,98,-0.759559923093356),(51,103,-2.1747642445143),(51,106,0.751838740195929),(51,112,0.870708334604938),(51,118,0.522141178624836),(52,89,-0.0156712546159246),(52,97,1.51556443983276),(52,106,-1.86681722464675),(52,110,-2.23853267006439),(52,111,0.780388805810724),(52,113,0.698400830103458),(52,114,2.011764885403),(52,118,-2.66055787835322),(53,88,0.289941099276711),(53,90,0.9759056367687),(53,92,-0.0703299050874355),(53,94,2.78000732444227),(53,104,1.77780999176),(53,105,-0.779412213507492),(53,109,0.935071871089816),(54,85,-1.72394482253487),(54,91,-0.129703665272988),(54,94,-1.48939481795709),(54,96,-0.881908627582629),(54,111,2.72782067323832),(54,112,-2.5764183477279),(54,113,0.998504593035676),(54,118,2.04303109836116),(55,87,0.376598406933805),(55,95,-0.406277657399213),(55,107,0.455565050202948),(55,110,2.13487655262917),(55,117,-1.0744499038667),(56,107,0.624744407483139),(56,111,-1.81920834986419),(56,113,0.332728049562059),(56,114,-1.36973174230171),(57,87,-0.716742454298532),(57,90,2.5730460524308),(57,91,2.42065187536241),(57,92,-1.8563951536607),(57,93,-1.24979400006104),(57,94,-1.7713858455153),(57,95,-0.366161076693014),(57,96,0.291528061769463),(57,100,2.63576158940397),(57,102,0.954893642994476),(57,103,2.37766655476547),(57,115,0.683156834620197),(58,86,2.80794701986755),(58,87,1.19693594164861),(58,89,-0.205755790887173),(58,90,2.94662312692648),(58,95,0.984588152714622),(58,96,-1.84153263954588),(58,101,1.20763267921995),(58,103,-1.09274575029756),(58,109,0.343791009247108),(58,110,-0.555467390972625),(58,113,-1.80077517014069),(58,114,0.753807184057131),(58,115,1.71233252967925),(58,118,0.484405041657765),(59,85,1.29538865321818),(59,86,2.2762840662862),(59,90,2.52452162236396),(59,91,2.20838038270211),(59,93,3.03418073061312),(59,97,-0.608890041810358),(59,98,-1.75424970244453),(59,100,-0.699514755699332),(59,102,-2.02067629016999),(59,112,0.504470961638234),(59,114,0.272988067262795),(60,85,0.45631275368511),(60,87,-2.04077272865993),(60,90,1.14264351329081),(60,91,0.486648152104251),(60,96,0.293084505752739),(60,100,-1.72363963744011),(60,101,1.21755119479965),(60,105,0.378231147190771),(60,107,1.64606158635212),(60,109,-1.76010925626392),(60,110,-0.510864589373455),(60,114,-1.47315897091586),(61,89,2.65385906552324),(61,94,-1.90696432386242),(61,96,0.489272743919187),(61,98,-0.645771660512101),(61,100,0.601397747734001),(61,102,-1.76966154972991),(61,103,-0.647129734183783),(61,114,0.721427045503098),(61,115,-1.57788323618274),(62,93,-2.18057802056948),(62,95,0.656590472121342),(62,107,-0.596255378887295),(62,109,-2.29754020813623),(62,110,2.4342631305887),(62,111,-1.97465437788018),(63,87,-0.747444074831385),(63,90,1.93188268684957),(63,93,-2.188177129429),(63,97,1.95207068086795),(63,100,-1.70079653309732),(63,103,-1.15063936277352),(63,104,0.503219702749718),(63,108,-0.0994293038727988),(63,111,1.9159520249031),(63,114,1.24358348338267),(63,117,0.99458296456801),(64,87,0.0889614551225318),(64,94,1.67986083559679),(64,99,-0.972106082338938),(64,110,1.87923825800348),(64,112,-0.214117862483596),(64,116,1.57358012634663),(65,87,2.75289162877285),(65,88,-1.56833094271676),(65,90,0.244224372081667),(65,97,-1.89950254829554),(65,99,-1.26288644062624),(65,107,-2.43452253791925),(65,110,-2.80123294778283),(65,111,-1.62651448103275),(65,114,-0.275032807397687),(65,116,1.51072725608081),(65,117,-1.93957335123753),(66,85,-1.27288125247963),(66,102,2.39715262306589),(66,105,0.948973052156133),(66,108,0.00381481368449965),(66,111,2.76310007019257),(66,115,-0.406445509201331),(66,118,-1.3520615253151),(67,86,-1.34339426862392),(67,90,-1.51031525620289),(67,92,-1.23834955900754),(67,104,3.1806695760979),(67,109,-0.361384929960021),(67,111,0.95440534684286),(68,87,1.24768822290719),(68,88,0.827066866054262),(68,90,-0.224982451857051),(68,93,0.00192266609698782),(68,95,0.651051362651448),(68,96,0.277169103061007),(68,97,-0.611865596484268),(68,103,0.614276558732871),(68,107,0.362743003631703),(68,112,-1.58857997375408),(68,114,-2.01101718192084),(69,87,0.672566911832026),(69,88,-0.19884334849086),(69,92,-1.47007660145878),(69,94,-0.40842921231727),(69,95,0.802941984313486),(69,97,0.949659718619343),(69,108,1.49340800195318),(69,113,-0.82448805200354),(69,114,0.00476088747825565),(69,118,0.48139896847438),(70,85,-0.357799005096591),(70,86,-0.117969298379467),(70,87,-1.42551957762383),(70,90,-0.485061189611499),(70,96,-0.00350962858973968),(70,97,1.09973448896756),(70,99,0.743186742759484),(70,105,-2.2607806634724),(70,107,-0.910901211584826),(70,109,-1.66655476546525),(70,110,0.442793053987243),(70,111,0.474272896511734),(71,85,-2.49740592669454),(71,93,-0.651020844141972),(71,96,-2.47381511886959),(71,100,0.579180272835475),(71,104,2.71897030549028),(71,106,1.74008911404767),(71,111,1.40552995391705),(71,113,0.208517715994751),(72,94,2.24451429792169),(72,96,-0.502243110446486),(72,99,2.73627430036317),(72,110,-0.184636982329783),(72,112,1.29909665211951),(72,114,1.00422681356243),(72,115,2.07770012512589),(72,116,-0.790047914059877),(73,88,-0.341303750724815),(73,94,1.40765099032563),(73,99,-0.188100833155309),(73,100,1.15215002899258),(73,106,0.0447401348918119),(73,110,0.492584002197333),(73,115,2.63063447981201),(74,90,-2.07670827356792),(74,94,2.12779625843074),(74,99,-2.22249519333476),(74,102,-2.53485213782159),(74,106,-0.276116214484085),(74,107,-0.315073091830195),(74,110,-0.801492355113376),(74,113,-0.814035462508011),(74,116,0.495910519730216),(75,85,-2.1917935728019),(75,86,-0.0294351023895993),(75,93,-0.858760338145085),(75,98,0.280922879726554),(75,103,1.60103152562029),(75,105,0.0970488601336711),(75,111,2.32216864528336),(75,117,-1.56796472060305),(76,86,2.11890011291849),(76,89,2.41618091372417),(76,92,-0.341776787621693),(76,94,0.906567583239235),(76,99,0.320917386394849),(76,101,-0.287942136906034),(76,103,-1.99861140781884),(76,106,1.98574785607471),(76,110,-1.23691518906217),(76,113,0.232688375499741),(77,88,-0.559678945280312),(77,91,0.574465163121433),(77,93,1.34998626667074),(77,98,0.0988494521927549),(77,101,1.15976439710685),(77,102,0.207037568285165),(77,103,-1.86529129917295),(77,104,0.255821405682546),(77,105,1.15115817743461),(77,109,0.153767509994812),(78,88,0.655095065157018),(78,93,0.631427961058382),(78,94,-0.209921567430647),(78,101,1.05235450300607),(78,104,0.102511673329875),(78,110,-0.25624866481521),(78,114,-1.90961943418683),(78,116,1.37752922147282),(78,117,-0.800668355357524),(78,118,2.97309793389691),(79,87,-0.809961241492966),(79,92,-2.40142521439253),(79,94,0.724982451857051),(79,107,1.91631824701682),(79,108,-0.304177983947264),(79,114,0.268089846491897),(79,118,-0.766228217413861),(80,87,0.184575945310831),(80,88,-0.685918759727775),(80,91,1.82546464430677),(80,99,0.479476302377392),(80,101,1.24132511368145),(80,107,0.517136143070772),(80,113,0.170186468092898),(81,85,-1.22310556352428),(81,86,0.163106173894467),(81,90,-0.883297219763787),(81,93,-2.58546708578753),(81,96,-0.311075167088839),(81,97,-0.655659657582324),(81,106,2.10055848872341),(81,107,0.13556321909238),(81,110,0.69327372051149),(81,115,1.92806787316507),(82,86,0.294259468367565),(82,92,-0.667088839381085),(82,110,-0.624485000152593),(82,112,0.230948820459609),(83,87,0.10757774590289),(83,91,-1.00862147892697),(83,93,-1.77298806726279),(83,101,-0.702322458571123),(83,103,-0.915707876827296),(83,105,0.657567064424573),(83,108,0.43755912961211),(84,85,1.14815210425123),(84,86,-2.38959929197058),(84,89,-0.228339487899411),(84,95,-0.212775048066652),(84,99,-0.186880092776269),(84,104,2.51159703360088),(84,111,-2.14980010376293),(84,113,1.78720969267861),(84,114,0.710257271034883)]
orgname='BHNEAT_4_6'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()