edge = [(0,85,1.1511123996704),(0,89,0.50488296151616),(0,90,-0.44007690664388),(0,93,1.96928312021241),(0,98,-0.985518967253639),(0,101,-3.16731772820215),(0,105,2.73459578234199),(0,108,0.207754753257851),(0,113,2.83809930722984),(0,114,1.21518601031526),(0,117,1.868724631489),(0,118,2.25926999725333),(1,86,-0.032944730979339),(1,92,1.04718161564989),(1,98,0.928220465712455),(1,102,2.31119724112674),(1,104,-0.463957640308847),(1,107,-2.71056245612964),(1,108,-2.00483718375195),(1,109,1.43145542771691),(1,113,-2.29030732139042),(2,87,-0.285775322733238),(2,88,-1.57414471877194),(2,100,-0.455977050080874),(2,106,1.64560380870998),(2,108,-1.00675984984893),(2,110,-0.704000976592303),(2,113,1.7382122257149),(2,118,-1.73310037537767),(3,89,0.424207281716361),(3,92,-0.553132724997711),(3,97,-0.862453077791681),(3,99,0.0817133091219825),(3,101,1.18070009460738),(3,103,2.28722495193335),(3,105,0.707754753257851),(3,108,1.71964171269875),(3,109,1.05946531571398),(3,111,-1.97970519119846),(3,112,-2.17484054078799),(3,116,-1.74562822351756),(4,90,-0.606006042664876),(4,91,1.17519150364696),(4,97,-0.151066621906186),(4,99,-2.15147862178411),(4,101,1.03396710104678),(4,108,0.707113864558855),(4,113,0.11337626270333),(4,118,-2.39251380962554),(5,86,0.490829187902463),(5,87,2.28774376659444),(5,89,0.0227668080690939),(5,92,-0.32197027497177),(5,93,1.00459303567614),(5,99,-2.06819360942412),(5,104,-0.552293465987121),(5,114,0.716727195043794),(5,118,-0.765449995422224),(6,89,1.41628772850734),(6,92,1.91702017273476),(6,94,0.0747703482161931),(6,100,2.28704184087649),(6,101,0.724188970610675),(6,103,1.17423017059847),(6,107,0.576906643879513),(6,110,0.693334757530442),(6,113,2.3431043427839),(7,85,1.71094393749809),(7,86,2.64105655079806),(7,90,-0.613513595995972),(7,95,-1.58825952940458),(7,99,0.25907162694174),(7,100,2.29772331919309),(7,104,-0.528870509964293),(7,106,-1.27437665944395),(7,108,-0.236762596514786),(7,112,-0.704443494979705),(7,116,-2.04680013428144),(8,92,-0.235480819116794),(8,93,0.154576250495926),(8,95,-1.01380962553789),(8,99,0.272850733970153),(8,106,-0.588534195989868),(8,107,-1.45123142185736),(8,115,2.35473189489425),(8,116,-1.72899563585314),(8,118,-0.605639820551164),(9,85,-2.34429456465346),(9,87,-1.65222632526627),(9,98,-0.532425916318247),(9,101,1.79422894985809),(9,103,1.65707876827296),(9,105,-2.64247566148869),(9,106,1.68001342814417),(9,113,-1.5579088717307),(10,89,0.122501297036653),(10,96,-1.35360271004364),(10,106,-0.855388042847987),(10,108,-1.57823419904172),(10,109,-0.0886715292825099),(10,111,-1.12007507553331),(10,112,1.60847804193243),(10,114,2.62282174138615),(10,115,3.03021332438124),(10,116,-0.905255287331767),(10,117,0.967543565172277),(11,89,-0.135868404187139),(11,97,0.583071382793664),(11,105,-1.72493667409284),(11,112,0.236808374279),(11,115,-1.73436689352092),(12,92,0.157399212622456),(12,93,-0.788338877529222),(12,94,-0.162663655507065),(12,97,1.65092928861354),(12,98,0.709341715750603),(12,99,1.24483474227119),(12,108,-1.27817621387371),(12,116,1.31658375804926),(13,86,0.922544022949919),(13,87,-0.275505844294565),(13,90,1.70242927335429),(13,99,-0.416333506271554),(13,102,2.57568590350047),(13,104,-0.220938749351482),(13,113,1.78296761986145),(13,116,-2.19446394238105),(13,118,0.516983550523392),(14,90,1.08665730765709),(14,93,-0.337046418652913),(14,95,-1.90069277016511),(14,102,0.765724662007508),(14,104,1.67851802117985),(14,106,1.86683248390149),(14,109,-0.611743522446364),(14,110,-0.215704824976348),(14,111,-0.244941557054353),(15,85,-1.969481490524),(15,92,-0.365489669484542),(15,99,-0.714712973418378),(15,101,-2.11165196691794),(15,104,1.54438917203284),(15,108,-0.111026337473678),(15,117,-1.35465559862056),(16,86,0.377513962218085),(16,87,0.202490310373241),(16,88,1.77344584490493),(16,90,-1.05452131717887),(16,91,-0.0832392345957824),(16,95,1.33506271553697),(16,97,-2.35905026398511),(16,98,-1.46285897396771),(16,99,-1.47337260048219),(16,101,2.55307168797876),(16,108,0.704504531998657),(16,110,2.57448042237617),(17,89,1.92071291238136),(17,96,1.07458723715934),(17,99,-2.67188024536882),(17,101,-0.0821405682546464),(17,106,-0.58790856654561),(17,107,0.641010773033845),(17,109,0.758552812280648),(18,90,1.10881374553667),(18,91,1.55064546647542),(18,93,-0.269920957060457),(18,99,1.526383251442),(18,102,1.2991729483932),(18,103,0.563478499710074),(18,104,-1.83645130771813),(18,110,1.20789208655049),(18,111,0.032486953337199),(18,116,-0.507522812585833),(18,117,-1.63441877498703),(18,118,-1.10197759941404),(19,87,-0.0203558458204902),(19,89,2.46070741904965),(19,93,1.68164616840114),(19,95,-2.11546678060244),(19,101,1.1860103152562),(19,105,-0.279793694875942),(19,115,-0.416241950743126),(20,88,0.761467329935606),(20,101,-0.6120792260506),(20,103,-2.21414838099307),(20,104,0.999511703848384),(20,105,1.02356028931547),(20,106,0.409634693441572),(20,111,2.14903714102603),(20,116,-1.68768883327738),(21,86,-0.387279885250404),(21,87,-1.2900173955504),(21,94,0.301293984801782),(21,96,-0.510193182164983),(21,101,-0.0290383617664114),(21,102,-0.461378826258125),(21,105,-2.88612018189032),(21,107,-1.17091891232032),(21,108,-0.732932523575549),(22,86,-0.824274422437208),(22,88,-1.15532395397809),(22,91,0.425977355265969),(22,92,-1.74338511307108),(22,93,2.14371166112247),(22,98,-1.04783776360363),(22,106,-2.56434827723014),(22,115,-0.841731009857478),(22,117,-0.300302133243812),(23,85,-2.62533951841792),(23,86,-0.340907010101627),(23,88,0.917828913235877),(23,90,0.49458296456801),(23,97,0.263618884853664),(23,104,-1.24623859370708),(23,112,1.79319132053591),(23,114,-1.21736808374279),(23,115,1.48681600390637),(23,116,-0.478469191564684),(24,89,-1.63148899807733),(24,90,2.47932370983001),(24,91,0.695730460524308),(24,101,0.265419476912748),(24,107,0.496200445570238),(24,108,-1.83835871456038),(24,110,0.0771355327005829),(24,112,-0.453428754539628),(25,90,1.52412488174078),(25,92,0.668004394665365),(25,94,-0.531205175939207),(25,98,0.743995483260598),(25,105,2.12694174016541),(25,108,3.1579790643025),(25,109,0.907406842249825),(25,115,2.28019043549913),(26,85,-0.486480300302133),(26,87,-1.27764213995788),(26,89,0.54506057924131),(26,95,1.24491103854488),(26,98,-1.94218268379772),(26,100,0.623569444868313),(26,101,-0.846308786278878),(26,102,1.47880489516892),(26,103,-0.0396282845545823),(26,104,-1.29140598773156),(26,107,1.11040070802942),(26,109,2.51687673574023),(26,112,-1.97750785851619),(26,113,-0.941785943174535),(26,117,1.73650318918424),(27,85,-0.10864589373455),(27,87,0.744361705374309),(27,94,0.162755211035493),(27,100,2.2818231757561),(27,102,-0.927610095522935),(27,103,-0.148472548600726),(27,104,-2.59739982299264),(27,105,2.64876247444075),(27,108,0.295342875453963),(27,110,2.39967040009766),(27,114,-1.21037934507279),(28,87,0.467024750511185),(28,88,-0.821222571489608),(28,97,-2.69020661030915),(28,99,1.22026734214301),(28,104,-0.601489303262429),(28,113,1.04535050508133),(28,114,1.62799462874233),(29,88,-2.33690908536027),(29,91,2.10962248603778),(29,102,-1.18184453871273),(29,105,1.35935544907987),(29,116,0.25609607226783),(30,95,2.41116061891537),(30,96,2.70381786553545),(30,99,1.18501846369823),(30,101,2.24570451979125),(30,104,-0.0746177556688131),(30,109,1.04383983886227),(30,110,2.22833948789941),(30,114,1.56361583300272),(30,118,-1.2207861568041),(31,85,0.763710440382092),(31,92,0.423017059846797),(31,94,0.429761650440992),(31,96,0.231131931516465),(31,99,0.594805749687185),(31,103,-0.394466994232002),(31,107,-1.20525223548082),(31,108,0.872463148899808),(31,109,0.452772606585894),(31,111,-0.396679586169011),(31,112,-0.195089571825312),(31,117,-0.395413068025758),(32,86,-2.38860744041261),(32,87,2.11095004119999),(32,89,-0.163609729300821),(32,92,0.144001586962493),(32,98,-0.936765648365734),(32,99,-0.929654835657826),(32,104,-1.34568315683462),(32,106,1.51539658803064),(32,109,2.52992339854122),(32,116,-2.5036927396466),(32,118,-1.44283883175146),(33,96,0.538315988647114),(33,98,0.272560808130131),(33,108,-1.25449385052034),(33,110,-0.0615710928678243),(33,111,-0.907040620136113),(33,114,0.716437269203772),(34,85,-0.510818811609241),(34,90,1.00209051789911),(34,99,-0.926694540238655),(34,104,-2.15063936277352),(34,109,1.95120090334788),(35,86,2.35030671102023),(35,87,-1.64474929044465),(35,97,0.296563615833003),(35,98,-0.423520615253151),(35,100,1.38822595904416),(35,104,2.15594958342235),(35,107,0.455427716910306),(35,109,2.30986968596454),(35,110,2.05999938962981),(35,112,0.531098361156041),(36,85,-2.97167882320627),(36,87,1.66650898770104),(36,90,-2.2994933927427),(36,91,-0.309610278633992),(36,104,1.51936399426252),(36,107,0.139469588305307),(36,109,-0.382625812555315),(36,112,-0.679799798577837),(36,115,-0.611819818720054),(36,117,0.17787713248085),(36,118,-0.102908413953063),(37,85,-0.130954924161504),(37,86,1.9869075594348),(37,87,-0.768532364879299),(37,91,2.51235999633778),(37,99,0.686880092776269),(37,105,0.822473830378124),(37,111,-2.03846858119449),(37,112,0.93099765007477),(37,118,-2.3160802026429),(38,87,-1.47192297128208),(38,90,-0.791207617419965),(38,103,-1.30097354045228),(38,105,2.54254280220954),(38,106,0.955687124240852),(38,111,1.83050019837031),(38,115,-0.112674336985382),(39,87,-0.775688955351421),(39,89,0.470900601214637),(39,91,-0.459685048982208),(39,94,-1.80420850245674),(39,97,-1.94441053498947),(39,98,-0.904309213538011),(39,107,1.30907620471816),(39,108,2.84025086214789),(39,109,-0.3263191625721),(39,111,0.209265419476913),(39,113,1.68811609241005),(39,116,-2.57219153416547),(39,118,-3.26261177404096),(40,88,-1.4690389721366),(40,92,1.26743369853816),(40,99,1.44280831324198),(40,104,-1.76529740287484),(40,110,1.49916074098941),(40,116,-2.88116092410047),(40,118,0.149311807611316),(41,88,-1.05647450178533),(41,93,2.42150639362774),(41,96,-2.37871944334239),(41,97,0.407422101504563),(41,100,-1.56514175847652),(41,101,-0.444807275612659),(41,104,-1.75576036866359),(41,105,0.0281380657368694),(41,106,0.565401165807062),(41,107,1.38843958861049),(41,109,-1.868724631489),(41,110,0.348918118839076),(41,111,-1.22998748741111),(41,112,1.44392223883785),(42,85,0.959196752830592),(42,86,0.190710165715506),(42,87,-1.47094637897885),(42,99,0.678960539567248),(42,100,-0.368694112979522),(42,103,1.18236335337382),(42,109,0.225379192480239),(42,113,-1.1842402417066),(43,85,-1.00889614551225),(43,88,0.853907895138401),(43,89,0.736716818750572),(43,93,0.812128055665761),(43,97,2.13544114505448),(43,98,-1.06010620441298),(43,101,-1.02142399365215),(43,102,-1.90588091677602),(43,103,-1.6963713492233),(43,105,-0.719473860896634),(43,110,1.88720358897671),(43,112,0.671193578905606),(43,114,-0.629963072603534),(43,116,-0.891827143162328),(44,89,1.9426557206946),(44,98,0.250862147892697),(44,99,-1.4086428418836),(45,87,-0.157536545915097),(45,88,-0.553361613818781),(45,90,-2.58589434492019),(45,91,1.40652180547502),(45,95,-0.942686239204077),(45,98,0.793527024140141),(45,108,0.741874446852016),(45,109,-0.513428144169439),(45,112,-1.43308816797388),(45,115,-2.38702047791986),(46,85,-2.74527726065859),(46,89,-1.82372508926664),(46,91,1.13559373760186),(46,94,-2.37699514755699),(46,97,-0.335184789574877),(46,100,1.50526444288461),(46,101,2.00094607379376),(46,108,-1.31054109317301),(46,112,-1.21570482497635),(47,86,-0.91140476699118),(47,91,0.143574327829829),(47,92,-0.250495925778985),(47,94,1.44047364726707),(47,95,0.32242805261391),(47,100,-0.583880123294778),(47,101,-0.117801446577349),(47,104,2.04489272743919),(47,105,-1.73392437513352),(47,108,-0.257271034882656),(47,112,-1.15491195410016),(47,114,-1.4646595660268),(47,118,0.251991332743309),(48,86,0.669454023865474),(48,91,0.381267738883633),(48,98,0.102771080660421),(48,99,1.08215582750938),(48,100,-1.1403088473159),(48,103,-1.81511886959441),(48,105,-1.84890285958434),(48,106,-0.741019928586688),(48,111,-0.0454115421002838),(48,115,-1.8137913144322),(49,87,1.46758934293649),(49,89,2.24437696462905),(49,93,-1.66664632099368),(49,94,0.190359202856532),(49,95,-0.627536851100192),(49,102,0.190893276772362),(49,113,-1.7157658619953),(49,114,0.277840510269478),(50,89,-0.321420941801203),(50,105,2.65398113956114),(50,107,-0.779442732016968),(51,87,2.18167668691061),(51,92,-0.771324808496353),(51,97,1.09302041688284),(51,98,-0.1526383251442),(51,103,1.02620014038514),(51,106,0.815652943510239),(51,112,1.52951139866329),(51,118,0.722800378429517),(52,89,0.782845545823542),(52,97,-0.473830378124332),(52,106,0.521561326944792),(52,110,2.43514816736351),(52,111,0.190389721366009),(52,113,2.43806268501846),(52,114,-0.633777886288034),(52,118,1.98268074587237),(53,88,1.47537156285287),(53,90,-2.38883632923368),(53,92,-1.38906521805475),(53,94,3.00599688711203),(53,104,-0.546769615771966),(53,105,0.99450666829432),(53,109,-0.73558763389996),(54,85,1.53825495162816),(54,91,1.7101046784875),(54,94,2.62762840662862),(54,96,-0.729621265297403),(54,111,2.07037568285165),(54,112,-0.368419446394238),(54,113,1.00386059144871),(54,118,2.33117160557878),(55,87,2.09021271401105),(55,95,-1.95287942136906),(55,107,0.152439954832606),(55,110,2.37456892605365),(55,117,1.21938230536821),(56,107,-2.26268807031465),(56,111,-2.64055299539171),(56,113,0.076784569841609),(56,114,-2.1481826227607),(57,87,-1.7914212469863),(57,90,0.647556993316446),(57,91,0.448774681844539),(57,92,-0.169454023865474),(57,93,-1.61479537339396),(57,94,1.73258156071657),(57,95,1.75533310953093),(57,96,0.582415234839931),(57,100,1.60583819086276),(57,102,-0.752281258583331),(57,103,-1.75183874019593),(57,115,-0.572832422864467),(58,86,-1.25811029389325),(58,87,1.58836634418775),(58,89,2.05084383678701),(58,90,-2.0631275368511),(58,95,-1.30033265175329),(58,96,1.69164098025452),(58,101,0.0736259041108432),(58,103,0.975615710928678),(58,109,-2.19870601519822),(58,110,-2.09471419415876),(58,113,1.53291421246986),(58,114,-2.56721701712088),(58,115,1.2399822992645),(58,118,-2.71736808374279),(59,85,-0.575701162755211),(59,86,1.31740775780511),(59,90,3.12398144474624),(59,91,1.30275887325663),(59,93,2.70856349375897),(59,97,1.69293801690725),(59,98,2.17108676412244),(59,100,-2.83329264198737),(59,102,1.27852717673269),(59,112,-0.783104953154088),(59,114,1.58853419598987),(60,85,0.0848872341074862),(60,87,-0.606097598193304),(60,90,2.70931119724113),(60,91,1.11568041016877),(60,96,2.30014954069643),(60,100,2.12840662862026),(60,101,-2.97073274941252),(60,105,-2.98318430127873),(60,107,0.645130771813105),(60,109,-1.06501968443861),(60,110,0.814386425366985),(60,114,0.207129123813593),(61,89,1.65575121311075),(61,94,-1.62947477645192),(61,96,1.62578203680532),(61,98,-0.43786431470687),(61,100,-1.45222327341533),(61,102,-0.0531022064882351),(61,103,1.23249000518815),(61,114,-0.912656025879696),(61,115,-2.50129703665273),(62,93,-2.48901333658864),(62,95,1.12475966673788),(62,107,-1.3631855220191),(62,109,0.476042970061342),(62,110,-0.293053987243263),(62,111,1.34862819299905),(63,87,-3.1276589251381),(63,90,-1.86574907681509),(63,93,-0.880153813287759),(63,97,1.94337290566729),(63,100,-0.604495376445814),(63,103,-1.26165044099246),(63,104,0.58378856776635),(63,108,0.270378734702597),(63,111,0.341563158055361),(63,114,-2.29686880092776),(63,117,2.14461195715201),(64,87,-2.19138157292398),(64,94,1.35580004272591),(64,99,1.04655598620563),(64,110,1.66743980224006),(64,112,-0.00811792352061524),(64,116,-1.27658925138096),(65,87,-0.839518417920469),(65,88,-0.0688497573778497),(65,90,1.59703360087893),(65,97,-2.63759269997253),(65,99,-1.35004730368969),(65,107,-2.11790826136052),(65,110,-3.23657948545793),(65,111,-1.81626331369976),(65,114,0.544160283211768),(65,116,-1.00331125827815),(65,117,-0.65301980651265),(66,85,1.20979949339274),(66,102,-1.06495864741966),(66,105,-1.43632312997833),(66,108,0.101641895809809),(66,111,1.74599444563128),(66,115,-0.4300057985168),(66,118,1.98796044801172),(67,86,-0.997451704458754),(67,90,1.87969603564562),(67,92,0.711706900234993),(67,104,-0.685872981963561),(67,109,1.84966582232124),(67,111,0.753898739585559),(68,87,2.80314035462508),(68,88,2.04376354258858),(68,90,-2.35906552323984),(68,93,1.4170354319895),(68,95,0.651051362651448),(68,96,-1.75742362743004),(68,97,-2.71214941862239),(68,103,-0.86733603930784),(68,107,-1.44207586901456),(68,112,1.40575884273812),(68,114,-0.157155064546648),(69,87,3.07712027344584),(69,88,-1.00239570299387),(69,92,2.00178533280435),(69,94,-3.24523148289438),(69,95,0.350505081331828),(69,97,1.04518265327921),(69,108,-2.25585192419202),(69,113,2.05793939024018),(69,114,1.90865810113834),(69,118,-1.34076967680898),(70,85,2.06437879573962),(70,86,-1.53279213843196),(70,87,-0.80115665150914),(70,90,-0.924832911160619),(70,96,1.73688467055269),(70,97,-1.53791924802393),(70,99,0.325540940580462),(70,105,-1.2261268959624),(70,107,-0.438566240424818),(70,109,0.119876705221717),(70,110,-0.805078279976806),(70,111,-0.274117252113407),(71,85,0.136051515243995),(71,93,-1.81896420178838),(71,96,-0.687795648060549),(71,100,1.43388164922025),(71,104,0.341273232215339),(71,106,-0.735633411664174),(71,111,1.44608905301065),(71,113,-0.820795312356944),(72,94,-0.783913693655202),(72,96,1.08258308664205),(72,99,0.282662434766686),(72,110,-1.92335276345103),(72,112,1.64354380932035),(72,114,1.34315012054811),(72,115,-0.943021942808313),(72,116,1.19739371929075),(73,88,0.551393169957579),(73,94,0.378719443342387),(73,99,-2.72057252723777),(73,100,-0.732886745811335),(73,106,0.225913266396069),(73,110,-1.89405499435408),(73,115,-2.04649494918668),(74,90,-0.147999511703848),(74,94,-1.64993743705557),(74,99,1.4737388225959),(74,102,1.05389568773461),(74,106,-0.857936338389233),(74,107,0.0683919797357097),(74,110,-1.60434278389843),(74,113,-2.13763847773675),(74,116,-0.0832239753410443),(75,85,2.0251777703177),(75,86,2.61932737205115),(75,93,-2.24277474288156),(75,98,0.99855037079989),(75,103,-2.19832453382977),(75,105,-0.281380657368694),(75,111,-1.2990508743553),(75,117,1.63272499771111),(76,86,-0.32891323587756),(76,89,-1.96826075014496),(76,92,0.150608844264046),(76,94,1.20502334665975),(76,99,0.100680562761315),(76,101,2.01490829187902),(76,103,0.556306649983215),(76,106,-1.43705557420576),(76,110,1.15483565782647),(76,113,1.92602313303018),(77,88,1.63284707174902),(77,91,1.48533585619678),(77,93,-0.394451734977264),(77,98,-0.198019348735008),(77,101,1.89336832789087),(77,102,-0.115009002960295),(77,103,0.946150090029603),(77,104,2.13751640369884),(77,105,0.234015930661946),(77,109,0.143925290688803),(78,88,-0.534440137943663),(78,93,1.81205175939207),(78,94,0.139805291909543),(78,101,-2.46182134464553),(78,104,1.97714163640248),(78,110,0.400204474013489),(78,114,-0.856196783349101),(78,116,-0.684835352641377),(78,117,1.33211767937254),(78,118,0.322870571001312),(79,87,1.68297372356334),(79,92,1.22157963805048),(79,94,-2.13820307016205),(79,107,0.282448805200354),(79,108,1.65358439893796),(79,114,0.166051210058901),(79,118,-2.8107394634846),(80,87,2.44474623859371),(80,88,-0.454649494918668),(80,91,-1.22865993224891),(80,99,0.479476302377392),(80,101,0.563325907162694),(80,107,2.80364391003143),(80,113,0.845057527390362),(81,85,1.90099795525987),(81,86,-1.15672780541398),(81,90,0.24344615009003),(81,93,-1.68341624195074),(81,96,-0.218146305734428),(81,97,-3.15997802667318),(81,106,-0.785424359874264),(81,107,0.13556321909238),(81,110,-2.24425489059114),(81,115,-1.63901181066317),(82,86,0.930433057649464),(82,92,1.83783989989929),(82,110,-2.83614612262337),(82,112,1.11079744865261),(83,87,-0.834223456526383),(83,91,2.39716788232063),(83,93,-2.2992950224311),(83,101,0.91376995147557),(83,103,0.226752525406659),(83,105,1.26499221778008),(83,108,0.274483474227119),(84,85,-0.483672597430342),(84,86,-0.294900357066561),(84,89,-2.10995818964202),(84,95,1.42188787499619),(84,99,2.15033417767876),(84,104,-0.97941526535844),(84,111,-0.539735099337748),(84,113,-2.89518417920469),(84,114,0.271248512222663)]
orgname='BHNEAT_4_14'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()