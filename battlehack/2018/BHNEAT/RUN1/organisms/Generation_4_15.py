edge = [(0,85,1.02227851191748),(0,89,-2.49726096377453),(0,90,-1.25367748039186),(0,93,-2.29116946928312),(0,98,1.50521103549303),(0,101,0.522934659871212),(0,105,2.39579454939421),(0,108,-0.0341196935941648),(0,113,2.84427930539872),(0,114,-0.197386089663381),(0,117,0.49824518570513),(0,118,1.8338496047853),(1,86,-0.0633335367900632),(1,92,-0.72095400860622),(1,98,0.940473647267068),(1,102,-0.699636829737236),(1,104,0.489814447462386),(1,107,-2.7954802087466),(1,108,1.40939054536576),(1,109,-2.80687124240852),(1,113,-0.21973326822718),(2,87,1.93708609271523),(2,88,0.234160893581957),(2,100,-2.5083925901059),(2,106,-1.12326425977355),(2,108,0.250595110934782),(2,110,-0.0910214545121616),(2,113,-0.147762993255409),(2,118,-1.69721060823389),(3,89,-0.428174687948241),(3,92,1.47175511947996),(3,97,-0.741286965544603),(3,99,-0.421796319467757),(3,101,1.20216986602374),(3,103,2.04938657795953),(3,105,1.07567064424574),(3,108,2.03113650929289),(3,109,1.19045075838496),(3,111,-2.26927243873409),(3,112,-2.48146000549333),(3,116,-1.95075075533311),(4,90,2.02589495529038),(4,91,1.20167394024476),(4,97,-1.95850245674001),(4,99,-0.665059358500931),(4,101,1.52077547532578),(4,108,1.48890652180547),(4,113,-0.624561296426283),(4,118,2.16718802453688),(5,86,0.160840174565874),(5,87,0.153202917569506),(5,89,-1.32834101382488),(5,92,0.930059205908383),(5,93,3.13507492294076),(5,99,0.846476638080996),(5,104,-2.04865413373211),(5,114,1.74488814966277),(5,118,-2.46483504745628),(6,89,0.663319803460799),(6,92,2.23532822656941),(6,94,0.910512100589007),(6,100,0.580584124271371),(6,101,1.61597796563616),(6,103,-0.167622913296915),(6,107,0.665608691671499),(6,110,-0.0555742057557909),(6,113,0.224814600054933),(7,85,-2.36434522537919),(7,86,2.63618121890927),(7,90,-0.494300668355357),(7,95,2.54552598651082),(7,99,-0.974417859431745),(7,100,-1.44491409039583),(7,104,2.11298715170751),(7,106,1.63943906979583),(7,108,-1.19369335001679),(7,112,0.234984893337809),(7,116,-2.57242805261391),(8,92,-0.123691518906217),(8,93,-1.47096926786096),(8,95,1.94975127414777),(8,99,-0.628398998992889),(8,106,2.2068315683462),(8,107,1.55807672353282),(8,115,2.19185460982086),(8,116,-1.66517380291147),(8,118,1.97735526596881),(9,85,-2.67794579912717),(9,87,-0.601657155064547),(9,98,1.1825159459212),(9,101,-0.632343516342662),(9,103,1.36333811456648),(9,105,-2.32941679128391),(9,106,2.87837611011078),(9,113,1.61555070650349),(10,89,-0.415799432355724),(10,96,0.0196768089846492),(10,106,2.4954222235786),(10,108,2.06179235206153),(10,109,0.32944730979339),(10,111,1.29443494979705),(10,112,-0.22080141605884),(10,114,-1.46017334513382),(10,115,1.17854091006195),(10,116,1.1311532944731),(10,117,2.15754417554247),(11,89,-1.99217200231941),(11,97,0.529160435804315),(11,105,0.398091067232276),(11,112,2.00122837000641),(11,115,0.456251716666158),(12,92,-0.301644947660756),(12,93,1.15958128604999),(12,94,-0.284073915829951),(12,97,0.714995269631031),(12,98,-1.3441877498703),(12,99,0.128322702719199),(12,108,-1.11211737418744),(12,116,0.0631427961058382),(13,86,-0.184408093508713),(13,87,0.143894772179327),(13,90,2.37929929502243),(13,99,-1.278450880459),(13,102,-0.124225592822047),(13,104,0.642841883602405),(13,113,0.640583513901181),(13,116,-2.1053346354564),(13,118,1.39247566148869),(14,90,-2.4610889004181),(14,93,1.83881649220252),(14,95,1.53157139805292),(14,102,-1.59723197119053),(14,104,-0.0926236762596515),(14,106,-1.01608325449385),(14,109,1.74409466841639),(14,110,3.07305368205817),(14,111,-2.30809198278756),(15,85,1.33648182622761),(15,92,1.45278023621326),(15,99,-0.602916043580431),(15,101,-0.653485213782159),(15,104,-1.4133198034608),(15,108,0.751899777214881),(15,117,-0.539078951384014),(16,86,2.14079714346751),(16,87,0.00952177495651113),(16,88,1.71974852748192),(16,90,-1.50616473891415),(16,91,-1.74143192846461),(16,95,-1.24233985412152),(16,97,1.20315408795434),(16,98,1.02160710470901),(16,99,-1.59665211951048),(16,101,-1.71092867824335),(16,108,0.0961333048493912),(16,110,0.525376140629292),(17,89,-0.828196050904874),(17,96,0.416570024719993),(17,99,-0.0695135349589525),(17,101,0.895939512314219),(17,106,1.33803064058351),(17,107,1.92822046571245),(17,109,-1.80545976134526),(18,90,2.30476546525468),(18,91,-0.489471114230781),(18,93,1.07209234900967),(18,99,2.1401104770043),(18,102,1.70491653187658),(18,103,1.09479049043245),(18,104,-0.368564409314249),(18,110,0.411343729972228),(18,111,0.0563829462569048),(18,116,0.370593890194403),(18,117,1.61616107669301),(18,118,-0.640797143467513),(19,87,2.22276985992004),(19,89,-0.108073671681875),(19,93,1.18828394421216),(19,95,-2.50370036927396),(19,101,1.19916379284036),(19,105,-0.086664937284463),(19,115,-0.370517593920713),(20,88,-0.980544450209052),(20,101,0.979377117221595),(20,103,0.375759147923215),(20,104,-3.12457655568102),(20,105,-1.54119235816523),(20,106,1.24378185369427),(20,111,1.85407574694052),(20,116,-1.37150181585131),(21,86,0.886333811456649),(21,87,-0.556917020172735),(21,94,-2.21858119449446),(21,96,-0.486388744773705),(21,101,0.76441236610004),(21,102,0.0952177495651112),(21,105,-0.52287362285226),(21,107,0.754531998657186),(21,108,1.69946134830775),(22,86,0.0919675283059177),(22,88,-2.27253791924802),(22,91,0.943670461134678),(22,92,1.54894405957213),(22,93,0.168050172429579),(22,98,-1.727752006592),(22,106,1.96163823358867),(22,115,0.658474990081484),(22,117,-1.83073671681875),(23,85,-1.56910153508103),(23,86,-3.04865413373211),(23,88,-1.08066042054506),(23,90,2.61998352000488),(23,97,-0.141376995147557),(23,104,1.4732963042085),(23,112,-0.192098757896664),(23,114,-0.485030671102023),(23,115,-0.660290841395306),(23,116,-2.57480086672567),(24,89,-0.273751029999695),(24,90,-0.853183080538346),(24,91,-0.0776467177343059),(24,101,-2.09768974883267),(24,107,-1.27185888241218),(24,108,-1.18393505661183),(24,110,1.82679219946898),(24,112,1.42770165105136),(25,90,2.87549974059267),(25,92,-1.54389324625385),(25,94,-0.988143559068575),(25,98,0.0445570238349559),(25,105,0.64935758537553),(25,108,2.9197668385876),(25,109,1.78312784203619),(25,115,-2.16994232001709),(26,85,0.469748527481918),(26,87,-2.08443708609272),(26,89,-1.85393078402051),(26,95,-1.0716422009949),(26,98,0.504356517227698),(26,100,0.280632953886532),(26,101,-1.95312356944487),(26,102,1.95819727164525),(26,103,-1.61330759605701),(26,104,0.87084566789758),(26,107,2.4038438062685),(26,109,1.36844233527635),(26,112,-0.265945921201209),(26,113,-1.33397167882321),(26,117,1.5077517014069),(27,85,-0.0229270302438429),(27,87,1.96699423200171),(27,94,-2.49877925962096),(27,100,0.735877559739982),(27,102,-1.13055818353832),(27,103,0.194448683126316),(27,104,-0.911450544755394),(27,105,1.09738456373791),(27,108,-0.497550889614551),(27,110,2.03713339640492),(27,114,-1.91122165593432),(28,87,0.0173039948728904),(28,88,0.916585283974731),(28,97,1.90521713919492),(28,99,-2.74007385479293),(28,104,-0.931066316721091),(28,113,-2.31124301889096),(28,114,2.52991576891385),(29,88,-0.199407940916166),(29,91,1.29819635608997),(29,102,-0.620174260689108),(29,105,0.043282876064333),(29,116,0.718199713126011),(30,95,0.328257087923826),(30,96,2.5320673238319),(30,99,-0.674817651905881),(30,101,-1.83996093630787),(30,104,2.26015503402814),(30,109,-1.019394512772),(30,110,1.710425122837),(30,114,-1.18205053865169),(30,118,0.509575182348094),(31,85,1.72160252693258),(31,92,1.00711844233528),(31,94,0.870487075411237),(31,96,2.01689962462233),(31,99,0.336413159581286),(31,103,-0.785058137760552),(31,107,-0.291711172826319),(31,108,-0.043366801965392),(31,109,2.31370738853114),(31,111,-0.371631519516587),(31,112,-2.40042573320719),(31,117,-0.171575060274056),(32,86,0.742202520828883),(32,87,-0.306398205511643),(32,89,-1.84894100772118),(32,92,2.02297280800806),(32,98,-2.67622150334178),(32,99,-0.690237128818629),(32,104,-1.14566484572893),(32,106,-0.403752250740074),(32,109,0.125194555497909),(32,116,0.786133915219581),(32,118,0.310281685842463),(33,96,1.20166631061739),(33,98,1.70693838312937),(33,108,1.54537339396344),(33,110,-0.00348673970763269),(33,111,1.83889278847621),(33,114,-1.05288094729453),(34,85,0.0350123599963377),(34,90,0.495567186498611),(34,99,0.337076937162389),(34,104,-1.25946073793756),(34,109,0.320291756950591),(35,86,0.427030243842891),(35,87,0.662785729544969),(35,97,-0.241073335978271),(35,98,1.48103274636067),(35,100,-0.960646382030702),(35,104,0.856784264656514),(35,107,0.244705038605914),(35,109,-0.011047700430311),(35,110,0.470099490340892),(35,112,1.78505050813318),(36,85,1.83375804925687),(36,87,-2.24338511307108),(36,90,-1.43350779747917),(36,91,2.40112002929777),(36,104,0.120632038331248),(36,107,-0.890346995452742),(36,109,1.49456770531327),(36,112,1.44322031311991),(36,115,1.36555070650349),(36,117,1.70169682912687),(36,118,-1.07661671803949),(37,85,1.73033845027009),(37,86,2.70014038514359),(37,87,-0.0511642811365093),(37,91,1.0396969512009),(37,99,2.00856044190802),(37,105,-2.12720877712333),(37,111,-1.49285103915525),(37,112,0.945959349345378),(37,118,-0.0993682668538468),(38,87,-2.28785058137761),(38,90,1.54431287575915),(38,103,0.0102389599291971),(38,105,-0.62580492568743),(38,106,0.830423902096622),(38,111,1.10233619190039),(38,115,0.0297555467390973),(39,87,0.641575365459151),(39,89,-1.53724021118809),(39,91,-0.842539750358593),(39,94,1.62015900143437),(39,97,-2.08042390209662),(39,98,-0.484046449171422),(39,107,-0.264587847529527),(39,108,0.224387340922269),(39,109,0.666653950621052),(39,111,1.23276467177343),(39,113,-0.866451002533036),(39,116,-1.37739188818018),(39,118,-2.02253028962065),(40,88,2.72820215460677),(40,92,-0.297990356151006),(40,99,1.18784142582476),(40,104,-2.26647236548967),(40,110,0.714362010559404),(40,116,-2.07955412457656),(40,118,0.293397320474868),(41,88,1.16771446882534),(41,93,-0.269631031220435),(41,96,-1.80646687215796),(41,97,-1.80516983550523),(41,100,-1.15694906460768),(41,101,2.37817011017182),(41,104,0.352999969481491),(41,105,-1.11127811517685),(41,106,-0.176023133030183),(41,107,-1.20766319772942),(41,109,2.66663869136631),(41,110,1.62509537034211),(41,111,-0.764389477217933),(41,112,-1.56849116489151),(42,85,-0.72941526535844),(42,86,-1.31320383312479),(42,87,-0.7718054750206),(42,99,0.970152897732475),(42,100,2.31675923947874),(42,103,-0.710928678243355),(42,109,2.21137119663076),(42,113,1.48306222724082),(43,85,0.484084597308267),(43,88,-0.620227668080691),(43,89,0.0916928617206336),(43,93,-0.204390087588122),(43,97,-0.490508743552965),(43,98,0.912541581469161),(43,101,1.31142612994781),(43,102,-0.84263130588702),(43,103,-0.808137760551775),(43,105,-0.373279519028291),(43,110,2.13554795983764),(43,112,1.13895840327158),(43,114,-1.81817835016938),(43,116,-2.13451033051546),(44,89,1.69294564653462),(44,98,1.52014221625416),(44,99,-2.7823877681814),(45,87,-0.83630634479812),(45,88,1.1927549058504),(45,90,-1.69417401654103),(45,91,0.124057741019929),(45,95,2.32154301583911),(45,98,-0.116466261787774),(45,108,-0.435872981963561),(45,109,-2.03845332193976),(45,112,0.144199957274087),(45,115,1.27555925168615),(46,85,-0.150402844325083),(46,89,0.456091494491409),(46,91,1.37503433332316),(46,94,1.51729636524552),(46,97,0.819650868251595),(46,100,-0.577639088106937),(46,101,-0.413815729239784),(46,108,-0.741950743125706),(46,112,0.928426465651418),(47,86,-1.80498672444838),(47,91,-1.46946623126926),(47,92,1.57634968108158),(47,94,1.21272927030244),(47,95,-1.36806848353526),(47,100,0.713370159001434),(47,101,2.434041871395),(47,104,-0.0594653157139805),(47,105,1.26661732840968),(47,108,-0.0533310953093051),(47,112,1.09620960112308),(47,114,-1.03366191595202),(47,118,2.33031708731346),(48,86,1.12892544328135),(48,91,-0.370983001190222),(48,98,1.03341776787622),(48,99,2.20633564256722),(48,100,0.271935178685873),(48,103,-1.83606982634968),(48,105,-1.97811059907834),(48,106,1.58626819666127),(48,111,-1.15135654774621),(48,115,1.43202002014222),(49,87,-1.36102633747368),(49,89,-0.0720236823633534),(49,93,0.689680166020691),(49,94,-0.923879207739494),(49,95,-0.663754692220832),(49,102,-0.0164113284707175),(49,113,1.36650440992462),(49,114,-2.25470748008667),(50,89,1.11936552018799),(50,105,1.54034546952727),(50,107,-0.817445905941954),(51,87,-1.0807748649556),(51,92,-2.33069856868191),(51,97,0.502891628772851),(51,98,-2.60876033814508),(51,103,-1.69515060884426),(51,106,0.858668782616657),(51,112,-0.0508819849238563),(51,118,-1.5241935483871),(52,89,2.60776848658711),(52,97,-1.63052766502884),(52,106,-0.296319467757195),(52,110,-2.25004577776421),(52,111,0.658101138340403),(52,113,-1.64166692098758),(52,114,-2.72038178655354),(52,118,0.798051393169958),(53,88,-2.32461012604144),(53,90,-1.05172124393445),(53,92,-0.505272072511978),(53,94,1.42841883602405),(53,104,-1.91709646900845),(53,105,-0.27698599200415),(53,109,-0.281991027558214),(54,85,-1.03285317545091),(54,91,-0.579737235633412),(54,94,-0.808069093905454),(54,96,-1.42406994842372),(54,111,2.05298013245033),(54,112,-2.42950224311045),(54,113,1.09683523056734),(54,118,-1.39344462416456),(55,87,2.43682668538469),(55,95,0.0387203588976715),(55,107,-1.27681814020203),(55,110,0.767555772576067),(55,117,-1.97715689565722),(56,107,-2.95033112582781),(56,111,0.806138798181097),(56,113,0.952253791924802),(56,114,-0.995002594073305),(57,87,-1.44981994079409),(57,90,1.0855739005707),(57,91,2.26271858882412),(57,92,0.790505691702017),(57,93,0.33158360545671),(57,94,1.50151066621906),(57,95,-0.595789971617786),(57,96,-0.725211340678121),(57,100,0.0785317545091098),(57,102,-0.330263679921873),(57,103,-1.80526139103366),(57,115,-0.0720236823633534),(58,86,2.66035187841426),(58,87,-1.02124851222266),(58,89,0.714804528946806),(58,90,1.97515030365917),(58,95,-2.45849482711264),(58,96,-0.527077547532579),(58,101,-2.92361217078158),(58,103,1.46060823389386),(58,109,-0.223624378185369),(58,110,-0.0880764183477279),(58,113,0.281075472273934),(58,114,-1.70973845637379),(58,115,-1.03398236030152),(58,118,-0.817278054139836),(59,85,0.641216772972808),(59,86,0.864696188238167),(59,90,0.640247810296945),(59,91,-0.253997924741356),(59,93,-0.747474593340861),(59,97,2.54486983855708),(59,98,0.0705511642811365),(59,100,2.26966154972991),(59,102,-0.0664998321481979),(59,112,-0.903752250740074),(59,114,-2.55300302133244),(60,85,-1.32677694021424),(60,87,-2.59719382305368),(60,90,-0.405583361308634),(60,91,-0.267174291207617),(60,96,0.827509384441664),(60,100,-0.985160374767296),(60,101,-1.44708853419599),(60,105,-2.79177983947264),(60,107,0.260017700735496),(60,109,1.16909543137913),(60,110,-2.46572008423109),(60,114,0.880359813226722),(61,89,-2.20848719748528),(61,94,1.40883358256783),(61,96,0.613406781212806),(61,98,2.16742454298532),(61,100,-1.14505447553941),(61,102,0.187398907437361),(61,103,1.07574694051943),(61,114,1.71131778923917),(61,115,-2.00225074007385),(62,93,-0.308641315958129),(62,95,-0.676297799615467),(62,107,-0.55497146519364),(62,109,1.34739219336528),(62,110,0.184408093508713),(62,111,-2.08342234565264),(63,87,-1.8132267220069),(63,90,-1.59801782280953),(63,93,0.293519394512772),(63,97,-1.52160710470901),(63,100,0.336489455854976),(63,103,1.07898190252388),(63,104,0.774376659443953),(63,108,0.56358531449324),(63,111,-2.81946012756737),(63,114,-0.264275032807398),(63,117,-0.840662862025819),(64,87,1.35633411664174),(64,94,1.27478865932188),(64,99,0.0913266396069216),(64,110,-0.275688955351421),(64,112,0.134945219275491),(64,116,2.22159489730522),(65,87,0.968382824182867),(65,88,2.24570451979125),(65,90,-0.0584047975096896),(65,97,1.83756523331401),(65,99,0.332758568071535),(65,107,-2.2412869655446),(65,110,-2.65784173100986),(65,111,-1.6278801843318),(65,114,-1.30447553941465),(65,116,-1.99312570574053),(65,117,2.65836817529832),(66,85,2.88207647938475),(66,102,0.493552964873196),(66,105,-0.935529648731956),(66,108,1.92381054109317),(66,111,1.98443556016724),(66,115,-0.661030915250099),(66,118,1.35294656208991),(67,86,-1.61385692922758),(67,90,0.621677297280801),(67,92,0.78910946989349),(67,104,-1.76114688558611),(67,109,-2.09869685964538),(67,111,-0.809503463850826),(68,87,2.75263985106967),(68,88,2.49440748313852),(68,90,-0.00299844355601674),(68,93,-2.74689474166082),(68,95,0.892132328257088),(68,96,-2.16897335734123),(68,97,-0.494384594256417),(68,103,0.495284890285958),(68,107,-1.08546708578753),(68,112,1.22389904477065),(68,114,0.427640614032411),(69,87,0.717734305856502),(69,88,-1.8330637531663),(69,92,1.21562089907529),(69,94,-1.12929166539506),(69,95,0.852000488296152),(69,97,1.46911526841029),(69,108,0.435354167302469),(69,113,2.31887264625996),(69,114,3.2078157902768),(69,118,2.38351084933012),(70,85,-0.437963499862667),(70,86,-0.903614917447432),(70,87,1.16969817194128),(70,90,-2.00366222113712),(70,96,-2.19971312601093),(70,97,0.137256996368297),(70,99,0.652119510483108),(70,105,-1.60300759910886),(70,107,-1.31186864833522),(70,109,0.165181432538835),(70,110,-1.95396282845546),(70,111,-2.62379070406201),(71,85,2.09905545213172),(71,93,-2.01565599536119),(71,96,-0.53782006286813),(71,100,-0.757705923642689),(71,104,0.109920041505173),(71,106,0.946691793572802),(71,111,2.32310708944975),(71,113,-0.854022339548936),(72,94,2.28695791497543),(72,96,-0.351886043885617),(72,99,-2.18176824243904),(72,110,-0.532517471846675),(72,112,1.78981139561144),(72,114,-0.147228919339579),(72,115,-0.103167821283609),(72,116,-1.74966429639576),(73,88,-0.190183721427045),(73,94,2.43026520584735),(73,99,0.137791070284127),(73,100,1.77488021485031),(73,106,-1.0914792321543),(73,110,0.0778298287911619),(73,115,1.76862392040773),(74,90,0.589083529160436),(74,94,-0.371440778832362),(74,99,0.571962645344401),(74,102,-1.65890987884152),(74,106,1.55448316904202),(74,107,-0.731948301644948),(74,110,-1.28623310037538),(74,113,-2.37998596148564),(74,116,0.764603106784265),(75,85,2.1240882595294),(75,86,-1.88084810937834),(75,93,-0.249641407513657),(75,98,-0.701933347575305),(75,103,0.339831232642598),(75,105,2.61198767052217),(75,111,1.95340586565752),(75,117,1.40948210089419),(76,86,-2.54876094851527),(76,89,2.00679799798578),(76,92,1.02194280831324),(76,94,-1.02961058381909),(76,99,-2.1362956633198),(76,101,-2.35753959776605),(76,103,2.27301858577227),(76,106,-1.44898831141087),(76,110,-0.894062623981445),(76,113,2.69103823969237),(77,88,1.77849665822321),(77,91,1.98271126438185),(77,93,0.536965544602802),(77,98,-0.527596362193671),(77,101,1.34778893398846),(77,102,0.0395825067903683),(77,103,-2.58684041871395),(77,104,0.39638966032899),(77,105,2.25934629352702),(77,109,0.827875606555376),(78,88,-0.5248573259682),(78,93,0.405026398510697),(78,94,0.583170567949461),(78,101,-0.42337565233314),(78,104,1.70854060487686),(78,110,-1.57994323557237),(78,114,0.423436689352092),(78,116,-1.80513931699576),(78,117,-0.394192327646718),(78,118,2.98786889248329),(79,87,1.89931943723869),(79,92,0.269806512649922),(79,94,0.891247291482284),(79,107,-0.104274117252113),(79,108,0.753021332438124),(79,114,-1.9055681020539),(79,118,0.033417767876217),(80,87,0.273827326273385),(80,88,1.57841731009857),(80,91,-2.60121463667714),(80,99,1.53350169377728),(80,101,-1.40796380504776),(80,107,-0.64973906674398),(80,113,0.0898236030152288),(81,85,1.84347056489761),(81,86,0.942548905911435),(81,90,1.35919522690512),(81,93,1.88135929441206),(81,96,-2.30437635425886),(81,97,-0.1136051515244),(81,106,1.72727134006775),(81,107,2.08738975188452),(81,110,0.512382885219886),(81,115,-1.87834559160131),(82,86,0.838572344126713),(82,92,-0.443098239082003),(82,110,-2.53899502548296),(82,112,1.03844569231239),(83,87,-0.591517380291147),(83,91,0.691892757957701),(83,93,-1.91277047029023),(83,101,0.176778466139714),(83,103,0.321825312051759),(83,105,0.775589770195624),(83,108,-3.1060975981933),(84,85,-1.5429471724601),(84,86,2.42915128025147),(84,89,-0.371951963866085),(84,95,0.172643208105716),(84,99,0.327867976928007),(84,104,-2.13316751609851),(84,111,-0.279412213507492),(84,113,-2.66441846980193),(84,114,0.439252906888028)]
orgname='BHNEAT_4_15'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()