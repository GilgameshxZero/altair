edge = [(0,85,0.60811181981872),(0,89,-2.64149906918546),(0,90,0.778527176732688),(0,93,-0.400616473891415),(0,98,-0.422177800836207),(0,101,-3.14206366161077),(0,105,2.3185674611652),(0,108,0.710013122959075),(0,113,3.04257332071902),(0,114,2.18987090670492),(0,117,-0.228125858333079),(0,118,0.854503006073183),(1,86,-0.0839106418042543),(1,92,0.446409497360149),(1,98,3.0657368694113),(1,102,-1.98611407818842),(1,104,-0.621173741874447),(1,107,-0.867549668874172),(1,108,-0.971861934263131),(1,109,-0.201742606891079),(1,113,0.357097079378643),(2,87,-1.53634754478591),(2,88,1.44947660756249),(2,100,-0.306741538743248),(2,106,-0.696768089846492),(2,108,1.6866512039552),(2,110,0.790108951078829),(2,113,-2.01342814416944),(2,118,2.04585406048769),(3,89,1.52624591814936),(3,92,-1.88740195928831),(3,97,2.11149937437056),(3,99,0.986724448377941),(3,101,0.104083376567888),(3,103,2.49229407635731),(3,105,-1.57300027466659),(3,108,-1.97613452558977),(3,109,-2.96455275124363),(3,111,-1.33271279030732),(3,112,0.375972777489547),(3,116,-3.34510330515458),(4,90,-0.86977752006592),(4,91,0.294122135074923),(4,97,-0.706839197973571),(4,99,-1.08595538193915),(4,101,-0.574617755668813),(4,108,0.707113864558855),(4,113,-1.76033814508499),(4,118,-0.585741752372814),(5,86,2.10608233893857),(5,87,-1.51298562578204),(5,89,0.157429731131932),(5,92,0.0621662038026063),(5,93,-0.511047700430311),(5,99,0.242591631824702),(5,104,1.69966734824671),(5,114,1.98850978118229),(5,118,-2.93447676015503),(6,89,0.401654103213599),(6,92,0.520798364207892),(6,94,-0.705435346537675),(6,100,-0.0348063600573748),(6,101,-1.91596728415784),(6,103,-0.423261207922605),(6,107,0.955717642750328),(6,110,0.529572435682241),(6,113,1.04881435590686),(7,85,2.11874752037111),(7,86,1.37560655537584),(7,90,-1.00071718497269),(7,95,2.96285897396771),(7,99,0.318735312967315),(7,100,2.77358317819758),(7,104,-1.24109622486038),(7,106,0.225302896206549),(7,108,1.71344645527512),(7,112,2.21352275154881),(7,116,0.314798425244911),(8,92,-2.51651051362651),(8,93,-0.13296914578692),(8,95,2.07800531022065),(8,99,0.468321787163915),(8,106,2.34092226935636),(8,107,1.76076540421766),(8,115,-0.218695638904996),(8,116,-0.904034546952727),(8,118,1.49716177861873),(9,85,2.11110263374737),(9,87,-0.0355845820490127),(9,98,1.12205877864925),(9,101,-2.11638233588672),(9,103,0.0196081423383282),(9,105,-0.471083712271493),(9,106,2.60792870876186),(9,113,-0.135654774620808),(10,89,-0.50221259193701),(10,96,-1.67996765037996),(10,106,1.97955259865108),(10,108,-0.387096774193548),(10,109,-1.15314188055055),(10,111,0.394604327524644),(10,112,-2.83120212408826),(10,114,-2.36457411420026),(10,115,-0.640934476760155),(10,116,-1.6842402417066),(10,117,0.232734153263955),(11,89,0.363567003387555),(11,97,1.28766747032075),(11,105,-1.11998352000488),(11,112,0.396801660206916),(11,115,-2.11745048371838),(12,92,1.48057496871853),(12,93,2.58479567857906),(12,94,-2.04840235602893),(12,97,-0.670003357036042),(12,98,3.14136173589282),(12,99,1.61876277962584),(12,108,-0.207815790276803),(12,116,2.37183751945555),(13,86,0.703878902554399),(13,87,0.842066713461715),(13,90,-1.18942838831751),(13,99,0.188390758995331),(13,102,-0.846736045411542),(13,104,2.16856898709067),(13,113,0.767525254066591),(13,116,1.32569353312784),(13,118,2.12736899929807),(14,90,-1.85219885860775),(14,93,-2.20561845759453),(14,95,0.86725974303415),(14,102,2.46482741782891),(14,104,-0.271919919431135),(14,106,0.210669270912809),(14,109,-0.0847346415601062),(14,110,0.773094882045961),(14,111,1.5631275368511),(15,85,0.775353251747185),(15,92,-0.536545915097507),(15,99,0.141636402478103),(15,101,-2.76024658955657),(15,104,-1.33185827204199),(15,108,0.548707541123692),(15,117,0.827112643818476),(16,86,-0.11383404034547),(16,87,1.78051087984863),(16,88,0.436887722403638),(16,90,0.921246986297189),(16,91,0.0277718436231575),(16,95,1.48368785668508),(16,97,0.753379924924467),(16,98,-3.15121921445357),(16,99,-0.0731833857234412),(16,101,0.600802636799219),(16,108,0.552140873439741),(16,110,0.222724082155828),(17,89,1.70807519760735),(17,96,1.19589831232643),(17,99,0.837595751823481),(17,101,-1.46287423322245),(17,106,1.62727744376965),(17,107,-1.04620502334666),(17,109,1.21883297219764),(18,90,0.193609424115726),(18,91,-3.15919980468154),(18,93,0.469771416364025),(18,99,0.272530289620655),(18,102,-2.48316904202399),(18,103,-1.20545060579241),(18,104,1.67424542985321),(18,110,2.43530075991089),(18,111,-1.83646656697287),(18,116,2.53936887722404),(18,117,0.969267860957671),(18,118,-1.44779808954131),(19,87,-1.58137760551775),(19,89,1.52897732474746),(19,93,-1.08485671559801),(19,95,-0.770592364268929),(19,101,0.065141758476516),(19,105,-0.972029786065249),(19,115,-1.38802758873257),(20,88,-1.35659352397229),(20,101,-0.17322305978576),(20,103,1.78087710196234),(20,104,-1.14578691976684),(20,105,-1.63330484939116),(20,106,1.13293862727744),(20,111,-0.416577654347362),(20,116,0.463866084780419),(21,86,1.25354777672658),(21,87,1.74800866725669),(21,94,-0.206900234992523),(21,96,0.147404400769066),(21,101,0.794122135074923),(21,102,0.949873348185675),(21,105,-3.2445600756859),(21,107,-1.98731955931272),(21,108,0.973815118869594),(22,86,1.72757652516251),(22,88,-0.659932248908963),(22,91,-0.758751182592242),(22,92,1.76456495864742),(22,93,0.315958128604999),(22,98,-0.329966124454482),(22,106,-0.298806726279488),(22,115,-1.59302041688284),(22,117,-2.42278817102573),(23,85,-0.482863856929228),(23,86,-1.15491195410016),(23,88,0.333323160496841),(23,90,-0.637119663075655),(23,97,1.49198889126255),(23,104,-0.532792138431959),(23,112,2.74567400128178),(23,114,-0.514831995605335),(23,115,-1.39642017883847),(23,116,-2.84540849024934),(24,89,-1.63873714407788),(24,90,-1.3694875942259),(24,91,-0.276055177465133),(24,101,0.265419476912748),(24,107,-0.82357249671926),(24,108,-0.626697592089602),(24,110,0.665593432416761),(24,112,-0.815179906613361),(25,90,2.12663655507065),(25,92,-0.561815240943632),(25,94,-1.96516312143315),(25,98,-1.48072756126591),(25,105,0.854396191290017),(25,108,-1.25080111087374),(25,109,1.07197790459914),(25,115,-0.133610034485916),(26,85,1.26741843928343),(26,87,1.55247657704398),(26,89,-2.21312601092563),(26,95,0.864040040284432),(26,98,-2.14505447553941),(26,100,-1.19151890621662),(26,101,0.493911557359539),(26,102,-1.30059205908383),(26,103,-0.683339945677053),(26,104,-1.41460921048616),(26,107,0.660252693258461),(26,109,0.910229804376354),(26,112,-0.266182439649647),(26,113,-1.8302560502945),(26,117,1.88871425519578),(27,85,-1.05914487136448),(27,87,0.859721671193579),(27,94,-1.12056337168493),(27,100,2.98069704275643),(27,102,2.4969481490524),(27,103,-0.516144291512802),(27,104,-0.598437452314829),(27,105,2.37105929746391),(27,108,-1.16534928434095),(27,110,-2.09900204474013),(27,114,-0.0629596850489823),(28,87,-1.00190740684225),(28,88,-1.68031861323893),(28,97,-1.66714987640004),(28,99,1.31327249977111),(28,104,2.53527939695425),(28,113,-0.543519394512772),(28,114,-1.06488235114597),(29,88,-0.72103030487991),(29,91,0.225638599810785),(29,102,0.577547532578509),(29,105,-0.802194280831324),(29,116,-0.979598376415296),(30,95,-0.657551805169835),(30,96,2.49443037202063),(30,99,-2.68541520432142),(30,101,-2.32044434949797),(30,104,1.70842616046632),(30,109,0.933179723502304),(30,110,-1.50270088808863),(30,114,-0.878292184209723),(30,118,-0.670308542130802),(31,85,-0.768852809228797),(31,92,0.153843806268502),(31,94,0.207678456984161),(31,96,1.240302743614),(31,99,-1.62823877681814),(31,103,1.48219244972076),(31,107,-0.964384899441511),(31,108,-0.370784630878628),(31,109,-1.60928678243355),(31,111,-2.70578630939665),(31,112,2.18756675923948),(31,117,-0.58500930814539),(32,86,-0.748924222540971),(32,87,-0.614505447553941),(32,89,0.534836878566851),(32,92,1.41819513534959),(32,98,-1.37725455488754),(32,99,-1.21095919675283),(32,104,3.30007324442274),(32,106,2.19498275704215),(32,109,1.64236884670553),(32,116,-0.39646595660268),(32,118,-0.56015198217719),(33,96,2.24662007507553),(33,98,0.779396954252754),(33,108,-1.29020050660726),(33,110,-3.34836878566851),(33,111,-1.13132114627522),(33,114,0.695379497665334),(34,85,0.547868282113102),(34,90,0.840647602771081),(34,99,-1.11987670522172),(34,104,1.19222083193457),(34,109,-1.92643513290811),(35,86,0.129245887630848),(35,87,0.684499649037141),(35,97,-1.73612170781579),(35,98,0.749382000183111),(35,100,-0.117404705954161),(35,104,1.52658162175359),(35,107,0.505630664998322),(35,109,0.77553636280404),(35,110,0.849620044557024),(35,112,-1.30573442793054),(36,85,-2.54480117191076),(36,87,1.08032471694082),(36,90,0.43816949980163),(36,91,2.77237769707327),(36,104,-0.162282174138615),(36,107,-1.06500442518387),(36,109,0.723899044770653),(36,112,2.12372203741569),(36,115,-1.26743369853816),(36,117,1.05055391094699),(36,118,0.62709433271279),(37,85,-1.6481826227607),(37,86,-1.00268562883389),(37,87,1.96455275124363),(37,91,0.454573198644978),(37,99,1.18745994445631),(37,105,-1.7953581347087),(37,111,1.5563829462569),(37,112,1.32480849635304),(37,118,0.729590746787927),(38,87,0.390087588122196),(38,90,-1.01651051362651),(38,103,1.83080538346507),(38,105,-1.15680410168767),(38,106,0.0164036988433486),(38,111,-1.98301644947661),(38,115,0.402172917874691),(39,87,-1.25360881374554),(39,89,0.470900601214637),(39,91,-2.25379192480239),(39,94,1.16302987762078),(39,97,-0.604007080294198),(39,98,0.49969481490524),(39,107,-1.97463911862545),(39,108,1.73116245002594),(39,109,1.74312570574053),(39,111,-1.21839045381024),(39,113,2.0201574755089),(39,116,-2.65558336130863),(39,118,-0.953276161992248),(40,88,2.66675313577685),(40,92,-0.564439832758568),(40,99,-0.159794915616321),(40,104,1.96920682393872),(40,110,1.22792748802148),(40,116,0.814249092074343),(40,118,0.381939146092105),(41,88,-2.10615863521226),(41,93,2.30500198370312),(41,96,-1.33739738151189),(41,97,1.31412701803644),(41,100,0.86550492873928),(41,101,-1.29454939420759),(41,104,-1.55571153904843),(41,105,0.0281380657368694),(41,106,-2.16956083864864),(41,107,-2.80632953886532),(41,109,0.997192297128208),(41,110,0.30939664906766),(41,111,0.87038789025544),(41,112,-1.04432813501389),(42,85,-0.901944029053621),(42,86,-0.0117801446577349),(42,87,-0.630542924283578),(42,99,0.0771355327005829),(42,100,1.60206915494247),(42,103,1.12201300088504),(42,109,0.463988158818323),(42,113,1.16962187566759),(43,85,0.432874538407544),(43,88,-2.10409863582263),(43,89,2.30521561326945),(43,93,0.812128055665761),(43,97,-0.108432264168218),(43,98,1.54248176519059),(43,101,0.489089632862331),(43,102,2.05681020538957),(43,103,1.03877376628925),(43,105,-2.218695638905),(43,110,0.454588457899716),(43,112,-0.35071871089816),(43,114,-1.33043916135136),(43,116,1.66188543351543),(44,89,-1.58955656605731),(44,98,1.03419598986785),(44,99,-1.6068605609302),(45,87,1.78412732322153),(45,88,0.277199621570483),(45,90,1.71263771477401),(45,91,-1.81324198126164),(45,95,2.81482894375439),(45,98,0.730384228034303),(45,108,1.26313058870205),(45,109,1.70091860713523),(45,112,-1.71790215765862),(45,115,-0.318384350108341),(46,85,2.06711020233772),(46,89,1.22072511978515),(46,91,0.531205175939207),(46,94,1.92062135685293),(46,97,0.0203711050752281),(46,100,-2.00962858973968),(46,101,-0.840006714072085),(46,108,0.0255592516861477),(46,112,-0.405056917020173),(47,86,0.507858516190069),(47,91,-0.860866115298929),(47,92,0.172643208105716),(47,94,0.642445142979217),(47,95,0.793786431470687),(47,100,-0.111072115237892),(47,101,0.716727195043794),(47,104,0.464568010498367),(47,105,-2.33452864162114),(47,108,-1.67538987395856),(47,112,0.665746024964141),(47,114,1.67706839197974),(47,118,1.03494369335002),(48,86,-1.09566026795251),(48,91,-1.80118717001862),(48,98,3.08314767906735),(48,99,0.128604998931852),(48,100,0.440015869624928),(48,103,1.57594531083102),(48,105,1.21501815851314),(48,106,-0.738120670186468),(48,111,-2.08687093722343),(48,115,-0.854518265327921),(49,87,0.848063600573748),(49,89,2.04478591265603),(49,93,-0.136143070772423),(49,94,-1.46420178838466),(49,95,1.66141239661855),(49,102,-0.34804834131901),(49,113,0.585558641315958),(49,114,0.21416364024781),(50,89,-0.662007507553331),(50,105,0.589480269783624),(50,107,0.142323068941313),(51,87,1.98307748649556),(51,92,2.08494827112644),(51,97,2.63087862788781),(51,98,-1.06822412793359),(51,103,1.31650746177557),(51,106,1.8771172215949),(51,112,-1.04815820795312),(51,118,-1.70891445661794),(52,89,-1.06962797936949),(52,97,-0.473830378124332),(52,106,1.82378612628559),(52,110,1.19899594103824),(52,111,-0.540375988036744),(52,113,1.2422711874752),(52,114,2.24257637256996),(52,118,-0.190313425092318),(53,88,2.50498977629933),(53,90,-0.32235175634022),(53,92,1.40614032410657),(53,94,2.69417401654103),(53,104,-1.52633747367779),(53,105,2.66501358073672),(53,109,-0.73558763389996),(54,85,-1.06089968565935),(54,91,0.98055970946379),(54,94,-1.01956236457411),(54,96,1.51066621906186),(54,111,-0.903729361857967),(54,112,2.03787347025971),(54,113,-1.65247047334208),(54,118,-0.0560625019074068),(55,87,1.86658833582568),(55,95,-0.410473952452162),(55,107,0.43527024140141),(55,110,1.93151646473586),(55,117,0.988662373729667),(56,107,0.234107486190374),(56,111,-0.218909268471328),(56,113,1.61507003997925),(56,114,0.0631122775963622),(57,87,-2.40440076906644),(57,90,1.78185369426557),(57,91,1.51577806939909),(57,92,-0.656956694235054),(57,93,-1.37995544297616),(57,94,-1.25830866420484),(57,95,1.44045838801233),(57,96,-2.39913632618183),(57,100,-1.05858027893918),(57,102,1.36127811517685),(57,103,0.594500564592425),(57,115,1.60519730216376),(58,86,2.41357158116398),(58,87,0.366252632221442),(58,89,3.1491439558092),(58,90,2.54242072817164),(58,95,-0.801507614368114),(58,96,-0.64722128971221),(58,101,2.0463423566393),(58,103,0.229209265419477),(58,109,-0.0685140537736137),(58,110,2.58549760429701),(58,113,0.173009430219428),(58,114,-1.35685293130284),(58,115,0.755348368785668),(58,118,1.06997894222846),(59,85,-0.206122013000885),(59,86,2.20198675496689),(59,90,0.890865810113834),(59,91,-1.49571214941862),(59,93,3.08249153111362),(59,97,0.388561662648396),(59,98,1.97019867549669),(59,100,-2.2992950224311),(59,102,-1.22711874752037),(59,112,2.3718985564745),(59,114,-0.191427350688192),(60,85,-0.157963805047761),(60,87,1.32306894131291),(60,90,3.23415326395459),(60,91,-0.920514542069765),(60,96,1.62553788872951),(60,100,-2.04931791131321),(60,101,-0.766609698782311),(60,105,1.72162541581469),(60,107,-0.687658314767907),(60,109,1.7253639332255),(60,110,-0.797509689626759),(60,114,-2.09936826685385),(61,89,0.890728476821192),(61,94,1.631275368511),(61,96,0.501785332804346),(61,98,-0.523239844965972),(61,100,-0.708792382580035),(61,102,-1.67691579943236),(61,103,-1.03862117374187),(61,114,-1.32761619922483),(61,115,1.58284249397259),(62,93,-1.34490493484298),(62,95,-3.12158574175237),(62,107,-2.01086458937346),(62,109,-2.30121768852809),(62,110,-0.745643482772302),(62,111,1.2918637653737),(63,87,-0.893246253852962),(63,90,-0.572115237891782),(63,93,0.225684377574999),(63,97,-2.11803033539842),(63,100,2.40894802697836),(63,103,-1.70592364268929),(63,104,-0.978759117404706),(63,108,-0.84408093508713),(63,111,1.68224127933592),(63,114,-1.79361857966857),(63,117,0.192449720755638),(64,87,-2.42889187292093),(64,94,-2.14299447614978),(64,99,1.35431989501633),(64,110,-0.0450300607318339),(64,112,-0.539750358592486),(64,116,0.417386394848476),(65,87,0.6939603869747),(65,88,-0.0688497573778497),(65,90,-1.53767509994812),(65,97,-0.590334788048952),(65,99,1.033371990112),(65,107,1.12895596179083),(65,110,-0.9518112735374),(65,111,-1.01019318216498),(65,114,1.8366801965392),(65,116,0.112979522080142),(65,117,1.55575731681265),(66,85,2.16396069215979),(66,102,0.799951170384838),(66,105,0.911160618915372),(66,108,2.21962645344401),(66,111,1.55293435468612),(66,115,-1.94022949919126),(66,118,0.310434278389843),(67,86,2.73221533860286),(67,90,3.19702749717704),(67,92,-0.558549760429701),(67,104,-1.39252906888028),(67,109,1.46526993621632),(67,111,1.95265053254799),(68,87,2.61270485549486),(68,88,3.03698843348491),(68,90,-0.612125003814814),(68,93,-0.532776879177221),(68,95,-0.280068361461226),(68,96,2.32679219946898),(68,97,-0.066728720969268),(68,103,0.376293221839045),(68,107,-0.140690328684347),(68,112,0.356151005584887),(68,114,0.725516525772881),(69,87,-0.342188787499619),(69,88,0.899746696371349),(69,92,2.04771568956572),(69,94,-3.05235450300607),(69,95,-0.720313119907224),(69,97,-0.130787072359386),(69,108,0.532013916440321),(69,113,-1.43951231421857),(69,114,1.22470778527177),(69,118,2.26522110660115),(70,85,-0.357799005096591),(70,86,-2.24416333506272),(70,87,-0.941770683919797),(70,90,-1.45623645741142),(70,96,-0.445570238349559),(70,97,2.42818994720298),(70,99,1.37957396160771),(70,105,1.69049653614917),(70,107,2.00062562944426),(70,109,0.119876705221717),(70,110,0.0257881405072176),(70,111,2.37929929502243),(71,85,1.55224768822291),(71,93,-0.46134830774865),(71,96,1.54522843104343),(71,100,1.29276406140324),(71,104,0.241096224860378),(71,106,0.264900662251656),(71,111,0.36596270638142),(71,113,-1.67500839259011),(72,94,0.3940244758446),(72,96,-1.35837885677664),(72,99,-0.677983947264016),(72,110,-1.00100711081271),(72,112,-0.469023712881863),(72,114,2.94552446058535),(72,115,1.48998992889187),(72,116,0.244376964629048),(73,88,-1.56944486831263),(73,94,1.35622730185858),(73,99,-0.740531632435072),(73,100,-0.733573412274545),(73,106,-1.8259987182226),(73,110,-0.632496108890042),(73,115,1.72986541337321),(74,90,1.50341807306131),(74,94,1.66368602557451),(74,99,2.46002075258644),(74,102,-0.835215308084353),(74,106,-2.29490035706656),(74,107,-1.81890316476943),(74,110,-0.265205847346416),(74,113,-1.34636982329783),(74,116,-2.49824518570513),(75,85,-2.32409131138035),(75,86,1.07669301431318),(75,93,-1.79735709707938),(75,98,0.600970488601337),(75,103,-0.815424054689169),(75,105,1.60318308053835),(75,111,0.845027008880886),(75,117,1.29747917111728),(76,86,-0.279259620960112),(76,89,-0.054139835810419),(76,92,-0.120212408825953),(76,94,1.15840632343516),(76,99,-0.0566423535874508),(76,101,-1.89222388378552),(76,103,-2.30449842829676),(76,106,0.826425977355266),(76,110,-0.310281685842463),(76,113,2.6288644062624),(77,88,-1.84168523209326),(77,91,-1.53030487990967),(77,93,-1.42773216956084),(77,98,-1.65115817743461),(77,101,-3.24140140995514),(77,102,-2.26183355204932),(77,103,-1.11049226355785),(77,104,0.629749443037202),(77,105,-0.064989165929136),(77,109,0.358973967711417),(78,88,0.0297708059938352),(78,93,-0.307458723715934),(78,94,2.54855494857631),(78,101,0.119052705465865),(78,104,-0.0575579088717307),(78,110,-0.543275246436964),(78,114,-0.825449385052034),(78,116,1.11003448591571),(78,117,1.20752586443678),(78,118,2.2907803582873),(79,87,-0.664235358745079),(79,92,2.54341257972961),(79,94,0.307443464461196),(79,107,2.14261299478133),(79,108,2.8327433088168),(79,114,1.21367534409619),(79,118,0.806314279610584),(80,87,-0.579866939298685),(80,88,-0.75968199713126),(80,91,-1.52430799279763),(80,99,2.78812524796289),(80,101,-0.670567949461348),(80,107,-1.90412610248115),(80,113,2.02185125278481),(81,85,-1.48403881954405),(81,86,-1.94776757103183),(81,90,-1.09410382396924),(81,93,0.78644672994171),(81,96,0.983520004882962),(81,97,0.380932035279397),(81,106,2.34511856440931),(81,107,0.336680196539201),(81,110,2.94555497909482),(81,115,-1.19922482985931),(82,86,1.07608264412366),(82,92,1.34260078737754),(82,110,-0.852443006683554),(82,112,-2.05267494735557),(83,87,1.38172551652577),(83,91,-0.378643147068697),(83,93,0.485900448622089),(83,101,0.769905697805719),(83,103,-0.549867244483779),(83,105,0.0944853053376873),(83,108,0.691167943357647),(84,85,0.537018951994385),(84,86,-0.553071687978759),(84,89,-0.766838587603381),(84,95,-1.40694906460768),(84,99,0.962401196325571),(84,104,1.36822107608264),(84,111,1.2455214087344),(84,113,0.106463820307016),(84,114,2.51283303323466)]
orgname='BHNEAT_2_8'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()