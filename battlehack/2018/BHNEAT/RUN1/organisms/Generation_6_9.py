edge = [(0,85,2.41724906155583),(0,89,-2.20676290169988),(0,90,-1.98812829981384),(0,93,-1.76128421887875),(0,98,3.64510025330363),(0,101,-0.767494735557115),(0,105,1.92716757713553),(0,108,1.57223731192969),(0,113,-0.688955351420637),(0,114,-2.42567217017121),(0,117,2.00575273903623),(0,118,4.73302407910398),(1,86,-0.656056398205512),(1,92,2.11609241004669),(1,98,2.03573717459639),(1,102,-0.448210089419233),(1,104,-0.715430158391064),(1,107,-2.98416089358196),(1,108,-0.240104373302408),(1,109,-3.70717490157781),(1,113,1.96626178777429),(2,87,-2.86214789269692),(2,88,0.921124912259285),(2,100,2.44503616443373),(2,106,-0.231894894253365),(2,108,0.222602008117924),(2,110,-2.59538560136723),(2,113,2.29677724539933),(2,118,-1.31649220252083),(3,89,-0.222312082277901),(3,92,-1.02647480697043),(3,97,-2.15872676778466),(3,99,1.37179174169134),(3,101,-0.509643848994415),(3,103,1.78008362071596),(3,105,0.342143009735405),(3,108,1.304834131901),(3,109,-1.62982573931089),(3,111,2.28782006286813),(3,112,2.9830927457503),(3,116,-1.84527115695669),(4,90,-2.36356700338755),(4,91,-0.699011200292978),(4,97,0.0678731650746176),(4,99,1.21300393688772),(4,101,-0.510834070863979),(4,108,2.66708883938108),(4,113,-1.1686605426191),(4,118,-1.05648976104007),(5,86,0.529358806115909),(5,87,-1.98278756065554),(5,89,-2.26352732932524),(5,92,-1.11554307687613),(5,93,2.09425641651662),(5,99,1.16310617389447),(5,104,2.38418225653859),(5,114,1.10850856044191),(5,118,-0.556321909237953),(6,89,3.10002441480758),(6,92,-2.83288064210944),(6,94,-0.124820703756828),(6,100,2.61236915189062),(6,101,-2.71318704794458),(6,103,-0.423261207922605),(6,107,-1.77091280861843),(6,110,-0.550294503616443),(6,113,1.68634601886044),(7,85,0.364391003143406),(7,86,0.886852626117741),(7,90,-2.44821008941923),(7,95,1.89577929013947),(7,99,2.74350718710898),(7,100,2.84820093386639),(7,104,0.388058107242042),(7,106,1.17763298440504),(7,108,0.522537919248024),(7,112,1.59521774956511),(7,116,-0.635090182195502),(8,92,-2.04744102298044),(8,93,1.98545793023469),(8,95,-1.90266121402631),(8,99,-1.1695455793939),(8,106,0.95760979033784),(8,107,1.51631214331492),(8,115,-0.010834070863979),(8,116,-1.83115634632405),(8,118,-1.40400402844325),(9,85,2.91129795220801),(9,87,-0.0986510818811609),(9,98,0.0710318308053835),(9,101,-0.196264534440138),(9,103,2.89666432691427),(9,105,-0.354701376384777),(9,106,0.115253151036104),(9,113,-0.551561021759697),(10,89,1.16486098818934),(10,96,0.943632312997833),(10,106,2.57519760734886),(10,108,1.74306466872158),(10,109,2.29413739432966),(10,111,-0.922696615497299),(10,112,0.947447126682333),(10,114,-0.553682058168279),(10,115,2.93079927976318),(10,116,-2.32329783013398),(10,117,0.266457106234931),(11,89,-0.274132511368145),(11,97,-0.560228278450881),(11,105,-2.01765495773186),(11,112,-2.70067445905942),(11,115,1.15184484389782),(12,92,-4.4699240089114),(12,93,-0.136158330027161),(12,94,-0.0982696005127109),(12,97,2.00407422101505),(12,98,4.85062715536973),(12,99,0.011200292977691),(12,108,-2.52264473403119),(12,116,0.0582293160802026),(13,86,0.963896603289895),(13,87,-1.69447920163579),(13,90,0.418439283425397),(13,99,1.1428418836024),(13,102,1.49121066927091),(13,104,-1.07194738608966),(13,113,2.52157658619953),(13,116,1.89829706717124),(13,118,0.827738273262734),(14,90,1.95974608600116),(14,93,1.98019348735008),(14,95,1.38111514633625),(14,102,-1.27954954680013),(14,104,0.571153904843287),(14,106,1.18434705648976),(14,109,0.330698568681906),(14,110,3.14995269631031),(14,111,1.39878536332286),(15,85,-1.84705648976104),(15,92,2.76899014252144),(15,99,-0.743095187231056),(15,101,0.945310831019013),(15,104,-1.59546189764092),(15,108,-1.49282815027314),(15,117,3.86935026093326),(16,86,0.458769493697928),(16,87,-2.80718405713065),(16,88,-1.99513229773858),(16,90,4.79847102267525),(16,91,0.809961241492966),(16,95,-1.3801690725425),(16,97,-4.91421246986297),(16,98,-3.18730735190893),(16,99,-1.22882778405103),(16,101,-2.06575212866604),(16,108,-0.523392437513352),(16,110,-0.0453047273171179),(17,89,0.629627368999298),(17,96,-1.21063875240333),(17,99,-1.76677755058443),(17,101,2.50399792474136),(17,106,1.16934720908231),(17,107,0.882717368083743),(17,109,-1.91067232276376),(18,90,1.85122226630451),(18,91,1.22058778649251),(18,93,1.06762901699881),(18,99,-2.05641346476638),(18,102,0.964735862300485),(18,103,-0.778756065553758),(18,104,0.853831598864711),(18,110,-1.87505722220527),(18,111,-2.07283242286447),(18,116,-0.185476241340373),(18,117,1.01611377300333),(18,118,2.95568712424085),(19,87,-4.30729087191382),(19,89,-1.150669881283),(19,93,2.09105197302164),(19,95,1.78983428449355),(19,101,0.899441511276589),(19,105,0.184850611896115),(19,115,-1.27842036194952),(20,88,-1.5363017670217),(20,101,-0.096621601001007),(20,103,-3.34203619495224),(20,104,-0.595385601367229),(20,105,1.65890987884152),(20,106,2.40441602832118),(20,111,-0.910061952574236),(20,116,-1.71492660298471),(21,86,1.8099765007477),(21,87,-1.72202215643788),(21,94,-3.03138828699606),(21,96,-1.51959288308359),(21,101,1.01698355052339),(21,102,-0.398892178106021),(21,105,-1.20516067995239),(21,107,2.27634510330515),(21,108,-2.75577562791833),(22,86,-0.824274422437208),(22,88,0.876827295754875),(22,91,-1.41711172826319),(22,92,-1.21137119663076),(22,93,1.82235175634022),(22,98,-1.71787163914914),(22,106,-0.378200628681295),(22,115,0.461333048493912),(22,117,2.92329172643208),(23,85,1.64160588396863),(23,86,-1.48344370860927),(23,88,0.320352793969543),(23,90,0.65126499221778),(23,97,-1.33104953154088),(23,104,-1.63405255287332),(23,112,-1.28681295205542),(23,114,0.95600756859035),(23,115,-0.257805108798486),(23,116,2.37066255684072),(24,89,1.36069826349681),(24,90,-1.03088473158971),(24,91,-2.12257759331034),(24,101,1.2325510422071),(24,107,1.24217963194678),(24,108,-0.411740470595416),(24,110,0.923093356120487),(24,112,-1.90934476760155),(25,90,2.57861568041017),(25,92,0.54193243202002),(25,94,-0.297128208258309),(25,98,-0.623569444868313),(25,105,-1.4983520004883),(25,108,1.93311868648335),(25,109,-0.759971922971282),(25,115,-0.915646839808344),(26,85,-2.08526871547594),(26,87,-0.554124576555681),(26,89,-0.259178441724906),(26,95,0.904400769066439),(26,98,1.07632679219947),(26,100,0.884578997161779),(26,101,-0.591555528427992),(26,102,3.03082369457076),(26,103,0.495315408795434),(26,104,-2.15973387859737),(26,107,0.99610889004181),(26,109,0.529587694936979),(26,112,0.315881832331309),(26,113,-2.34846034119694),(26,117,-2.47772148808252),(27,85,0.639820551164281),(27,87,0.227530747398297),(27,94,0.128040406506546),(27,100,0.350047303689688),(27,102,-3.09961241492965),(27,103,-2.97311319315165),(27,104,-2.33532212286752),(27,105,0.903256324961089),(27,108,1.53897213660085),(27,110,-1.52447584459975),(27,114,2.74634540849025),(28,87,-0.693899349955748),(28,88,-0.756523331400494),(28,97,0.269554734946745),(28,99,-1.6593829157384),(28,104,-1.87662892544328),(28,113,-0.161351359599597),(28,114,2.45588549455245),(29,88,-0.0146794030579548),(29,91,1.87592699972533),(29,102,-0.861323892941069),(29,105,0.807809686574908),(29,116,0.532898953215125),(30,95,0.227332377086703),(30,96,-1.80674153874325),(30,99,-1.10074159978027),(30,101,-2.39345988341929),(30,104,-0.97308267464217),(30,109,2.41294595171972),(30,110,2.4281594286935),(30,114,1.71216467787713),(30,118,3.32441175572985),(31,85,-2.48834192938017),(31,92,0.310556352427747),(31,94,-1.99981688894314),(31,96,3.34508804589984),(31,99,3.97930845057527),(31,103,-0.457167271950438),(31,107,0.10620441297647),(31,108,0.010162663655507),(31,109,-1.24561296426283),(31,111,0.0841547898800623),(31,112,-0.307931760612812),(31,117,1.55540635395367),(32,86,0.802484206671346),(32,87,-1.94000061037019),(32,89,-0.985015411847285),(32,92,0.28514969328898),(32,98,1.72983489486373),(32,99,-1.27558214056825),(32,104,-0.707922605059969),(32,106,-1.09186071352275),(32,109,0.260338145084994),(32,116,1.84984893337809),(32,118,1.53852961821345),(33,96,-1.37183751945555),(33,98,1.58104190191351),(33,108,-1.75225074007385),(33,110,-1.92796105838191),(33,111,-2.04268013550218),(33,114,3.13365581225013),(34,85,2.99736014893033),(34,90,-1.36103396710105),(34,99,-0.296945097201453),(34,104,-1.64386425366985),(34,109,-0.482909634693442),(35,86,-0.612811670278024),(35,87,-0.879879146702475),(35,97,-1.62045655690176),(35,98,-0.893887142551958),(35,100,2.50291451765496),(35,104,2.12741477706229),(35,107,-0.065080721457564),(35,109,-1.37998596148564),(35,110,-1.08723715933714),(35,112,0.225836970122379),(36,85,0.703756828516495),(36,87,-2.14059877315592),(36,90,1.54232917264321),(36,91,2.0387127292703),(36,104,2.11569566942351),(36,107,1.50709555345317),(36,109,-0.319986571855831),(36,112,-0.334543900875881),(36,115,1.87345500045778),(36,117,0.816934720908231),(36,118,3.83062227240822),(37,85,0.382061220130009),(37,86,0.0549333170567952),(37,87,1.43505661183508),(37,91,-1.29779961546678),(37,99,-0.532944730979339),(37,105,1.03469954527421),(37,111,1.50907925656911),(37,112,-0.500045777764214),(37,118,-0.581942197943052),(38,87,0.35216834009827),(38,90,1.70300912503433),(38,103,0.817011017181921),(38,105,-1.11868648335215),(38,106,0.367824335459456),(38,111,0.233130893887143),(38,115,-2.07188634907071),(39,87,-1.27077547532579),(39,89,-1.8557542649617),(39,91,-0.1136051515244),(39,94,-2.04744102298044),(39,97,0.910931730094302),(39,98,1.85209204382458),(39,107,-2.92590105899228),(39,108,0.414639728995636),(39,109,0.794534134952849),(39,111,0.393520920438246),(39,113,1.77585680715354),(39,116,-1.10332041383099),(39,118,-2.25801873836482),(40,88,1.94402905362102),(40,92,-1.23523667104099),(40,99,1.03648487807855),(40,104,0.654667806024354),(40,110,-1.51057466353343),(40,116,-0.739143040253914),(40,118,1.02687154759362),(41,88,-1.6560106204413),(41,93,1.98042237617115),(41,96,1.67729728080081),(41,97,-0.556276131473739),(41,100,0.425580614642781),(41,101,2.44701986754967),(41,104,0.202154606769005),(41,105,2.28872035889767),(41,106,-0.790612506485183),(41,107,-0.312051759392071),(41,109,-1.24713888973663),(41,110,-2.04960783715323),(41,111,-2.02156132694479),(41,112,-1.27581102938932),(42,85,1.3256782738731),(42,86,-0.0960112308114872),(42,87,0.784218878749962),(42,99,1.57208471938231),(42,100,1.65285195471053),(42,103,-0.2150028992584),(42,109,-2.95797601245155),(42,113,-1.55824457533494),(43,85,1.68825342570269),(43,88,2.25920896023438),(43,89,0.176107058931242),(43,93,-1.50021362956633),(43,97,-1.49420148319956),(43,98,-0.80520035401471),(43,101,1.87192907498398),(43,102,1.10615863521226),(43,103,-0.191503646961882),(43,105,-0.64813684499649),(43,110,0.556291390728477),(43,112,2.88996551408429),(43,114,-1.86605426190985),(43,116,-1.14963225196081),(44,89,0.32044434949797),(44,98,-1.07715079195532),(44,99,2.4591204565569),(45,87,-3.59796441541795),(45,88,-1.84078493606372),(45,90,0.505401776177251),(45,91,1.86965544602802),(45,95,0.82898953215125),(45,98,-0.850428785058138),(45,108,1.64662617877743),(45,109,2.67232276375622),(45,112,-1.24752037110508),(45,115,0.339426862392041),(46,85,0.30802331614124),(46,89,0.440916165654469),(46,91,-1.79071932126835),(46,94,-0.35163426618244),(46,97,0.393749809259316),(46,100,1.66714987640004),(46,101,-0.608294930875576),(46,108,-2.25112155522324),(46,112,-0.572252571184423),(47,86,-2.34722434156316),(47,91,2.46252327036348),(47,92,-0.353114413892026),(47,94,-2.33336893826106),(47,95,-0.533845027008881),(47,100,0.00732444227423933),(47,101,-2.47962889492477),(47,104,4.22147282326731),(47,105,1.79897457808161),(47,108,-2.04268013550218),(47,112,-1.61215552232429),(47,114,-1.86315500350963),(47,118,1.53018280587176),(48,86,3.83361308633686),(48,91,0.467848750267037),(48,98,0.673787652211066),(48,99,2.97079378643147),(48,100,2.10089419232765),(48,103,-2.1879787591174),(48,105,-3.93057039094211),(48,106,-4.36753440961943),(48,111,-2.38618121890927),(48,115,2.39974669637135),(49,87,-2.38644062623981),(49,89,0.216345713675344),(49,93,0.302941984313486),(49,94,1.27086703085421),(49,95,2.32091738639485),(49,102,0.949980162968841),(49,113,-1.73125400555437),(49,114,1.99809259315775),(50,89,-0.0605639820551166),(50,105,0.461531418805506),(50,107,-2.10475478377636),(51,87,-0.702398754844813),(51,92,-0.15576647236549),(51,97,-2.66301461836604),(51,98,-0.988158818323313),(51,103,-2.20906704916532),(51,106,-0.818994720297861),(51,112,0.507217627491073),(51,118,-0.907650990325632),(52,89,1.26290169988098),(52,97,-1.04582354197821),(52,106,-1.61160618915372),(52,110,1.02824488052004),(52,111,2.05514694662313),(52,113,4.99314859462264),(52,114,0.0269478438673055),(52,118,-0.190313425092318),(53,88,-0.54399243140965),(53,90,1.36020996734519),(53,92,-0.427655873287149),(53,94,0.917691579943236),(53,104,-1.52290414136174),(53,105,-0.602374340037233),(53,109,1.38874477370525),(54,85,0.337229529709769),(54,91,0.718253120517594),(54,94,2.00993377483444),(54,96,-1.20738853114414),(54,111,0.277947325052644),(54,112,0.877651295510727),(54,113,-2.46678060243538),(54,118,-0.709784234138005),(55,87,2.10219122898038),(55,95,1.97920163579211),(55,107,-1.92075869014557),(55,110,1.3708151493881),(55,117,0.507766960661642),(56,107,0.681707205420087),(56,111,1.68301950132756),(56,113,-4.33436078981903),(56,114,-1.162434766686),(57,87,2.97412030396435),(57,90,-2.30475783562731),(57,91,1.6178624835963),(57,92,-0.0512405774101992),(57,93,1.85842463454085),(57,94,-1.47537156285287),(57,95,-0.784249397259438),(57,96,-0.776696066164129),(57,100,3.18967253639332),(57,102,0.22080141605884),(57,103,-1.09317300943022),(57,115,-0.121463667714469),(58,86,-0.150593585009308),(58,87,0.366252632221442),(58,89,2.87905514694662),(58,90,1.01054414502396),(58,95,-1.10194708090457),(58,96,0.403912472914823),(58,101,2.11684011352886),(58,103,1.53158665730766),(58,109,0.640964995269631),(58,110,-0.570497756889554),(58,113,-1.05551316873684),(58,114,-0.916013061922056),(58,115,0.761452070680868),(58,118,-5.37102877895444),(59,85,-2.23731192968535),(59,86,-1.68958098086489),(59,90,0.663655507065035),(59,91,0.746330149235511),(59,93,0.997238074892422),(59,97,2.07593005157628),(59,98,2.48344370860927),(59,100,1.71190527054659),(59,102,4.36448255867183),(59,112,-1.07821893978698),(59,114,-0.442091128269295),(60,85,0.221304971465194),(60,87,0.695760979033784),(60,90,-1.01432844019898),(60,91,-1.50318918424024),(60,96,0.80687887203589),(60,100,0.926740318002869),(60,101,-1.42176580095828),(60,105,-1.70056764427625),(60,107,-1.50070192571795),(60,109,-1.24622333445235),(60,110,-2.30933561204871),(60,114,0.236823633533738),(61,89,0.391674550614948),(61,94,-2.49215674306467),(61,96,3.0852534562212),(61,98,-1.90282906582842),(61,100,-0.575426496169927),(61,102,1.9266335032197),(61,103,-1.52020325327311),(61,114,-0.840998565630055),(61,115,-1.04129154332102),(62,93,-1.30576494644002),(62,95,1.89970091860714),(62,107,1.41087069307535),(62,109,1.56346324045534),(62,110,-0.304574724570452),(62,111,-1.42664876247444),(63,87,1.02201910458693),(63,90,-0.454695272682882),(63,93,1.54347361674856),(63,97,2.56503494369335),(63,100,-2.42545854060488),(63,103,1.80553605761895),(63,104,-0.622348704489273),(63,108,1.64265877254555),(63,111,0.680791650135807),(63,114,1.56990264595477),(63,117,2.3618579668569),(64,87,-1.10309152500992),(64,94,-0.517044587542344),(64,99,-2.11990722373119),(64,110,2.11828974272897),(64,112,-0.894222846156194),(64,116,-0.493285927915281),(65,87,0.214743491927854),(65,88,0.619113742484817),(65,90,-0.0259407330545976),(65,97,1.32546464430677),(65,99,-0.332178716391491),(65,107,2.68338572344127),(65,110,1.15825373088778),(65,111,-0.0235297708059938),(65,114,-0.663380840479751),(65,116,-0.773354289376507),(65,117,2.93870357371746),(66,85,1.25069429609058),(66,102,0.530854213080233),(66,105,0.0352488784447768),(66,108,2.08641315958129),(66,111,-1.42884609515671),(66,115,0.335383159886471),(66,118,-0.929532761619922),(67,86,-1.80039368877224),(67,90,-0.258507034516434),(67,92,-2.06875820184942),(67,104,2.64812158574175),(67,109,0.472136600848414),(67,111,2.98182622760704),(68,87,0.806299020355846),(68,88,0.921826837977233),(68,90,-0.215063936277352),(68,93,1.52903836176641),(68,95,2.49337748344371),(68,96,-2.7709433271279),(68,97,-0.791238135929441),(68,103,-0.567949461348308),(68,107,-0.140690328684347),(68,112,-0),(68,114,-2.20885341959899),(69,87,-0.658116397595142),(69,88,-1.48039185766167),(69,92,-2.46429334391308),(69,94,0.121723075045015),(69,95,-0.32311471907712),(69,97,0.373378704184088),(69,108,-0.30306405835139),(69,113,-1.65436262092959),(69,114,-0.520615253151036),(69,118,1.87473677785577),(70,85,0.0152897732474746),(70,86,-1.75365459150975),(70,87,1.74805444502091),(70,90,2.52810754722739),(70,96,0.189748832667013),(70,97,-1.9834131900998),(70,99,-0.968138676107059),(70,105,-2.29114658040101),(70,107,-1.44262520218513),(70,109,-1.49067659535508),(70,110,-0.923871578112125),(70,111,-1.0330515457625),(71,85,0.895733512375256),(71,93,-0.371318704794458),(71,96,-2.73482467116306),(71,100,-1.98792992950224),(71,104,0.467696157719657),(71,106,2.08159123508408),(71,111,3.59836115604114),(71,113,2.16292306283761),(72,94,0.260811181981872),(72,96,-1.41215247047334),(72,99,-0.332819605090487),(72,110,-0.184636982329783),(72,112,1.49346903897214),(72,114,2.11450544755394),(72,115,-1.25057222205267),(72,116,0.170583208716086),(73,88,0.789330729087191),(73,94,0.0175481429486984),(73,99,-2.00560014648885),(73,100,-2.47375408185064),(73,106,0.349055452131718),(73,110,3.56234931485946),(73,115,-2.32003234962004),(74,90,-0.878307443464461),(74,94,1.38821069978942),(74,99,2.10165715506455),(74,102,-0.522461622974334),(74,106,2.04916531876583),(74,107,-0.315073091830195),(74,110,-0.482787560655538),(74,113,-2.491729483932),(74,116,1.52471999267556),(75,85,3.48480178228095),(75,86,0.664693136387219),(75,93,-3.33014923551134),(75,98,3.22298348948637),(75,103,0.0583971678823206),(75,105,0.876766258735923),(75,111,1.90867336039308),(75,117,0.581438642536698),(76,86,-0.379589220862453),(76,89,-1.21951963866085),(76,92,-0.722647785882138),(76,94,-0.353328043458358),(76,99,-0.0566423535874508),(76,101,-0.86725974303415),(76,103,0.609454634235664),(76,106,-0.0820337534714803),(76,110,-0.402600177007355),(76,113,-1.83736686300241),(77,88,1.73256630146184),(77,91,0.232749412518693),(77,93,-0.306634723960082),(77,98,2.17082735679189),(77,101,0.698339793084506),(77,102,1.06239509262368),(77,103,1.80875576036866),(77,104,2.28370006408887),(77,105,-0.878627887813959),(77,109,-1.10377819147313),(78,88,-0.335917233802301),(78,93,3.05255287331767),(78,94,1.52343821527757),(78,101,-0.601947080904569),(78,104,-2.4571520126957),(78,110,-3.29596850489822),(78,114,-0.481048005615406),(78,116,-0.00572222052674942),(78,117,-2.23747978148747),(78,118,-1.70081179235206),(79,87,-1.90801721243934),(79,92,-2.17284157841731),(79,94,2.01251258888516),(79,107,2.24210333567309),(79,108,2.35604419080172),(79,114,-0.584505752739036),(79,118,1.63214514603107),(80,87,0.247337260048219),(80,88,1.97508163701285),(80,91,1.38189336832789),(80,99,0.94000061037019),(80,101,1.67053743095187),(80,107,2.27613147373882),(80,113,0.968428601947081),(81,85,-1.11682485427412),(81,86,-1.83715323343608),(81,90,-2.92529068880276),(81,93,0.694524979400006),(81,96,-1.39226966154973),(81,97,-1.10209967345195),(81,106,2.23685415204321),(81,107,0.831629383220923),(81,110,-2.44895779290139),(81,115,-2.20976897488327),(82,86,0.329355754264962),(82,92,-2.05351420636616),(82,110,0.30581072420423),(82,112,-0.80405590990936),(83,87,0.185628833887753),(83,91,-1.15092928861354),(83,93,1.61084322641682),(83,101,0.354213080233162),(83,103,-1.78136539811396),(83,105,2.52406384472182),(83,108,-0.778984954374828),(84,85,-0.660069582201605),(84,86,0.152500991851558),(84,89,-0.558091982787561),(84,95,-1.66165654469436),(84,99,0.591143528550066),(84,104,2.21137119663076),(84,111,-4.48583941160314),(84,113,-2.85032197027497),(84,114,1.86278878139592),(35,105,2.00180059205908)]
orgname='BHNEAT_6_9'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()