edge = [(0,85,-1.67744987334819),(0,89,2.51384014404736),(0,90,1.28032776879177),(0,93,0.815912350840785),(0,98,0.530610065004425),(0,101,-3.86420789208655),(0,105,2.28353221228675),(0,108,-1.85132908108768),(0,113,1.29378643147069),(0,114,-2.53523361919004),(0,117,-1.16206854457228),(0,118,1.14297921689505),(1,86,1.60811181981872),(1,92,2.42814416943876),(1,98,1.58261360515152),(1,102,-0.283486434522538),(1,104,-1.89242225409711),(1,107,-0.194082461012604),(1,108,-4.16814172795801),(1,109,-2.00338755455184),(1,113,-0.544419690542314),(2,87,-2.01426740318003),(2,88,1.25820184942167),(2,100,-0.262184514908292),(2,106,-2.23116245002594),(2,108,-0.224646748252816),(2,110,0.901577806939909),(2,113,-4.13034455397198),(2,118,1.48835718863491),(3,89,1.01872310556352),(3,92,0.00093081453901811),(3,97,3.1595049897763),(3,99,3.30933561204871),(3,101,-0.228186895352031),(3,103,1.82868434705649),(3,105,3.87160863063448),(3,108,2.29827265236366),(3,109,-4.9310892056032),(3,111,2.11122470778527),(3,112,1.43145542771691),(3,116,-0.399914548173467),(4,90,-0.958342234565264),(4,91,-0.13823358867153),(4,97,1.32030701620533),(4,99,-0.943510238959929),(4,101,-2.48492385631886),(4,108,3.79978331858272),(4,113,-1.04350413525803),(4,118,0.78896450697348),(5,86,0.659199804681539),(5,87,2.82743308816797),(5,89,-0.896069215979492),(5,92,0.390697958311716),(5,93,1.12665181432539),(5,99,-2.42403942991424),(5,104,2.7473677785577),(5,114,0.0923947874385814),(5,118,-2.92738120670186),(6,89,-1.29601428266243),(6,92,-0.270012512588885),(6,94,-1.23378704184088),(6,100,3.5427259132664),(6,101,3.15781121250038),(6,103,2.15936765648366),(6,107,3.61532944730979),(6,110,0.751701406903287),(6,113,-1.04010132145146),(7,85,1.11598559526353),(7,86,1.87917722098453),(7,90,-0.713904232917264),(7,95,0.274971770378735),(7,99,-0.555009613330485),(7,100,-1.87887203588977),(7,104,0.0757011627552111),(7,106,1.54713583788568),(7,108,-1.24410229804376),(7,112,1.18321787163915),(7,116,-1.32343516342662),(8,92,2.65195165868099),(8,93,1.88834803308206),(8,95,2.15355388042848),(8,99,-0.32197027497177),(8,106,0.763893551438948),(8,107,0.0486007263405255),(8,115,2.03769035920286),(8,116,-2.32914212469863),(8,118,1.50860621967223),(9,85,0.954924161503952),(9,87,0.115787224951933),(9,98,-1.58401745658742),(9,101,0.396862697225868),(9,103,0.196768089846492),(9,105,-0.816904202398755),(9,106,-2.11157567064425),(9,113,0.704199346903897),(10,89,-1.72096926786096),(10,96,1.49182103946043),(10,106,3.09630115665151),(10,108,1.81954405346843),(10,109,-2.61415448469497),(10,111,-5.76415295876949),(10,112,-1.98393200476089),(10,114,0.856639301736503),(10,115,1.02781762138737),(10,116,1.56002990813929),(10,117,2.1607104709006),(11,89,-1.65898617511521),(11,97,-1.44000061037019),(11,105,0.0903347880489517),(11,112,2.03404339732047),(11,115,-1.03114413892026),(12,92,2.23773918881802),(12,93,-0.546555986205634),(12,94,2.5473036896878),(12,97,-3.70194097720267),(12,98,-1.76258125553148),(12,99,-1.54867702261422),(12,108,-3.15247047334208),(12,116,4.045777764214),(13,86,0.313852351451155),(13,87,-0.4127780999176),(13,90,-0.364284188360241),(13,99,-0.234138004699851),(13,102,2.68799401837214),(13,104,-0.774620807519761),(13,113,1.14726706747642),(13,116,-0.228156376842555),(13,118,-1.17053743095187),(14,90,-4.85178685872982),(14,93,1.76651814325388),(14,95,-1.32068849757378),(14,102,-3.02620014038514),(14,104,-1.10080263679922),(14,106,-0.254127628406629),(14,109,-0.817209387493515),(14,110,2.6247291482284),(14,111,-1.02568132572405),(15,85,-0.432645649586474),(15,92,0.344676046021912),(15,99,-0.360347300637837),(15,101,0.464873195593127),(15,104,0.210318308053835),(15,108,-2.70395519882809),(15,117,-1.1393475142674),(16,86,0.123294778283029),(16,87,-4.045777764214),(16,88,3.01470992156743),(16,90,0.187276833399457),(16,91,2.05801568651387),(16,95,1.63406781212806),(16,97,1.35032197027497),(16,98,0.382930997650075),(16,99,2.98286385692923),(16,101,0.848384044923246),(16,108,1.87275307473983),(16,110,1.97051911984619),(17,89,3.54269539475692),(17,96,0.654881435590686),(17,99,0.571016571550645),(17,101,0.505340739158299),(17,106,0.600405896176031),(17,107,0.00897244178594314),(17,109,2.29102450636311),(18,90,-1.63971373638112),(18,91,1.28727072969756),(18,93,0.103396710104679),(18,99,-1.36059144871364),(18,102,-0.547837763603626),(18,103,-1.39062166203803),(18,104,2.22663045136875),(18,110,-0.17421491134373),(18,111,0.00296029541917164),(18,116,-1.56590472121342),(18,117,-0.602893154698324),(18,118,-0.752769554734947),(19,87,-0.0474410229804376),(19,89,-0.583712271492661),(19,93,-0.597094637897885),(19,95,-1.93906979583117),(19,101,1.49752800073244),(19,105,0.0302743614001892),(19,115,-2.46220282601398),(20,88,4.04045228431043),(20,101,0.767815179906613),(20,103,3.36722922452467),(20,104,-0.392391735587634),(20,105,2.87885677663503),(20,106,0.351207007049775),(20,111,0.063249610889004),(20,116,1.32052064577166),(21,86,-1.14528336436048),(21,87,-1.36922818689535),(21,94,-2.01260414441359),(21,96,3.09434797204505),(21,101,1.62216559343242),(21,102,-2.26250495925779),(21,105,-1.88206122013001),(21,107,1.62988677632984),(21,108,0.101855525376141),(22,86,2.67802972502823),(22,88,-0.552201910458693),(22,91,2.48101748710593),(22,92,-3.78217413861507),(22,93,0.435819574571978),(22,98,-2.37600329599902),(22,106,-1.08137760551775),(22,115,-2.3581652272103),(22,117,-1.75557725760674),(23,85,-0.280297250282296),(23,86,-2.22092349009674),(23,88,0.629123813592944),(23,90,-0.294549394207587),(23,97,-1.24866481521043),(23,104,0.705114902188177),(23,112,0.76609088412122),(23,114,0.5172276985992),(23,115,-1.06781212805567),(23,116,-3.45677053132725),(24,89,-2.58290353099155),(24,90,-0.949324015015107),(24,91,-0.00244148075807978),(24,101,0.711447492904446),(24,107,-0.642445142979217),(24,108,0.186040833765679),(24,110,2.54332102420118),(24,112,1.73448896755882),(25,90,-0.101672414319285),(25,92,1.94054994354076),(25,94,-2.57487716299936),(25,98,-0.843806268501846),(25,105,0.140263069551683),(25,108,-0.4338206122013),(25,109,-1.95081942197943),(25,115,-1.43377483443709),(26,85,0.185079500717185),(26,87,-1.71369060335093),(26,89,-1.65250099185156),(26,95,3.41431928464614),(26,98,0.00886562700277724),(26,100,-0.876110110782189),(26,101,-1.46819971312601),(26,102,2.68466750083926),(26,103,-1.08442945646535),(26,104,1.61655018768883),(26,107,0.64981536301767),(26,109,3.14777062288278),(26,112,1.47968993194372),(26,113,-1.79433576464125),(26,117,-1.11804559465316),(27,85,-3.15439313943907),(27,87,-1.58473464156011),(27,94,-2.2405011139256),(27,100,0.915738395336772),(27,102,0.97354045228431),(27,103,-0.122455519272439),(27,104,-1.27765739921262),(27,105,-0.348460341196936),(27,108,-2.09311197241127),(27,110,2.48115482039857),(27,114,2.5926847132786),(28,87,4.26055177465133),(28,88,-4.09471419415876),(28,97,-1.36173589281899),(28,99,-0.464278084658345),(28,104,1.54197820978423),(28,113,0.144138920255135),(28,114,-3.38619647816401),(29,88,1.69252601702933),(29,91,-0.829920346690268),(29,102,2.78724021118809),(29,105,2.47215186010315),(29,116,0.952070680867947),(30,95,-1.12186040833766),(30,96,0.407376323740348),(30,99,-0.910748619037446),(30,101,-2.85489974669637),(30,104,-3.9669484542375),(30,109,-1.80262153996399),(30,110,-1.7735526596881),(30,114,-0.964964751121555),(30,118,1.89809869685965),(31,85,0.988174077578051),(31,92,1.04338206122013),(31,94,1.61426129947813),(31,96,-2.2546769615772),(31,99,-0.182805871761223),(31,103,0.284569841608936),(31,107,0.373241370891446),(31,108,2.27898495437483),(31,109,-1.58922086245308),(31,111,4.2609027375103),(31,112,0.0457014679403061),(31,117,-0.389767143772698),(32,86,0.668889431440168),(32,87,-0.30626850184637),(32,89,1.09360026856288),(32,92,-3.52760399182104),(32,98,1.12041077913755),(32,99,-2.04037598803674),(32,104,1.43943601794488),(32,106,1.57271034882656),(32,109,0.00779747917111728),(32,116,-2.41259498886074),(32,118,1.18024231696524),(33,96,1.34456923123875),(33,98,0.399212622455519),(33,108,-0.466551713614307),(33,110,-1.24217963194678),(33,111,0.775749992370373),(33,114,-1.60625019074068),(34,85,3.21137119663076),(34,90,1.64046143986328),(34,99,-3.15614795373394),(34,104,2.76155888546403),(34,109,-1.62750633259072),(35,86,0.76487014374218),(35,87,-1.67137668996246),(35,97,0.634479812005982),(35,98,2.30155339213233),(35,100,2.5994293038728),(35,104,0.653294473097934),(35,107,-1.03845332193976),(35,109,2.44109927671133),(35,110,-2.37594225898007),(35,112,2.07220679342021),(36,85,-5.10766930143132),(36,87,-0.0236060670796838),(36,90,1.58688619647816),(36,91,0.0321970274971766),(36,104,1.04770043031098),(36,107,-1.43366801965392),(36,109,0.156025879696036),(36,112,-0.493011261329997),(36,115,-2.70668660542619),(36,117,-2.56222724082156),(36,118,1.46459852900784),(37,85,3.35784478286081),(37,86,3.30599383526109),(37,87,2.09601123081149),(37,91,-3.23274941251869),(37,99,-1.08151493881039),(37,105,-3.83841975157933),(37,111,2.08815271462142),(37,112,1.06543168431654),(37,118,0.00602740562150945),(38,87,1.11268959624012),(38,90,3.34115115817743),(38,103,0.332605975524155),(38,105,2.16983550523392),(38,106,1.21211890011292),(38,111,0.0651264992217782),(38,115,-0.211951048310801),(39,87,1.70416882839442),(39,89,1.74054689168981),(39,91,2.43270668660543),(39,94,1.7688528092288),(39,97,-3.54789880062258),(39,98,-1.27610095522935),(39,107,-0.814859462263863),(39,108,2.53933835871456),(39,109,2.67157506027406),(39,111,-0.438032166508988),(39,113,-1.12111270485549),(39,116,-2.45780816064943),(39,118,1.00761436811426),(40,88,0.307977538377026),(40,92,1.98301644947661),(40,99,2.12218085268715),(40,104,-1.42921231727042),(40,110,-3.27225562303537),(40,116,0.426053651539659),(40,118,4.83489486373486),(41,88,-2.09051789910581),(41,93,-1.06775109103671),(41,96,0.321100497451704),(41,97,-1.75763725699637),(41,100,-1.229819635609),(41,101,2.74541459395123),(41,104,4.06106753746147),(41,105,0.189962462233344),(41,106,1.62134159367656),(41,107,0.394528031250954),(41,109,0.86474196600238),(41,110,-1.4417706839198),(41,111,-4.32456434827723),(41,112,-0.11024811548204),(42,85,0.92992950224311),(42,86,2.39254432813501),(42,87,-2.51094088564715),(42,99,-1.32953886532182),(42,100,-1.08801538132878),(42,103,-2.00857570116276),(42,109,-0.91170995208594),(42,113,-1.38161870174261),(43,85,0.0806146427808466),(43,88,-0.669347209082308),(43,89,0.906567583239235),(43,93,0.0155949583422343),(43,97,1.83803827021088),(43,98,-0.768883327738273),(43,101,-1.54026917325358),(43,102,0.361415448469497),(43,103,-0.3217413861507),(43,105,-0.568788720358898),(43,110,1.28125858333079),(43,112,-0.519730216376232),(43,114,-0.685598315378277),(43,116,0.206152531510361),(44,89,2.11745048371837),(44,98,1.120792260506),(44,99,-1.631275368511),(45,87,-0.850001525925474),(45,88,2.37580492568743),(45,90,1.5126499221778),(45,91,2.23931089205603),(45,95,-2.23662526322214),(45,98,-0.71248512222663),(45,108,-1.44680623798334),(45,109,1.04759361552782),(45,112,-1.5540940580462),(45,115,-3.56480605487228),(46,85,0.503036591692861),(46,89,0.981688894314402),(46,91,-0.312250129703665),(46,94,-0.607684560686056),(46,97,2.66859950560015),(46,100,-1.80568865016633),(46,101,-1.56382946256905),(46,108,0.168233283486435),(46,112,0.734168523209326),(47,86,0.637028107547227),(47,91,0.832377086703085),(47,92,-0.044572283089694),(47,94,0.600177007354961),(47,95,-0.238502151554918),(47,100,-2.08952604754784),(47,101,-0.0694296090578934),(47,104,2.50976592303232),(47,105,-0.286049989318521),(47,108,2.80503250221259),(47,112,0.613940855128635),(47,114,-2.5045777764214),(47,118,-0.688894314401685),(48,86,2.79911191137425),(48,91,-0.214682454908902),(48,98,0.294137394329661),(48,99,-0.0671712393566698),(48,100,1.97204504531999),(48,103,-0.810724204229865),(48,105,0.646824549089022),(48,106,1.059755241554),(48,111,-2.43081453901791),(48,115,1.39645069734794),(49,87,2.24954985198523),(49,89,0.347834711752678),(49,93,-2.59372234260079),(49,94,1.14192632831812),(49,95,1.11024811548204),(49,102,2.66435743278298),(49,113,-2.43125705740532),(49,114,2.34127323221534),(50,89,-0.212240974150822),(50,105,2.79222998748741),(50,107,-0.491775261696219),(51,87,-1.25133518478957),(51,92,0.687353129673147),(51,97,-3.1825159459212),(51,98,-4.58705404828028),(51,103,0.785012359996338),(51,106,1.98263496810816),(51,112,-2.22380748924223),(51,118,-1.83533738212226),(52,89,-1.12280648213141),(52,97,-0.391628772850734),(52,106,-1.79036835840938),(52,110,-4.58586382641072),(52,111,0.444227423932615),(52,113,-1.98286385692923),(52,114,-2.35837885677663),(52,118,-1.37412640766625),(53,88,0.38975188451796),(53,90,-0.390865810113834),(53,92,-1.32490005188147),(53,94,0.859477523117771),(53,104,-0.376216925565355),(53,105,0.441206091494491),(53,109,2.4413281655324),(54,85,-3.09590441602832),(54,91,-2.47306741538743),(54,94,1.46426282540361),(54,96,1.43658253730888),(54,111,0.453199865718558),(54,112,-2.89031647694327),(54,113,1.22595904416028),(54,118,0.19632557145909),(55,87,-0.251380962553789),(55,95,0.241325113681448),(55,107,-0.880840479750969),(55,110,2.07060457167272),(55,117,2.17918942838832),(56,107,3.21843623157445),(56,111,-0.733130893887143),(56,113,1.89268166142766),(56,114,1.22045045319987),(57,87,1.37510299996948),(57,90,2.82909634693442),(57,91,0.172582171086764),(57,92,2.69191564683981),(57,93,-1.08796960356456),(57,94,-2.09990234076968),(57,95,-1.51516769920957),(57,96,1.51300088503678),(57,100,1.14935758537553),(57,102,2.42927335428938),(57,103,-0.255592516861476),(57,115,1.10103152562029),(58,86,2.02011169774468),(58,87,0.0141148106326487),(58,89,1.88094729453413),(58,90,-2.56897183141575),(58,95,1.10345774712363),(58,96,-0.797753837702567),(58,101,0.612903225806452),(58,103,-2.20960112308115),(58,109,-2.39761040070803),(58,110,0.189489425336467),(58,113,0.814767906735435),(58,114,2.05351420636616),(58,115,-0.34171575060274),(58,118,-0.192419202246162),(59,85,-1.24970244453261),(59,86,-1.22913296914579),(59,90,-1.31997131260109),(59,91,1.51852473525193),(59,93,0.0722983489486374),(59,97,0.803994872890408),(59,98,0.101657155064547),(59,100,1.51577806939909),(59,102,0.742820520645772),(59,112,1.51379436628315),(59,114,2.21340067751091),(60,85,2.58465834528642),(60,87,-2.29551072725608),(60,90,1.34299752800073),(60,91,3.81832331308939),(60,96,1.13686025574511),(60,100,2.35480819116794),(60,101,-1.40955839716788),(60,105,-3.71524704733421),(60,107,0.43870357371746),(60,109,2.14145329142125),(60,110,0.943327127903073),(60,114,-1.69545579393902),(61,89,2.50462355418561),(61,94,0.424192022461623),(61,96,4.988235114597),(61,98,-3.54663228247932),(61,100,-1.26132999664296),(61,102,-1.26461073641163),(61,103,1.73780022583697),(61,114,0.30726035340434),(61,115,-1.34998626667074),(62,93,-2.03688161870174),(62,95,-0.519501327555162),(62,107,-0.607318338572344),(62,109,-0.832972197637868),(62,110,2.15109714041566),(62,111,-2.35769219031343),(63,87,0.771462141788995),(63,90,-2.95614490188299),(63,93,0.0655384990997043),(63,97,-1.23924985503708),(63,100,2.10277108066042),(63,103,0.540849024933622),(63,104,-1.23618274483474),(63,108,1.84072389904477),(63,111,-2.39646595660268),(63,114,2.52543717764824),(63,117,2.38604388561663),(64,87,0.54269539475692),(64,94,3.77057710501419),(64,99,-3.15555284279916),(64,110,-2.81298257393109),(64,112,-0.327082125309),(64,116,0.141270180364391),(65,87,0.958021790215766),(65,88,0.0375072481460006),(65,90,-0.0240333262123478),(65,97,-0.398220770897549),(65,99,-2.30664998321482),(65,107,1.40649128696554),(65,110,-3.16615802484207),(65,111,0.356074709311197),(65,114,-1.48928800317392),(65,116,0.800637836848048),(65,117,1.3052766502884),(66,85,2.68903164769433),(66,102,-1.97105319376202),(66,105,0.956450086977752),(66,108,0.711020233771783),(66,111,2.39031647694327),(66,115,-3.1041291543321),(66,118,-0.492431409649953),(67,86,0.159611804559465),(67,90,0.0824610126041445),(67,92,0.333429975280007),(67,104,1.36710715048677),(67,109,-3.09572130497147),(67,111,3.99206518753624),(68,87,1.31307412945952),(68,88,-2.3970763267922),(68,90,0.85171056245613),(68,93,1.25804925687429),(68,95,0.0823389385662404),(68,96,2.71857356486709),(68,97,-0.871959593493454),(68,103,-1.77144688253426),(68,107,-2.42393261513108),(68,112,-2.7325510422071),(68,114,-1.44215216528825),(69,87,1.87530137028108),(69,88,1.87551499984741),(69,92,0.139851069673757),(69,94,-1.14578691976684),(69,95,-2.5350962858974),(69,97,0.99763481551561),(69,108,1.00558488723411),(69,113,0.0777153843806266),(69,114,2.47668385876034),(69,118,-2.13745536667989),(70,85,-1.58917508468886),(70,86,-0.420987578966643),(70,87,0.5038148136845),(70,90,0.739188818018128),(70,96,2.18703268532365),(70,97,-2.40601825006867),(70,99,0.735023041474654),(70,105,-0.65591906491287),(70,107,-2.52572710348827),(70,109,0.698034607989746),(70,110,2.4664296395764),(70,111,-1.8211004974517),(71,85,1.38677632984405),(71,93,0.168095950193793),(71,96,0.883754997405927),(71,100,1.77668080690939),(71,104,1.50227362895596),(71,106,-0.875347148045289),(71,111,2.39834284493545),(71,113,1.41140476699118),(72,94,-1.08803064058351),(72,96,-0.10544145023957),(72,99,0.753639332255012),(72,110,2.22968230231635),(72,112,-0.884121219519639),(72,114,0.535019989623707),(72,115,2.41744743186743),(72,116,3.62413403729362),(73,88,3.03740043336283),(73,94,0.381542405468917),(73,99,2.14560380870998),(73,100,0.446409497360149),(73,106,1.92625202185125),(73,110,-1.77488021485031),(73,115,-0.448774681844539),(74,90,2.15529343546861),(74,94,-0.190694906460769),(74,99,-2.48649555955687),(74,102,1.88521988586077),(74,106,-0.699163792840358),(74,107,-3.04724265266884),(74,110,0.43443098239082),(74,113,-0.722724082155828),(74,116,1.09530930509354),(75,85,-1.59489730521561),(75,86,-0.206381420331431),(75,93,1.0742515335551),(75,98,4.7961210974456),(75,103,0.0398571733756521),(75,105,-1.28119754631184),(75,111,-0.53857539597766),(75,117,0.854197820978423),(76,86,0.355388042847987),(76,89,0.627414777062288),(76,92,0.171056245612964),(76,94,-4.18225653859066),(76,99,-1.19747001556444),(76,101,-1.64777062288278),(76,103,0.643894772179327),(76,106,-0.622974333933531),(76,110,0.743583483382671),(76,113,-1.05250709555345),(77,88,0.988906521805475),(77,91,-0.893307290871914),(77,93,-2.37487411114841),(77,98,-0.860271004364147),(77,101,-0.623035370952483),(77,102,2.24944303720206),(77,103,0.774636066774499),(77,104,-4.14296395764031),(77,105,2.53335673085727),(77,109,-0.15141758476516),(78,88,1.40768150883511),(78,93,0.951261940366833),(78,94,2.28087710196234),(78,101,0.950651570177313),(78,104,1.8618579668569),(78,110,0.122028260139775),(78,114,1.45207068086795),(78,116,0.0918607135227516),(78,117,-0.706427198095645),(78,118,2.86819055757317),(79,87,-1.43510238959929),(79,92,-2.52479628894925),(79,94,3.79128391369366),(79,107,-3.68886379589221),(79,108,2.28897976622822),(79,114,1.83411664174322),(79,118,-3.20099490340892),(80,87,-1.62543107394635),(80,88,1.19251075777459),(80,91,-1.97712637714774),(80,99,0.0712912381359292),(80,101,2.36376537369915),(80,107,-0.890072328867458),(80,113,1.88451796014283),(81,85,-0.835596789452803),(81,86,2.55102694784387),(81,90,-0.821497238074892),(81,93,0.266640217291788),(81,96,-0.899472029786065),(81,97,-0.656697286904508),(81,106,0.240028077028718),(81,107,-2.17209387493515),(81,110,-1.78800317392499),(81,115,1.5103610339671),(82,86,2.75771355327006),(82,92,-0.245826593829157),(82,110,2.98783837397382),(82,112,1.16888943144017),(83,87,-1.78701132236702),(83,91,0.836985381633961),(83,93,-1.04094058046205),(83,101,1.22986541337321),(83,103,1.65944395275735),(83,105,-1.24622333445235),(83,108,-2.61302529984436),(84,85,-0.0389416180913724),(84,86,-1.20664082766198),(84,89,-2.66631061738945),(84,95,0.635242774742881),(84,99,0.591143528550066),(84,104,2.3741874446852),(84,111,1.51242103335673),(84,113,2.44715720084231),(84,114,-2.16603595080416)]
orgname='BHNEAT_5_10'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()