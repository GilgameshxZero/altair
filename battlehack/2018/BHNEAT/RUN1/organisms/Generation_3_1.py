edge = [(0,85,2.27755058442946),(0,89,0.0574816125980406),(0,90,1.12498855555895),(0,93,-1.64340647602771),(0,98,-0.535782952360607),(0,101,-1.39335306863613),(0,105,-0.10406811731315),(0,108,0.164082766197699),(0,113,1.95753349406415),(0,114,3.41892757957701),(0,117,1.64853358561968),(0,118,-0.52630695516831),(1,86,-2.73596911526841),(1,92,1.59550767540513),(1,98,1.85438093203528),(1,102,-1.73494674520096),(1,104,1.72917874691),(1,107,2.80077517014069),(1,108,-2.18680379650258),(1,109,-1.24149296548357),(1,113,0.124088259529405),(2,87,-1.23908200323496),(2,88,2.5424054689169),(2,100,1.41283913693655),(2,106,0.75991088595233),(2,108,-1.50405896176031),(2,110,-1.81527146214179),(2,113,0.451857051301614),(2,118,-0.509887997070223),(3,89,-0.0844447157200842),(3,92,2.38084047975097),(3,97,1.32877590258492),(3,99,-1.2445600756859),(3,101,-2.35418256172369),(3,103,-1.77120273445845),(3,105,2.88753929258095),(3,108,-2.41500595110935),(3,109,-1.16472365489669),(3,111,-0.0887783440656759),(3,112,0.596087527085177),(3,116,-0.934141056550798),(4,90,-0.423123874629963),(4,91,-0.616306039613025),(4,97,-0.627491073335978),(4,99,3.32399975585192),(4,101,-1.45283364360485),(4,108,0.86550492873928),(4,113,-0.0698416089358195),(4,118,-1.18077639088107),(5,86,2.01759392071291),(5,87,1.12941373943297),(5,89,-1.19223609118931),(5,92,2.5983458967864),(5,93,2.1108737449263),(5,99,-0.819605090487381),(5,104,-0.822611163670766),(5,114,0.923490096743675),(5,118,1.1901455732902),(6,89,1.36695455793939),(6,92,-0.368770409253212),(6,94,0.835367900631733),(6,100,-1.67342143009735),(6,101,1.16960661641285),(6,103,0.752952665791803),(6,107,1.70551164281137),(6,110,-0.189642017883847),(6,113,-2.4556260872219),(7,85,-1.59146397289956),(7,86,3.10821863460189),(7,90,-0.528733176671651),(7,95,4.51251258888516),(7,99,-2.11734366893521),(7,100,1.0114444410535),(7,104,0.452284310434278),(7,106,-2.25501266518143),(7,108,2.0135349589526),(7,112,0.276055177465132),(7,116,-0.32151249732963),(8,92,-2.16638691366314),(8,93,-2.28995635853145),(8,95,-2.2811822870571),(8,99,-2.07785271767327),(8,106,-0.444639423810541),(8,107,2.07054353465377),(8,115,-2.3435468611713),(8,116,-0.32700582903531),(8,118,1.14009521774957),(9,85,1.22745445112461),(9,87,2.07667775505844),(9,98,1.25023651844844),(9,101,-2.78934598834193),(9,103,-1.02916043580432),(9,105,-0.299996948149053),(9,106,0.297372356334117),(9,113,1.43397320474868),(10,89,-0.302697836237678),(10,96,0.208868678853725),(10,106,0.619037446211127),(10,108,2.22402111880856),(10,109,1.33661915952025),(10,111,-0.926664021729179),(10,112,-2.91482284005249),(10,114,-0.829737235633412),(10,115,-1.24233222449416),(10,116,-0.0055696279793695),(10,117,1.48396252327036),(11,89,0.227301858577227),(11,97,1.69394512771996),(11,105,-0.00373851741080952),(11,112,-0.477935117648854),(11,115,-0.232245857112339),(12,92,-1.14906765953551),(12,93,2.61798455763421),(12,94,-1.67159031952879),(12,97,-2.40269173253578),(12,98,-2.14432203131199),(12,99,0.915387432477798),(12,108,0.917081209753716),(12,116,-0.205603198339793),(13,86,0.171666615802484),(13,87,1.42397839289529),(13,90,-1.99458296456801),(13,99,0.188390758995331),(13,102,1.13803521835994),(13,104,-1.32853175450911),(13,113,0.403881954405347),(13,116,-2.08349864192633),(13,118,-0.751899777214881),(14,90,-1.87867366557817),(14,93,2.20755638294626),(14,95,-1.93784905545213),(14,102,-3.80971709341716),(14,104,0.628666035950804),(14,106,0.238517410809656),(14,109,-3.98872341074862),(14,110,0.169286172063356),(14,111,1.88952299569689),(15,85,1.74161503952147),(15,92,0.48391674550615),(15,99,-1.53299050874355),(15,101,-3.82717368083743),(15,104,-0.21263771477401),(15,108,1.51820429090243),(15,117,-0.1338847010712),(16,86,1.96295052949614),(16,87,-2.3424634540849),(16,88,-0.314172795800653),(16,90,0.138569292275765),(16,91,-0.962782677694021),(16,95,-2.98788415173803),(16,97,-2.95049897762993),(16,98,0.560441908017212),(16,99,4.00073244422742),(16,101,-0.273934141056551),(16,108,0.817361980040895),(16,110,-2.04173406170843),(17,89,1.03201391644032),(17,96,2.0271462141789),(17,99,-0.900051881466109),(17,101,-0.614307077242347),(17,106,-2.44877468184454),(17,107,1.05063020722068),(17,109,-1.13771477401044),(18,90,0.979766228217414),(18,91,-2.0211645863216),(18,93,-1.21883297219764),(18,99,1.06639301736503),(18,102,-3.57672353282266),(18,103,3.37919248023926),(18,104,-1.95455793939024),(18,110,2.93523972289193),(18,111,2.32404553361614),(18,116,-1.55835139011811),(18,117,0.841319009979553),(18,118,-2.55687124240852),(19,87,1.60345774712363),(19,89,-1.26606036561174),(19,93,-0.646076845606861),(19,95,-2.99439985351115),(19,101,0.665593432416761),(19,105,-0.279793694875942),(19,115,-0.874645222327342),(20,88,1.2235175634022),(20,101,-0.0723593859675891),(20,103,-1.61842707602161),(20,104,-2.45197912533952),(20,105,-5.02786339915158),(20,106,-2.13301492355113),(20,111,1.63792840357677),(20,116,1.36538285470138),(21,86,-0.442899868770409),(21,87,4.48071230201117),(21,94,1.80091250343333),(21,96,-2.19992675557726),(21,101,2.01303140354625),(21,102,2.45548875392926),(21,105,-1.99002044740135),(21,107,1.58497878963591),(21,108,0.543427838984344),(22,86,0.913266396069216),(22,88,0.919568468276009),(22,91,-0.298532059694205),(22,92,1.14831995605335),(22,93,0.315958128604999),(22,98,1.46620075075533),(22,106,-0.43641468550676),(22,115,0.327738273262734),(22,117,0.384456923123875),(23,85,2.30248420667135),(23,86,2.73836481826228),(23,88,-1.35267189550462),(23,90,-1.48721274452956),(23,97,-0.824808496353038),(23,104,-0.918729209265419),(23,112,-1.40914639728996),(23,114,0.172597430341502),(23,115,0.836619159520249),(23,116,-1.37302774132511),(24,89,-3.11648915066988),(24,90,-1.47996459852901),(24,91,-0.157109286782434),(24,101,-0.880031739249855),(24,107,0.901974547563097),(24,108,-0.25830866420484),(24,110,1.22026734214301),(24,112,2.45223853267006),(25,90,-1.34258552812281),(25,92,0.432477797784356),(25,94,3.29070406201361),(25,98,2.04657124546037),(25,105,0.93145542771691),(25,108,0.398693807794427),(25,109,1.75070955534532),(25,115,-1.62573625904111),(26,85,0.505676442762536),(26,87,0.636844996490371),(26,89,1.80623798333689),(26,95,-0.463652455214087),(26,98,-1.35773796807764),(26,100,0.343485824152348),(26,101,2.71507919553209),(26,102,0.0482497634815516),(26,103,-0.154805139316996),(26,104,-0.73795281838435),(26,107,-1.50656147953734),(26,109,-0.254676961577197),(26,112,-2.17503891109958),(26,113,3.52314828943754),(26,117,-0.87176122318186),(27,85,1.65776543473617),(27,87,0.83028656880398),(27,94,2.66837061677908),(27,100,1.31820123905148),(27,102,-1.72421948912015),(27,103,2.1546067690054),(27,104,1.40354625080111),(27,105,-1.48878444776757),(27,108,-2.62268440809351),(27,110,1.50233466597491),(27,114,-3.92011780144658),(28,87,-0.351786858729819),(28,88,-2.40009765923032),(28,97,-1.18076113162633),(28,99,-1.7127140110477),(28,104,-0.235419782097842),(28,113,-1.23023163548692),(28,114,2.12071596423231),(29,88,1.64117862483596),(29,91,-3.21715445417646),(29,102,0.24344615009003),(29,105,2.24333933530686),(29,116,-3.03602710043641),(30,95,1.67169713431196),(30,96,0.273934141056551),(30,99,-4.17189550462355),(30,101,0.862025818659017),(30,104,-1.86193426313059),(30,109,-1.33462019714957),(30,110,0.612704855494858),(30,114,3.41734061708426),(30,118,2.74494155705435),(31,85,-2.7191381572924),(31,92,-1.11511581774346),(31,94,-1.59109775078585),(31,96,0.450178533280435),(31,99,0.73627430036317),(31,103,1.27710806604205),(31,107,1.41525009918516),(31,108,2.03416547135838),(31,109,1.70563371684927),(31,111,1.72244941557054),(31,112,1.79558702352977),(31,117,3.71045564134648),(32,86,-2.24349192785424),(32,87,1.69983520004883),(32,89,-2.3900875881222),(32,92,1.35850093081454),(32,98,2.12161626026185),(32,99,-0.520630512405774),(32,104,-0.234809411908322),(32,106,-1.25615710928678),(32,109,0.62739951780755),(32,116,-0.750862147892697),(32,118,2.68808557390057),(33,96,0.538315988647114),(33,98,1.3059175389874),(33,108,-3.24987029633473),(33,110,0.0962096011230812),(33,111,-1.03587450788903),(33,114,0.754722739341411),(34,85,-1.47640919217505),(34,90,4.26497695852535),(34,99,1.00956755272072),(34,104,-0.0549943540757469),(34,109,0.36634418774987),(35,86,-1.7543565172277),(35,87,-1.55281228064821),(35,97,2.34771263771477),(35,98,-0.440382091738639),(35,100,-1.88610492263558),(35,104,0.339564195684683),(35,107,-2.15871150852992),(35,109,-0.810205389568774),(35,110,0.365916928617206),(35,112,0.519272438734092),(36,85,2.76828821680349),(36,87,-1.19666127506333),(36,90,-2.4737388225959),(36,91,1.56476027710807),(36,104,2.0036927396466),(36,107,-0.485457930234687),(36,109,1.37989440595721),(36,112,-2.24301889095737),(36,115,1.23455000457778),(36,117,0.747657704397717),(36,118,3.06773583178198),(37,85,4.02208014160588),(37,86,2.44048890652181),(37,87,1.88375499740593),(37,91,1.53752250740074),(37,99,-1.13759269997253),(37,105,3.09347819452498),(37,111,0.227362895596179),(37,112,-1.56106753746147),(37,118,-4.24820703756829),(38,87,-0.509903256324961),(38,90,1.75411236915189),(38,103,0.054200872829371),(38,105,-0.00917081209753712),(38,106,2.62489700003052),(38,111,-0.468184453871273),(38,115,1.34328745384075),(39,87,1.39677114169744),(39,89,0.470900601214637),(39,91,-3.52139347514267),(39,94,2.1776177251503),(39,97,-1.40244758445998),(39,98,0.372188482314524),(39,107,-2.01667836542863),(39,108,1.50491348002564),(39,109,3.73506881923887),(39,111,0.544557023834956),(39,113,-0.562547685171056),(39,116,0.941938535721915),(39,118,-3.20744956816309),(40,88,-4.12831507309183),(40,92,-1.10087893307291),(40,99,-1.96778771324808),(40,104,-3.04036072878201),(40,110,-0.733573412274544),(40,116,-2.79448835718863),(40,118,-1.02420117801447),(41,88,-0.694296090578936),(41,93,3.43174535355693),(41,96,0.227713858455153),(41,97,0.535523545030061),(41,100,-0.522309030426954),(41,101,0.903469954527421),(41,104,-0.583513901181067),(41,105,-1.0903958250679),(41,106,0.65172276985992),(41,107,-1.15146336252937),(41,109,0.985961485641041),(41,110,-0.375896481215857),(41,111,0.085894344920194),(41,112,-0.0782647175511948),(42,85,0.620319223609119),(42,86,-1.20848719748527),(42,87,-0.354274117252114),(42,99,0.0516525772881253),(42,100,-1.1381420331431),(42,103,-2.38006225775933),(42,109,-3.00085451826533),(42,113,-0.193609424115726),(43,85,0.432874538407544),(43,88,2.20381786553545),(43,89,-0.780587176122318),(43,93,-1.24893948179571),(43,97,-0.54170354319895),(43,98,0.841013824884793),(43,101,2.3023468733787),(43,102,2.73371074556719),(43,103,-1.37050996429334),(43,105,0.097506637775811),(43,110,-2.1337626270333),(43,112,-0.619678334910123),(43,114,1.27866451002533),(43,116,-0.0186925870540484),(44,89,1.07219153416547),(44,98,-1.03205969420454),(44,99,-2.82064271980956),(45,87,0.0954466383861812),(45,88,-0.944227423932615),(45,90,1.26766258735923),(45,91,1.50823999755852),(45,95,1.46484267708365),(45,98,1.6188238166448),(45,108,-0.385174108096561),(45,109,-0.250587481307413),(45,112,2.62648396252327),(45,115,-0.600985747856075),(46,85,1.65089877010407),(46,89,-1.37211218604083),(46,91,-0.350123599963378),(46,94,-1.0373851741081),(46,97,3.45597705008087),(46,100,1.79456465346232),(46,101,-0.434339426862392),(46,108,-0.172353282265694),(46,112,0.500045777764214),(47,86,-0.541367839594714),(47,91,2.43078402050844),(47,92,0.00747703482161931),(47,94,-2.55009613330485),(47,95,2.1835993530076),(47,100,0.186101870784631),(47,101,-1.20738853114414),(47,104,-1.26392406994842),(47,105,1.97102267525254),(47,108,2.92959379863887),(47,112,1.28695028534806),(47,114,-0.0843073824274422),(47,118,1.44703512680441),(48,86,0.893765068514054),(48,91,-0.480193487350078),(48,98,0.497009186071352),(48,99,-1.56242561113315),(48,100,2.23044526505325),(48,103,0.791390728476821),(48,105,-2.60110782189398),(48,106,-1.37725455488754),(48,111,0.518265327921384),(48,115,0.674764244514298),(49,87,0.799432355723746),(49,89,0.192388683736686),(49,93,-1.07496871852779),(49,94,0.410473952452162),(49,95,-0.73566393017365),(49,102,-0.511093478194525),(49,113,-1.16170232245857),(49,114,-0.800531022064882),(50,89,2.65237891781365),(50,105,-1.61445966978973),(50,107,-1.69107638782922),(51,87,-1.37678151799066),(51,92,3.3397320474868),(51,97,-1.4067964720603),(51,98,2.26950895718253),(51,103,-1.36622211371197),(51,106,-0.808893093661306),(51,112,-1.23325296792505),(51,118,3.11949522385327),(52,89,-1.90232551042207),(52,97,-2.45666371654408),(52,106,1.15482039857173),(52,110,-2.7942747276223),(52,111,-0.317514572588275),(52,113,3.8749504074221),(52,114,-0.633777886288034),(52,118,-1.00361644337291),(53,88,2.68245490890225),(53,90,0.949201940977203),(53,92,1.54406872768334),(53,94,-2.32497634815516),(53,104,-0.519608142338328),(53,105,-3.41709646900845),(53,109,0.943006683553575),(54,85,1.72769859920042),(54,91,-0.857417523728141),(54,94,2.97462385937071),(54,96,4.39107943968017),(54,111,5.42359691152684),(54,112,0.685079500717185),(54,113,-1.30745872371593),(54,118,-0.163792840357677),(55,87,-2.65158543656728),(55,95,0.0209814752647481),(55,107,-0.517822809533982),(55,110,-0.0205999938962981),(55,117,-2.42442091128269),(56,107,-3.019394512772),(56,111,-2.16177861873226),(56,113,2.57061983092746),(56,114,-1.69438764610736),(57,87,0.689962462233344),(57,90,0.514191106906339),(57,91,2.36588641010773),(57,92,-1.20775475325785),(57,93,1.44483779412213),(57,94,-2.22795800653096),(57,95,2.75992614520707),(57,96,-1.73131504257332),(57,100,-1.2131565294351),(57,102,-0.0998718222602008),(57,103,1.84080019531846),(57,115,-0.482345042268136),(58,86,-1.97712637714774),(58,87,2.24135563219092),(58,89,-0.6488235114597),(58,90,0.32944730979339),(58,95,-1.25760673848689),(58,96,0.340968047120579),(58,101,-1.19005401776177),(58,103,-1.33143101290933),(58,109,-1.98225348673971),(58,110,2.22998748741111),(58,113,-3.37903988769189),(58,114,-2.59918515579699),(58,115,1.95182653279214),(58,118,1.28521073030793),(59,85,2.54837183751946),(59,86,0.751670888393811),(59,90,-0.831843012787256),(59,91,-0.998794518875698),(59,93,0.36809900204474),(59,97,0.879100924710837),(59,98,-0.108005005035554),(59,100,-0.372127445295572),(59,102,0.604876857814264),(59,112,0.428250984221931),(59,114,-1.17595446638386),(60,85,-2.44143498031556),(60,87,2.22495193334758),(60,90,1.8068025757622),(60,91,-0.0299844355601673),(60,96,-0.418362987151707),(60,100,1.54000976592303),(60,101,1.97492904446547),(60,105,0.076982940153203),(60,107,-0.28644672994171),(60,109,-0.650151066621906),(60,110,-1.87188329721976),(60,114,-0.41010773033845),(61,89,3.78373058259835),(61,94,0.312265388958403),(61,96,2.2849971007416),(61,98,-1.69324320200201),(61,100,1.17084261604663),(61,102,-1.56140324106571),(61,103,-0.494781334879605),(61,114,0.10650959807123),(61,115,3.09178441724906),(62,93,3.90885647144993),(62,95,0.598544267097995),(62,107,-1.70117801446577),(62,109,-3.34598834192938),(62,110,-0.405819879757073),(62,111,1.54292428357799),(63,87,-1.91897335734123),(63,90,1.00520340586566),(63,93,-1.0477462080752),(63,97,0.411420026245918),(63,100,-0.267830439161351),(63,103,-2.45835749382),(63,104,-1.61049226355785),(63,108,-0.119953001495407),(63,111,-2.60263374736778),(63,114,-1.6188238166448),(63,117,-0.916623432111576),(64,87,0.936216315195166),(64,94,-2.06593523972289),(64,99,0.0467543565172277),(64,110,2.37371440778832),(64,112,1.01356547746208),(64,116,1.55552842799158),(65,87,2.46136356700339),(65,88,2.31786553544725),(65,90,3.65489669484542),(65,97,0.157902768028809),(65,99,-2.28398998992889),(65,107,-3.02235480819117),(65,110,1.69289223914304),(65,111,-2.17111728263192),(65,114,-0.0634632404553361),(65,116,1.15243995483261),(65,117,-0.524460585345012),(66,85,2.25811029389325),(66,102,-1.37272255623035),(66,105,2.15913876766259),(66,108,1.72286141544847),(66,111,2.26538895840327),(66,115,-1.53601184118168),(66,118,-0.494720297860653),(67,86,-0.508163701284829),(67,90,-0.245490890224921),(67,92,-1.12108218634602),(67,104,1.02958769493698),(67,109,2.15239417706839),(67,111,3.15707876827296),(68,87,2.15660573137608),(68,88,3.09512619403668),(68,90,-0.586397900326548),(68,93,1.90656758323923),(68,95,2.85677663502915),(68,96,-1.48390148625141),(68,97,-0.905178991058077),(68,103,0.517517624439222),(68,107,1.74915311136204),(68,112,-0),(68,114,0.725516525772881),(69,87,1.90107425153356),(69,88,0.930188909573656),(69,92,-1.54873805963317),(69,94,-2.8157597582934),(69,95,-0.147328104495376),(69,97,-3.61445966978973),(69,108,-2.0052186651204),(69,113,1.49754325998718),(69,114,-1.76152836695456),(69,118,-0.8496505630665),(70,85,-0.69350260933256),(70,86,-0.522370067445906),(70,87,-3.09958189642018),(70,90,-1.5584276863918),(70,96,-2.17032380138554),(70,97,-3.99409466841639),(70,99,-1.73116245002594),(70,105,-0.240058595538194),(70,107,1.01991332743309),(70,109,3.15506454664754),(70,110,-0.921414838099307),(70,111,-0.365993224890896),(71,85,-0.967802972502823),(71,93,-2.34385204626606),(71,96,-0.572130497146519),(71,100,-1.22882778405103),(71,104,-2.06266975920896),(71,106,1.09799493392743),(71,111,-0.333826715903195),(71,113,1.24706259346294),(72,94,1.60756248664815),(72,96,-2.66638691366314),(72,99,1.49121066927091),(72,110,-0.108523819696646),(72,112,2.13049714651936),(72,114,-1.32580034791101),(72,115,-0.629520554216132),(72,116,0.12892544328135),(73,88,0.28087710196234),(73,94,0.901882992034669),(73,99,-1.80262153996399),(73,100,-1.67964720603046),(73,106,-1.03823969237342),(73,110,1.46427808465835),(73,115,-0.543549913022248),(74,90,0.791894283883175),(74,94,0.556016724143193),(74,99,-0.0407422101504562),(74,102,-0.518723105563524),(74,106,-0.295785393841365),(74,107,0.617831965086825),(74,110,0.19693594164861),(74,113,0.678655354472488),(74,116,-0.220023194067202),(75,85,0.952299569689016),(75,86,-0.750221259193701),(75,93,-2.70863979003265),(75,98,1.82821131015961),(75,103,-1.84321115756706),(75,105,-0.672246467482528),(75,111,0.815607165746025),(75,117,1.0186315500351),(76,86,0.877620777001251),(76,89,1.12479018524735),(76,92,1.00347911008026),(76,94,1.19342631305887),(76,99,-0.727637562181463),(76,101,-3.28209784234138),(76,103,-0.91491439558092),(76,106,-1.64809106723228),(76,110,-2.43392742698447),(76,113,0.0455488753929258),(77,88,-0.966750083925901),(77,91,1.59547715689566),(77,93,0.463881344035157),(77,98,0.889309366130558),(77,101,1.62892544328135),(77,102,0.513901181066316),(77,103,2.18947416608173),(77,104,2.33738212225715),(77,105,-2.42584002197333),(77,109,2.29830317087313),(78,88,0.707998901333659),(78,93,-1.95968504898221),(78,94,2.21297341837825),(78,101,-4.09642323068941),(78,104,-1.78742332224494),(78,110,-2.28939176610614),(78,114,-0.494399853511155),(78,116,-2.94724875637074),(78,117,2.10234382152776),(78,118,-1.83332316049684),(79,87,-1.86812952055422),(79,92,-2.21472823267312),(79,94,1.21910763878292),(79,107,1.67155980101932),(79,108,2.70624408703879),(79,114,-2.21709341715751),(79,118,1.56042664876247),(80,87,-0.812875759147923),(80,88,-0.941343424787133),(80,91,-1.85825678273873),(80,99,2.20079653309732),(80,101,-1.01364177373577),(80,107,1.17404705954161),(80,113,2.2293008209479),(81,85,0.0960570085757012),(81,86,-2.45156712546159),(81,90,0.935071871089816),(81,93,3.32093264564959),(81,96,0.0076296273689993),(81,97,-1.22791222876675),(81,106,-1.72406689657277),(81,107,-1.35853144932402),(81,110,4.54609820856349),(81,115,0.505600146488846),(82,86,-2.62147892696921),(82,92,-3.62619403668325),(82,110,-0.640659810174871),(82,112,1.97793511764885),(83,87,-0.333948789941099),(83,91,-0.990905484176153),(83,93,-1.6814325388348),(83,101,-1.66104617450484),(83,103,1.29222998748741),(83,105,-1.23978392895291),(83,108,-0.291680654316843),(84,85,-2.06018250068667),(84,86,-0.95394756920072),(84,89,1.74359874263741),(84,95,-0.769981994079409),(84,99,0.796533097323527),(84,104,-2.02276680806909),(84,111,-2.05421613208411),(84,113,0.633381145664846),(84,114,0.480285042878506)]
orgname='BHNEAT_3_1'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()