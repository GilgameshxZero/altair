edge = [(0,85,2.08444471572008),(0,89,1.46911526841029),(0,90,-1.37043366801965),(0,93,-2.10020752586444),(0,98,-0.692342905972472),(0,101,3.14180425428022),(0,105,1.38401440473647),(0,108,-0.291451765495773),(0,113,1.82976775414289),(0,114,-2.24547563097018),(0,117,0.563676870021668),(0,118,-4.08255256813257),(1,86,-1.51065095980712),(1,92,0.3037507248146),(1,98,0.0555436872463149),(1,102,1.22791222876675),(1,104,-1.22096926786096),(1,107,-2.3753929258095),(1,108,-0.812707907345805),(1,109,-0.267342143009735),(1,113,2.43670461134678),(2,87,-0.285775322733238),(2,88,2.2399822992645),(2,100,-0.756813257240516),(2,106,-0.985213782158879),(2,108,1.93281350138859),(2,110,-0.704000976592303),(2,113,-1.58563493758965),(2,118,0.0250709555345317),(3,89,1.22402111880856),(3,92,1.30819116794336),(3,97,-0.605029450361644),(3,99,1.61151463362529),(3,101,-2.34282967619861),(3,103,-0.641560106204413),(3,105,0.903607287820063),(3,108,-1.81675160985137),(3,109,2.69403668324839),(3,111,-0.69060335093234),(3,112,-1.98866237372967),(3,116,0.603427228614154),(4,90,-2.30344553971984),(4,91,-0.514831995605335),(4,97,0.662678914761803),(4,99,-0.143131809442427),(4,101,0.0285042878505814),(4,108,1.55980101931822),(4,113,-0.00262459181493568),(4,118,-1.26790673543504),(5,86,-0.0134281441694388),(5,87,-0.368388927884762),(5,89,1.88294625690481),(5,92,-2.4092837305826),(5,93,-1.02938932462539),(5,99,-1.14783165990173),(5,104,0.52005066072573),(5,114,-1.86239204077273),(5,118,0.0293282876064334),(6,89,-2.6686605426191),(6,92,-0.823847163304544),(6,94,1.65433210242012),(6,100,1.67896053956725),(6,101,0.844126712851344),(6,103,0.075945310831019),(6,107,-0.186284981841487),(6,110,-2.01129184850612),(6,113,1.04499954222236),(7,85,1.05327005829035),(7,86,1.21721549119541),(7,90,0.350276192510758),(7,95,0.868297372356334),(7,99,1.28975798821986),(7,100,1.58368175298318),(7,104,-0.685048982207709),(7,106,3.07649464400159),(7,108,0.363399151585437),(7,112,-1.36883144627216),(7,116,-2.14606158635212),(8,92,-0.235480819116794),(8,93,-2.4471114230781),(8,95,0.290169988097781),(8,99,2.34572893459883),(8,106,1.29390850550859),(8,107,0.462034974211859),(8,115,-2.82871486556597),(8,116,-2.67842646565142),(8,118,-3.09701834162419),(9,85,-0.95188756981109),(9,87,1.92515335551012),(9,98,0.291985839411603),(9,101,-0.93023468733787),(9,103,0.00869777520065917),(9,105,-0.0292519913327433),(9,106,-1.42928861354411),(9,113,1.41543321024201),(10,89,-2.45608386486404),(10,96,0.438978240302744),(10,106,1.95002594073305),(10,108,-0.898968474379711),(10,109,-0.425275429548021),(10,111,0.480391857661672),(10,112,0.0147251808221687),(10,114,2.38250373851741),(10,115,-1.48789941099277),(10,116,-1.34090701010163),(10,117,0.929212317270424),(11,89,-0.135868404187139),(11,97,1.9628131962035),(11,105,3.04083376567888),(11,112,0.706884975737785),(11,115,1.70537430951872),(12,92,-1.63391521958068),(12,93,-1.27976317636647),(12,94,1.29497665334025),(12,97,-0.617664113284707),(12,98,1.28537858211005),(12,99,0.723807489242225),(12,108,0.356013672292245),(12,116,-2.48388622699667),(13,86,4.11531418805506),(13,87,-0.907773064363536),(13,90,-1.17485580004273),(13,99,-1.81888790551469),(13,102,0.00289925840021976),(13,104,-0.663686025574511),(13,113,2.34159367656484),(13,116,-2.72830896938994),(13,118,2.30216376232185),(14,90,0.0483413190099795),(14,93,1.51847895748772),(14,95,0.641270180364391),(14,102,1.59459212012085),(14,104,-2.81052583391827),(14,106,0.725898007141331),(14,109,-0.829691457869198),(14,110,2.02124088259529),(14,111,1.16447950682089),(15,85,-2.53994872890408),(15,92,1.39474166081729),(15,99,0.64676351207007),(15,101,0.493789483321635),(15,104,-2.711066011536),(15,108,-0.111026337473678),(15,117,-0.341975157933286),(16,86,-1.77686391796625),(16,87,1.02380443739128),(16,88,-0.282219916379284),(16,90,3.05319376201666),(16,91,2.90154728843043),(16,95,0.032380138554033),(16,97,0.288735618152409),(16,98,-0.545930356761376),(16,99,2.32473220007935),(16,101,0.372173223059786),(16,108,0.960249641407514),(16,110,3.57434308908353),(17,89,-1.97306741538743),(17,96,-0.106784264656514),(17,99,2.64749595629749),(17,101,1.74741355632191),(17,106,0.166783654286325),(17,107,-0.561799981688894),(17,109,-1.41215247047334),(18,90,0.00274666585284011),(18,91,-1.19769890438551),(18,93,-1.57687612537004),(18,99,2.31849116489151),(18,102,-1.87043366801965),(18,103,-2.67125461592456),(18,104,-2.1324808496353),(18,110,-2.46810815759758),(18,111,-0.00833155308694744),(18,116,-2.34122745445112),(18,117,1.91732535782952),(18,118,2.03654591509751),(19,87,-1.62205877864925),(19,89,2.63885921811579),(19,93,0.11085848567156),(19,95,-0.842463454084903),(19,101,-1.51953184606464),(19,105,-1.23456526383251),(19,115,-0.310647907956175),(20,88,-1.20784630878628),(20,101,1.2602618488113),(20,103,-1.24953459273049),(20,104,0.476317636646626),(20,105,-1.17262794885098),(20,106,2.25180822168645),(20,111,1.09073152867214),(20,116,-2.11929685354167),(21,86,1.13444929349651),(21,87,-0.784493545335246),(21,94,-1.52331614123966),(21,96,-2.51632740256966),(21,101,2.86465041047395),(21,102,1.05494857631153),(21,105,1.43156224250008),(21,107,0.0382702108829005),(21,108,-3.23224585711234),(22,86,1.64780114139225),(22,88,-0.830835901974548),(22,91,-0.0903195287942136),(22,92,-0.363414410840175),(22,93,0.315958128604999),(22,98,0.936780907620472),(22,106,-1.22481460005493),(22,115,-1.1831568346202),(22,117,0.900982696005127),(23,85,1.51837214270455),(23,86,-0.362788781395917),(23,88,-0.351741080965606),(23,90,-1.18332468642232),(23,97,1.06633198034608),(23,104,-0.532792138431959),(23,112,0.313882869960631),(23,114,-2.24715414899136),(23,115,-1.65041047395245),(23,116,1.50332651753288),(24,89,0.0185399945066681),(24,90,-0.946043275246437),(24,91,-2.33451338236641),(24,101,2.00321970274972),(24,107,4.4237800225837),(24,108,-0.187307351908933),(24,110,1.03555406353954),(24,112,-0.799539170506912),(25,90,-2.8745078890347),(25,92,0.432477797784356),(25,94,-1.34101382488479),(25,98,2.62378307443464),(25,105,1.53831598864711),(25,108,-1.62869655446028),(25,109,-1.12833033234657),(25,115,-2.46278267769402),(26,85,-0.167714468825342),(26,87,-0.581286049989318),(26,89,3.58890041810358),(26,95,2.4710074159978),(26,98,-4.14508499404889),(26,100,-0.191045869319742),(26,101,-0.705847346415601),(26,102,-1.90348521378216),(26,103,1.97668385876034),(26,104,2.20654927213355),(26,107,0.866481521042512),(26,109,-0.213690603350932),(26,112,-2.71628467665639),(26,113,-1.31815546128727),(26,117,0.053880428479873),(27,85,-1.14391003143406),(27,87,-1.37966551713614),(27,94,-1.03387554551836),(27,100,0.0882747886593219),(27,102,-1.83935056611835),(27,103,-2.11874752037111),(27,104,2.96810815759758),(27,105,5.28022095400861),(27,108,-2.26454969939268),(27,110,0.160756248664815),(27,114,1.35737174596393),(28,87,0.798989837336344),(28,88,0.218237861262856),(28,97,0.186849574266793),(28,99,2.05267494735557),(28,104,2.41633350627155),(28,113,1.76360362559893),(28,114,-2.13119907223731),(29,88,-0.72103030487991),(29,91,0.313882869960631),(29,102,0.356593523972289),(29,105,2.25560777611621),(29,116,0.398083437604907),(30,95,4.27340006714072),(30,96,1.34894863734855),(30,99,-0.253547776726585),(30,101,-1.46386608478042),(30,104,0.927610095522935),(30,109,-1.18800927762688),(30,110,1.0293130283517),(30,114,-2.16136661885434),(30,118,0.237052522354808),(31,85,0.464018677327799),(31,92,0.260704367198706),(31,94,-2.36107974486526),(31,96,2.64094973601489),(31,99,-2.00041199987793),(31,103,-2.02970976897488),(31,107,-1.77365947447127),(31,108,1.02404858546709),(31,109,2.48176519058809),(31,111,-1.40049439985351),(31,112,1.53355510116886),(31,117,-0.683690908536027),(32,86,1.59443952757347),(32,87,-1.26546525467696),(32,89,-0.126300851466414),(32,92,0.889538254951628),(32,98,-1.5811181981872),(32,99,2.15546128727073),(32,104,0.562410351878414),(32,106,-0.535660878322703),(32,109,0.757332071901608),(32,116,-1.18369090853603),(32,118,-1.75504318369091),(33,96,-1.89909054841762),(33,98,1.255561998352),(33,108,-0.204504531998657),(33,110,-0.883236182744835),(33,111,0.773384807885983),(33,114,-0.0012817773979914),(34,85,-1.15491195410016),(34,90,-2.21098971526231),(34,99,-0.739310892056032),(34,104,1.34633930478835),(34,109,1.29860835596789),(35,86,-0.198294015320292),(35,87,-0.337794122135075),(35,97,2.68517105624561),(35,98,0.749382000183111),(35,100,2.56807153538621),(35,104,3.22966704306162),(35,107,1.8849909970397),(35,109,-0.651051362651448),(35,110,0.489745780816065),(35,112,-1.39767143772698),(36,85,1.98240607928709),(36,87,-1.41822565385907),(36,90,-1.63228247932371),(36,91,-0.488372447889645),(36,104,-0.694448683126316),(36,107,0.782204657124546),(36,109,-1.23126926480911),(36,112,-0.334543900875881),(36,115,0.204931791131321),(36,117,-0.640354625080111),(36,118,1.78733176671651),(37,85,1.15517136143071),(37,86,0.0860621967223121),(37,87,-1.8214209418012),(37,91,1.91076387829218),(37,99,-1.78289132358776),(37,105,1.33172093874935),(37,111,-0.0716269417401654),(37,112,1.0345774712363),(37,118,3.7321085238197),(38,87,-1.20999786370434),(38,90,2.40791039765618),(38,103,2.66345713675344),(38,105,0.441801202429273),(38,106,-0.277489547410504),(38,111,2.33516953032014),(38,115,-1.59442426831874),(39,87,1.46353038117618),(39,89,0.239265114291818),(39,91,-2.50984221930601),(39,94,4.22894985808893),(39,97,-1.23154393139439),(39,98,0.193594164860988),(39,107,-1.41668446913053),(39,108,2.54475539414655),(39,109,1.13534958952605),(39,111,-3.61919003875851),(39,113,2.05838190862758),(39,116,-1.89918210394604),(39,118,-1.70853297524949),(40,88,-2.13560899685659),(40,92,0.629749443037202),(40,99,-0.17513046662801),(40,104,-2.37749870296335),(40,110,1.99316385387738),(40,116,0.647923215430158),(40,118,-0.0988036744285409),(41,88,-2.27622302926725),(41,93,1.02459791863765),(41,96,1.80056154057436),(41,97,2.19443342387158),(41,100,-2.11966307565539),(41,101,1.27262184514908),(41,104,3.06677449873348),(41,105,1.79883724478896),(41,106,2.18204290902432),(41,107,-2.9101687673574),(41,109,2.838206122013),(41,110,-0.223471785637989),(41,111,-1.28125858333079),(41,112,0.781212805566576),(42,85,2.0095980712302),(42,86,-2.34534745323038),(42,87,0.262764366588336),(42,99,-0.569170201727348),(42,100,-2.35644093142491),(42,103,0.296258430738243),(42,109,-0.065813165684988),(42,113,-0.10856959746086),(43,85,-0.343028046510209),(43,88,2.00224311044649),(43,89,-1.15878780480361),(43,93,2.16521195104831),(43,97,-0.893063142796106),(43,98,-0.012253181554613),(43,101,-1.35758537553026),(43,102,-3.360454115421),(43,103,3.54762413403729),(43,105,1.5736869411298),(43,110,-2.05403302102725),(43,112,-0.771034882656331),(43,114,1.27805413983581),(43,116,1.44215216528825),(44,89,0.449385052034059),(44,98,-0.524079103976562),(44,99,0.269112216559343),(45,87,1.89277321695608),(45,88,5.18350779747917),(45,90,-1.05279702139348),(45,91,-0.723731192968535),(45,95,0.804422132023072),(45,98,0.726798303170873),(45,108,1.70465712454604),(45,109,2.10196234015931),(45,112,-1.69615771965697),(45,115,1.42809839167455),(46,85,-1.53088473158971),(46,89,-0.395825067903684),(46,91,-0.620715964232307),(46,94,0.282982879116184),(46,97,-0.347315897091586),(46,100,1.11897640919218),(46,101,0.752586443678091),(46,108,-1.28589739677114),(46,112,1.86407055879391),(47,86,-0.441648609881893),(47,91,-0.75739310892056),(47,92,1.42062135685293),(47,94,-1.12022766808069),(47,95,-1.93227942747276),(47,100,-1.54376354258858),(47,101,2.21839045381024),(47,104,0.971556749168371),(47,105,-1.45161290322581),(47,108,-0.181432538834803),(47,112,-2.44476149784844),(47,114,0.898007141331217),(47,118,0.616992706076235),(48,86,1.75759147923215),(48,91,0.4353465376751),(48,98,2.000640888699),(48,99,-2.45590075380718),(48,100,0.828974272896512),(48,103,1.13818781090732),(48,105,-2.26273384807886),(48,106,1.67299417096469),(48,111,0.0234839930417798),(48,115,2.19489120151372),(49,87,-0.194601275673696),(49,89,0.338602862636189),(49,93,2.12771996215705),(49,94,1.56277657399213),(49,95,1.47814874721519),(49,102,0.949980162968841),(49,113,-3.5044557023835),(49,114,4.13927121799371),(50,89,2.12065492721336),(50,105,2.47254860072634),(50,107,-0.531601916562395),(51,87,3.5594347972045),(51,92,-0.15324869533372),(51,97,0.545014801477096),(51,98,-1.70397045808283),(51,103,0.192724387340922),(51,106,-3.21149327066866),(51,112,2.5129703665273),(51,118,0.976866969817194),(52,89,1.68642231513413),(52,97,1.68985564745018),(52,106,-1.59367656483657),(52,110,-0.518433179723502),(52,111,-2.39300210577715),(52,113,-0.904248176519059),(52,114,-0.931638538773766),(52,118,0.827478865932188),(53,88,0.402874843592639),(53,90,-2.24112674336985),(53,92,0.161275063325907),(53,94,1.52668843653676),(53,104,-0.229651783806879),(53,105,1.97050386059145),(53,109,-0.73558763389996),(54,85,1.35872981963561),(54,91,-2.21068453016755),(54,94,2.71475875118259),(54,96,-0.768608661152989),(54,111,-1.0383922849208),(54,112,-3.06747642445143),(54,113,-2.11490218817713),(54,118,1.36867885372478),(55,87,0.909009063997314),(55,95,-3.41181676686911),(55,107,1.75626392406995),(55,110,-0.0205999938962981),(55,117,-0.806512649922178),(56,107,-1.17355876339),(56,111,-0.54750205999939),(56,113,1.81920834986419),(56,114,1.5693533127842),(57,87,2.92933439130833),(57,90,1.31260109256264),(57,91,-0.0684377574999238),(57,92,2.02635273293252),(57,93,-1.01419110690634),(57,94,0.434858241523484),(57,95,1.35355693227943),(57,96,0.26235236671041),(57,100,-0.183767204809717),(57,102,-2.00514236884671),(57,103,-1.61656544694357),(57,115,-2.69676808984649),(58,86,-3.1142460402234),(58,87,-1.78327280495621),(58,89,0.350825525681326),(58,90,3.35222937711722),(58,95,3.16843165379803),(58,96,0.787835322122868),(58,101,-0.416638691366314),(58,103,0.315271462141789),(58,109,-2.44376964629047),(58,110,2.23033845027009),(58,113,0.173009430219428),(58,114,-0.941343424787133),(58,115,2.04124576555681),(58,118,-1.27674184392834),(59,85,-0.206122013000885),(59,86,-1.99285866878262),(59,90,1.84578997161779),(59,91,-0.184331797235023),(59,93,-1.21726126895962),(59,97,-1.42507705923643),(59,98,-0.376415295876949),(59,100,-0.199591051973022),(59,102,-1.32625812555315),(59,112,2.0738090151677),(59,114,0.273522141178625),(60,85,1.06079287087619),(60,87,0.342356639301737),(60,90,-0.343333231604968),(60,91,-2.29178746910001),(60,96,-0.732444227423933),(60,100,2.37469100009156),(60,101,-4.06207464827418),(60,105,-1.61442915128025),(60,107,2.74045533616138),(60,109,3.01431318094424),(60,110,1.39616077150792),(60,114,-1.48947111423078),(61,89,-1.807687612537),(61,94,-2.3996856593524),(61,96,3.03169347209082),(61,98,-0.810876796777245),(61,100,1.77671132541887),(61,102,-1.68660542619098),(61,103,-1.54690694906461),(61,114,-0.840998565630055),(61,115,-0.628528702658162),(62,93,1.69435712759789),(62,95,0.124591814935759),(62,107,-1.32457960753197),(62,109,1.01820429090243),(62,110,-2.33634449293497),(62,111,1.4905240028077),(63,87,0.352366710409864),(63,90,-1.08711508529923),(63,93,1.95913571581164),(63,97,-2.32329783013398),(63,100,-1.69911801507614),(63,103,-0.873226111636707),(63,104,0.727103488265633),(63,108,-1.98127689443648),(63,111,2.02160710470901),(63,114,1.15363017670217),(63,117,-0.0510879848628193),(64,87,-0.0254829554124577),(64,94,-2.09645374919889),(64,99,-1.75437177648244),(64,110,-0.101260414441359),(64,112,1.93209631641591),(64,116,1.85328226569414),(65,87,0.350474562822352),(65,88,4.33726004821925),(65,90,-0.226523636585589),(65,97,0.0809961241492966),(65,99,0.873455000457777),(65,107,2.83043916135136),(65,110,-1.47793511764885),(65,111,-0.865230262153996),(65,114,-0.955839716788232),(65,116,2.26722006897183),(65,117,3.16644795068209),(66,85,1.22894985808893),(66,102,-1.22203741569262),(66,105,0.649998474074526),(66,108,-2.12340159306619),(66,111,2.70427564317759),(66,115,1.43832209234901),(66,118,1.01960814233833),(67,86,-1.30256050294504),(67,90,-0.0898922696615496),(67,92,-0.609302041688284),(67,104,3.60541093173009),(67,109,-2.91122165593432),(67,111,-0.529404583880123),(68,87,-0.112598040711692),(68,88,0.295342875453963),(68,90,-2.33504745628223),(68,93,-0.63068025757622),(68,95,-1.31044953764458),(68,96,-0.425061799981689),(68,97,1.60527359843745),(68,103,1.55072176274911),(68,107,0.172124393444624),(68,112,1.18717001861629),(68,114,0.147648548844874),(69,87,1.54135258033998),(69,88,-2.07367168187506),(69,92,-0.469374675740837),(69,94,1.19975890377514),(69,95,1.79692983794671),(69,97,-0.682103946043275),(69,108,-1.84890285958434),(69,113,0.742637409588916),(69,114,1.59009063997314),(69,118,-1.17818231757561),(70,85,-1.07570116275521),(70,86,1.71492660298471),(70,87,0.228385265663625),(70,90,0.804773094882046),(70,96,-1.82378612628559),(70,97,1.31449324015015),(70,99,-1.87400433362835),(70,105,-2.30620746482742),(70,107,0.926541947691275),(70,109,1.51518295846431),(70,110,1.80700094607379),(70,111,0.478164006469924),(71,85,-1.44946134830775),(71,93,1.85752433851131),(71,96,-1.02204962309641),(71,100,1.21765800958281),(71,104,-2.1897030549028),(71,106,1.52258369701224),(71,111,4.04390087588122),(71,113,0.171361430707724),(72,94,-1.38276314584796),(72,96,-0.665898617511521),(72,99,0.766533402508621),(72,110,-2.27187414166692),(72,112,-0.943632312997833),(72,114,2.78232673116245),(72,115,2.75269325846126),(72,116,0.923413800469985),(73,88,0.443128757591479),(73,94,-2.89597766045106),(73,99,-2.25440229499191),(73,100,-1.53735465559862),(73,106,-0.0673696096682638),(73,110,2.37983336893826),(73,115,-2.32673116245003),(74,90,-0.097567674794763),(74,94,1.31020538956877),(74,99,-1.70331431012909),(74,102,-2.16672261726737),(74,106,-2.47389141514328),(74,107,0.744529557176428),(74,110,0.397824030274362),(74,113,0.17085787530137),(74,116,-4.42303231910154),(75,85,-1.48918118839076),(75,86,-2.07136753440962),(75,93,0.577257606738487),(75,98,0.597552415540025),(75,103,2.02490310373241),(75,105,4.48512222663045),(75,111,2.01579332865383),(75,117,1.93815424054689),(76,86,-1.66800439466536),(76,89,1.81771294289987),(76,92,2.12953581347087),(76,94,-1.83538315988647),(76,99,-1.09358500930815),(76,101,2.0890682699057),(76,103,-1.2047639393292),(76,106,1.96302682576983),(76,110,-1.49189733573412),(76,113,0.151066621906186),(77,88,0.300714133121738),(77,91,0.0854213080233161),(77,93,1.00749229407636),(77,98,1.22948393200476),(77,101,-1.00378429517502),(77,102,-2.10100100711081),(77,103,1.75153355510117),(77,104,1.00695822016053),(77,105,-1.72794274727622),(77,109,1.26219977416303),(78,88,-0.970244453260903),(78,93,-0.465773491622669),(78,94,1.05597094637898),(78,101,1.31382183294168),(78,104,0.0405590990936003),(78,110,0.475508896145512),(78,114,0.165944395275735),(78,116,-1.82424390392773),(78,117,-0.962950529496139),(78,118,0.319528794213691),(79,87,-0.572191534165471),(79,92,-1.62656025879696),(79,94,2.03913998840297),(79,107,-0.170079653309732),(79,108,1.34557634205145),(79,114,0.772301400799585),(79,118,-1.83285012359996),(80,87,1.94325083162938),(80,88,0.786538285470138),(80,91,-1.1307107760857),(80,99,2.13960692159795),(80,101,1.93952757347331),(80,107,0.89150669881283),(80,113,0.243079927976318),(81,85,0.466704306161687),(81,86,0.260536515396588),(81,90,0.645603808709983),(81,93,-0.667683950315866),(81,96,-0.232718894009217),(81,97,-0.637089144566179),(81,106,-1.93746757408368),(81,107,2.17473372600482),(81,110,0.204153569139683),(81,115,2.77457502975555),(82,86,1.52728354747154),(82,92,-0.229804376354259),(82,110,-0.10635700552385),(82,112,-1.88238166447951),(83,87,1.19525742362743),(83,91,-0.517349772637104),(83,93,-1.50589007232887),(83,101,1.36132389294107),(83,103,-0.559099093600268),(83,105,1.0201574755089),(83,108,-2.34636982329783),(84,85,1.64888454847865),(84,86,0.152500991851558),(84,89,-2.66562395092624),(84,95,-2.04951628162481),(84,99,-0.32799768059328),(84,104,-0.594805749687185),(84,111,-0.566438795129246),(84,113,-2.02273628955962),(84,114,2.2761619922483),(35,105,-3.34481337931455)]
orgname='BHNEAT_10_2'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()