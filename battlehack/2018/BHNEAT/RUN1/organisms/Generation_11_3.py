edge = [(0,85,1.80726035340434),(0,89,-2.778450880459),(0,90,-1.43406476027711),(0,93,0.468016602069155),(0,98,-0.514038514358959),(0,101,1.51925717947935),(0,105,-0.357692190313425),(0,108,1.90412610248115),(0,113,1.35451826532792),(0,114,-0.34881130405591),(0,117,2.76299325540941),(0,118,-0.823938718832972),(1,86,2.45164342173528),(1,92,0.371272927030244),(1,98,-0.514389477217933),(1,102,1.90469069490646),(1,104,0.429960020752586),(1,107,-0.23535874507889),(1,108,-1.09118930631428),(1,109,-2.81694998016297),(1,113,2.4159520249031),(2,87,1.29844050416578),(2,88,2.0768608661153),(2,100,1.68939786980804),(2,106,0.992507705923643),(2,108,-0.223654896694845),(2,110,-1.45818964201788),(2,113,-1.44509720145268),(2,118,0.844492934965056),(3,89,0.650135807367168),(3,92,0.187932981353191),(3,97,-1.3959929197058),(3,99,0.990234076967681),(3,101,-2.15413373210852),(3,103,0.84522537919248),(3,105,1.99899288918729),(3,108,-0.963301492355113),(3,109,-1.78081606494339),(3,111,0.344355601672414),(3,112,-1.15247047334208),(3,116,1.1053346354564),(4,90,-0.0568254646443067),(4,91,-0.12884914700766),(4,97,-1.95008697775201),(4,99,1.55496383556627),(4,101,-0.895062105166784),(4,108,0.701239051484726),(4,113,-1.06489761040071),(4,118,-2.94398327585681),(5,86,1.81228064821314),(5,87,0.869899594103824),(5,89,0.61352885525071),(5,92,-0.0319833979308451),(5,93,0.0504928739280375),(5,99,2.52713095492416),(5,104,-2.02847376934111),(5,114,-0.819803460798974),(5,118,-2.80431531723991),(6,89,-0.118076113162633),(6,92,1.6064180425428),(6,94,-0.671025727103488),(6,100,-0.893749809259316),(6,101,-1.40997039704581),(6,103,-2.07675405133213),(6,107,2.12251655629139),(6,110,-1.47492904446547),(6,113,-0.399670400097659),(7,85,-1.8862727744377),(7,86,0.467909787285989),(7,90,1.61204870754112),(7,95,-0.951979125339518),(7,99,-1.89629810480056),(7,100,2.26705221716971),(7,104,-1.22278511917478),(7,106,1.70529801324503),(7,108,0.0696432386242256),(7,112,-0.717093417157506),(7,116,-1.38813440351573),(8,92,-2.03988769188513),(8,93,-1.49684133426923),(8,95,1.02124088259529),(8,99,-2.77327799310282),(8,106,1.54554887539293),(8,107,-2.11395611438337),(8,115,-0.354731894894253),(8,116,-0.527863399151585),(8,118,-0.835596789452803),(9,85,1.17845698416089),(9,87,1.39245277260659),(9,98,0.231681264687033),(9,101,0.422345652638325),(9,103,-0.184789574877163),(9,105,1.55641346476638),(9,106,-0.452162236396374),(9,113,1.9514908291879),(10,89,1.79865413373211),(10,96,-1.16385387737663),(10,106,2.41901913510544),(10,108,0.447813348796045),(10,109,0.0454573198644979),(10,111,-0.531907101657155),(10,112,-1.61137730033265),(10,114,1.73175756096072),(10,115,1.24221015045625),(10,116,-0.697653126621296),(10,117,-1.11061433759575),(11,89,-0.471037934507279),(11,97,2.4881130405591),(11,105,-1.4172338023011),(11,112,0.0212714011047701),(11,115,-0.283135471663564),(12,92,-1.62941373943297),(12,93,0.324442274239326),(12,94,0.914029358806116),(12,97,-2.99383526108585),(12,98,-0.909283730582598),(12,99,2.20334482863857),(12,108,1.90887173070467),(12,116,-1.05905331583605),(13,86,-0.895138401440474),(13,87,0.325693533127842),(13,90,0.50549333170568),(13,99,-1.13031403546251),(13,102,1.9899594103824),(13,104,-1.90380565813166),(13,113,0.622257148960845),(13,116,0.662373729667043),(13,118,2.76619769890439),(14,90,-1.58615375225074),(14,93,-1.39825128940703),(14,95,-1.54721213415937),(14,102,1.85363322855312),(14,104,1.13032929471725),(14,106,2.76400036622211),(14,109,-0.116245002594073),(14,110,1.43984801782281),(14,111,-1.22840052491836),(15,85,-2.69368572038942),(15,92,1.69450972014527),(15,99,1.18323313089389),(15,101,-2.72690511795404),(15,104,-2.99015778069399),(15,108,0.152424695577868),(15,117,0.494384594256417),(16,86,-1.44436475722526),(16,87,-2.19513534958953),(16,88,-1.09262367625965),(16,90,-0.999282815027314),(16,91,-1.45588549455245),(16,95,0.541352580339976),(16,97,-0.292107913449507),(16,98,0.934522537919248),(16,99,1.23491622669149),(16,101,-0.426221503341777),(16,108,2.56926175725578),(16,110,2.59012115848262),(17,89,-1.1963713492233),(17,96,-1.87594225898007),(17,99,0.162831507309183),(17,101,-0.161717581713309),(17,106,0.593386638996551),(17,107,2.18135624256111),(17,109,-2.45954771568957),(18,90,1.37932981353191),(18,91,1.76091799676504),(18,93,-1.46273689992981),(18,99,2.26088747825556),(18,102,-1.19895016327403),(18,103,-0.37343974120304),(18,104,0.0862910855433821),(18,110,-1.108386486404),(18,111,2.47206030457472),(18,116,-1.71002838221381),(18,117,1.73802911465804),(18,118,0.25876644184698),(19,87,0.763435773796808),(19,89,2.46600238044374),(19,93,-1.68858912930692),(19,95,0.631962034974212),(19,101,-0.460005493331706),(19,105,1.31121250038148),(19,115,-1.81490524002808),(20,88,1.47720267342143),(20,101,-0.447737052522355),(20,103,0.235114597003082),(20,104,-1.97062593462935),(20,105,-1.43615527817621),(20,106,-0.143879512924589),(20,111,-0.997650074770348),(20,116,-0.611835077974792),(21,86,1.10431226538896),(21,87,0.691610461745048),(21,94,-0.901348918118839),(21,96,2.04565569017609),(21,101,3.28458510086367),(21,102,0.0829187902462844),(21,105,-1.47906430249947),(21,107,2.37369914853359),(21,108,-2.48820459608753),(22,86,-1.09176915799432),(22,88,-0.378170110171819),(22,91,-2.13536484878079),(22,92,-0.876583147679067),(22,93,-0.648731955931272),(22,98,-0.179738761558885),(22,106,0.676488540299692),(22,115,2.82773827326273),(22,117,-1.27597888119144),(23,85,-1.14481032746361),(23,86,1.20218512527848),(23,88,-0.96066164128544),(23,90,-0.359782708212531),(23,97,0.178930021057772),(23,104,-0.987975707266457),(23,112,-1.32633442182684),(23,114,1.04451124607074),(23,115,1.44172490615558),(23,116,0.103976561784722),(24,89,-2.47700430310984),(24,90,0.0365001373332926),(24,91,-1.7371288186285),(24,101,0.608294930875576),(24,107,-1.61796929837947),(24,108,-1.04858546708579),(24,110,2.34807885982849),(24,112,0.452101199377422),(25,90,0.0802179021576586),(25,92,-1.71831415753655),(25,94,-2.73197119052705),(25,98,1.66290780358287),(25,105,1.26601458784753),(25,108,3.19063386944182),(25,109,-2.44360179448836),(25,115,-0.916562395092624),(26,85,-0.527756584368419),(26,87,-2.98019348735008),(26,89,0.408261360515153),(26,95,2.08302560502945),(26,98,-0.417096469008454),(26,100,1.61114841151158),(26,101,1.06872768333995),(26,102,0.484054078798791),(26,103,0.662450025940733),(26,104,-1.26691488387707),(26,107,1.7891323587756),(26,109,1.05977050080874),(26,112,-0.734641560106204),(26,113,2.04681539353618),(26,117,0.469924008911405),(27,85,2.02780236213263),(27,87,2.56097598193304),(27,94,-1.35081026642659),(27,100,1.80542924283578),(27,102,-1.16901150547807),(27,103,-2.16269417401654),(27,104,-1.43136387218848),(27,105,3.2712637714774),(27,108,1.1253700369274),(27,110,1.37102877895444),(27,114,-0.876430555131687),(28,87,0.585589159825434),(28,88,-0.0167546617023224),(28,97,-1.40125736259041),(28,99,0.591891232032227),(28,104,-1.45699942014832),(28,113,0.0534226508377331),(28,114,-1.45132297738578),(29,88,-0.486953337199011),(29,91,-0.0264442884609517),(29,102,0.940183721427046),(29,105,-0.0937833796197394),(29,116,1.20575579088717),(30,95,2.32570879238258),(30,96,-1.3549913022248),(30,99,1.82155827509384),(30,101,1.24991607409894),(30,104,-1.09340189825129),(30,109,0.946333201086459),(30,110,0.882244331186865),(30,114,0.435071871089816),(30,118,2.35636463515122),(31,85,-2.09968871120334),(31,92,1.05703909421064),(31,94,-0.257744071779534),(31,96,0.0702230903042695),(31,99,-2.41409039582507),(31,103,-0.942808313241981),(31,107,1.7871639149144),(31,108,-0.263969847712638),(31,109,-1.29013946958831),(31,111,0.883877071443831),(31,112,-0.567186498611408),(31,117,0.0204779198583941),(32,86,-0.457853938413648),(32,87,2.20036927396466),(32,89,-0.795190282906583),(32,92,1.52732932523576),(32,98,-0.492446668904691),(32,99,-0.629428998687704),(32,104,1.59050263985107),(32,106,2.07618945890683),(32,109,0.51860103152562),(32,116,-1.1587420270394),(32,118,-1.65065462202826),(33,96,1.003494369335),(33,98,0.988525040437025),(33,108,-3.08369701223792),(33,110,-3.14351329081088),(33,111,-1.91270180364391),(33,114,-1.06363109225745),(34,85,2.78464613788263),(34,90,0.925412762840663),(34,99,-0.5481887264626),(34,104,-0.504989776299326),(34,109,-0.101886043885617),(35,86,-0.803323465681936),(35,87,1.03012176885281),(35,97,-1.38462477492599),(35,98,-0.633793145542772),(35,100,-2.06334116641743),(35,104,0.746681112094485),(35,107,0.170918912320322),(35,109,-0.207617419965209),(35,110,1.01991332743309),(35,112,-0.158543656727805),(36,85,-0.705603198339793),(36,87,-1.47010711996826),(36,90,-2.44552446058535),(36,91,0.936460463270974),(36,104,0.744041261024811),(36,107,-0.271065401165807),(36,109,0.770897549363689),(36,112,-1.73389385662404),(36,115,-1.67844172490616),(36,117,-2.90266121402631),(36,118,1.24486526078066),(37,85,2.19020661030915),(37,86,-0.172734763634144),(37,87,-2.22457045197913),(37,91,1.62579729606006),(37,99,-2.39403973509934),(37,105,-1.32773827326273),(37,111,-0.99832148197882),(37,112,2.135410626545),(37,118,1.63621936704611),(38,87,1.47250282296213),(38,90,-0.835001678518021),(38,103,2.431974242378),(38,105,2.23735770744957),(38,106,0.789895321512497),(38,111,2.41344950712607),(38,115,0.481749931333354),(39,87,1.77909176915799),(39,89,-0.992385631885739),(39,91,1.43055513168737),(39,94,0.14767906735435),(39,97,-2.75563829462569),(39,98,0.422177800836207),(39,107,1.91105380413221),(39,108,1.59089938047426),(39,109,-0.299707022309031),(39,111,-1.10570085757012),(39,113,1.89449751274148),(39,116,1.87878048036134),(39,118,-1.99693288979766),(40,88,0.181783501693777),(40,92,-1.01588488418226),(40,99,-0.489776299325541),(40,104,-2.97352519302957),(40,110,-0.0174565874202704),(40,116,1.38158818323313),(40,118,-1.33716849269082),(41,88,-1.69118320261238),(41,93,3.15471358378857),(41,96,-1.08008056886502),(41,97,2.23517563402203),(41,100,0.930738242744224),(41,101,-1.01744132816553),(41,104,1.21025727103488),(41,105,-0.813943906979583),(41,106,1.35048982207709),(41,107,0.272759178441725),(41,109,1.96720786156804),(41,110,1.66571550645466),(41,111,-1.98745689260537),(41,112,-2.42170476393933),(42,85,3.07339701528977),(42,86,-0.17650379955443),(42,87,2.21645252845851),(42,99,1.09279152806177),(42,100,-0.647785882137516),(42,103,1.37363811151463),(42,109,-2.62425611133152),(42,113,1.73523667104099),(43,85,-0.780999176000244),(43,88,-0.625782036805323),(43,89,0.640446180608539),(43,93,-0.687932981353191),(43,97,1.21355327005829),(43,98,-1.89906002990814),(43,101,2.44135868404187),(43,102,1.78328806421094),(43,103,0.954542680135502),(43,105,0.306787316507462),(43,110,-2.07936338389233),(43,112,1.96037171544542),(43,114,0.609164708395642),(43,116,0.0662251655629139),(44,89,-0.467467268898587),(44,98,1.00764488662374),(44,99,-3.04680013428144),(45,87,0.0519730216376232),(45,88,1.96838282418287),(45,90,1.52151554918058),(45,91,2.47537156285287),(45,95,-0.1549272133549),(45,98,1.76538895840327),(45,108,-1.12601092562639),(45,109,1.12327951902829),(45,112,0.645908993804743),(45,115,-0.508301034577471),(46,85,1.33214819788202),(46,89,1.66904202398755),(46,91,-0.655888546403394),(46,94,0.682561723685415),(46,97,2.09599597155675),(46,100,1.56721701712088),(46,101,-2.43055513168737),(46,108,0.418027283547472),(46,112,2.07484664448988),(47,86,-0.505050813318278),(47,91,1.38735618152409),(47,92,-1.51487777336955),(47,94,1.45179601428266),(47,95,-1.53195287942137),(47,100,0.694082461012604),(47,101,-1.64769432660909),(47,104,0.00282296212652972),(47,105,2.07432782982879),(47,108,0.996887112033448),(47,112,0.819711905270547),(47,114,2.03245643482772),(47,118,1.14114810632649),(48,86,-1.37620166631062),(48,91,-2.54301583910642),(48,98,0.506775109103671),(48,99,2.11963255714591),(48,100,-1.43671987060152),(48,103,0.418073061311686),(48,105,-2.40075380718406),(48,106,-2.53909421063875),(48,111,1.06958220160527),(48,115,-0.746940519425031),(49,87,0.478789635914182),(49,89,-0.50267036957915),(49,93,-1.10060426648762),(49,94,1.37646107364116),(49,95,2.17397076326792),(49,102,1.05275124362926),(49,113,0.639042329172643),(49,114,-1.82557145908994),(50,89,0.73421430097354),(50,105,3.38947721793268),(50,107,-1.24619281594287),(51,87,-1.33321634571368),(51,92,-0.990600299081393),(51,97,2.40969573046052),(51,98,-0.432721945860164),(51,103,-0.974669637134922),(51,106,0.0619983520004883),(51,112,0.414441358684042),(51,118,0.725241859187597),(52,89,0.14928128910184),(52,97,-0.533341471602527),(52,106,-0.247886593218787),(52,110,-2.89124729148228),(52,111,2.12419507431257),(52,113,1.55348368785669),(52,114,-3.08166753135777),(52,118,-1.90354625080111),(53,88,-1.71213415936766),(53,90,1.67691579943236),(53,92,-0.0405285805841242),(53,94,2.9803613391522),(53,104,-3.01747184667501),(53,105,3.01452681051057),(53,109,1.13847773674734),(54,85,0.318582720419935),(54,91,-0.597857600634785),(54,94,3.27988525040437),(54,96,0.444883571886349),(54,111,1.81646168401135),(54,112,1.1324808496353),(54,113,0.548142948698386),(54,118,1.68501846369823),(55,87,1.19382305368206),(55,95,-1.33114108706931),(55,107,-1.80791650135807),(55,110,-2.33191930906095),(55,117,-0.00517288735618149),(56,107,-2.03456221198157),(56,111,-0.348765526291696),(56,113,-2.2203436384167),(56,114,1.46139408551286),(57,87,2.09991760002442),(57,90,0.623828852198859),(57,91,0.227362895596179),(57,92,2.9161503952147),(57,93,-2.11247596667379),(57,94,-0.754676961577197),(57,95,-1.16666158024842),(57,96,-2.09436323129978),(57,100,-1.13785210730308),(57,102,-3.07535019989624),(57,103,-1.75572985015412),(57,115,-2.78145695364238),(58,86,1.09173863948485),(58,87,2.67841120639668),(58,89,0.30390331736198),(58,90,1.77297280800806),(58,95,-2.39625232703635),(58,96,1.39210180974761),(58,101,-0.441511276589251),(58,103,0.103625598925748),(58,109,-1.02870265816218),(58,110,1.76554155095065),(58,113,-0.886593218787195),(58,114,1.20097964415418),(58,115,-1.91616565446944),(58,118,-2.46147038178655),(59,85,-2.04295480208747),(59,86,2.98677022614216),(59,90,3.16098513748589),(59,91,1.7917416913358),(59,93,2.49188207647938),(59,97,0.527573473311563),(59,98,-1.2078157902768),(59,100,1.63316751609851),(59,102,-1.42762535477767),(59,112,-1.42460402233955),(59,114,-1.90789513840144),(60,85,-1.43440046388134),(60,87,-2.18549150059511),(60,90,2.83642078920866),(60,91,-1.27697073274941),(60,96,2.68224127933592),(60,100,-0.785500656147954),(60,101,-3.36548966948454),(60,105,1.04953154087954),(60,107,0.880733664967803),(60,109,1.69702749717704),(60,110,-0.906231879634999),(60,114,0.467375713370159),(61,89,0.989379558702353),(61,94,1.79653309732353),(61,96,2.11713003936888),(61,98,-2.20618305001984),(61,100,-1.95265053254799),(61,102,-1.12743003631703),(61,103,1.65234839930418),(61,114,-0.0568254646443067),(61,115,-0.610065004425184),(62,93,0.183690908536027),(62,95,-0.21385845515305),(62,107,-2.2544785912656),(62,109,-3.23180333872494),(62,110,-0.780587176122318),(62,111,0.219290749839778),(63,87,0.789544358653523),(63,90,1.6779381694998),(63,93,1.48075807977538),(63,97,1.55143894772179),(63,100,-0.528763695181127),(63,103,0.853892635883664),(63,104,-2.19057283242286),(63,108,1.91753898739586),(63,111,-3.04980620746483),(63,114,0.447965941343425),(63,117,-1.38283944212165),(64,87,1.44123661000397),(64,94,0.0583056123538926),(64,99,1.2874080629902),(64,110,-2.36527603991821),(64,112,-2.54046754356517),(64,116,-0.886593218787194),(65,87,1.55000457777642),(65,88,0.169881282998138),(65,90,-1.00993377483444),(65,97,0.47750785851619),(65,99,1.31391338847011),(65,107,-3.41329691457869),(65,110,0.428769798883022),(65,111,-0.0010223700674459),(65,114,-0.469283120212409),(65,116,1.53384502700888),(65,117,0.713293862727744),(66,85,3.21547593615528),(66,102,-1.04680013428144),(66,105,2.71526230658895),(66,108,1.4390392773217),(66,111,0.539597766045106),(66,115,-1.44521927549059),(66,118,0.901882992034669),(67,86,1.43136387218848),(67,90,-0.930372020630512),(67,92,-1.49790948210089),(67,104,0.82311471907712),(67,109,-2.22478408154546),(67,111,0.822946867275002),(68,87,2.22260200811792),(68,88,1.42782372508927),(68,90,-2.35677663502915),(68,93,-0.910458693197424),(68,95,0.651051362651448),(68,96,0.277169103061007),(68,97,-2.99353007599109),(68,103,-1.0788293099765),(68,107,-0.140690328684347),(68,112,-1.55484176152837),(68,114,-1.37141026032289),(69,87,2.23969237342448),(69,88,1.91190832239753),(69,92,-2.21884823145238),(69,94,1.29577013458663),(69,95,-0.22247993408002),(69,97,0.46150090029603),(69,108,0.0118106631672109),(69,113,-0.82448805200354),(69,114,0.905514694662313),(69,118,-2.20702230903043),(70,85,-1.65186010315256),(70,86,1.63411358989227),(70,87,-0.122531815546129),(70,90,-1.06796472060305),(70,96,0.794778283028657),(70,97,0.375591296121097),(70,99,1.60419019135105),(70,105,-0.960997344889676),(70,107,0.750511185033723),(70,109,-1.94256416516617),(70,110,2.36541337321085),(70,111,0.818597979674673),(71,85,-1.34333323160497),(71,93,-0.46134830774865),(71,96,-0.684057130649739),(71,100,0.191549424726096),(71,104,-1.27880184331797),(71,106,1.80440687276833),(71,111,-1.57135227515488),(71,113,2.43621631519517),(72,94,0.951902829065828),(72,96,1.37058626056703),(72,99,-0.336024048585467),(72,110,2.04947050386059),(72,112,1.45585497604297),(72,114,0.623676259651479),(72,115,0.147251808221686),(72,116,0.718008972441786),(73,88,0.847773674733726),(73,94,0.384075441755425),(73,99,-2.14133121738334),(73,100,0.894344920194098),(73,106,2.18657490768151),(73,110,0.158848841822565),(73,115,1.80996124149297),(74,90,0.257820368053224),(74,94,-0.730185857722709),(74,99,2.82486953337199),(74,102,-0.518723105563524),(74,106,-2.31550035096286),(74,107,0.0883053071687979),(74,110,-1.36431470686972),(74,113,-2.1974547563097),(74,116,1.72795800653096),(75,85,-0.976317636646626),(75,86,0.253303628650777),(75,93,-0.858760338145085),(75,98,-0.620075075533311),(75,103,-0.933484908597064),(75,105,0.606067079683828),(75,111,-0.411572618793298),(75,117,-1.37075411236915),(76,86,0.894634846034119),(76,89,0.451857051301614),(76,92,-1.98469496749779),(76,94,0.744651631214332),(76,99,-0.371868037965026),(76,101,-0.343333231604968),(76,103,-0.936124759666738),(76,106,-0.152745139927366),(76,110,0.878337961973937),(76,113,0.225608081301309),(77,88,0.0693075350199895),(77,91,-1.01275673696097),(77,93,2.24250007629627),(77,98,0.087328714865566),(77,101,-2.77347636341441),(77,102,-0.853175450910978),(77,103,0.796304208502457),(77,104,-1.25278481398968),(77,105,2.2735526596881),(77,109,0.143925290688803),(78,88,-2.70316171758171),(78,93,0.661275063325907),(78,94,0.554780724509415),(78,101,-0.601947080904569),(78,104,2.19432660908841),(78,110,0.648014770958586),(78,114,0.340968047120579),(78,116,0.823389385662404),(78,117,-0.569032868434706),(78,118,-1.35145115512558),(79,87,0.272103030487991),(79,92,0.242164372692038),(79,94,2.58015686513871),(79,107,-0.170079653309732),(79,108,-2.0913571581164),(79,114,0.841883602404859),(79,118,-0.335245826593829),(80,87,2.32406079287088),(80,88,0.576036866359447),(80,91,-0.662251655629139),(80,99,-0.613849299600208),(80,101,0.353740043336283),(80,107,0.89150669881283),(80,113,0.732062746055483),(81,85,1.90954313791314),(81,86,1.32265694143498),(81,90,1.36927396465957),(81,93,-0.276284066286203),(81,96,-1.20679342020936),(81,97,-0.780907620471816),(81,106,0.500473036896878),(81,107,-0.261482589190344),(81,110,-1.46078371532334),(81,115,-1.05893124179815),(82,86,0.172353282265694),(82,92,1.98562578203681),(82,110,-3.28164006469924),(82,112,-0.948362681966613),(83,87,-2.25928525650807),(83,91,0.445280312509537),(83,93,-0.469786675618763),(83,101,-2.19977416302988),(83,103,-1.82851649525437),(83,105,-1.06555375835444),(83,108,0.0408948026978362),(84,85,-2.38390758995331),(84,86,0.152500991851558),(84,89,-0.483397930845058),(84,95,1.34421826837977),(84,99,1.21120334482864),(84,104,0.336771752067629),(84,111,-0.139866328928495),(84,113,-0.465834528641621),(84,114,0.710257271034883),(35,105,-0.303567613757744)]
orgname='BHNEAT_11_3'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()