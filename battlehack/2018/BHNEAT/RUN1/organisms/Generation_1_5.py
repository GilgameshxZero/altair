edge = [(0,85,-0.270760216071047),(0,89,0.884456923123875),(0,90,0.45707571642201),(0,93,-0.38914151432844),(0,98,-0.0205084383678701),(0,101,0.54582354197821),(0,105,-0.806665242469558),(0,108,-0.897213660084841),(0,113,0.032593768120365),(0,114,0.772881252479629),(0,117,-0.032868434705649),(0,118,0.986999114963225),(1,86,0.962126529740287),(1,92,-0.41026032288583),(1,98,-0.472640156254769),(1,102,0.199285866878262),(1,104,0.502883999145482),(1,107,-0.247322000793481),(1,108,0.166631061738945),(1,109,-0.377727591784417),(1,113,0.946562089907529),(2,87,0.0513016144291513),(2,88,-0.591143528550066),(2,100,-0.0347605822931608),(2,106,-0.923093356120487),(2,108,-0.695913571581164),(2,110,0.80581072420423),(2,113,0.485518967253639),(2,118,0.416852320932646),(3,89,-0.854701376384777),(3,92,0.361308633686331),(3,97,0.467513046662801),(3,99,0.651661732840968),(3,101,0.227454451124607),(3,103,-0.810449537644581),(3,105,-0.466017639698477),(3,108,-0.93877986999115),(3,109,-0.768730735190893),(3,111,-0.166478469191565),(3,112,-0.462813196203497),(3,116,0.0816980498672445),(4,90,-0.886654255806146),(4,91,0.152623065889462),(4,97,0.327646717734306),(4,99,0.431134983367412),(4,101,0.0816980498672445),(4,108,0.586046937467574),(4,113,-0.571123386333811),(4,118,-0.184179204687643),(5,86,-0.993499557481613),(5,87,-0.740592669454024),(5,89,-0.677510910367138),(5,92,0.021454512161626),(5,93,0.32425916318247),(5,99,0.0318308053834651),(5,104,0.73650318918424),(5,114,-0.675771355327006),(5,118,-0.608478041932432),(6,89,-0.867915890987884),(6,92,0.592516861476486),(6,94,-0.526291695913572),(6,100,0.296639912106693),(6,101,0.0102237006744591),(6,103,-0.230292672505875),(6,107,0.811822870571001),(6,110,0.122257148960845),(6,113,-0.287759025849178),(7,85,0.615619373149815),(7,86,-0.556779686880093),(7,90,0.221076082644124),(7,95,0.00854518265327921),(7,99,-0.709768974883267),(7,100,0.80428479873043),(7,104,0.970549638355663),(7,106,0.912198248237556),(7,108,-0.876705221716971),(7,112,-0.249031037324137),(7,116,0.0191656239509262),(8,92,0.00701925717947935),(8,93,0.401532029175695),(8,95,-0.864864040040284),(8,99,0.473891415143284),(8,106,0.136143070772423),(8,107,-0.338908047730949),(8,115,0.619769890438551),(8,116,0.714255195776238),(8,118,0.615314188055055),(9,85,-0.410382396923734),(9,87,0.87282937101352),(9,98,-0.802636799218726),(9,101,0.78698080385754),(9,103,-0.169469283120212),(9,105,-0.546494949186682),(9,106,-0.958586382641072),(9,113,0.834315012054811),(10,89,0.152684102908414),(10,96,-0.667958616901151),(10,106,0.0666219061861019),(10,108,0.698416089358196),(10,109,-0.236030152287362),(10,111,-0.373332926419874),(10,112,-0.685872981963561),(10,114,-0.442945646534623),(10,115,-0.9150669881283),(10,116,0.968657490768151),(10,117,0.530228583635975),(11,89,0.909909360026856),(11,97,0.727622302926725),(11,105,-0.141148106326487),(11,112,0.888485366374706),(11,115,0.0097659230323191),(12,92,-0.537949766533403),(12,93,-0.914792321543016),(12,94,0.951994384594256),(12,97,0.490768150883511),(12,98,0.900753807184057),(12,99,-0.443311868648335),(12,108,0.519882808923612),(12,116,0.529709768974883),(13,86,0.224188970610675),(13,87,0.23566393017365),(13,90,-0.0495620593890194),(13,99,0.989501632740257),(13,102,-0.950529496139409),(13,104,0.905941953794977),(13,113,0.521927549058504),(13,116,0.685842463454085),(13,118,0.472762230292673),(14,90,-0.043122653889584),(14,93,-0.0896023438215278),(14,95,-0.507919553209021),(14,102,0.00677510910367138),(14,104,0.293435468611713),(14,106,-0.977263710440382),(14,109,0.7360454115421),(14,110,-0.137119663075655),(14,111,0.249366740928373),(15,85,-0.602557451094089),(15,92,0.400402844325083),(15,99,-0.255134739219337),(15,101,0.239082003234962),(15,104,-0.38654744102298),(15,108,-0.0246894741660817),(15,117,-0.608996856593524),(16,86,-0.610003967406232),(16,87,0.222418897061068),(16,88,0.598132267220069),(16,90,0.183080538346507),(16,91,-0.600329599902341),(16,95,-0.0709250160222175),(16,97,0.119571520126957),(16,98,0.126895962401196),(16,99,-0.391979735709708),(16,101,-0.651783806878872),(16,108,0.558244575334941),(16,110,0.9510483108005),(17,89,-0.43931394390698),(17,96,-0.699331644642476),(17,99,-0.573351237525559),(17,101,0.209753715628529),(17,106,0.666554765465255),(17,107,0.751518295846431),(17,109,-0.838129825739311),(18,90,-0.888576921903134),(18,91,0.628437147129734),(18,93,-0.940763573107089),(18,99,0.310373241370891),(18,102,0.215491195410016),(18,103,0.227271340067751),(18,104,-0.755607776116214),(18,110,-0.294625690481277),(18,111,0.115298928800317),(18,116,0.0806299020355846),(18,117,-0.241706595049898),(18,118,0.638508255256813),(19,87,-0.0245979186376537),(19,89,-0.13296914578692),(19,93,-0.61116367076632),(19,95,-0.9082003234962),(19,101,0.287240211188086),(19,105,-0.605151524399548),(19,115,0.728537858211005),(20,88,-0.885677663502915),(20,101,-0.848719748527482),(20,103,-0.875728629413739),(20,104,0.443037202063051),(20,105,-0.232184820093387),(20,106,0.467665639210181),(20,111,-0.387585070345164),(20,116,-0.234656819360942),(21,86,-0.661671803949095),(21,87,-0.164250617999817),(21,94,0.173711355937376),(21,96,-0.143864253669851),(21,101,-0.467116306039613),(21,102,-0.123264259773553),(21,105,0.0957670827356792),(21,107,-0.453047273171178),(21,108,0.744926297799615),(22,86,0.771111178930021),(22,88,0.389385662404248),(22,91,-0.0887783440656758),(22,92,0.159642323068941),(22,93,0.245368816187017),(22,98,0.609973448896756),(22,106,-0.213507492294076),(22,115,-0.594073305459761),(22,117,-0.975951414532914),(23,85,0.572313608203375),(23,86,0.97537156285287),(23,88,-0.527176732688376),(23,90,0.595812860499893),(23,97,0.378460036011841),(23,104,-0.885036774803919),(23,112,-0.484908597064119),(23,114,-0.901120029297769),(23,115,-0.127048554948576),(23,116,-0.788323618274483),(24,89,0.406689657277139),(24,90,0.0782494582964568),(24,91,0.397991882076479),(24,101,-0.903103732413709),(24,107,0.271797845393231),(24,108,-0.918057802056948),(24,110,-0.106387524033326),(24,112,-0.88952299569689),(25,90,0.82921842097232),(25,92,0.23413800469985),(25,94,-0.819299905392621),(25,98,-0.422101504562517),(25,105,-0.774681844538713),(25,108,-0.205969420453505),(25,109,-0.129062776573992),(25,115,0.232703634754479),(26,85,0.218939786980804),(26,87,-0.863826410718101),(26,89,-0.17734305856502),(26,95,-0.0926541947691275),(26,98,-0.790612506485183),(26,100,-0.435407574694052),(26,101,-0.922849208044679),(26,102,0.703451643421735),(26,103,-0.217505417035432),(26,104,0.772606585894345),(26,107,0.247169408246101),(26,109,-0.963957640308847),(26,112,-0.730552079836421),(26,113,-0.576799829096347),(26,117,-0.492446668904691),(27,85,-0.583849604785302),(27,87,-0.133152256843776),(27,94,-0.641987365337077),(27,100,-0.524002807702872),(27,102,0.511001922666097),(27,103,-0.881069368572039),(27,104,0.834131900997955),(27,105,-0.912594988860744),(27,108,-0.142460402233955),(27,110,0.0149540696432386),(27,114,0.0255745109408856),(28,87,0.328959013641774),(28,88,0.78713339640492),(28,97,0.291055024872585),(28,99,0.703482161931211),(28,104,0.745841853083895),(28,113,-0.349223303933836),(28,114,0.352061525315104),(29,88,0.470381786553545),(29,91,-0.53941465498825),(29,102,0.701254310739464),(29,105,0.283455916013062),(29,116,-0.156651509140294),(30,95,0.0856959746086001),(30,96,-0.715109714041566),(30,99,0.397900326548051),(30,101,-0.76265755180517),(30,104,-0.944425794244209),(30,109,-0.420178838465529),(30,110,-0.592059083834346),(30,114,-0.949797051911985),(30,118,0.224524674214911),(31,85,0.257118442335276),(31,92,-0.119418927579577),(31,94,-0.2991729483932),(31,96,0.225318155461287),(31,99,-0.896053956724754),(31,103,-0.122959074678793),(31,107,0.0567949461348308),(31,108,-0.946501052888577),(31,109,-0.58806115909299),(31,111,0.771233252967925),(31,112,0.58333079012421),(31,117,0.56114383373516),(32,86,-0.51860103152562),(32,87,-0.341654713583789),(32,89,-0.228217413861507),(32,92,-0.445509201330607),(32,98,-0.13144322031312),(32,99,-0.0949430829798273),(32,104,-0.846125675222022),(32,106,-0.859004486220893),(32,109,0.892513809625538),(32,116,0.284401989806818),(32,118,0.674642170476394),(33,96,0.868312631611072),(33,98,-0.461256752220222),(33,108,-0.143314920499283),(33,110,-0.792321543015839),(33,111,0.60963774529252),(33,114,-0.739799188207648),(34,85,-0.195196386608478),(34,90,-0.875270851771599),(34,99,0.48231452375866),(34,104,-0.766899624622333),(34,109,0.729483932004761),(35,86,0.471510971404157),(35,87,-0.367931150242622),(35,97,0.927152317880795),(35,98,0.787377544480728),(35,100,-0.511612292855617),(35,104,-0.468672750022889),(35,107,-0.442854091006195),(35,109,0.501083407086398),(35,110,-0.274300363170263),(35,112,-0.858302560502945),(36,85,-0.618182927945799),(36,87,-0.130314035462508),(36,90,-0.52607806634724),(36,91,-0.340159306619465),(36,104,0.803765984069338),(36,107,0.639728995635853),(36,109,0.0532547990356151),(36,112,-0.705160679952391),(36,115,0.550950651570177),(36,117,0.161259804071169),(36,118,0.305490279854732),(37,85,-0.984252449110385),(37,86,-0.924130985442671),(37,87,-0.184942167424543),(37,91,0.369121372112186),(37,99,-0.788445692312387),(37,105,0.440107425153355),(37,111,-0.821924497207556),(37,112,0.989745780816065),(37,118,0.330912198248238),(38,87,0.603137302774132),(38,90,0.983581041901914),(38,103,0.861873226111637),(38,105,0.224005859553819),(38,106,-0.504379406109806),(38,111,0.820276497695853),(38,115,-0.905362102114933),(39,87,-0.645832697531053),(39,89,-0.454603717154454),(39,91,-0.263832514419996),(39,94,0.746696371349223),(39,97,0.969267860957671),(39,98,0.118839075899533),(39,107,-0.0171514023255104),(39,108,0.124088259529405),(39,109,0.448072756126591),(39,111,0.121738334299753),(39,113,0.834803308206427),(39,116,0.435316019165624),(39,118,-0.0532853175450911),(40,88,-0.59233375041963),(40,92,-0.438276314584796),(40,99,-0.146610919522691),(40,104,-0.0533463545640431),(40,110,0.617053743095187),(40,116,-0.910245063631092),(40,118,-0.281929990539262),(41,88,-0.43275246436964),(41,93,-0.0696737571337016),(41,96,0.910519730216376),(41,97,0.710928678243355),(41,100,0.741813409833064),(41,101,-0.787102877895444),(41,104,0.558214056825465),(41,105,0.45432905056917),(41,106,-0.472090823084201),(41,107,-0.559190649128697),(41,109,0.32395397808771),(41,110,0.726035340433973),(41,111,-0.550981170079653),(41,112,-0.902401806695761),(42,85,-0.775109103671377),(42,86,-0.929960020752586),(42,87,0.0489822077089755),(42,99,0.0848109378337962),(42,100,0.518570513016144),(42,103,0.33066805017243),(42,109,0.693868831446272),(42,113,0.37229529709769),(43,85,-0.184728537858211),(43,88,-0.617053743095187),(43,89,-0.284951322977386),(43,93,-0.963744010742515),(43,97,0.795831171605579),(43,98,0.0766930143131809),(43,101,0.601855525376141),(43,102,0.584795678579058),(43,103,0.362895596179083),(43,105,0.600817896053957),(43,110,0.900753807184057),(43,112,0.208410901211585),(43,114,0.0553605761894589),(43,116,-0.237769707327494),(44,89,0.592669454023866),(44,98,0.871272927030244),(44,99,-0.78621784112064),(45,87,0.514297921689505),(45,88,0.196813867610706),(45,90,-0.054231391338847),(45,91,0.557023834955901),(45,95,0.242957853938414),(45,98,-0.163335062715537),(45,108,-0.596545304727317),(45,109,-0.406628620258187),(45,112,0.0347300637836848),(45,115,-0.658803064058351),(46,85,-0.611590929898984),(46,89,-0.307138279366436),(46,91,0.23535874507889),(46,94,-0.908291879024628),(46,97,-0.373546555986206),(46,100,0.850520340586566),(46,101,-0.504440443128758),(46,108,-0.187994018372143),(46,112,-0.643391216772973),(47,86,0.0705587939085055),(47,91,-0.75563829462569),(47,92,0.0620136112552263),(47,94,0.403210547196875),(47,95,0.242866298409986),(47,100,-0.677053132724998),(47,101,-0.956816309091464),(47,104,-0.467360454115421),(47,105,-0.00729392376476333),(47,108,0.550523392437513),(47,112,-0.667409283730583),(47,114,0.93939024018067),(47,118,-0.656575212866604),(48,86,0.588427381206702),(48,91,-0.88921781060213),(48,98,-0.983397930845058),(48,99,-0.934232612079226),(48,100,-0.506698812829981),(48,103,-0.36848048341319),(48,105,-0.878566850795007),(48,106,0.186590166936247),(48,111,-0.553056428724021),(48,115,0.766258735923337),(49,87,-0.825800347911008),(49,89,-0.211676381725517),(49,93,0.709067049165319),(49,94,-0.828424939725944),(49,95,0.474806970427564),(49,102,0.649250770592364),(49,113,-0.28476821192053),(49,114,0.95654164250618),(50,89,0.640827661976989),(50,105,-0.255470442823573),(50,107,-0.624591814935759),(51,87,-0.772545548875393),(51,92,-0.179540391247291),(51,97,0.906369212927641),(51,98,-0.143192846461379),(51,103,0.771568956572161),(51,106,-0.488845484786523),(51,112,0.673268837549974),(51,118,-0.410657063509018),(52,89,0.656270027771844),(52,97,-0.606463820307016),(52,106,-0.814508499404889),(52,110,-0.504593035676138),(52,111,0.446455275124363),(52,113,0.371807000946074),(52,114,0.0265816217535936),(52,118,0.348979155858028),(53,88,-0.958098086489456),(53,90,-0.621295815912351),(53,92,-0.799249244666891),(53,94,0.258033997619556),(53,104,-0.745078890346995),(53,105,0.885464033936583),(53,109,-0.217352824488052),(54,85,-0.403851435895871),(54,91,-0.097567674794763),(54,94,-0.556718649861141),(54,96,0.054292428357799),(54,111,-0.426557206946013),(54,112,0.19083223975341),(54,113,-0.996826075014496),(54,118,-0.499649037141026),(55,87,0.905972472304453),(55,95,0.97827082125309),(55,107,-0.552171391949217),(55,110,-0.365794854579302),(55,117,0.913144322031312),(56,107,-0.921994689779351),(56,111,-0.946470534379101),(56,113,-0.116489150669881),(56,114,-0.360911893063143),(57,87,-0.15561387981811),(57,90,-0.0186773277993103),(57,91,-0.561571092867824),(57,92,-0.371898556474502),(57,93,0.17200231940672),(57,94,-0.275856807153539),(57,95,0.561479537339396),(57,96,0.382885219885861),(57,100,0.630207220679342),(57,102,-0.228766747032075),(57,103,-0.585192419202246),(57,115,0.204168828394421),(58,86,0.375347148045289),(58,87,0.979766228217414),(58,89,0.465498825037385),(58,90,-0.753074739829707),(58,95,-0.26532792138432),(58,96,0.0311593981749931),(58,101,-0.195318460646382),(58,103,-0.679525131992553),(58,109,0.897610400708029),(58,110,0.783379619739372),(58,113,-0.108584856715598),(58,114,0.603442487868892),(58,115,-0.83028656880398),(58,118,-0.690816980498672),(59,85,0.289925840021973),(59,86,-0.181890316476943),(59,90,0.391155735953856),(59,91,0.545030060731834),(59,93,-0.556474501785333),(59,97,0.725272377697073),(59,98,-0.668202764976959),(59,100,-0.853633228553118),(59,102,0.855525376140629),(59,112,-0.580767235328227),(59,114,-0.775627918332469),(60,85,0.783257545701468),(60,87,0.422376171147801),(60,90,0.00265511032441176),(60,91,0.989043855098117),(60,96,-0.636280404065065),(60,100,0.54124576555681),(60,101,0.727134006775109),(60,105,0.84331797235023),(60,107,-0.329111606189154),(60,109,-0.253730887783441),(60,110,0.971312601092563),(60,114,0.787469100009156),(61,89,-0.841242713705863),(61,94,0.858211004974517),(61,96,0.0746482741782891),(61,98,-0.489577929013947),(61,100,-0.103793450727866),(61,102,-0.543900875881222),(61,103,0.50190740684225),(61,114,-0.386028626361889),(61,115,0.296365245521409),(62,93,0.00366222113711966),(62,95,0.425794244209113),(62,107,-0.568529313028352),(62,109,-0.0206610309152501),(62,110,-0.368907742545854),(62,111,0.60887478255562),(63,87,0.6029236732078),(63,90,0.319925534836879),(63,93,0.310373241370891),(63,97,0.802819910275582),(63,100,0.373271889400922),(63,103,0.0127872554704428),(63,104,-0.649098178044984),(63,108,0.383892330698569),(63,111,-0.54506057924131),(63,114,-0.310403759880367),(63,117,-0.320474868007447),(64,87,-0.443861201818903),(64,94,-0.741508224738304),(64,99,-0.185308389538255),(64,110,0.0358592486342967),(64,112,-0.054445020905179),(64,116,-0.0260322885830256),(65,87,0.461317789239174),(65,88,0.485091708120975),(65,90,0.924314096499527),(65,97,-0.78591265602588),(65,99,-0.0925626392406995),(65,107,0.423535874507889),(65,110,0.167546617023225),(65,111,-0.609088412121952),(65,114,0.601031525620289),(65,116,0.488265633106479),(65,117,-0.402417065950499),(66,85,-0.249732963042085),(66,102,0.140659810174871),(66,105,0.0857875301370281),(66,108,0.898312326425977),(66,111,0.274971770378735),(66,115,0.157658619953001),(66,118,0.196356089968566),(67,86,-0.990874965666677),(67,90,0.487136448255867),(67,92,0.393841364787744),(67,104,0.645435956907865),(67,109,0.437665944395276),(67,111,0.681936094241157),(68,87,0.176183355204932),(68,88,0.715109714041566),(68,90,0.212225714896084),(68,93,0.996093630787072),(68,95,0.232245857112339),(68,96,0.543321024201178),(68,97,-0.970152897732475),(68,103,0.0686666463209937),(68,107,-0.790490432447279),(68,112,0.475539414654988),(68,114,0.422070986053041),(69,87,-0.710379345072787),(69,88,-0.873012482070376),(69,92,0.249397259437849),(69,94,-0.0587176122318186),(69,95,-0.000915555284279916),(69,97,-0.174352244636372),(69,108,0.905026398510697),(69,113,-0.342051454206977),(69,114,0.0119022186956389),(69,118,-0.565446943571276),(70,85,-0.319895016327403),(70,86,-0.52165288247322),(70,87,-0.154423657948546),(70,90,0.222540971098972),(70,96,-0.369335001678518),(70,97,-0.076357310708945),(70,99,-0.151676992095706),(70,105,-0.381115146336253),(70,107,0.711386455885495),(70,109,0.780541398358104),(70,110,0.636677144688253),(70,111,0.714682454908902),(71,85,-0.197119052705466),(71,93,-0.39539780877102),(71,96,-0.374858851893674),(71,100,0.338816492202521),(71,104,-0.905789361247597),(71,106,0.985595263527329),(71,111,-0.111728263191626),(71,113,-0.440076906643879),(72,94,-0.804925687429426),(72,96,0.860408337656789),(72,99,0.0456556901760918),(72,110,-0.529709768974883),(72,112,-0.0354625080111087),(72,114,-0.140415662099063),(72,115,0.925382244331187),(72,116,-0.322824793237098),(73,88,-0.822138126773888),(73,94,0.948728904080325),(73,99,0.772637104403821),(73,100,-0.24207281716361),(73,106,-0.00817896053956725),(73,110,0.227332377086703),(73,115,-0.229926450392163),(74,90,0.546800134281442),(74,94,0.21607104709006),(74,99,0.178685872981964),(74,102,-0.533219397564623),(74,106,-0.08661152989288),(74,107,-0.632099368266854),(74,110,-0.332010864589373),(74,113,0.10940885647145),(74,116,0.680654316843165),(75,85,0.41697439497055),(75,86,-0.234656819360942),(75,93,0.799218726157415),(75,98,-0.121158482619709),(75,103,-0.740714743491928),(75,105,-0.768700216681417),(75,111,-0.704550309762871),(75,117,-0.80275887325663),(76,86,-0.442915128025147),(76,89,0.0920133060701315),(76,92,0.661427655873287),(76,94,0.975951414532914),(76,99,0.317911313211463),(76,101,-0.205114902188177),(76,103,-0.337534714804529),(76,106,-0.626300851466414),(76,110,0.0248725852229377),(76,113,0.142155217139195),(77,88,0.954863124485),(77,91,0.978301339762566),(77,93,-0.623065889461959),(77,98,0.787621692556536),(77,101,0.637379070406201),(77,102,0.624195074312571),(77,103,0.731772820215461),(77,104,0.317484054078799),(77,105,-0.383648182622761),(77,109,0.277932065797906),(78,88,-0.315805536057619),(78,93,-0.265877254554888),(78,94,0.664632099368267),(78,101,0.154148991363262),(78,104,0.0953398236030152),(78,110,0.21637623218482),(78,114,0.646076845606861),(78,116,-0.971892452772607),(78,117,0.581286049989319),(78,118,-0.118289742728965),(79,87,-0.0364696188238166),(79,92,0.58363597521897),(79,94,0.735251930295724),(79,107,-0.228308969389935),(79,108,0.559556871242408),(79,114,0.229255043183691),(79,118,0.254921109653005),(80,87,0.67665639210181),(80,88,-0.0518509475997192),(80,91,-0.41483809930723),(80,99,0.484054078798791),(80,101,-0.658711508529923),(80,107,-0.185583056123539),(80,113,0.416608172856838),(81,85,-0.947660756248665),(81,86,-0.251289407025361),(81,90,-0.816217535935545),(81,93,-0.40980254524369),(81,96,-0.512192144535661),(81,97,-0.854060487685781),(81,106,-0.954954680013428),(81,107,0.222663045136876),(81,110,0.170690023499252),(81,115,0.25601977599414),(82,86,-0.366679891354106),(82,92,-0.715292825098422),(82,110,-0.45295571764275),(82,112,0.326822717978454),(83,87,0.792443617053743),(83,91,0.7834711752678),(83,93,0.460707419049654),(83,101,-0.333262123477889),(83,103,-0.797082430494095),(83,105,0.987792596209601),(83,108,-0.527634510330515),(84,85,0.880550553910947),(84,86,-0.241981261635182),(84,89,-0.807275612659078),(84,95,0.504715109714042),(84,99,-0.478865932187872),(84,104,0.382793664357433),(84,111,0.518570513016144),(84,113,-0.670308542130802),(84,114,-0.734702597125156)]
orgname='BHNEAT_1_5'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()