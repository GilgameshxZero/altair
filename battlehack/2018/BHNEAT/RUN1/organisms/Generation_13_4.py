edge = [(0,85,-0.767128513443403),(0,89,0.480010376293222),(0,90,2.78839991454817),(0,93,1.02536088137455),(0,98,-1.05253761406293),(0,101,-0.574236274300363),(0,105,1.76960051271096),(0,108,-1.66661580248421),(0,113,-0.238090151676992),(0,114,-0.754783776360363),(0,117,0.781350138859218),(0,118,-1.13568529313028),(1,86,2.67282631916257),(1,92,2.7244788964507),(1,98,2.47833185827204),(1,102,2.03012176885281),(1,104,0.427442243720817),(1,107,-0.0633106479079563),(1,108,0.147022919400616),(1,109,0.0314951017792291),(1,113,1.16766869106113),(2,87,-1.82505264442885),(2,88,-1.31839960936308),(2,100,0.26219977416303),(2,106,-2.79926450392163),(2,108,-1.43592638935514),(2,110,-0.021149327066866),(2,113,2.0134128849147),(2,118,-0.979750968962676),(3,89,-1.44106875820185),(3,92,-1.5344553971984),(3,97,1.18495742667928),(3,99,0.406949064607685),(3,101,-0.434263130588702),(3,103,0.677755058442946),(3,105,0.743919186986908),(3,108,1.42629779961547),(3,109,-0.681539353617969),(3,111,-3.12681966612751),(3,112,-1.21388897366253),(3,116,0.134617145298624),(4,90,0.759926145207068),(4,91,2.4347056489761),(4,97,-2.4487594225898),(4,99,0.0347605822931608),(4,101,0.179189428388318),(4,108,2.22220526749474),(4,113,-2.89295632801294),(4,118,-1.94618060853908),(5,86,-0.23749504074221),(5,87,1.97993408001953),(5,89,1.54632709738456),(5,92,-2.47262489700003),(5,93,2.21173741874447),(5,99,1.3191320535905),(5,104,0.794335764641255),(5,114,-1.73238319040498),(5,118,-1.30097354045228),(6,89,0.856685079500717),(6,92,-2.22037415692618),(6,94,-1.74779503769036),(6,100,2.83065279091769),(6,101,1.0663014618366),(6,103,0.60650959807123),(6,107,1.98770104068117),(6,110,2.05507065034944),(6,113,1.78087710196234),(7,85,0.0894192327646718),(7,86,-0.588869899594104),(7,90,1.50737022003845),(7,95,-1.25411236915189),(7,99,-1.40479750968963),(7,100,2.91984313486129),(7,104,1.5267036957915),(7,106,2.24562822351756),(7,108,-1.7630695516831),(7,112,0.556901760917997),(7,116,-0.943479720450453),(8,92,-0.997909482100894),(8,93,-1.0891903439436),(8,95,1.27637562181463),(8,99,-1.85833307901242),(8,106,0.902981658375805),(8,107,-0.966994232001709),(8,115,-1.59378337961974),(8,116,-0.926053651539659),(8,118,-1.98179570909757),(9,85,0.950254829554125),(9,87,-1.80344553971984),(9,98,0.424024170659505),(9,101,-1.96809289834284),(9,103,-1.09653004547258),(9,105,-2.40351573229163),(9,106,-0.28545487838374),(9,113,-2.09709463789788),(10,89,1.67719046601764),(10,96,1.80368968779565),(10,106,1.52352977080599),(10,108,2.81063264870144),(10,109,2.94845423749504),(10,111,0.436674092837306),(10,112,0.122989593188269),(10,114,0.770882290108951),(10,115,0.427213354899747),(10,116,2.21808526871548),(10,117,-1.37345500045778),(11,89,0.280175176244392),(11,97,-0.248329111606189),(11,105,0.527024140140995),(11,112,0.0779595324564348),(11,115,-1.95585497604297),(12,92,0.25891903439436),(12,93,-0.15065462202826),(12,94,1.20937223426008),(12,97,-2.95431379131443),(12,98,1.15903195287942),(12,99,0.724265266884365),(12,108,1.01078829309976),(12,116,0.118274483474227),(13,86,1.12991729483932),(13,87,-1.64397106845302),(13,90,-0.211386455885495),(13,99,-1.61578722495193),(13,102,1.70964690084536),(13,104,-2.74848170415357),(13,113,-1.11584826197089),(13,116,1.20415356913968),(13,118,0.536744285409101),(14,90,-1.07092501602222),(14,93,-0.832743308816797),(14,95,-1.97973570970794),(14,102,2.13882869960631),(14,104,-1.41010773033845),(14,106,1.12149418622394),(14,109,2.60867641224403),(14,110,2.98881496627705),(14,111,1.0729239783929),(15,85,-2.92921231727042),(15,92,-0.0394756920072023),(15,99,-0.176366466261788),(15,101,-2.5579088717307),(15,104,-2.93995483260598),(15,108,1.52423169652394),(15,117,1.34104434339427),(16,86,0.097430341502121),(16,87,-2.99479659413434),(16,88,-0.730521561326945),(16,90,-1.08496353038118),(16,91,1.05204931791131),(16,95,1.29348124637593),(16,97,1.86761070589312),(16,98,-1.42722861415448),(16,99,1.58809167760247),(16,101,3.22104556413465),(16,108,2.45680104983673),(16,110,2.19895016327403),(17,89,2.17638172551653),(17,96,2.33660390026551),(17,99,-0.45951719718009),(17,101,0.184438612018189),(17,106,-1.05896176030763),(17,107,-0.93412579729606),(17,109,-1.50119022186956),(18,90,0.713263344218268),(18,91,0.774178289132359),(18,93,-0.341334269234291),(18,99,2.65739921262246),(18,102,0.738593707083346),(18,103,-2.44419690542314),(18,104,1.22043519394513),(18,110,2.00236518448439),(18,111,-0.427503280739769),(18,116,-0.745567186498612),(18,117,-0.833307901242103),(18,118,0.033005767998291),(19,87,-2.72864467299417),(19,89,-1.9954222235786),(19,93,-1.50547807245094),(19,95,-2.42545854060488),(19,101,0.204458754234443),(19,105,-0.62602618488113),(19,115,-1.3824579607532),(20,88,0.733619190038759),(20,101,-0.191915646839808),(20,103,-2.66010010071108),(20,104,-0.905377361369671),(20,105,1.3977172154912),(20,106,-2.48937955870235),(20,111,-1.93136387218848),(20,116,0.703360087893307),(21,86,1.38065736869411),(21,87,0.790871913815729),(21,94,-0.23924985503708),(21,96,-0.900067140720847),(21,101,-0.999679555650502),(21,102,-1.0067445905942),(21,105,-1.99841303750725),(21,107,1.91683706167791),(21,108,-0.023300881984924),(22,86,-2.83414716025269),(22,88,-3.1489455854976),(22,91,0.577196569719535),(22,92,0.0953550828577532),(22,93,2.60408337656789),(22,98,1.96899319437239),(22,106,-1.79177220984527),(22,115,1.42655720694601),(22,117,-1.91785943174535),(23,85,-0.196676534318064),(23,86,-2.19467757194739),(23,88,-1.55172887356182),(23,90,-1.15929136020997),(23,97,0.0336619159520249),(23,104,-0.755043183690909),(23,112,1.99026459547716),(23,114,0.054033021027253),(23,115,0.644962920010987),(23,116,0.56717123935667),(24,89,-1.55603198339793),(24,90,-1.43449201940977),(24,91,0.200567644276254),(24,101,2.50303659169286),(24,107,2.56680501724296),(24,108,1.00523392437513),(24,110,2.14734336375011),(24,112,-2.80277413251137),(25,90,-0.356196783349101),(25,92,-1.33599353007599),(25,94,0.610492263557848),(25,98,2.42953276161992),(25,105,-1.28067873165075),(25,108,1.44642475661489),(25,109,2.50474562822352),(25,115,-0.1947233497116),(26,85,0.989089632862331),(26,87,-0.977797784356212),(26,89,-1.86353648487808),(26,95,-1.43499557481613),(26,98,1.64709921567431),(26,100,-0.420087282937101),(26,101,1.46836756492813),(26,102,-0.69769890438551),(26,103,0.966719565416425),(26,104,0.0368358409375287),(26,107,3.13118381298257),(26,109,1.62901699880978),(26,112,-0.958800012207404),(26,113,-0.829554124576556),(26,117,-0.478743858149968),(27,85,-0.744804223761712),(27,87,-2.12437818536943),(27,94,1.88773766289254),(27,100,1.89912106692709),(27,102,0.898922696615497),(27,103,-2.29934080019532),(27,104,0.346568193609424),(27,105,1.78638569292276),(27,108,0.602206488235115),(27,110,0.530396435438093),(27,114,-2.66069521164586),(28,87,2.67824335459456),(28,88,-0.314539017914365),(28,97,-1.82355723746452),(28,99,-0.906414990691855),(28,104,0.193136387218848),(28,113,-2.27231666005432),(28,114,1.3408154545732),(29,88,0.0319376201666309),(29,91,0.723014007995849),(29,102,1.25536362804041),(29,105,-1.98287911618397),(29,116,-0.312997833185827),(30,95,1.06140324106571),(30,96,2.03614917447432),(30,99,0.288308359019745),(30,101,0.994476149784844),(30,104,0.00846888637958922),(30,109,2.1392254402295),(30,110,0.914746543778802),(30,114,0.847453230384228),(30,118,2.99633777886288),(31,85,-0.184041871395001),(31,92,0.468947416608173),(31,94,1.59518723105563),(31,96,1.6001922666097),(31,99,-2.15903195287942),(31,103,0.524750511185034),(31,107,2.52182073427534),(31,108,2.66000854518265),(31,109,1.20741904965362),(31,111,0.575029755546739),(31,112,1.47030549027985),(31,117,0.617725150303659),(32,86,0.11070589312418),(32,87,1.47013763847774),(32,89,-1.00531022064882),(32,92,1.33887752922147),(32,98,0.961836603900265),(32,99,2.21535386211737),(32,104,2.19614246040223),(32,106,1.70172734763634),(32,109,0.0701315347758416),(32,116,-0.950987273781549),(32,118,2.73012482070376),(33,96,2.35485396893216),(33,98,-0.832972197637867),(33,108,0.819162572099979),(33,110,-1.3066805017243),(33,111,-1.94375438703574),(33,114,-1.92036194952239),(34,85,0.706030457472457),(34,90,-2.35013885921812),(34,99,0.139545884578997),(34,104,0.348918118839076),(34,109,0.450270088808863),(35,86,1.08386486404004),(35,87,3.10499893185217),(35,97,-1.83759575182348),(35,98,0.493408001953185),(35,100,0.887874996185186),(35,104,0.320719016083254),(35,107,-2.35402996917631),(35,109,1.04295480208747),(35,110,1.84963530381176),(35,112,1.90260017700736),(36,85,-0.621066927091281),(36,87,1.23215430158391),(36,90,-0.0251777703176976),(36,91,1.29482406079287),(36,104,2.59475997192297),(36,107,1.95045319986572),(36,109,0.747703482161931),(36,112,-2.29352702414014),(36,115,2.37434003723258),(36,117,1.78795739616077),(36,118,2.42341380046999),(37,85,2.15518662068545),(37,86,0.597247230445265),(37,87,1.36219367046113),(37,91,2.29667043061617),(37,99,-0.854762413403729),(37,105,-0.107226783043916),(37,111,0.246986297189245),(37,112,2.60905789361248),(37,118,-0.464293343913083),(38,87,0.287545396282846),(38,90,-0.471068453016755),(38,103,0.331690420239875),(38,105,-1.78727072969756),(38,106,1.59627063814203),(38,111,0.779564806054872),(38,115,2.28707235938597),(39,87,0.0184026612140263),(39,89,-0.784554582354198),(39,91,-0.513321329386273),(39,94,-1.74820703756829),(39,97,0.967619861445967),(39,98,0.39112521744438),(39,107,-1.8026673177282),(39,108,0.454466383861812),(39,109,0.257789849543748),(39,111,-1.23029267250587),(39,113,1.38415173802911),(39,116,2.22974333933531),(39,118,-0.992721335489975),(40,88,2.86413159581286),(40,92,1.98782311471908),(40,99,-1.3317819757683),(40,104,0.560060426648762),(40,110,2.01591540269173),(40,116,-1.27191991943114),(40,118,1.3860744041261),(41,88,1.37485885189367),(41,93,2.33475753044221),(41,96,-0.960600604266488),(41,97,1.38271736808374),(41,100,1.46641438032166),(41,101,1.78690450758385),(41,104,-1.09938352610858),(41,105,-1.796563615833),(41,106,-2.00189214758751),(41,107,-1.1947233497116),(41,109,-0.810052797021393),(41,110,2.35673085726493),(41,111,0.0310373241370892),(41,112,-1.89686269722587),(42,85,-0.459120456556902),(42,86,-2.4418927579577),(42,87,2.3247932370983),(42,99,0.032425916318247),(42,100,1.30188909573656),(42,103,0.114749595629749),(42,109,-1.40694906460768),(42,113,-0.955122531815546),(43,85,2.85428937650685),(43,88,1.75328836939604),(43,89,-1.51019318216498),(43,93,-1.63698232978301),(43,97,-0.589632862331004),(43,98,-3.15367595446638),(43,101,-0.467589342936491),(43,102,2.45629749443037),(43,103,-0.695287942136906),(43,105,0.135120700704978),(43,110,2.03781243324076),(43,112,3.23749504074221),(43,114,-1.61990722373119),(43,116,-2.32940153202918),(44,89,0.75914792321543),(44,98,1.40415662099063),(44,99,0.280251472518082),(45,87,-1.34470656453139),(45,88,-1.8279671620838),(45,90,1.85576952421644),(45,91,0.137958922086245),(45,95,0.82181768242439),(45,98,2.03646961882382),(45,108,-0.437589648121586),(45,109,-0.0129245887630848),(45,112,1.01518295846431),(45,115,-0.167943357646413),(46,85,1.54982146671957),(46,89,-1.28812524796289),(46,91,0.907269508957183),(46,94,0.780297250282296),(46,97,-0.779534287545396),(46,100,1.10615863521226),(46,101,0.241569261757256),(46,108,-1.68973357341227),(46,112,2.28679769280068),(47,86,-2.14084292123173),(47,91,3.02261421552171),(47,92,0.664830469679861),(47,94,1.12005981627857),(47,95,-2.70882290108951),(47,100,0.609698782311472),(47,101,0.136494033631397),(47,104,-1.78655354472488),(47,105,-0.565523239844966),(47,108,0.87290566728721),(47,112,-0.19029816583758),(47,114,1.08653523361919),(47,118,1.92547379985961),(48,86,1.07580797753838),(48,91,-2.04304635761589),(48,98,1.95030060731834),(48,99,-2.33462019714957),(48,100,1.07358012634663),(48,103,-1.52877895443587),(48,105,-0.132923368022706),(48,106,-2.17722098452712),(48,111,-0.946852015747551),(48,115,1.88596758934294),(49,87,-2.24239326151311),(49,89,-1.39548936429945),(49,93,-0.147511215552232),(49,94,-1.12224188970611),(49,95,-0.0179448835718864),(49,102,2.25533310953093),(49,113,-1.64786217841121),(49,114,2.17586291085543),(50,89,-0.319971312601093),(50,105,1.52853480636006),(50,107,0.952513199255348),(51,87,-0.110644856105228),(51,92,-1.13571581163976),(51,97,0.790688802758873),(51,98,0.534257026886807),(51,103,1.62070070497757),(51,106,-2.37360759300516),(51,112,0.207678456984161),(51,118,-0.228385265663625),(52,89,-0.320856349375897),(52,97,-0.781380657368694),(52,106,-1.12117374187445),(52,110,0.135196996978668),(52,111,1.72806482131413),(52,113,-0.298608355967894),(52,114,-2.86048463393048),(52,118,-0.778176213873714),(53,88,-0.751258888515885),(53,90,0.496917630542924),(53,92,-0.431089205603198),(53,94,2.71530808435316),(53,104,-0.117145298623615),(53,105,0.579149754325999),(53,109,0.364299447614979),(54,85,1.56015198217719),(54,91,3.08603167821284),(54,94,1.08186590166936),(54,96,0.862071596423231),(54,111,3.07061983092746),(54,112,0.769539475692007),(54,113,-0.993346964934233),(54,118,-2.40316476943266),(55,87,-1.84818567461165),(55,95,1.26422925504318),(55,107,1.8656727805414),(55,110,1.35372478408155),(55,117,-0.304101687673574),(56,107,-2.2462843714713),(56,111,-0.4143040253914),(56,113,1.31324198126164),(56,114,-0.405194250312815),(57,87,-2.66707358012635),(57,90,1.43592638935514),(57,91,0.584200567644276),(57,92,-0.201773125400555),(57,93,-2.0567033906064),(57,94,-1.19933164464248),(57,95,-2.00218207342753),(57,96,0.0516983550523392),(57,100,1.10060426648762),(57,102,-2.50488296151616),(57,103,1.379207739494),(57,115,1.33434553056429),(58,86,2.37511825922422),(58,87,-2.01800592059084),(58,89,0.880855739005707),(58,90,0.130237739188818),(58,95,1.3720969267861),(58,96,2.10272530289621),(58,101,0.96005127109592),(58,103,0.178548539689322),(58,109,-2.39394817957091),(58,110,0.439741203039643),(58,113,1.91492965483566),(58,114,-1.13689077425459),(58,115,-0.776757103183081),(58,118,-2.38021485030671),(59,85,-1.23871578112125),(59,86,0.618228705710013),(59,90,-0.892941068758202),(59,91,2.79663991210669),(59,93,-0.118366039002655),(59,97,0.728537858211005),(59,98,1.42341380046999),(59,100,-1.99754325998718),(59,102,1.32010864589373),(59,112,-2.16498306222724),(59,114,0.763542588579974),(60,85,-1.37649159215064),(60,87,-2.54667806024354),(60,90,-1.00570696127201),(60,91,-0.201956236457411),(60,96,-0.320398571733757),(60,100,1.23436689352092),(60,101,-1.67651905880917),(60,105,1.79212317270425),(60,107,1.64094973601489),(60,109,-1.44195379497665),(60,110,-1.71443830683309),(60,114,-0.331675160985137),(61,89,-1.90842921231727),(61,94,0.170735801263466),(61,96,2.02893154698325),(61,98,-0.43626209295938),(61,100,-2.19664601580859),(61,102,1.10820337534715),(61,103,1.36463515121921),(61,114,0.0301522873622851),(61,115,-0.76311532944731),(62,93,0.930478835413678),(62,95,-0.621051667836543),(62,107,-0.299081392864772),(62,109,-3.09729300820948),(62,110,2.3886837366863),(62,111,-0.725562303537095),(63,87,0.139118625446333),(63,90,2.91332743308817),(63,93,0.499130222479934),(63,97,0.143238624225593),(63,100,1.37063203833125),(63,103,-2.9691610461745),(63,104,2.23453474532304),(63,108,1.10925626392407),(63,111,-2.92315439313944),(63,114,-1.726325266274),(63,117,-0.848918118839076),(64,87,-1.82645649586474),(64,94,0.809289834284494),(64,99,-0.0733359782708213),(64,110,-1.54417554246651),(64,112,0.578524124881741),(64,116,-2.33736686300241),(65,87,-0.158192693868832),(65,88,0.724173711355937),(65,90,-1.44276253547777),(65,97,-1.40075380718406),(65,99,0.904736472670675),(65,107,-1.45194860683004),(65,110,1.14267403180029),(65,111,-1.10769981994079),(65,114,-2.10141300698874),(65,116,-0.531723990600299),(65,117,-0.97460860011597),(66,85,1.53459273049104),(66,102,0.718161564989166),(66,105,2.36468092898343),(66,108,3.06369212927641),(66,111,1.10518204290902),(66,115,-1.2072511978515),(66,118,0.0768913846247749),(67,86,0.467894528031251),(67,90,-0.502197332682272),(67,92,1.71988586077456),(67,104,-0.102053895687734),(67,109,1.32099368266854),(67,111,-0.933698538163396),(68,87,-1.6419568468276),(68,88,-1.17899105807672),(68,90,-0.89494003112888),(68,93,-0.719107638782922),(68,95,0.518204290902432),(68,96,0.277169103061007),(68,97,0.353816339609973),(68,103,2.18695638904996),(68,107,-0.140690328684347),(68,112,-2.09189123203223),(68,114,-0.934385204626606),(69,87,0.762901699880978),(69,88,0.812463759269997),(69,92,0.673085726493118),(69,94,-0.795892208624531),(69,95,0.901058992278817),(69,97,-1.19595934934538),(69,108,0.0582140568254646),(69,113,-0.736030152287362),(69,114,2.69847712637715),(69,118,-0.712164677877132),(70,85,-2.68803979613636),(70,86,-0.473342081972716),(70,87,1.33826715903195),(70,90,-1.04599139378033),(70,96,0.580767235328226),(70,97,0.375591296121097),(70,99,1.86010315256203),(70,105,1.33315530869472),(70,107,0.750511185033723),(70,109,1.8885616626484),(70,110,0.948438978240303),(70,111,-0.274117252113407),(71,85,1.89201025421918),(71,93,-2.12247077852718),(71,96,0.896267586291085),(71,100,-0.132023071993164),(71,104,-1.18892483291116),(71,106,0.637623218482009),(71,111,-1.03567613757744),(71,113,1.70407727286599),(72,94,3.24498733481857),(72,96,-0.87130344553972),(72,99,-0.698278756065554),(72,110,1.20479445783868),(72,112,-2.41111484115116),(72,114,0.623676259651479),(72,115,1.24637592699973),(72,116,0.718008972441786),(73,88,1.25428022095401),(73,94,2.17458113345744),(73,99,-2.46444593646046),(73,100,-0.293649098178045),(73,106,0.0778221991637928),(73,110,2.49023407696768),(73,115,0.117175817133091),(74,90,0.257820368053224),(74,94,-0.730185857722709),(74,99,1.72261726737266),(74,102,1.49114963225196),(74,106,-0.168294320505387),(74,107,-0.120471816156499),(74,110,-1.53407391582995),(74,113,0.54826502273629),(74,116,-0.316232795190283),(75,85,-1.38549455244606),(75,86,-1.48083437604907),(75,93,-0.858760338145085),(75,98,-2.49114963225196),(75,103,-0.839991454817347),(75,105,2.37408062990204),(75,111,1.120792260506),(75,117,-0.725363933225501),(76,86,-0.379589220862453),(76,89,-1.22009949034089),(76,92,-0.789101840266121),(76,94,-2.00094607379376),(76,99,-1.55926694540239),(76,101,-0.245674001281777),(76,103,1.00531022064882),(76,106,0.246116519669179),(76,110,-2.30475783562731),(76,113,0.151066621906186),(77,88,-0.0233924375133518),(77,91,-1.4759056367687),(77,93,-0.198217719046602),(77,98,-0.662633136997589),(77,101,-0.831965086825159),(77,102,0.207037568285165),(77,103,0.097659230323191),(77,104,0.423749504074221),(77,105,-1.09796441541795),(77,109,0.143925290688803),(78,88,-0.169820245979186),(78,93,3.07185583056124),(78,94,0.521897030549028),(78,101,0.539063692129276),(78,104,0.456373790704062),(78,110,-0.555558946501053),(78,114,0.0124362926114689),(78,116,-1.39790032654805),(78,117,1.94441053498947),(78,118,2.07142857142857),(79,87,-0.925595873897519),(79,92,1.98217719046602),(79,94,0.849070711386456),(79,107,1.1070589312418),(79,108,0.85003204443495),(79,114,0.841883602404859),(79,118,-1.62868129520554),(80,87,0.628299813837092),(80,88,-0.941343424787133),(80,91,0.607409894100772),(80,99,2.31333353679006),(80,101,1.78490554521317),(80,107,-0.554612872707297),(80,113,0.243079927976318),(81,85,-0.408490249336222),(81,86,-0.456648457289346),(81,90,0.737464522232734),(81,93,1.92242194891202),(81,96,-0.311075167088839),(81,97,-0.780907620471816),(81,106,-1.79856257820368),(81,107,2.51066621906186),(81,110,-0.578341013824885),(81,115,1.74091311380352),(82,86,0.294259468367565),(82,92,1.16521195104831),(82,110,-0.852443006683554),(82,112,-0.266243476668599),(83,87,-2.07602160710471),(83,91,0.674474318674276),(83,93,-2.28197576830348),(83,101,-0.742164372692038),(83,103,1.19983520004883),(83,105,1.5696737571337),(83,108,-0.982726523636586),(84,85,-0.802743614001892),(84,86,0.440916165654469),(84,89,-0.228339487899411),(84,95,1.1503494369335),(84,99,0.591143528550066),(84,104,1.22959074678793),(84,111,0.103518784142582),(84,113,-2.80614642780847),(84,114,-1.00984221930601),(35,105,0.0937070833460494)]
orgname='BHNEAT_13_4'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()