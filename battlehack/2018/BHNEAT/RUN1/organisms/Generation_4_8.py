edge = [(0,85,-0.541154210028382),(0,89,-0.515121921445357),(0,90,0.543046357615894),(0,93,-0.159077730643635),(0,98,2.13892025513474),(0,101,1.59990234076968),(0,105,-0.0305490279854732),(0,108,-1.06489761040071),(0,113,-2.37781914731285),(0,114,1.1887417218543),(0,117,-0.310617389446699),(0,118,1.28269295327616),(1,86,0.964354380932035),(1,92,1.8412579729606),(1,98,-0.488433484908597),(1,102,-1.73250526444288),(1,104,0.83028656880398),(1,107,-2.56414990691855),(1,108,-1.7715842158269),(1,109,-2.80404065065462),(1,113,1.93646046327097),(2,87,0.0791955320902127),(2,88,1.03367717520676),(2,100,-2.0647755363628),(2,106,-1.14966277047029),(2,108,-0.293252357554857),(2,110,0.122852259895627),(2,113,1.51472518082217),(2,118,2.12654499954222),(3,89,1.58694723349712),(3,92,1.31536301767022),(3,97,-1.50042725913266),(3,99,2.50010681478317),(3,101,0.738319040498062),(3,103,0.864864040040284),(3,105,-1.11264381847591),(3,108,1.4176763206885),(3,109,-1.41505172887356),(3,111,1.50996429334391),(3,112,-0.318124942777795),(3,116,-0.843882564775536),(4,90,1.4606463820307),(4,91,2.63626514481033),(4,97,-0.131229590746788),(4,99,1.4750205999939),(4,101,1.91193884090701),(4,108,2.36149174474319),(4,113,-2.86114078188421),(4,118,-1.62968840601825),(5,86,-2.35801263466292),(5,87,-2.95622119815668),(5,89,-0.194326609088412),(5,92,-1.18317209387494),(5,93,1.87237159337138),(5,99,-1.26693014313181),(5,104,-1.48936429944762),(5,114,0.934080019531846),(5,118,0.325891903439436),(6,89,-1.1064180425428),(6,92,-1.429120761742),(6,94,2.36921292764061),(6,100,2.46501052888577),(6,101,-1.13576158940397),(6,103,2.14282662434767),(6,107,1.83587145603809),(6,110,2.04281746879482),(6,113,1.51689199499496),(7,85,2.09465315713981),(7,86,-0.887020477919858),(7,90,-0.0724967192602313),(7,95,2.42048402356029),(7,99,-2.11566515091403),(7,100,2.47129734183782),(7,104,-0.221503341776788),(7,106,-0.179555650502029),(7,108,0.126743369853816),(7,112,1.27701651051363),(7,116,0.540742210150456),(8,92,-2.28827784051027),(8,93,-0.726615192114017),(8,95,-2.17896053956725),(8,99,-0.756385998107852),(8,106,1.4582354197821),(8,107,1.65433210242012),(8,115,-0.883831293679617),(8,116,1.52359080782495),(8,118,1.75875118259224),(9,85,-0.765358439893796),(9,87,-1.6959288308359),(9,98,-0.459227271340068),(9,101,-0.975264748069704),(9,103,3.22458571123386),(9,105,-0.287331766716514),(9,106,2.20526749473556),(9,113,-0.555238502151555),(10,89,-1.66876735740226),(10,96,1.35602893154698),(10,106,-0.71599475081637),(10,108,1.63820307016205),(10,109,-0.0801721243934446),(10,111,-2.39391766106143),(10,112,1.29665517136143),(10,114,-2.1411938840907),(10,115,-1.15517136143071),(10,116,0.995788445692312),(10,117,-0.801904354991302),(11,89,0.656880397961364),(11,97,1.11201818903165),(11,105,1.25734733115635),(11,112,1.00051881466109),(11,115,-0.0994140446180608),(12,92,-1.17273476363414),(12,93,-0.392284920804468),(12,94,0.402951139866329),(12,97,1.23441267128513),(12,98,-1.83262123477889),(12,99,-1.36082033753471),(12,108,1.94785912656026),(12,116,-1.5995513779107),(13,86,1.4129001739555),(13,87,-2.12700277718436),(13,90,1.11752677999207),(13,99,1.41521958067568),(13,102,2.67514572588275),(13,104,-0.772118289742729),(13,113,-0.141361735892819),(13,116,-0.75594347972045),(13,118,-2.05536057618946),(14,90,0.39463484603412),(14,93,-0.691076387829219),(14,95,0.0918301950132755),(14,102,1.30501724295785),(14,104,-0.790429395428327),(14,106,1.68527787102878),(14,109,-1.82992034669027),(14,110,3.03636280404065),(14,111,1.42994476149785),(15,85,-0.345332193975646),(15,92,1.74420911282693),(15,99,-1.75176244392224),(15,101,1.6602679525132),(15,104,-2.96874904629658),(15,108,-1.91349528489029),(15,117,-0.729773857844783),(16,86,-0.137409588915677),(16,87,1.50263985106967),(16,88,-0.550431836909085),(16,90,-2.12497329630421),(16,91,-0.463515121921445),(16,95,0.785195471053194),(16,97,1.51490829187902),(16,98,-2.84696493423261),(16,99,-1.25597399822993),(16,101,-0.691106906338694),(16,108,0.404156620990631),(16,110,0.662312692648091),(17,89,0.663792840357677),(17,96,-1.77797784356212),(17,99,-1.80558183538316),(17,101,1.09083834345531),(17,106,-1.84894863734855),(17,107,-1.35471663563952),(17,109,-0.468520157475509),(18,90,-1.49772637104404),(18,91,-1.98307748649556),(18,93,0.143299661244545),(18,99,1.24849696340831),(18,102,2.0932035279397),(18,103,0.157322916348766),(18,104,1.00303659169286),(18,110,0.248054445020905),(18,111,-2.29789117099521),(18,116,2.63913388470107),(18,117,2.11732840968047),(18,118,-0.874141666920988),(19,87,-0.633136997589038),(19,89,0.91071810052797),(19,93,0.987823114719077),(19,95,-1.24462111270486),(19,101,0.775215918454543),(19,105,1.55525376140629),(19,115,-1.88146610919523),(20,88,0.906781212805567),(20,101,1.9234595782342),(20,103,-0.393230994598224),(20,104,-0.508575701162755),(20,105,0.714987640003662),(20,106,0.599902340769677),(20,111,1.11101107821894),(20,116,-0.973067415387433),(21,86,1.35572374645222),(21,87,0.192068239387188),(21,94,1.50218207342753),(21,96,-1.88650166325877),(21,101,0.5834070863979),(21,102,-2.03656117435224),(21,105,1.74004333628346),(21,107,0.103793450727866),(21,108,0.50091555528428),(22,86,-1.89532151249733),(22,88,-2.04876857814264),(22,91,-0.422620319223609),(22,92,1.47828608050783),(22,93,2.23143711661123),(22,98,0.832178716391491),(22,106,-0.663624988555559),(22,115,0.866069521164586),(22,117,-1.75734733115635),(23,85,-0.378734702597125),(23,86,-0.490279854731895),(23,88,2.27471236304819),(23,90,0.754631183812983),(23,97,1.91753898739586),(23,104,-2.38077944273202),(23,112,0.795266579180273),(23,114,2.0309610278634),(23,115,-2.06907864619892),(23,116,0.295678579058199),(24,89,0.760490737632374),(24,90,-2.39809869685965),(24,91,-0.392635883663442),(24,101,2.43188268684957),(24,107,0.785653248695334),(24,108,-1.35209204382458),(24,110,-0.87130344553972),(24,112,0.0227057710501419),(25,90,-0.30848109378338),(25,92,0.340250862147893),(25,94,1.67764824365978),(25,98,0.139744254890591),(25,105,-0.828638569292276),(25,108,0.706091494491409),(25,109,-1.29161961729789),(25,115,-0.420194097720267),(26,85,-0.116122928556169),(26,87,1.24875637073885),(26,89,-0.113696707052828),(26,95,-1.78482924893948),(26,98,-1.54554887539293),(26,100,-0.721045564134648),(26,101,-0.552690206610309),(26,102,-1.18793298135319),(26,103,0.731742301705985),(26,104,0.0328226569414349),(26,107,2.41024506363109),(26,109,2.8287301248207),(26,112,0.947248756370739),(26,113,-1.77132480849635),(26,117,-1.97291482284005),(27,85,2.44102298043764),(27,87,-0.448789941099277),(27,94,2.47413556321909),(27,100,-0.322611163670766),(27,102,0.576754051332133),(27,103,-1.26657918027284),(27,104,-0.393444624164556),(27,105,0.495818964201788),(27,108,0.127292703024384),(27,110,2.4951017792291),(27,114,-0.442670979949339),(28,87,1.1045716727195),(28,88,-0.860423596911527),(28,97,-1.58386486404004),(28,99,-0.554063539536729),(28,104,1.62953581347087),(28,113,2.16931669057283),(28,114,0.276680806909391),(29,88,-1.93844416638691),(29,91,2.33718375194555),(29,102,-2.62617877742851),(29,105,1.10315256202887),(29,116,-2.14484084597308),(30,95,-0.197210608233894),(30,96,2.68198187200537),(30,99,-1.94244209112827),(30,101,-1.46856593523972),(30,104,2.05388042847987),(30,109,0.161046174504837),(30,110,2.76779992065188),(30,114,-0.367915890987884),(30,118,1.37290566728721),(31,85,1.04408398693808),(31,92,-1.07014679403058),(31,94,-1.65068514053774),(31,96,1.93218787194433),(31,99,-0.989288003173925),(31,103,0.7654805139317),(31,107,2.35528122806482),(31,108,-0.677129428998688),(31,109,0.0897396771141697),(31,111,-1.9961851863155),(31,112,-1.96461378826258),(31,117,1.59688100833155),(32,86,1.58427686391797),(32,87,0.685171056245613),(32,89,-1.59581286049989),(32,92,1.9251075777459),(32,98,0.0386822107608266),(32,99,-0.844889675588244),(32,104,-0.150837733085116),(32,106,1.77243873409223),(32,109,-1.42089602343822),(32,116,1.95240638447218),(32,118,0.236777855769524),(33,96,2.43581957457198),(33,98,-1.74210333567309),(33,108,-2.5347758415479),(33,110,0.908536027100436),(33,111,-0.21485030671102),(33,114,-2.54562517166662),(34,85,2.0120090334788),(34,90,-1.7164067506943),(34,99,-2.18622394482253),(34,104,0.157536545915098),(34,109,2.61996826075015),(35,86,-1.5806756797998),(35,87,-0.0596026490066225),(35,97,1.06643879512925),(35,98,-1.57344279305399),(35,100,0.379558702352977),(35,104,0.751655629139073),(35,107,1.97366252632221),(35,109,1.68070009460738),(35,110,-0.45829645680105),(35,112,-1.61949522385327),(36,85,-0.737739188818018),(36,87,-0.742194891201514),(36,90,0.759117404705954),(36,91,-0.779473250526444),(36,104,-0.185232093264565),(36,107,0.0156865138706625),(36,109,-1.12949003570666),(36,112,1.18318735312967),(36,115,1.14749595629749),(36,117,1.88995025482955),(36,118,-1.97535630359813),(37,85,2.73024689474166),(37,86,-2.08133182775353),(37,87,2.02832117679373),(37,91,-0.310129093295083),(37,99,-1.27156895657216),(37,105,-1.10754722739341),(37,111,1.82514419995727),(37,112,-2.05056917020173),(37,118,0.970152897732474),(38,87,1.16309091463973),(38,90,-0.206167790765099),(38,103,-0.850321970274972),(38,105,-1.33840449232459),(38,106,0.0120090334788049),(38,111,0.307290871913816),(38,115,-1.95489364299448),(39,87,-1.11706900234993),(39,89,-1.627140110477),(39,91,-1.89822077089755),(39,94,1.87105929746391),(39,97,2.60202337717826),(39,98,-0.149693288979766),(39,107,0.759254737998596),(39,108,-0.463621936704611),(39,109,-0.976775414288766),(39,111,-2.21591845454268),(39,113,1.01568651387066),(39,116,0.149678029725028),(39,118,-0.551881466109195),(40,88,-1.88624225592822),(40,92,1.41358684041871),(40,99,0.236594744712668),(40,104,0.750755333109531),(40,110,0.625827814569536),(40,116,1.78702658162175),(40,118,0.673467207861568),(41,88,-0.0886715292825099),(41,93,0.447141941587573),(41,96,-0.119815668202765),(41,97,-1.93162327951903),(41,100,0.879177220984527),(41,101,1.51141392254402),(41,104,1.61937314981536),(41,105,-2.02653584398938),(41,106,-1.95927304910428),(41,107,-3.09794915616321),(41,109,2.70923490096744),(41,110,-1.32386242255928),(41,111,-1.53700369273965),(41,112,-3.29660939359722),(42,85,3.02583391827143),(42,86,-1.27356791894284),(42,87,-1.26265755180517),(42,99,-0.502929776909696),(42,100,0.675145725882748),(42,103,2.16734824671163),(42,109,-0.90781884212775),(42,113,2.08937345500046),(43,85,-0.298242133854183),(43,88,0.054139835810419),(43,89,0.413785210730308),(43,93,2.74489577929014),(43,97,-0.213461714529862),(43,98,-1.89843440046388),(43,101,0.529862361522263),(43,102,-1.05415509506516),(43,103,0.197058015686514),(43,105,1.76145207068087),(43,110,-2.71452986236152),(43,112,3.03636280404065),(43,114,-0.886577959532457),(43,116,-1.59941404461806),(44,89,2.03468428601947),(44,98,1.20001831110569),(44,99,0.408673360393078),(45,87,0.509674367503891),(45,88,1.26699118015076),(45,90,1.02385021515549),(45,91,2.13588366344188),(45,95,2.05348368785668),(45,98,-0.438673055207984),(45,108,1.21979430524613),(45,109,-1.74533829767754),(45,112,0.870708334604938),(45,115,-1.73183385723441),(46,85,-1.28496658223212),(46,89,-1.18739890743736),(46,91,0.641972106082339),(46,94,-1.72157963805048),(46,97,2.2406231879635),(46,100,0.997070223090304),(46,101,1.9307687612537),(46,108,0.865260780663472),(46,112,1.89609973448897),(47,86,1.63216040528581),(47,91,-1.63824884792627),(47,92,-1.30008850367748),(47,94,-0.674031800286874),(47,95,-1.88770714438307),(47,100,-1.11810663167211),(47,101,1.35471663563952),(47,104,-1.50431836909085),(47,105,-0.297494430372021),(47,108,1.74283577990051),(47,112,1.06874294259468),(47,114,0.288537247840815),(47,118,-1.9518112735374),(48,86,-0.238517410809656),(48,91,1.11339152195807),(48,98,1.63971373638112),(48,99,-0.716391491439558),(48,100,0.600466933194983),(48,103,-1.34018982512894),(48,105,-1.55088961455123),(48,106,-1.17876216925565),(48,111,-2.09143345439009),(48,115,-0.0854213080233162),(49,87,-0.992904446546831),(49,89,-1.52233954893643),(49,93,-0.68984038819544),(49,94,0.444029053621021),(49,95,-0.801583910641804),(49,102,0.632541886654256),(49,113,-2.35509811700797),(49,114,0.560106204412976),(50,89,1.02018799401837),(50,105,-2.10855433820612),(50,107,-1.70511490218818),(51,87,-1.33425397503586),(51,92,2.18463698232978),(51,97,0.496322519608142),(51,98,-0.912762840662862),(51,103,0.558091982787561),(51,106,1.96273689992981),(51,112,-0.734794152653584),(51,118,2.91877498702963),(52,89,1.53236487929929),(52,97,0.102633747367778),(52,106,-2.52156132694479),(52,110,-0.489883114108707),(52,111,0.464552751243629),(52,113,-0.815698721274453),(52,114,1.77837458418531),(52,118,-0.213003936887722),(53,88,2.15858943449202),(53,90,1.58021790215766),(53,92,-2.76038392284921),(53,94,1.22960600604266),(53,104,-2.40742210150456),(53,105,-0.340708639790033),(53,109,0.899639881588183),(54,85,-2.00555436872463),(54,91,1.19823297830134),(54,94,-1.23990600299081),(54,96,0.54277169103061),(54,111,-0.580233161412397),(54,112,2.02600177007355),(54,113,1.2521897030549),(54,118,-0.850581377605518),(55,87,0.342265083773308),(55,95,-0.150303659169286),(55,107,-0.956602679525132),(55,110,-0.655430768761254),(55,117,0.555696279793695),(56,107,-2.05230872524186),(56,111,-0.824152348399304),(56,113,1.66623432111576),(56,114,0.812875759147923),(57,87,-0.121784112063967),(57,90,1.43501083407086),(57,91,-0.155293435468612),(57,92,0.331400494399854),(57,93,-1.4551835688345),(57,94,2.00741599780267),(57,95,-1.04538102359081),(57,96,-1.49906918546098),(57,100,0.162984099856563),(57,102,1.91065706350902),(57,103,-0.543107394634846),(57,115,-2.27533799249245),(58,86,2.40433973204749),(58,87,-1.32702108829005),(58,89,1.42913602099673),(58,90,0.00318918424024173),(58,95,-2.00312814722129),(58,96,0.529679250465407),(58,101,-0.0613879818109684),(58,103,-1.57379375591296),(58,109,1.62933744315928),(58,110,-1.24327829828791),(58,113,2.3778801843318),(58,114,-0.427594836268197),(58,115,0.870952482680746),(58,118,0.391186254463332),(59,85,1.44705038605914),(59,86,2.02267525254067),(59,90,1.5535294656209),(59,91,-2.19925534836879),(59,93,-1.69382305368206),(59,97,1.66542558061464),(59,98,-1.35769219031342),(59,100,0.0417188024536881),(59,102,-0.506424146244697),(59,112,0.794198431348613),(59,114,2.07037568285165),(60,85,0.227347636341441),(60,87,-0.847499008148442),(60,90,2.11499374370556),(60,91,1.33292641987365),(60,96,-0.539918210394604),(60,100,-1.49374370555742),(60,101,-0.419522690511795),(60,105,0.353816339609973),(60,107,-1.11745048371837),(60,109,-2.82261116367077),(60,110,-2.84833826715903),(60,114,-0.162007507553331),(61,89,-2.57599108859523),(61,94,-0.601458784752953),(61,96,-0.389889217810602),(61,98,0.906384472182379),(61,100,0.197714163640248),(61,102,-0.760567033906064),(61,103,-0.322717978453932),(61,114,-2.1605883968627),(61,115,-0.675847651600696),(62,93,0.88898892178106),(62,95,-1.01590014343699),(62,107,-1.31548509170812),(62,109,0.232291634876553),(62,110,0.116687520981475),(62,111,-0.982039857173376),(63,87,0.992263557847835),(63,90,1.92020935697501),(63,93,1.72675252540666),(63,97,2.27178258613849),(63,100,2.24570451979125),(63,103,-1.34371471297342),(63,104,0.543275246436964),(63,108,0.621570482497635),(63,111,1.92800683614612),(63,114,-2.38273262733848),(63,117,-1.77329325235755),(64,87,0.796792504654073),(64,94,-0.787179174169134),(64,99,1.38021485030671),(64,110,-1.70938749351482),(64,112,0.467375713370159),(64,116,1.11174352244636),(65,87,2.43974120303964),(65,88,0.320230719931639),(65,90,0.618686483352153),(65,97,0.903088473158971),(65,99,-1.52336191900388),(65,107,0.424298837244789),(65,110,-1.30988494521928),(65,111,-1.78344065675832),(65,114,-0.0716574602496414),(65,116,-0.0800195318460646),(65,117,-0.762932218390454),(66,85,-1.41369365520188),(66,102,1.49037141026032),(66,105,0.623722037415693),(66,108,-1.48510696737571),(66,111,-0.249351481673635),(66,115,1.43478194524979),(66,118,1.36637470625935),(67,86,-0.736533707693716),(67,90,-1.48994415112766),(67,92,2.91186254463332),(67,104,-1.36558122501297),(67,109,-0.654744102298044),(67,111,-0.730475783562731),(68,87,0.381511886959441),(68,88,0.338526566362499),(68,90,-1.95883053071688),(68,93,-0.795007171849727),(68,95,2.21327860347301),(68,96,0.0188146610919523),(68,97,-0.0189977721488083),(68,103,-2.13042085024567),(68,107,0.362743003631703),(68,112,-0.703695791497543),(68,114,0.703604235969115),(69,87,0.723288674581133),(69,88,-1.19563890499588),(69,92,0.154728843043306),(69,94,-2.51550340281381),(69,95,0.0901058992278817),(69,97,1.9015320291757),(69,108,-0.113422040467544),(69,113,1.52821436201056),(69,114,2.02322458571123),(69,118,-0.708563493758965),(70,85,0.191274758140812),(70,86,1.12474440748314),(70,87,-2.43163853877377),(70,90,0.236396374401074),(70,96,-0.380443739127781),(70,97,-1.60069582201605),(70,99,0.561052278206732),(70,105,-2.5160222174749),(70,107,2.75661488692892),(70,109,-0.00314340647602771),(70,110,0.442793053987243),(70,111,-0.362117374187445),(71,85,1.52703939939573),(71,93,-1.54300057985168),(71,96,-0.835093234046449),(71,100,-0.463560899685659),(71,104,-0.494598223822749),(71,106,0.0429548020874661),(71,111,2.3366801965392),(71,113,0.251243629261147),(72,94,-1.70270393993957),(72,96,-0.157734916226692),(72,99,1.01947080904569),(72,110,1.93014313180944),(72,112,-1.60643330179754),(72,114,1.37562181463057),(72,115,1.36460463270974),(72,116,0.594821008941923),(73,88,-1.99598681600391),(73,94,1.3608966338084),(73,99,2.20447401348918),(73,100,0.0574510940885647),(73,106,2.04878383739738),(73,110,-0.141590624713889),(73,115,-1.47257911923582),(74,90,-0.876461073641163),(74,94,-0.0126956999420149),(74,99,-0.605319376201666),(74,102,2.25423444318979),(74,106,0.237586596270638),(74,107,-0.0765556810205389),(74,110,-1.63937803277688),(74,113,-2.50704977568896),(74,116,0.251304666280099),(75,85,1.62857448042238),(75,86,-0.0294351023895993),(75,93,0.382320627460555),(75,98,0.690481276894436),(75,103,-2.33809930722983),(75,105,0.0970488601336711),(75,111,0.73795281838435),(75,117,-1.5601977599414),(76,86,-0.553682058168279),(76,89,0.644474623859371),(76,92,-0.289590136417737),(76,94,1.76650288399915),(76,99,1.92115543076876),(76,101,0.0671712393566699),(76,103,-2.20224616229743),(76,106,-0.497070223090304),(76,110,-0.725714896084475),(76,113,0.232688375499741),(77,88,0.579195532090213),(77,91,1.66580706198309),(77,93,-1.82410657063509),(77,98,0.242866298409986),(77,101,-0.358684041871395),(77,102,2.92275765251625),(77,103,0.986785485396893),(77,104,0.642780846583453),(77,105,0.211828974272897),(77,109,2.30927457502976),(78,88,-2.56932279427473),(78,93,2.24356822412793),(78,94,0.947874385814997),(78,101,-0.244804223761711),(78,104,0.216025269325846),(78,110,-1.05667287209693),(78,114,-1.06213568529313),(78,116,-0.688894314401685),(78,117,-1.48022400585955),(78,118,-1.65478988006226),(79,87,0.469954527420881),(79,92,-2.08952604754784),(79,94,-0.525986510818812),(79,107,-0.00482192449720756),(79,108,1.16185491500595),(79,114,0.331492049928282),(79,118,2.20076601458785),(80,87,0.184575945310831),(80,88,1.73526718955046),(80,91,-2.06926175725578),(80,99,-0.0138096255378887),(80,101,-1.75971251564074),(80,107,-1.02838221381268),(80,113,2.43560594500565),(81,85,-0.658742027039399),(81,86,-0.402172917874691),(81,90,-2.08029419843135),(81,93,0.663350321970275),(81,96,1.31070894497513),(81,97,-0.655659657582324),(81,106,0.568178350169378),(81,107,0.45837275307474),(81,110,1.15517136143071),(81,115,1.01413006988739),(82,86,2.33095797601245),(82,92,0.021439252906888),(82,110,-1.23686941129795),(82,112,0.285119174779504),(83,87,-0.484405041657765),(83,91,2.1154515213477),(83,93,1.97659230323191),(83,101,-1.60261848811304),(83,103,0.458861049226356),(83,105,0.657567064424573),(83,108,1.31843012787255),(84,85,0.0309915463728752),(84,86,-0.602969450972014),(84,89,-1.43455305642872),(84,95,-1.89716788232063),(84,99,-1.41669972838527),(84,104,-0.425351725821711),(84,111,-0.418958098086489),(84,113,-1.64635151219214),(84,114,0.168248542741173)]
orgname='BHNEAT_4_8'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()