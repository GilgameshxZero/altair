edge = [(0,85,-1.05934324167608),(0,89,-2.0015259254738),(0,90,-1.27269814142277),(0,93,1.91390728476821),(0,98,1.74707785271767),(0,101,-0.729956968901639),(0,105,-1.3216193121128),(0,108,1.15077669606616),(0,113,1.25438703573717),(0,114,-1.17387920773949),(0,117,-1.02389599291971),(0,118,-0.856654560991241),(1,86,2.17911313211463),(1,92,-1.9286019470809),(1,98,2.47314371166112),(1,102,-0.531907101657155),(1,104,1.27013458662679),(1,107,0.777016510513626),(1,108,0.955458235419782),(1,109,0.639744254890591),(1,113,1.42661824396496),(2,87,1.56669820245979),(2,88,-0.639973143711661),(2,100,2.83867915890988),(2,106,-2.35262611774041),(2,108,1.52543717764824),(2,110,-2.96496475112156),(2,113,-1.84286019470809),(2,118,2.74541459395123),(3,89,-2.84636982329783),(3,92,-0.196447645496994),(3,97,1.21494186223945),(3,99,0.86519974364452),(3,101,2.07977538377026),(3,103,-2.25972777489547),(3,105,-0.638798181096835),(3,108,0.977294228949858),(3,109,0.0184789574877163),(3,111,-1.56640827661977),(3,112,0.65332499160741),(3,116,-4.00234992522965),(4,90,-2.14604632709738),(4,91,4.78789635914182),(4,97,-0.165746024964141),(4,99,0.79940183721427),(4,101,-1.78070925016022),(4,108,-0.312128055665761),(4,113,-1.17270424512467),(4,118,-0.10490737632374),(5,86,-2.99888607440413),(5,87,-1.74271370586261),(5,89,1.54411450544755),(5,92,-1.54341257972961),(5,93,1.26329844050417),(5,99,3.71300393688772),(5,104,0.8767967772454),(5,114,1.51921140171514),(5,118,-1.35644093142491),(6,89,-2.38064210943937),(6,92,0.178075502792444),(6,94,-1.91190832239753),(6,100,0.10414441358684),(6,101,-2.02133243812372),(6,103,1.49403363139744),(6,107,0.470778527176733),(6,110,1.66641743217261),(6,113,-1.95214697714164),(7,85,-4.50689718314158),(7,86,-1.36800744651631),(7,90,-0.0779137546922208),(7,95,-2.47531052583392),(7,99,0.728247932370983),(7,100,0.523850215155492),(7,104,-0.56205938901944),(7,106,-2.38151188695944),(7,108,-1.86271248512223),(7,112,0.495101779229102),(7,116,-0.262459181493576),(8,92,1.96569719534898),(8,93,-1.42139957884457),(8,95,-0.120014038514359),(8,99,-2.3411358989227),(8,106,-1.54681539353618),(8,107,-2.68396557512131),(8,115,3.2633136997589),(8,116,-3.59642323068941),(8,118,1.05227820673238),(9,85,0.12717062898648),(9,87,-0.404171880245369),(9,98,0.91476180303354),(9,101,1.73261207922605),(9,103,2.63229773857845),(9,105,-2.52902310251167),(9,106,2.59869685964537),(9,113,1.99436933500168),(10,89,0.874401074251533),(10,96,2.25032807397687),(10,106,2.52972502822962),(10,108,0.339320047608875),(10,109,0.487289040803247),(10,111,-2.73847163304544),(10,112,-3.02323984496597),(10,114,0.173345133823664),(10,115,2.91546372875149),(10,116,-1.08920560319834),(10,117,2.30887783440657),(11,89,-1.77860347300638),(11,97,3.06521805475021),(11,105,-1.58848841822565),(11,112,-1.98997466963713),(11,115,-0.75571459089938),(12,92,-1.52206488235115),(12,93,-0.438901944029053),(12,94,-2.57873775444807),(12,97,-1.9710074159978),(12,98,0.831568346201972),(12,99,-1.27996154667806),(12,108,-1.64600054933317),(12,116,1.04680013428144),(13,86,-2.54748680074465),(13,87,0.219718008972442),(13,90,-1.74478896450697),(13,99,0.696371349223304),(13,102,-0.533463545640431),(13,104,-2.05777153843806),(13,113,0.424817651905881),(13,116,-1.13623462630085),(13,118,1.00611896114994),(14,90,-0.458952604754784),(14,93,0.166051210058901),(14,95,1.10812707907346),(14,102,0.768013550218207),(14,104,1.30031739249855),(14,106,-0.567491683706168),(14,109,0.492751853999451),(14,110,1.53437910092471),(14,111,-1.66626483962523),(15,85,-1.80452894680624),(15,92,2.19943845942564),(15,99,-3.92335276345103),(15,101,-2.84722434156316),(15,104,-3.82316049684133),(15,108,6.31084627826777),(15,117,-2.18384350108341),(16,86,0.354930265205847),(16,87,-2.11914426099429),(16,88,-0.797662282174139),(16,90,0.620334482863857),(16,91,2.02398754844813),(16,95,-0.236716818750572),(16,97,1.3859523300882),(16,98,0.251060518204291),(16,99,2.14490188299203),(16,101,2.07103183080538),(16,108,1.29305398724326),(16,110,4.23766289254433),(17,89,1.76689962462233),(17,96,-0.296990874965667),(17,99,-1.64836573381756),(17,101,-3.53187658314768),(17,106,-2.68178350169378),(17,107,-1.24228644672994),(17,109,-0.546037171544542),(18,90,-0.948545793023469),(18,91,0.884807885982849),(18,93,-2.23981444746239),(18,99,-2.27187414166692),(18,102,1.18744468520157),(18,103,-1.51918088320566),(18,104,0.609912411877804),(18,110,-0.451475569933165),(18,111,-1.83989989928892),(18,116,-2.49725333414716),(18,117,0.588244270149846),(18,118,-0.10689107943968),(19,87,2.7739951780755),(19,89,1.08458204901273),(19,93,0.245445112460707),(19,95,0.963240455336161),(19,101,3.21137119663076),(19,105,0.0168462172307505),(19,115,-3.29050569170202),(20,88,4.30150761436811),(20,101,-2.32096316415906),(20,103,-0.93847468489639),(20,104,0.326731162450026),(20,105,-1.72554704428236),(20,106,-0.804071169164098),(20,111,-2.27561265907773),(20,116,-2.77941221350749),(21,86,2.40203558458205),(21,87,-1.8064821314127),(21,94,-2.10957670827357),(21,96,1.64662617877743),(21,101,0.661595507675405),(21,102,0.186986907559435),(21,105,1.41019928586688),(21,107,-3.53788872951445),(21,108,0.438520462660604),(22,86,-1.01020844141972),(22,88,-1.70450453199866),(22,91,-0.409695730460524),(22,92,-1.00766014587848),(22,93,1.80022583697012),(22,98,-0.140751365703299),(22,106,-1.67000335703604),(22,115,2.10780663472396),(22,117,-1.57040620136113),(23,85,-0.000671407208471919),(23,86,-0.467177343058565),(23,88,-0.143131809442427),(23,90,-1.14296395764031),(23,97,2.9559465315714),(23,104,0.632328257087924),(23,112,-0.364619891964477),(23,114,1.97303689687796),(23,115,-2.81064790795618),(23,116,1.58114871669668),(24,89,0.159108249153111),(24,90,-3.65512558366649),(24,91,1.09263893551439),(24,101,0.285561693166906),(24,107,-1.49731437116611),(24,108,-1.51940977202673),(24,110,-0.107135227515488),(24,112,-0.700430310983611),(25,90,1.36390270699179),(25,92,1.09785760063478),(25,94,2.91596728415784),(25,98,0.430265205847346),(25,105,0.297173986022523),(25,108,1.69919431134983),(25,109,-0.67253639332255),(25,115,2.2831507309183),(26,85,2.74733726004822),(26,87,1.79969176305429),(26,89,-0.669194616534929),(26,95,0.0592669454023865),(26,98,1.44665364543596),(26,100,2.17802972502823),(26,101,1.86281929990539),(26,102,-0.90766624958037),(26,103,-1.6794640949736),(26,104,1.01152073732719),(26,107,1.04318369090854),(26,109,-0.32464064455092),(26,112,1.12706381420331),(26,113,0.154744102298044),(26,117,0.361278115176855),(27,85,1.63563951536607),(27,87,2.17285683767205),(27,94,1.65083773308512),(27,100,3.72954496902371),(27,102,1.1870937223426),(27,103,-0.735419782097842),(27,104,-2.46319467757195),(27,105,-1.3780022583697),(27,108,-0.764336069826349),(27,110,-0.278954435865352),(27,114,-0.565523239844966),(28,87,-0.369640186773278),(28,88,-2.44389172032838),(28,97,-3.33956419568468),(28,99,-2.24343089083529),(28,104,-0.087130344553972),(28,113,0.277275917844172),(28,114,0.307550279244362),(29,88,-0.290871913815729),(29,91,-0.632389294106876),(29,102,-0.41338847010712),(29,105,2.17740409558397),(29,116,1.02058473464156),(30,95,0.303353984191412),(30,96,0.597277748954741),(30,99,-2.80405590990936),(30,101,0.493331705679495),(30,104,2.2194586016419),(30,109,0.575685903500473),(30,110,-2.84173100985748),(30,114,-0.111819818720054),(30,118,0.372859889522996),(31,85,1.36790063173315),(31,92,-1.02745139927366),(31,94,-2.15134128849147),(31,96,3.28984954374828),(31,99,-0.0659199804681539),(31,103,-2.8918576616718),(31,107,0.908841212195196),(31,108,1.90810876796777),(31,109,-1.16081728568377),(31,111,3.98104800561541),(31,112,-2.0067445905942),(31,117,-4.71935178685873),(32,86,1.78746910000916),(32,87,0.220404675435652),(32,89,2.08723715933714),(32,92,-0.321634571367534),(32,98,0.792611468855861),(32,99,2.08250679036836),(32,104,5.67754142887661),(32,106,-0.192876979888302),(32,109,2.02652058473464),(32,116,-0.254249702444533),(32,118,-0.7827082125309),(33,96,-2.37795648060549),(33,98,-1.55710013122959),(33,108,-1.88088625751518),(33,110,1.29372539445173),(33,111,2.47192297128208),(33,114,2.86463515121921),(34,85,-0.293221839045381),(34,90,-2.97105319376202),(34,99,-3.40525528733177),(34,104,1.71706289864803),(34,109,1.8549913022248),(35,86,2.53593554490799),(35,87,1.05354472487564),(35,97,-2.37510299996948),(35,98,2.33954893642994),(35,100,-0.106799523911252),(35,104,-2.20117801446577),(35,107,-0.901730399487289),(35,109,-3.91331217383343),(35,110,-0.766716513565478),(35,112,1.38904995880001),(36,85,1.44091616565447),(36,87,-0.147892696920682),(36,90,-2.06198309274575),(36,91,0.21210364085818),(36,104,-1.03717154454176),(36,107,1.05893124179815),(36,109,-0.578554643391217),(36,112,-2.30489516891995),(36,115,-1.57025360881375),(36,117,-0.864482558671834),(36,118,0.392773216956084),(37,85,2.23804437391278),(37,86,-1.96844386120182),(37,87,2.06602679525132),(37,91,-0.0272377697073274),(37,99,-1.67441328165532),(37,105,-3.42573320719016),(37,111,-0.703146458326975),(37,112,2.01170384838405),(37,118,-0.292321543015839),(38,87,0.751426740318003),(38,90,2.03122043519395),(38,103,2.01837214270455),(38,105,-0.183828241828669),(38,106,-0.0959807123020111),(38,111,-0.157704397717215),(38,115,-2.43131809442427),(39,87,2.29950865199744),(39,89,1.9838557084872),(39,91,1.64120914334544),(39,94,0.345439008758812),(39,97,0.0672933133945739),(39,98,1.27501754814295),(39,107,0.295632801293985),(39,108,0.569673757133702),(39,109,2.75733207190161),(39,111,-0.660283211767937),(39,113,-0.51676992095706),(39,116,3.45162816248054),(39,118,-1.00569170201727),(40,88,1.65903195287942),(40,92,-0.708105716116825),(40,99,0.933378093813898),(40,104,-1.07840205084384),(40,110,5.50637836848048),(40,116,-1.13763847773675),(40,118,-0.925168614764855),(41,88,0.254371776482436),(41,93,-1.33936582537309),(41,96,-0.866756187627796),(41,97,3.69937742240669),(41,100,3.94245735038301),(41,101,0.472014526810511),(41,104,0.214743491927854),(41,105,-0.713385418256172),(41,106,1.76401562547685),(41,107,-0.693685720389416),(41,109,1.91746269112217),(41,110,1.10303048799097),(41,111,2.37228003784295),(41,112,-1.42626728110599),(42,85,3.03479110080264),(42,86,0.141956846827601),(42,87,-1.82465590380566),(42,99,1.18747520371105),(42,100,1.14708395641957),(42,103,-1.29406109805597),(42,109,-2.23651844843898),(42,113,0.899258400219733),(43,85,-1.90682699056978),(43,88,-1.86552018799402),(43,89,1.82471694082461),(43,93,-1.32393871883297),(43,97,0.319132053590503),(43,98,1.46591082491531),(43,101,2.89429914242988),(43,102,1.13721121860408),(43,103,0.103991821039461),(43,105,-3.64070558793908),(43,110,-1.1067384868923),(43,112,2.98869289223914),(43,114,-1.139545884579),(43,116,-2.94351023895993),(44,89,2.54554887539293),(44,98,2.33298745689261),(44,99,-1.59358500930815),(45,87,2.76018555253761),(45,88,-0.67505417035432),(45,90,-4.88592181157872),(45,91,3.07261879329814),(45,95,-0.0186620685445724),(45,98,-2.22399060029908),(45,108,0.405941953794977),(45,109,2.99215674306467),(45,112,-0.677907650990326),(45,115,-2.87630848109378),(46,85,-4.02293465987121),(46,89,0.335703604235969),(46,91,-1.10527359843745),(46,94,0.0894344920194098),(46,97,2.92876979888302),(46,100,-0.977340006714072),(46,101,-0.277550584429457),(46,108,-1.22081667531358),(46,112,1.44357127597888),(47,86,-1.38576921903134),(47,91,5.6066164128544),(47,92,1.27971739860225),(47,94,-0.990066225165563),(47,95,1.34609515671255),(47,100,0.0476241340372936),(47,101,3.18216498306223),(47,104,0.749382000183111),(47,105,0.56503494369335),(47,108,-2.61101107821894),(47,112,-1.11896114993744),(47,114,0.619678334910123),(47,118,-1.37684255500961),(48,86,2.28281502731407),(48,91,3.80886257515183),(48,98,1.58369701223792),(48,99,-2.46890163884396),(48,100,1.21617786187323),(48,103,0.744468520157476),(48,105,0.627216406750694),(48,106,0.923993652150029),(48,111,-2.42616046632282),(48,115,2.063890499588),(49,87,0.439497054963836),(49,89,-0.751930295724357),(49,93,-2.14845728934599),(49,94,-1.5919217505417),(49,95,-0.95432905056917),(49,102,0.315500350962859),(49,113,1.20586260567034),(49,114,-0.190084536271249),(50,89,0.600543229468673),(50,105,6.94541764580218),(50,107,-0.211310159611805),(51,87,-1.33970152897732),(51,92,-0.953367717520676),(51,97,0.17871639149144),(51,98,0.504882961516159),(51,103,-1.39895321512497),(51,106,1.00151066621906),(51,112,2.7142399365215),(51,118,-0.945341349528489),(52,89,-1.79955442976165),(52,97,-1.69129001739555),(52,106,0.419400616473891),(52,110,-1.56414990691855),(52,111,-0.856471449934385),(52,113,-0.232169560838649),(52,114,-1.99223303933836),(52,118,1.85900448622089),(53,88,1.15462202826014),(53,90,-0.900601214636677),(53,92,-1.89582506790368),(53,94,-0.154347361674856),(53,104,-0.225943784905545),(53,105,-1.18977935117649),(53,109,0.413968321787164),(54,85,-0.447889645069735),(54,91,2.67853328043458),(54,94,0.691702017273476),(54,96,-0.0907162694174016),(54,111,2.89635914181951),(54,112,0.155125583666494),(54,113,2.07277138584552),(54,118,0.767097994933927),(55,87,-2.91335795159764),(55,95,-1.52737510299997),(55,107,-1.89100314340648),(55,110,-0.455717642750328),(55,117,-0.634769737846004),(56,107,-2.1517532883694),(56,111,2.16580706198309),(56,113,-0.141422772911771),(56,114,-1.71626941740165),(57,87,3.03834650715659),(57,90,0.761009552293466),(57,91,-3.1060975981933),(57,92,-0.223975341044343),(57,93,-0.919812616351817),(57,94,2.31548509170812),(57,95,0.307382427442244),(57,96,0.0719168675801873),(57,100,1.18071535386212),(57,102,1.81974242378002),(57,103,-1.06341746269112),(57,115,-0.715659047212134),(58,86,4.1834772789697),(58,87,0.289849543748283),(58,89,-1.76731162450026),(58,90,2.75643177587207),(58,95,-1.30361339152196),(58,96,2.32345042268136),(58,101,-0.281746879482406),(58,103,3.05178991058077),(58,109,0.246971037934507),(58,110,0.15607165746025),(58,113,1.2017120883816),(58,114,-3.57600634784997),(58,115,-1.81965086825159),(58,118,-2.81128879665517),(59,85,-0.0449079866939299),(59,86,-2.62558366649373),(59,90,-0.126544999542222),(59,91,0.473342081972716),(59,93,-4.61218604083377),(59,97,1.32876064333018),(59,98,0.341990417188025),(59,100,-5.12126529740287),(59,102,2.42670979949339),(59,112,-1.30825220496231),(59,114,-2.711066011536),(60,85,3.59779656361583),(60,87,1.27439191869869),(60,90,2.42526017029328),(60,91,-2.1324808496353),(60,96,-0.457274086733604),(60,100,-0.398220770897549),(60,101,-1.61937314981536),(60,105,1.4333780938139),(60,107,-0.842265083773309),(60,109,4.56042664876247),(60,110,-4.83404034546953),(60,114,-2.31484420300912),(61,89,0.522171697134312),(61,94,-1.38006225775933),(61,96,1.7146824549089),(61,98,2.62756736960967),(61,100,1.09416486098819),(61,102,1.01390118106632),(61,103,1.98255867183447),(61,114,-1.84711752677999),(61,115,3.15195165868099),(62,93,-1.83037812433241),(62,95,-0.627536851100192),(62,107,-1.31794183172094),(62,109,-2.30442213202307),(62,110,3.1663716544084),(62,111,1.15826899014252),(63,87,4.18912320322275),(63,90,2.52548295541246),(63,93,0.7578508865627),(63,97,1.50326548051393),(63,100,0.0259102145451216),(63,103,-2.25876644184698),(63,104,-0.0255897701956236),(63,108,-2.66946928312021),(63,111,-0.508987701040681),(63,114,0.369304483169042),(63,117,1.12204351939451),(64,87,-2.345194860683),(64,94,-1.42527542954802),(64,99,-4.70358897671438),(64,110,1.79584643086032),(64,112,3.15077669606616),(64,116,-2.23360393078402),(65,87,-4.74860377819147),(65,88,0.957487716299936),(65,90,-2.96845912045656),(65,97,-0.109363078707236),(65,99,0.1970122379223),(65,107,0.0916776024658955),(65,110,-0.497695852534562),(65,111,2.24452955717643),(65,114,-0.137241737113559),(65,116,-2.18742942594684),(65,117,-0.54002502517777),(66,85,-0.0532090212714011),(66,102,4.82900479140599),(66,105,-3.07638782921842),(66,108,-1.52865688039796),(66,111,-1.72215948973052),(66,115,-1.05923642689291),(66,118,1.51745658742027),(67,86,0.629795220801416),(67,90,0.850306711020234),(67,92,-1.57939390240181),(67,104,2.73784600360118),(67,109,1.29177220984527),(67,111,-0.442197943052461),(68,87,5.93365276039918),(68,88,-1.56596575823237),(68,90,-3.94160283211768),(68,93,1.65456099124119),(68,95,0.651051362651448),(68,96,0.586718344676046),(68,97,1.4240241706595),(68,103,-0.0799584948271126),(68,107,-0.0131992553483688),(68,112,-1.85369426557207),(68,114,0.963621936704611),(69,87,3.13708914456618),(69,88,-0.789513840144047),(69,92,0.232169560838648),(69,94,-0.336161381878109),(69,95,1.80951872310556),(69,97,-1.9983520004883),(69,108,-0.662343211157567),(69,113,-2.76393932920316),(69,114,-1.95753349406415),(69,118,-1.44688253425703),(70,85,-1.10515152439955),(70,86,-1.15297402874844),(70,87,1.48902859584338),(70,90,0.739188818018128),(70,96,-0.00350962858973968),(70,97,-1.16016113773003),(70,99,-3.64438306833094),(70,105,-2.48519852290414),(70,107,2.55415509506516),(70,109,-2.13841669972838),(70,110,0.190054017761772),(70,111,1.54013183996094),(71,85,0.788750877407148),(71,93,-1.36629840998566),(71,96,1.16092410046693),(71,100,2.34478286080508),(71,104,0.245674001281777),(71,106,-0.206213568529313),(71,111,1.85674611651967),(71,113,2.27973265785699),(72,94,-1.24100466933195),(72,96,-2.50311288796655),(72,99,0.618152409436323),(72,110,0.943479720450453),(72,112,1.3784447767571),(72,114,-0.462965788750877),(72,115,0.147251808221686),(72,116,1.64058351390118),(73,88,2.98780785546434),(73,94,0.703588976714377),(73,99,-3.4293649098178),(73,100,1.71430097354045),(73,106,-1.24042481765191),(73,110,1.54942472609638),(73,115,1.31237220374157),(74,90,-0.518112735374004),(74,94,-1.35013885921812),(74,99,1.37760551774651),(74,102,-1.32335886715293),(74,106,-0.253059480574969),(74,107,-0.315073091830195),(74,110,-0.189733573412274),(74,113,-1.56880397961364),(74,116,0.116962187566759),(75,85,2.29625843073824),(75,86,1.75489059114353),(75,93,-0.858760338145085),(75,98,-2.25058748130741),(75,103,0.619174779503769),(75,105,0.606067079683828),(75,111,-0.217398602252266),(75,117,-1.71591845454268),(76,86,1.21027253028962),(76,89,-2.25287636951811),(76,92,0.710348826563311),(76,94,-0.134968108157598),(76,99,2.28286080507828),(76,101,-3.45217749565111),(76,103,-0.65256202887051),(76,106,0.748832667012543),(76,110,0.189687795648061),(76,113,0.151066621906186),(77,88,-2.08827478865932),(77,91,-0.251091036713767),(77,93,0.463881344035157),(77,98,1.03424176763207),(77,101,2.81774346140934),(77,102,-2.09616382335887),(77,103,1.6956083864864),(77,104,-1.18121890926847),(77,105,-1.81936094241157),(77,109,2.61447492904447),(78,88,-1.89153721732231),(78,93,1.85584582049013),(78,94,1.38602862636189),(78,101,-0.132038331247902),(78,104,0.875240333262123),(78,110,-0.555558946501053),(78,114,3.51763969847713),(78,116,-2.50053407391583),(78,117,0.677892391735588),(78,118,0.960783715323344),(79,87,-1.29982909634693),(79,92,0.242164372692038),(79,94,-1.53648487807855),(79,107,-0.101565599536119),(79,108,0.85003204443495),(79,114,2.23810541093173),(79,118,3.08626056703391),(80,87,1.75855281228065),(80,88,0.839945677053133),(80,91,-0.196752830591754),(80,99,-1.80079042939543),(80,101,0.353740043336283),(80,107,0.89150669881283),(80,113,1.03129673146764),(81,85,3.85639515366069),(81,86,1.35570848719749),(81,90,-2.61102633747368),(81,93,-0.0664693136387219),(81,96,0.679784539323099),(81,97,-0.183263649403363),(81,106,0.500473036896878),(81,107,0.098193304239021),(81,110,1.98675496688742),(81,115,0.300683614612262),(82,86,-0.459227271340068),(82,92,3.43592638935514),(82,110,0.100558488723411),(82,112,0.838831751457259),(83,87,1.44108401745659),(83,91,0.510513626514481),(83,93,-0.427747428815577),(83,101,-1.54060487685781),(83,103,0.681630909146397),(83,105,0.661214026306955),(83,108,-0.982726523636586),(84,85,-0.752616962187567),(84,86,1.44152653584399),(84,89,1.63815729239784),(84,95,0.847300637836848),(84,99,1.48838770714438),(84,104,0.336771752067629),(84,111,2.04695272682882),(84,113,-1.30428479873043),(84,114,2.57562486648152),(35,105,-1.34090701010163)]
orgname='BHNEAT_13_2'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()