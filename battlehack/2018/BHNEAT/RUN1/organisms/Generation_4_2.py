edge = [(0,85,0.201666310617389),(0,89,-0.0719931638538774),(0,90,0.284783471175268),(0,93,-2.7699362163152),(0,98,0.396252327036347),(0,101,-0.344050416577654),(0,105,2.19325846125675),(0,108,-0.195623645741142),(0,113,1.48628192999054),(0,114,-2.24095889156774),(0,117,2.24631488998077),(0,118,1.14627521591845),(1,86,-1.72756126590777),(1,92,1.58278145695364),(1,98,0.244529557176428),(1,102,0.706427198095645),(1,104,-1.13406781212806),(1,107,-0.403363139744255),(1,108,-1.71842097231971),(1,109,1.77837458418531),(1,113,-0.537171544541765),(2,87,-2.0554979094821),(2,88,0.0479293191320536),(2,100,1.58349864192633),(2,106,1.85747856074709),(2,108,0.364345225379192),(2,110,-0.262977996154668),(2,113,1.3879207739494),(2,118,0.463133640552995),(3,89,-0.0844447157200842),(3,92,0.549272133548998),(3,97,-0.064699240089114),(3,99,1.8577227088229),(3,101,0.0292367320780053),(3,103,2.410367137669),(3,105,1.05859553819391),(3,108,-2.18892483291116),(3,109,1.19045075838496),(3,111,-0.0893124179815058),(3,112,0.270302438428907),(3,116,-0.318964201788385),(4,90,-0.606006042664876),(4,91,-1.97950682088687),(4,97,-2.97352519302957),(4,99,1.6427198095645),(4,101,0.942838831751457),(4,108,0.884044923245949),(4,113,-0.649922177800836),(4,118,1.08127079073458),(5,86,-2.28019043549913),(5,87,1.81832331308939),(5,89,1.24294259468368),(5,92,-1.72640156254769),(5,93,-1.70905178991058),(5,99,2.06668294320505),(5,104,0.363948484756004),(5,114,2.25196081423383),(5,118,0.192449720755638),(6,89,-2.40818506424146),(6,92,1.66959135715812),(6,94,1.26924954985199),(6,100,2.57068086794641),(6,101,-1.99974059266945),(6,103,0.761253700369274),(6,107,1.63754692220832),(6,110,1.25864436780908),(6,113,-2.12846766563921),(7,85,0.690252388073366),(7,86,-2.14812158574175),(7,90,-0.612292855616932),(7,95,0.508789330729087),(7,99,2.73870052186651),(7,100,-2.2781304361095),(7,104,-0.890011291848506),(7,106,0.844599749748222),(7,108,-0.201178014465773),(7,112,-1.13956114383374),(7,116,0.32143620105594),(8,92,-0.988341929380169),(8,93,-0.923474837488937),(8,95,1.53836176641133),(8,99,-0.472106082338939),(8,106,-1.63740958891568),(8,107,1.27010406811731),(8,115,0.02172917874691),(8,116,0.444502090517899),(8,118,-0.216177861873226),(9,85,0.455229346598712),(9,87,-2.45506149479659),(9,98,1.17607654042177),(9,101,-1.35438093203528),(9,103,0.861079744865261),(9,105,1.32412182988983),(9,106,-1.23458052308725),(9,113,1.54916531876583),(10,89,0.223822748496963),(10,96,2.20169682912687),(10,106,0.364772484511856),(10,108,-0.139576403088473),(10,109,0.0709555345316935),(10,111,-2.14908291879025),(10,112,1.07982116153447),(10,114,-1.32261116367077),(10,115,-0.420285653248695),(10,116,-1.47076326792199),(10,117,0.54696798608356),(11,89,-0.966856898709067),(11,97,0.716971343119602),(11,105,0.254646443067721),(11,112,1.16740928373058),(11,115,2.26546525467696),(12,92,-1.80317087313456),(12,93,-0.715247047334208),(12,94,-3.11593981749931),(12,97,-0.934904019287698),(12,98,0.0623340556047243),(12,99,0.723807489242225),(12,108,0.911969359416486),(12,116,-1.99734488967559),(13,86,0.0059205908383434),(13,87,-0.815088351084933),(13,90,-1.39443647572253),(13,99,0.188390758995331),(13,102,1.70163579210791),(13,104,-0.334940641499069),(13,113,-2.00210577715384),(13,116,1.65636158330027),(13,118,-0.252235480819117),(14,90,-2.23268837549974),(14,93,2.17447431867428),(14,95,-1.47595141453291),(14,102,1.94763023773919),(14,104,-2.22418897061068),(14,106,-1.33944212164678),(14,109,0.27797784356212),(14,110,2.33657338175603),(14,111,0.388393810846278),(15,85,-2.91613513595996),(15,92,-0.796258430738243),(15,99,0.662633136997589),(15,101,1.29490035706656),(15,104,1.73853267006439),(15,108,1.31937620166631),(15,117,0.168843653675954),(16,86,1.47022919400616),(16,87,1.63066499832148),(16,88,-1.88732566301462),(16,90,0.165898617511521),(16,91,1.16786706137272),(16,95,-0.791619617297891),(16,97,-2.28510391552477),(16,98,-0.840662862025819),(16,99,1.31846064638203),(16,101,-1.48023926511429),(16,108,0.0131839960936307),(16,110,-0.346308786278878),(17,89,-0.219031342509232),(17,96,-0.738593707083346),(17,99,-1.5247352519303),(17,101,0.163380840479751),(17,106,-0.464384899441511),(17,107,1.55941953794977),(17,109,-2.77785576952422),(18,90,0.627536851100192),(18,91,0.971114230780969),(18,93,0.0153508102664266),(18,99,0.185384685811945),(18,102,-1.65016632587664),(18,103,1.03476058229316),(18,104,-1.36603900265511),(18,110,0.180867946409497),(18,111,1.76044495986816),(18,116,-2.38654744102298),(18,117,0.760780663472396),(18,118,-1.44880520035401),(19,87,1.20258186590167),(19,89,-2.22792748802148),(19,93,-2.16658528397473),(19,95,0.0975066377758109),(19,101,1.58374279000214),(19,105,0.106463820307016),(19,115,-0.994872890408033),(20,88,-0.927762688070315),(20,101,-2.4136631366924),(20,103,-0.958738975188452),(20,104,-1.34311960203864),(20,105,0.511352885525071),(20,106,0.473586230048524),(20,111,-0.619541001617481),(20,116,-2.07077242347484),(21,86,-0.730689413129063),(21,87,-1.70755638294626),(21,94,-1.17281105990783),(21,96,-0.485854670857875),(21,101,1.11740470595416),(21,102,-1.7996154667806),(21,105,0.548982207708976),(21,107,-1.14302499465926),(21,108,-0.732932523575549),(22,86,-1.1672566911832),(22,88,-0.77774895474105),(22,91,1.32351145970031),(22,92,0.968718527787103),(22,93,-1.24980925931578),(22,98,-0.103823969237342),(22,106,0.00328073976866969),(22,115,2.43823053682058),(22,117,-0.477858821375164),(23,85,1.06135746330149),(23,86,1.04358043153172),(23,88,-1.34134952848903),(23,90,-0.654789880062258),(23,97,1.34206671346171),(23,104,1.1273384807886),(23,112,-0.124057741019929),(23,114,1.64671773430586),(23,115,-2.62067018646809),(23,116,0.412686544389172),(24,89,0.443281350138859),(24,90,1.00485244300668),(24,91,-2.1663716544084),(24,101,0.587084566789758),(24,107,-0.0406353953672903),(24,108,2.00914029358806),(24,110,-2.2727896969512),(24,112,-0.815179906613361),(25,90,-0.873027741325114),(25,92,-1.99992370372631),(25,94,-1.66252632221442),(25,98,-1.54579302346873),(25,105,0.694936979277932),(25,108,1.18602557451094),(25,109,1.15169225135044),(25,115,1.6683400982696),(26,85,-0.408337656788842),(26,87,-1.95455793939024),(26,89,-0.283211767937254),(26,95,0.196890163884396),(26,98,1.7914212469863),(26,100,-1.37795648060549),(26,101,-1.15131076998199),(26,102,-0.501647999511704),(26,103,-0.945783867915891),(26,104,0.867732779931028),(26,107,-0.315958128604999),(26,109,-0.995971556749168),(26,112,1.75032807397687),(26,113,-0.274010437330241),(26,117,-0.572893459883419),(27,85,2.23822748496963),(27,87,-0.225531785027619),(27,94,-0.592974639118625),(27,100,1.46824549089022),(27,102,-0.218787194433424),(27,103,-0.207678456984161),(27,104,0.783593249305704),(27,105,-0.317026276436659),(27,108,1.60603656117435),(27,110,-1.75940733054598),(27,114,1.68713950010681),(28,87,-0.294701986754967),(28,88,1.30225531785028),(28,97,-0.279549546800134),(28,99,-1.98875392925809),(28,104,-0.162022766808069),(28,113,-1.55253761406293),(28,114,0.0422986541337321),(29,88,1.70043031098361),(29,91,1.48185674611652),(29,102,-0.330042420728172),(29,105,1.90029602954192),(29,116,0.407925656910916),(30,95,2.48158207953124),(30,96,-0.0279854731894895),(30,99,1.53544724875637),(30,101,-2.32341990417188),(30,104,0.879146702475051),(30,109,0.968001342814417),(30,110,2.42007202368236),(30,114,-2.77318643757439),(30,118,-0.686712240974151),(31,85,0.0605029450361644),(31,92,-1.48564104129154),(31,94,-2.33855708487197),(31,96,1.8274025696585),(31,99,0.766441846980193),(31,103,-1.21900082399976),(31,107,0.165410321359905),(31,108,0.351893673512986),(31,109,0.525528733176672),(31,111,-2.61548203985717),(31,112,-2.42927335428938),(31,117,1.84197515793329),(32,86,1.23577074495682),(32,87,2.17401654103214),(32,89,-1.19464705343791),(32,92,1.48220770897549),(32,98,1.72711874752037),(32,99,0.777687917722098),(32,104,-1.90786461989196),(32,106,-0.624622333445235),(32,109,0.597033600878933),(32,116,-1.03627124851222),(32,118,-2.02458265938292),(33,96,-0.400555436872463),(33,98,-0.444227423932615),(33,108,-1.37214270455031),(33,110,0.998641926328318),(33,111,-0.227515488143559),(33,114,1.74115726187933),(34,85,0.689947202978606),(34,90,-1.36819055757317),(34,99,2.05325479903562),(34,104,0.982940153202918),(34,109,0.36634418774987),(35,86,-2.48588518936735),(35,87,-0.0952177495651112),(35,97,0.225348673970763),(35,98,-1.09317300943022),(35,100,-0.13136692403943),(35,104,0.822748496963408),(35,107,1.82837916196173),(35,109,0.909894100772118),(35,110,-0.937696462904752),(35,112,1.525742362743),(36,85,-0.617557298501541),(36,87,-0.267555772576067),(36,90,-1.95593127231666),(36,91,1.79372539445174),(36,104,0.916562395092624),(36,107,-1.69945371868038),(36,109,2.32825708792383),(36,112,2.32169560838649),(36,115,-2.08609271523179),(36,117,0.937452314828944),(36,118,-1.41138950773644),(37,85,0.999176000244148),(37,86,-1.17381817072054),(37,87,-0.188756981109043),(37,91,-1.23088778344066),(37,99,1.93334757530442),(37,105,-1.35055085909604),(37,111,-1.86498611407819),(37,112,0.187734611041597),(37,118,-0.658360545670949),(38,87,-2.66492202520829),(38,90,1.51957762382885),(38,103,-0.288064210943937),(38,105,-0.126453444013794),(38,106,1.93879512924589),(38,111,2.63875240333262),(38,115,1.84873500778222),(39,87,1.80982390820032),(39,89,-0.0820184942167424),(39,91,-2.92066713461714),(39,94,-0.0519119846186712),(39,97,-1.32959990234077),(39,98,-2.1073793755913),(39,107,0.542344431897946),(39,108,-0.15355388042848),(39,109,-0.685079500717185),(39,111,0.00189214758751183),(39,113,2.38080996124149),(39,116,-0.752601702932829),(39,118,-2.16483046967986),(40,88,3.14093447676016),(40,92,-0.368358409375286),(40,99,1.70709860530412),(40,104,-0.573595385601367),(40,110,1.83184301278726),(40,116,-2.39393292031617),(40,118,-0.32387768181402),(41,88,1.66591387676626),(41,93,1.33161412396619),(41,96,0.954588457899716),(41,97,-1.49273659474471),(41,100,2.64969328897977),(41,101,2.24002807702872),(41,104,0.45532090212714),(41,105,-1.17697683645131),(41,106,-2.19782097842341),(41,107,-0.605578783532212),(41,109,-0.41689809869686),(41,110,-0.547181615649892),(41,111,-0.0769981994079409),(41,112,-0.878688924832911),(42,85,1.26380199591052),(42,86,1.75180822168645),(42,87,-0.245399334696493),(42,99,-2.48191778313547),(42,100,-0.898998992889187),(42,103,-0.782418286690878),(42,109,-3.02298043763543),(42,113,-0.237861262855922),(43,85,-1.12964262825404),(43,88,2.4557481612598),(43,89,1.81951353495895),(43,93,2.42236091189306),(43,97,-0.189886165959655),(43,98,-0.00614947965941337),(43,101,0.408597064119388),(43,102,-0.199026459547716),(43,103,-0.102252265999329),(43,105,-0.123142185735649),(43,110,0.788232062746056),(43,112,1.74742881557665),(43,114,-0.579912717062899),(43,116,-1.26682332834864),(44,89,-1.99230933561205),(44,98,0.131458479567858),(44,99,-1.42733542893765),(45,87,1.63121433149205),(45,88,0.277199621570483),(45,90,-1.55436872463149),(45,91,0.616412854396191),(45,95,-1.41193884090701),(45,98,1.02110354930265),(45,108,-1.19708853419599),(45,109,0.87000640888699),(45,112,0.222388378551592),(45,115,1.1357310708945),(46,85,-0.289239173558763),(46,89,0.604632709738456),(46,91,-0.984893337809381),(46,94,1.12797936948759),(46,97,2.07147434919279),(46,100,-0.878368480483413),(46,101,0.440931424909207),(46,108,-0.0611285744804224),(46,112,1.38560136722922),(47,86,-0.0169835505233925),(47,91,1.5207220679342),(47,92,-0.152821436201056),(47,94,0.0402539139988403),(47,95,-0.653538621173742),(47,100,0.738624225592822),(47,101,1.83706167790765),(47,104,-1.89863277077548),(47,105,-1.77787102877895),(47,108,0.97697378460036),(47,112,1.05890072328867),(47,114,-0.425443281350139),(47,118,2.78122806482131),(48,86,1.98548844874416),(48,91,1.57675405133213),(48,98,-0.888012329477828),(48,99,-1.14833521530808),(48,100,1.53227332377087),(48,103,-0.477767265846736),(48,105,1.09750663777581),(48,106,-1.06718649861141),(48,111,-0.503707998901334),(48,115,-2.23395489364299),(49,87,-1.93975646229438),(49,89,1.92381054109317),(49,93,-0.848216193121128),(49,94,-2.48504593035676),(49,95,0.469969786675619),(49,102,0.0685293130283516),(49,113,1.31464583269753),(49,114,0.317133091219825),(50,89,-2.39234595782342),(50,105,-0.615787224951933),(50,107,1.01611377300333),(51,87,-2.38805810724204),(51,92,1.32554094058046),(51,97,0.0908078249458296),(51,98,-0.124256111331523),(51,103,0.253440961943419),(51,106,0.702764976958525),(51,112,0.809961241492966),(51,118,0.285729544969024),(52,89,-1.20372631000702),(52,97,-3.08548234504227),(52,106,-2.39303262428663),(52,110,-2.92001098666341),(52,111,-0.32113101596118),(52,113,-0.151814325388348),(52,114,-0.54681539353618),(52,118,0.487960448011719),(53,88,-1.65186010315256),(53,90,1.71102023377178),(53,92,-0.212271492660298),(53,94,1.66434217352824),(53,104,0.199926755577258),(53,105,0.56755272072512),(53,109,-0.644260994293039),(54,85,-1.6132847071749),(54,91,3.32827234717856),(54,94,1.31617175817133),(54,96,0.461745048371838),(54,111,2.02749717703787),(54,112,-1.78554643391217),(54,113,-0.125400555436872),(54,118,1.36902981658376),(55,87,0.406064027832881),(55,95,-1.67622913296915),(55,107,1.26461073641163),(55,110,0.223624378185369),(55,117,-2.2919858394116),(56,107,-1.50984221930601),(56,111,0.497909482100894),(56,113,-0.33158360545671),(56,114,-1.7761619922483),(57,87,1.55635242774743),(57,90,0.252418591875973),(57,91,-1.49444563127537),(57,92,1.53520310068056),(57,93,1.03375347148045),(57,94,1.82528153324992),(57,95,-0.791970580156865),(57,96,1.65379802850429),(57,100,1.98144474623859),(57,102,1.87116611224708),(57,103,-1.86986907559435),(57,115,0.327051606799524),(58,86,-1.87412640766625),(58,87,-0.0534531693472091),(58,89,-1.7022309030427),(58,90,0.538178655354473),(58,95,-2.37382122257149),(58,96,0.294351023895993),(58,101,-2.01551866206854),(58,103,1.34159367656484),(58,109,0.305444502090518),(58,110,-0.641300698873867),(58,113,0.235374004333628),(58,114,-1.87688833277383),(58,115,1.02206488235115),(58,118,0.255607776116215),(59,85,1.26937162388989),(59,86,-0.929532761619922),(59,90,2.48785363322855),(59,91,-0.0695211645863216),(59,93,0.192495498519852),(59,97,1.69934690389721),(59,98,0.724509414960173),(59,100,-2.62950529496139),(59,102,0.973036896877956),(59,112,-0.530610065004425),(59,114,-1.07707449568163),(60,85,1.1254921109653),(60,87,1.69209875789666),(60,90,2.05751213110752),(60,91,0.0910977507858516),(60,96,0.097506637775811),(60,100,1.69292275765252),(60,101,-0.940183721427046),(60,105,-0.435087130344554),(60,107,0.380321665089877),(60,109,1.23535874507889),(60,110,0.620242927335429),(60,114,-1.67943357646413),(61,89,-0.749031037324137),(61,94,0.648274178289132),(61,96,2.7345194860683),(61,98,0.0212103640858181),(61,100,1.46679586169012),(61,102,0.983611560411389),(61,103,-1.75298318430128),(61,114,2.04321420941801),(61,115,1.71651356547746),(62,93,1.34295175023652),(62,95,-0.824457533494064),(62,107,0.797616504409925),(62,109,-0.259025849177526),(62,110,2.40752891628773),(62,111,2.41752372814112),(63,87,-0.297097689748833),(63,90,2.03122043519395),(63,93,0.434598834192938),(63,97,0.0775475325785089),(63,100,2.27416302987762),(63,103,-0.440061647389141),(63,104,1.63853877376629),(63,108,2.41819513534959),(63,111,-1.88460951567125),(63,114,-2.1235236671041),(63,117,-0.876354258857997),(64,87,-0.487426374095889),(64,94,-2.05334635456404),(64,99,0.653111362041078),(64,110,0.0442823572496719),(64,112,-2.71677297280801),(64,116,-0.317133091219825),(65,87,0.193227942747276),(65,88,0.108615375225074),(65,90,-0.0259407330545976),(65,97,-2.72731711783196),(65,99,1.60264900662252),(65,107,1.44720297860652),(65,110,-1.4626148258919),(65,111,1.31447798089541),(65,114,-1.19411297952208),(65,116,-0.636860255745109),(65,117,-2.23857844782861),(66,85,-1.14493240150151),(66,102,0.0229651783806879),(66,105,2.8789635914182),(66,108,-0.315927610095523),(66,111,-0.14897610400708),(66,115,-0.604586931974242),(66,118,1.36919766838588),(67,86,-1.06283761101108),(67,90,-0.649159215063936),(67,92,0.861400189214759),(67,104,1.06506546220283),(67,109,-1.45608386486404),(67,111,0.948500015259255),(68,87,0.596209601123081),(68,88,0.827066866054262),(68,90,1.2811822870571),(68,93,-1.70958586382641),(68,95,2.78917813653981),(68,96,-0.101275673696097),(68,97,0.308542130802332),(68,103,0.700399792474136),(68,107,2.289574877163),(68,112,-1.83027130954924),(68,114,1.57223731192969),(69,87,-0.155568102053896),(69,88,-0.471282082583087),(69,92,0.783257545701468),(69,94,-1.17192602313303),(69,95,2.67548142948698),(69,97,1.65195165868099),(69,108,-2.48910489211707),(69,113,1.82253486739708),(69,114,2.37063203833125),(69,118,1.73145237586596),(70,85,1.1337626270333),(70,86,-1.25406659138768),(70,87,1.33625293740654),(70,90,0.227851191747795),(70,96,-0.593279824213385),(70,97,-1.9281594286935),(70,99,0.738074892422254),(70,105,-2.27916806543168),(70,107,0.360911893063143),(70,109,-1.11482589190344),(70,110,0.807977538377026),(70,111,-2.13318277535325),(71,85,2.38933988464003),(71,93,-1.20973845637379),(71,96,-2.28846095156713),(71,100,0.388698995941038),(71,104,1.30115665150914),(71,106,-1.74678792687765),(71,111,0.534730063783685),(71,113,1.61275063325907),(72,94,1.94471572008423),(72,96,-1.00373851741081),(72,99,2.12269966734825),(72,110,0.724662007507553),(72,112,-1.5746940519425),(72,114,-0.217810602130192),(72,115,-1.68869594409009),(72,116,2.71758171330912),(73,88,0.140156254768517),(73,94,0.183858760338145),(73,99,-2.2941526535844),(73,100,-0.929273354289376),(73,106,0.0778221991637928),(73,110,-0.141590624713889),(73,115,2.0272682882168),(74,90,-1.48966948454238),(74,94,-0.730185857722709),(74,99,-1.39118625446333),(74,102,-1.51789910580767),(74,106,0.229956968901639),(74,107,1.80771813104648),(74,110,1.77199621570483),(74,113,-1.85850093081454),(74,116,-1.56642353587451),(75,85,0.373577074495682),(75,86,-2.4222540971099),(75,93,-1.01759392071291),(75,98,-2.20030823694571),(75,103,-0.213644825586718),(75,105,-0.904034546952727),(75,111,-0.961897640919217),(75,117,-2.72547074800867),(76,86,-2.0741294595172),(76,89,0.793633838923307),(76,92,-0.241096224860378),(76,94,-0.502243110446486),(76,99,-0.687948240607929),(76,101,-0.293710135196997),(76,103,-1.05858027893918),(76,106,3.15469832453383),(76,110,0.444898831141087),(76,113,2.69301431318094),(77,88,-1.33492538224433),(77,91,-0.441343424787133),(77,93,0.610049745170446),(77,98,-0.181966612750633),(77,101,-2.28014465773492),(77,102,-2.252067629017),(77,103,0.734427930539872),(77,104,0.0512710959196753),(77,105,-0.631244850001526),(77,109,-2.2321085238197),(78,88,0.241050447096164),(78,93,-0.273522141178625),(78,94,1.21176793725394),(78,101,-3.03205969420454),(78,104,-0.745384075441755),(78,110,-0.25624866481521),(78,114,1.98132267220069),(78,116,1.36500137333293),(78,117,-0.962950529496139),(78,118,1.47746208075198),(79,87,2.25806451612903),(79,92,0.709173863948485),(79,94,-0.445097201452681),(79,107,0.0642262031922361),(79,108,1.80777916806543),(79,114,2.43815424054689),(79,118,-1.34531693472091),(80,87,0.483565782647176),(80,88,-1.34838404492325),(80,91,1.26310007019257),(80,99,2.29102450636311),(80,101,0.650105288857692),(80,107,3.13484603411969),(80,113,2.29361857966857),(81,85,-2.21915341654714),(81,86,0.952772606585894),(81,90,-0.775582140568255),(81,93,-1.17398602252266),(81,96,-0.311075167088839),(81,97,-0.780907620471816),(81,106,1.06700338755455),(81,107,-2.30857264931181),(81,110,-0.682927945799127),(81,115,-2.57538071840571),(82,86,-2.44911038544877),(82,92,-1.71272927030244),(82,110,1.46717734305857),(82,112,0.831400494399854),(83,87,-0.405270546586505),(83,91,-0.776528214362011),(83,93,-0.294228949858089),(83,101,0.502548295541246),(83,103,1.46259956663717),(83,105,1.74173711355937),(83,108,-2.19615771965697),(84,85,0.694158757286294),(84,86,0.152500991851558),(84,89,-0.0503860591448714),(84,95,0.517838068788721),(84,99,0.0376598406933805),(84,104,-0.00747703482161932),(84,111,0.12945951719718),(84,113,1.06590472121342),(84,114,1.30390331736198)]
orgname='BHNEAT_4_2'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()