edge = [(0,85,0.60811181981872),(0,89,0.547761467329935),(0,90,0.354167302468947),(0,93,-0.400616473891415),(0,98,0.571581163975951),(0,101,-0.875759147923215),(0,105,0.397106845301675),(0,108,-0.195623645741142),(0,113,-0.14760277108066),(0,114,0.0229804376354259),(0,117,0.563676870021668),(0,118,-0.0313730277413251),(1,86,3.73615222632527),(1,92,0.3037507248146),(1,98,-2.14644306772057),(1,102,-3.94990386669515),(1,104,-2.02349925229652),(1,107,-0.885250404370251),(1,108,-0.710928678243355),(1,109,-3.76226081118198),(1,113,0.466734824671163),(2,87,-0.285775322733238),(2,88,2.59788811914426),(2,100,-0.455977050080874),(2,106,-0.696768089846492),(2,108,0.222602008117924),(2,110,-0.205328531754509),(2,113,0.451857051301614),(2,118,0.00302133243812372),(3,89,1.01139866328928),(3,92,-4.27518539994507),(3,97,-1.46671956541643),(3,99,4.43310342722861),(3,101,-1.6740012817774),(3,103,0.52012695699942),(3,105,0.834406567583239),(3,108,-0.0627765739921262),(3,109,-0.706717123935667),(3,111,-0.69060335093234),(3,112,0.294869838557085),(3,116,1.59424115726188),(4,90,-0.606006042664876),(4,91,-1.26277962584307),(4,97,-0.706839197973571),(4,99,0.032624286629841),(4,101,-2.41778313547166),(4,108,0.384609515671255),(4,113,-0.556382946256905),(4,118,-0.192342905972472),(5,86,-0.685354167302469),(5,87,0.605685598315378),(5,89,3.94054994354076),(5,92,0.350276192510758),(5,93,0.920041505172887),(5,99,0.242591631824702),(5,104,0.951353495895261),(5,114,0.716727195043794),(5,118,-0.556321909237953),(6,89,-0.450071718497268),(6,92,1.23722037415693),(6,94,0.0747703482161931),(6,100,3.08174382763146),(6,101,0.213614307077242),(6,103,-0.423261207922605),(6,107,2.33596301156651),(6,110,1.27791680654317),(6,113,1.18553727835932),(7,85,-0.887783440656758),(7,86,0.136494033631398),(7,90,-0.613513595995972),(7,95,0.932309945982238),(7,99,0.318735312967315),(7,100,-1.64542069765313),(7,104,-0.362773522141179),(7,106,0.645771660512101),(7,108,-0.236762596514786),(7,112,1.20906704916532),(7,116,-0.251472518082217),(8,92,-0.235480819116794),(8,93,2.17567979979858),(8,95,0.290169988097781),(8,99,-0.78469191564684),(8,106,-1.45411542100284),(8,107,2.36127811517685),(8,115,2.07431257057405),(8,116,1.00431836909085),(8,118,-1.57727286599322),(9,85,-0.324503311258278),(9,87,-0.0355845820490127),(9,98,-0.220984527115696),(9,101,-0.479171117282632),(9,103,0.785699026459548),(9,105,-0.580919827875607),(9,106,3.6018402661214),(9,113,1.84261604663228),(10,89,-0.50221259193701),(10,96,1.33976256599628),(10,106,0.619037446211127),(10,108,1.51771599475082),(10,109,0.46134830774865),(10,111,-0.926664021729179),(10,112,-0.718482009338664),(10,114,0.264809106723228),(10,115,0.550431836909085),(10,116,-0.271614734336375),(10,117,1.55723746452223),(11,89,-0.135868404187139),(11,97,1.39577929013947),(11,105,-0.60307626575518),(11,112,-0.724600970488601),(11,115,-1.0773033845027),(12,92,0.821329386272774),(12,93,3.59121982482376),(12,94,-0.747703482161931),(12,97,-0.617664113284707),(12,98,0.353114413892026),(12,99,-3.80803857539598),(12,108,-1.5283516953032),(12,116,2.96206549272134),(13,86,0.922544022949919),(13,87,-0.452223273415326),(13,90,1.29775383770257),(13,99,4.15488143559069),(13,102,0.683156834620197),(13,104,-0.303262428662984),(13,113,-1.08410901211585),(13,116,-0.421033356730857),(13,118,0.516983550523392),(14,90,-0.860347300637837),(14,93,-0.686635944700461),(14,95,-1.46671956541643),(14,102,1.42973113193152),(14,104,-0.271919919431135),(14,106,0.662495803704947),(14,109,0.191534165471358),(14,110,-3.61461226233711),(14,111,-3.94912564470351),(15,85,-0.655354472487564),(15,92,-1.51748710592975),(15,99,1.38068788720359),(15,101,-0.601214636677145),(15,104,-0.327341532639546),(15,108,-0.111026337473678),(15,117,0.827112643818476),(16,86,-2.93671987060152),(16,87,-1.25608081301309),(16,88,-2.25530259102145),(16,90,0.255058442945647),(16,91,-0.428632465590381),(16,95,-0.791619617297891),(16,97,-2.03730887783441),(16,98,0.69533371990112),(16,99,-0.265449995422224),(16,101,0.80108035523545),(16,108,0.552140873439741),(16,110,-2.29070406201361),(17,89,1.3396099734489),(17,96,-1.37665944395276),(17,99,-0.900051881466109),(17,101,1.38740195928831),(17,106,0.667928098391675),(17,107,-0.0424512466811121),(17,109,-0.546494949186682),(18,90,0.738822595904416),(18,91,-3.76567888424329),(18,93,-0.558549760429701),(18,99,-2.45529038361766),(18,102,-1.44256416516617),(18,103,-0.847773674733726),(18,104,0.570085757011628),(18,110,0.754463332010865),(18,111,-3.56404309213538),(18,116,0.389721366008484),(18,117,2.52510147404401),(18,118,-4.84476760155034),(19,87,-0.260994293038728),(19,89,-4.24166081728568),(19,93,0.580233161412397),(19,95,-0.842463454084903),(19,101,0.737846003601184),(19,105,-0.104922635578478),(19,115,-0.994872890408033),(20,88,0.248649555955687),(20,101,1.45730460524308),(20,103,-3.40055543687246),(20,104,-0.595385601367229),(20,105,-0.275460066530351),(20,106,-0.167607654042177),(20,111,-0.22064882351146),(20,116,-3.23482467116306),(21,86,3.64825891903439),(21,87,-1.51876888332774),(21,94,-0.871288186284982),(21,96,2.47146519363994),(21,101,2.20529801324503),(21,102,-0.732291634876553),(21,105,-2.42416150395215),(21,107,4.79793694875942),(21,108,-0.732932523575549),(22,86,1.17415387432478),(22,88,-0.659932248908963),(22,91,-0.416333506271554),(22,92,0.170506912442396),(22,93,-1.95095675527207),(22,98,-3.31482894375439),(22,106,-0.664418469801935),(22,115,0.6954863124485),(22,117,0.241706595049898),(23,85,1.40478225043489),(23,86,-0.963408307138279),(23,88,-1.27690969573046),(23,90,-1.05758842738121),(23,97,0.263618884853664),(23,104,0.693517868587298),(23,112,0.479445783867916),(23,114,0.270027771843623),(23,115,-1.13090914639729),(23,116,-0.478469191564684),(24,89,1.09656056398206),(24,90,0.775322733237709),(24,91,-0.0284737693411054),(24,101,0.420224616229743),(24,107,0.496200445570238),(24,108,-0.25830866420484),(24,110,-0.272545548875393),(24,112,-0.815179906613361),(25,90,-1.02877895443587),(25,92,0.432477797784356),(25,94,-0.297128208258309),(25,98,-1.99305703909421),(25,105,0.854396191290017),(25,108,-1.08737449262978),(25,109,0.0531937620166631),(25,115,-0.456862086855678),(26,85,0.541917172765282),(26,87,-0.554124576555681),(26,89,-0.348368785668508),(26,95,0.464323862422559),(26,98,-1.11177404095584),(26,100,0.343485824152348),(26,101,0.540375988036744),(26,102,0.0256660664693136),(26,103,-0.683339945677053),(26,104,0.873958555864132),(26,107,4.12685018463698),(26,109,-3.91680654316843),(26,112,-3.69959105197302),(26,113,0.95234534745323),(26,117,-1.59848323007904),(27,85,0.639820551164281),(27,87,1.44712668233283),(27,94,0.0428174687948241),(27,100,1.34238715781121),(27,102,1.99102755821406),(27,103,-3.12662129581591),(27,104,-0.14844203009125),(27,105,0.903256324961089),(27,108,-0.806146427808466),(27,110,-0.139103366191595),(27,114,-0.924649800103763),(28,87,-0.506134220404675),(28,88,-3.78609576708274),(28,97,-0.279549546800134),(28,99,-1.16536454359569),(28,104,0.076479384746849),(28,113,-0.161351359599597),(28,114,0.280220954008606),(29,88,-0.72103030487991),(29,91,1.17175817133091),(29,102,0.588686788537248),(29,105,-0.096987823114719),(29,116,0.308511612292856),(30,95,0.787804803613392),(30,96,4.91122165593432),(30,99,-1.66891994994964),(30,101,-0.0965605639820551),(30,104,-0.0746177556688131),(30,109,1.77719962157048),(30,110,0.17551194799646),(30,114,-0.878292184209723),(30,118,4.01908932767724),(31,85,-0.768852809228797),(31,92,0.153843806268502),(31,94,-0.3037507248146),(31,96,0.0198675496688738),(31,99,-3.88981292153691),(31,103,-0.226996673482467),(31,107,0.797372356334117),(31,108,0.872463148899808),(31,109,-1.56727805413984),(31,111,-0.396679586169011),(31,112,-0.307931760612812),(31,117,-0.58500930814539),(32,86,0.54246650593585),(32,87,0.150975066377758),(32,89,-0.0491348002563554),(32,92,1.86356700338755),(32,98,0.317972350230415),(32,99,2.31949827570421),(32,104,2.33797723319193),(32,106,3.92141483809931),(32,109,0.926023133030183),(32,116,-2.93995483260598),(32,118,0.266975920896023),(33,96,-0.551499984740745),(33,98,0.272560808130131),(33,108,-0.0657979064302499),(33,110,-3.40907010101627),(33,111,0.0851161229285561),(33,114,-2.77137058626057),(34,85,0.919736320078127),(34,90,-0.394970549638356),(34,99,-2.47497482222968),(34,104,1.57019257179479),(34,109,-1.37961973937193),(35,86,1.92457350383007),(35,87,-3.46647541734062),(35,97,-0.0440992461928159),(35,98,0.749382000183111),(35,100,-0.117404705954161),(35,104,-1.26097903378399),(35,107,-0.56953642384106),(35,109,-0.651051362651448),(35,110,-4.67049165318766),(35,112,0.519272438734092),(36,85,-0.832789086581011),(36,87,-1.17812128055666),(36,90,0.86909085360271),(36,91,0.708334604937895),(36,104,0.406048768578143),(36,107,0.826914273506882),(36,109,-0.564973906674398),(36,112,2.30782494582965),(36,115,4.03988769188513),(36,117,1.33918271431623),(36,118,0.62709433271279),(37,85,1.7300637836848),(37,86,0.54269539475692),(37,87,3.15851313821833),(37,91,0.454573198644978),(37,99,2.53729361857967),(37,105,2.02780236213263),(37,111,-1.61456648457289),(37,112,-3.53820917386395),(37,118,-0.339014862514115),(38,87,0.187749870296335),(38,90,0.963835566270943),(38,103,0.200689718314158),(38,105,0.685110019226661),(38,106,0.86954863124485),(38,111,0.256126590777307),(38,115,-3.28476821192053),(39,87,0.677907650990326),(39,89,0.347758415478988),(39,91,-1.43330179754021),(39,94,-0.130802331614124),(39,97,0.728507339701529),(39,98,0.60322885830256),(39,107,-1.52471999267556),(39,108,0.868984038819544),(39,109,0.914548173467208),(39,111,-2.714560380871),(39,113,0.904629657887509),(39,116,-2.70937223426008),(39,118,-0.983947264015625),(40,88,0.749656666768395),(40,92,-1.12208929715873),(40,99,2.88785973693045),(40,104,-0.60460219122898),(40,110,-1.47631763664663),(40,116,-0.775994140446181),(40,118,0.531327249977111),(41,88,-0.940351573229164),(41,93,0.935178685872982),(41,96,-0.463759269997253),(41,97,-0.0195318460646382),(41,100,0.163884395886105),(41,101,-3.43244727927488),(41,104,-0.992614520706809),(41,105,-0.558503982665487),(41,106,-2.55458235419782),(41,107,-0.946531571398053),(41,109,0.695883053071688),(41,110,-2.03640858180486),(41,111,-0.975310525833918),(41,112,0.688055055391095),(42,85,-0.285775322733238),(42,86,-0.0117801446577349),(42,87,-0.150028992584002),(42,99,-0.0702688680684835),(42,100,-0.787408062990204),(42,103,-3.15599536118656),(42,109,-0.946043275246437),(42,113,-0.666035950804163),(43,85,0.432874538407544),(43,88,0.0901821955015717),(43,89,-0.295937986388745),(43,93,0.812128055665761),(43,97,-0.108432264168218),(43,98,-2.84055604724265),(43,101,0.768028809472945),(43,102,0.491210669270913),(43,103,-0.117191076387829),(43,105,-0.334177678762169),(43,110,-0.577028717917417),(43,112,0.185186315500351),(43,114,-4.66786706137272),(43,116,-1.5584276863918),(44,89,0.907620471816156),(44,98,2.21190527054659),(44,99,2.52328562273019),(45,87,0.402478102969451),(45,88,0.277199621570483),(45,90,0.0581530198065128),(45,91,0.173955504013184),(45,95,0.365794854579302),(45,98,-0.298196356089969),(45,108,-0.385174108096561),(45,109,1.07142857142857),(45,112,0.666737876522111),(45,115,-0.691106906338695),(46,85,-2.84218878749962),(46,89,0.450972014526811),(46,91,0.907193212683493),(46,94,-1.15755180516984),(46,97,0.337900936918241),(46,100,-0.796288949247719),(46,101,-0.336375011444441),(46,108,-0.511032441175573),(46,112,-1.34162419507431),(47,86,-0.394650105288858),(47,91,-0.468626972258675),(47,92,0.0833765678884243),(47,94,-0.560289315469832),(47,95,-0.443662831507309),(47,100,-0.583880123294778),(47,101,0.716727195043794),(47,104,0.331888790551469),(47,105,0.0389721366008484),(47,108,0.487075411236915),(47,112,0.23734244819483),(47,114,-1.95265053254799),(47,118,-0.534379100924711),(48,86,-1.42632831812494),(48,91,-0.591357158116398),(48,98,1.05525376140629),(48,99,0.128604998931852),(48,100,0.440015869624928),(48,103,-0.410962248603778),(48,105,-0.678365428632466),(48,106,-0.738120670186468),(48,111,-0.0663167210913419),(48,115,1.01443525498215),(49,87,-1.79532761619922),(49,89,0.192388683736686),(49,93,0.309732352671896),(49,94,1.93075350199896),(49,95,0.45692312387463),(49,102,0.949980162968841),(49,113,0.925229651783807),(49,114,0.308053834650715),(50,89,-1.10330515457625),(50,105,0.554841761528367),(50,107,1.17712942899869),(51,87,0.224524674214911),(51,92,-1.98225348673971),(51,97,0.914975432599872),(51,98,-0.501083407086398),(51,103,2.56950590533158),(51,106,0.117160557878353),(51,112,0.507217627491073),(51,118,2.5092776268807),(52,89,0.451948606830042),(52,97,-0.473830378124332),(52,106,-0.805230872524186),(52,110,3.50924710837123),(52,111,-1.91409039582507),(52,113,-1.59405804620502),(52,114,-0.633777886288034),(52,118,-1.52668843653676),(53,88,0.123935666982025),(53,90,-0.711233863338115),(53,92,0.35186315500351),(53,94,0.681325724051637),(53,104,-0.546769615771966),(53,105,-0.0846278267769404),(53,109,3.28377636036256),(54,85,-0.124851222266305),(54,91,0.98055970946379),(54,94,0.757454145939512),(54,96,4.31791131321146),(54,111,0.933408612323374),(54,112,-0.738151188695944),(54,113,1.0391552476577),(54,118,-1.93653675954466),(55,87,0.870784630878628),(55,95,0.313959166234321),(55,107,-0.632343516342662),(55,110,2.1332438123722),(55,117,-1.60831019013031),(56,107,1.59202856532487),(56,111,-2.85042878505814),(56,113,-1.03122043519395),(56,114,-0.198812829981383),(57,87,-0.35026093325602),(57,90,3.22751548814356),(57,91,0.903805658131657),(57,92,0.764061403241066),(57,93,-1.71001312295907),(57,94,0.241523483993042),(57,95,0.188207647938475),(57,96,-3.80545976134526),(57,100,0.860957670827357),(57,102,-2.02368236335337),(57,103,0.594500564592425),(57,115,1.41613513595996),(58,86,0.577806939909055),(58,87,-3.3487655262917),(58,89,-1.82966093935972),(58,90,0.32944730979339),(58,95,-0.801965392010254),(58,96,1.79090243232521),(58,101,1.12102114932707),(58,103,0.975615710928678),(58,109,-0.0685140537736137),(58,110,0.778344065675832),(58,113,0.173009430219428),(58,114,-1.0635700552385),(58,115,0.75670644245735),(58,118,-3.38015381328776),(59,85,-0.206122013000885),(59,86,0.720847193823054),(59,90,-0.548768578142643),(59,91,-3.4873500778222),(59,93,2.70383312479019),(59,97,2.43856624042482),(59,98,-0.25426496169927),(59,100,1.2833491012299),(59,102,0.117831965086825),(59,112,-0.783104953154088),(59,114,1.11244544816431),(60,85,-0.157963805047761),(60,87,-0.309518723105563),(60,90,0.253715628528703),(60,91,1.38996551408429),(60,96,0.964659566026795),(60,100,-2.57136753440962),(60,101,-3.37304300057985),(60,105,-0.535447248756371),(60,107,0.645130771813105),(60,109,1.08279671620838),(60,110,4.20163579210791),(60,114,-1.24211859492782),(61,89,1.0401165807062),(61,94,-4.32670064394055),(61,96,0.807885982848598),(61,98,-0.525223548081912),(61,100,-0.708792382580035),(61,102,0.0296792504654072),(61,103,-5.42474135563219),(61,114,-0.840998565630055),(61,115,-0.010681478316599),(62,93,1.21498764000366),(62,95,-0.964842677083651),(62,107,-0.43168431653798),(62,109,-0.0819879757072663),(62,110,0.845362712485122),(62,111,-0.0133365886410108),(63,87,-1.4136631366924),(63,90,0.735831781975768),(63,93,1.63373210852382),(63,97,-3.46130252998444),(63,100,-1.21810052797021),(63,103,-0.659215063936277),(63,104,-0.0152897732474746),(63,108,-0.262855922116764),(63,111,-0.602374340037233),(63,114,-2.47250282296213),(63,117,-1.20659504989776),(64,87,-0.0254829554124577),(64,94,-2.06427198095645),(64,99,-1.09105197302164),(64,110,-0.101260414441359),(64,112,-0.539750358592486),(64,116,-0.200537125766778),(65,87,0.055009613330485),(65,88,-0.0688497573778497),(65,90,-0.0259407330545976),(65,97,0.543580431531724),(65,99,-3.48046815393536),(65,107,-0.963957640308847),(65,110,-0.9518112735374),(65,111,-0.0235297708059938),(65,114,-0.748008667256691),(65,116,-0.636860255745109),(65,117,0.75914792321543),(66,85,0.941160313730277),(66,102,0.799951170384838),(66,105,0.911160618915372),(66,108,0.899319437238685),(66,111,0.635578478347118),(66,115,0.46165349284341),(66,118,3.42425305948057),(67,86,0.493148594622639),(67,90,-2.65489669484542),(67,92,-1.04846339304788),(67,104,0.82311471907712),(67,109,-0.616229743339335),(67,111,-1.16289254432814),(68,87,2.73828852198859),(68,88,0.759392071291238),(68,90,-0.208960234382153),(68,93,-0.675923947874386),(68,95,-1.20325327311014),(68,96,-4.16716513565478),(68,97,0.183141575365459),(68,103,0.376293221839045),(68,107,-2.81655323953978),(68,112,-0),(68,114,0.725516525772881),(69,87,0.371807000946074),(69,88,-2.04086428418836),(69,92,1.41819513534959),(69,94,2.40081484420301),(69,95,0.901058992278817),(69,97,-2.77253028962065),(69,108,-0.542252876369518),(69,113,-0.82448805200354),(69,114,0.905514694662313),(69,118,0.306772057252724),(70,85,1.78044984282968),(70,86,-0.567491683706168),(70,87,-1.07612842188788),(70,90,1.95005645924253),(70,96,-0.00350962858973968),(70,97,-1.90948210089419),(70,99,-2.37434003723258),(70,105,-0.960997344889676),(70,107,1.07225257118442),(70,109,-0.141972106082339),(70,110,0.0257881405072176),(70,111,-0.274117252113407),(71,85,0.136051515243995),(71,93,-2.12369151890622),(71,96,-0.658345286416211),(71,100,-0.132023071993164),(71,104,0.467696157719657),(71,106,2.40173039948729),(71,111,-2.30414746543779),(71,113,0.171361430707724),(72,94,-0.507110812707907),(72,96,-0.502243110446486),(72,99,-1.24021118808557),(72,110,-0.184636982329783),(72,112,1.97859126560259),(72,114,-0.535828730124821),(72,115,0.147251808221686),(72,116,-0.566667683950316),(73,88,0.195898312326426),(73,94,0.381542405468917),(73,99,1.55110324411756),(73,100,-0.12961210974456),(73,106,0.0778221991637928),(73,110,2.51617481002228),(73,115,-0.0560930204168828),(74,90,0.257820368053224),(74,94,-0.730185857722709),(74,99,0.570543534653768),(74,102,0.043870357371746),(74,106,-0.253059480574969),(74,107,-0.315073091830195),(74,110,1.83684804834132),(74,113,-0.970610675374615),(74,116,1.68317209387494),(75,85,-1.19017609179968),(75,86,-1.34792626728111),(75,93,-0.858760338145085),(75,98,0.600970488601337),(75,103,-1.37261574144719),(75,105,-0.781533249916074),(75,111,0.924375133518479),(75,117,0.840083010345775),(76,86,-2.67168187505722),(76,89,0.451857051301614),(76,92,-0.341776787621693),(76,94,0.744651631214332),(76,99,1.45997497482223),(76,101,-0.343333231604968),(76,103,-0.262535477767266),(76,106,1.54841761528367),(76,110,2.13873714407788),(76,113,3.85311441389203),(77,88,-0.644367809076205),(77,91,0.0854213080233161),(77,93,0.463881344035157),(77,98,-1.51776177251503),(77,101,-0.831965086825159),(77,102,0.220084231086154),(77,103,2.99768059327982),(77,104,0.423749504074221),(77,105,0.234015930661946),(77,109,0.143925290688803),(78,88,-1.09582811975463),(78,93,0.661275063325907),(78,94,0.521897030549028),(78,101,0.744605853450118),(78,104,0.102511673329875),(78,110,-0.555558946501053),(78,114,2.34641560106204),(78,116,0.967284157841731),(78,117,2.75908688619648),(78,118,0.594561601611377),(79,87,0.894375438703574),(79,92,0.291451765495773),(79,94,0.673970763267922),(79,107,-0.170079653309732),(79,108,4.21591845454268),(79,114,1.69652394177068),(79,118,-0.299295022431104),(80,87,1.29497665334025),(80,88,-0.941343424787133),(80,91,-0.367961668752098),(80,99,0.479476302377392),(80,101,-0.135700552385022),(80,107,0.89150669881283),(80,113,-0.992156743064669),(81,85,-0.668584246345408),(81,86,-1.34298226874599),(81,90,-0.883297219763787),(81,93,-0.276284066286203),(81,96,-1.9658650471511),(81,97,2.44032105471969),(81,106,1.78083132419813),(81,107,0.13556321909238),(81,110,0.010208441419721),(81,115,2.75101474044008),(82,86,0.0690328684347057),(82,92,-2.3228247932371),(82,110,-0.852443006683554),(82,112,-1.91946165349284),(83,87,-0.97460860011597),(83,91,0.510513626514481),(83,93,2.54760887478256),(83,101,-1.7412640766625),(83,103,0.226752525406659),(83,105,0.661214026306955),(83,108,-0.485122226630451),(84,85,-0.752616962187567),(84,86,0.152500991851558),(84,89,1.10827967162084),(84,95,0.344431897946104),(84,99,0.591143528550066),(84,104,-0.191732535782952),(84,111,-1.61650440992462),(84,113,-0.465834528641621),(84,114,-0.468214972380749),(35,105,-1.60777611621448)]
orgname='BHNEAT_15_1'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()