edge = [(0,85,1.44149601733451),(0,89,-1.62092196417127),(0,90,0.831781975768304),(0,93,-0.167806024353771),(0,98,2.35376293221839),(0,101,-3.30041657765435),(0,105,2.79412213507492),(0,108,3.34204382457961),(0,113,0.451780755027924),(0,114,4.24878688924833),(0,117,-0.617580187383648),(0,118,-2.68774224066897),(1,86,0.993987853633228),(1,92,2.16224402600177),(1,98,4.58189642017884),(1,102,-5.79051332132939),(1,104,-3.23596148564104),(1,107,0.121974852748192),(1,108,-3.08381908627583),(1,109,2.84499649037141),(1,113,0.952551347392194),(2,87,2.66242713705863),(2,88,1.386837366863),(2,100,-0.922727134006775),(2,106,0.506988738670004),(2,108,2.17094180120243),(2,110,3.57470931119724),(2,113,-0.0676061281167026),(2,118,2.53440961943419),(3,89,4.56237220374157),(3,92,-0.272095400860622),(3,97,0.834109012115848),(3,99,0.986610003967407),(3,101,-1.53030487990967),(3,103,-1.09048738059633),(3,105,5.0017471846675),(3,108,-0.735114597003082),(3,109,0.69899594103824),(3,111,0.564699240089114),(3,112,-0.923429059724723),(3,116,-3.11999114963225),(4,90,0.626979888302255),(4,91,1.3740653706473),(4,97,-0.777169103061007),(4,99,1.53638569292276),(4,101,0.173467207861568),(4,108,-0.503631702627644),(4,113,-2.23128452406384),(4,118,0.416867580187384),(5,86,0.828653828547014),(5,87,-2.14464247566149),(5,89,0.812242500076296),(5,92,1.50160985137486),(5,93,-2.36831263161107),(5,99,1.19594409009064),(5,104,3.20224616229743),(5,114,-0.59995574816126),(5,118,-2.96587267677847),(6,89,-0.469244972075564),(6,92,-1.78697317423017),(6,94,-2.53143406476028),(6,100,-1.41721854304636),(6,101,0.18282876064333),(6,103,-3.35132145146031),(6,107,-0.858760338145085),(6,110,1.68682668538469),(6,113,-1.71906186101871),(7,85,1.82145908993805),(7,86,-2.84380626850185),(7,90,-1.79484694967498),(7,95,0.00986510818811615),(7,99,-1.69113742484817),(7,100,5.85759300515763),(7,104,1.96384319589831),(7,106,3.85196996978668),(7,108,-0.443029572435682),(7,112,-0.0137562181463057),(7,116,-1.84274575029756),(8,92,-0.464789269692068),(8,93,-3.16013824884793),(8,95,3.83740501113926),(8,99,-0.5420850245674),(8,106,-3.52603228858303),(8,107,1.84179204687643),(8,115,3.67962431714835),(8,116,-3.47518845179601),(8,118,0.878322702719199),(9,85,-2.59328745384075),(9,87,1.1725974303415),(9,98,-1.61953337199011),(9,101,0.928067873165075),(9,103,4.69000823999756),(9,105,1.199301126133),(9,106,0.111514633625294),(9,113,3.53940702536088),(10,89,-2.25832392345958),(10,96,-1.06958983123264),(10,106,4.80152287362285),(10,108,1.86506241035188),(10,111,-1.0123065889462),(10,112,-2.76024658955657),(10,114,2.43932920316172),(10,115,1.20135349589526),(10,116,-0.960303048799097),(10,117,-2.34966582232124),(11,89,-4.23213904232917),(11,97,-0.175351725821711),(11,105,-0.405659657582324),(11,112,2.56281472212897),(11,115,-3.24819940794092),(12,92,0.214056825464644),(12,93,-1.95723593859676),(12,94,2.65701773125401),(12,97,-3.95051423688467),(12,98,2.46568193609424),(12,99,2.34282967619861),(12,108,4.38014618366039),(12,116,-3.63786736655782),(13,86,2.5413220618305),(13,87,0.43206579790643),(13,90,1.4869304483169),(13,99,1.86801507614368),(13,102,-0.274056215094455),(13,104,-3.93765068514054),(13,113,-0.361964781640065),(13,116,-1.4720908230842),(13,118,3.40014343699454),(14,90,-1.94251838740196),(14,93,2.39646595660268),(14,95,-0.375453962828456),(14,102,2.33436078981903),(14,104,-0.551316873683889),(14,106,-0.676442762535478),(14,109,1.21443830683309),(14,110,2.16901150547807),(14,111,-1.06867427594836),(15,85,3.95725882747887),(15,92,-0.507522812585834),(15,99,-2.39399395733512),(15,101,-2.66121402630696),(15,104,-0.676976836451308),(15,108,-0.895229956968902),(15,117,-3.2696157719657),(16,86,2.48123111667226),(16,87,-4.79446546830653),(16,88,0.85163426618244),(16,90,3.39973143711661),(16,91,0.966292306283761),(16,95,-1.8005996887112),(16,97,0.499893185216834),(16,98,1.80853450117496),(16,99,-2.65129551072726),(16,101,1.34492019409772),(16,108,4.36767937253945),(16,110,-2.21391186254463),(17,89,-1.88353373821223),(17,96,1.99285866878262),(17,99,1.82363353373821),(17,101,3.32550279244362),(17,106,-0.372402111880856),(17,107,1.80479598376415),(17,109,-5.63377788628803),(18,90,-2.32306894131291),(18,91,2.42893002105777),(18,93,-2.18164616840114),(18,99,-1.86731315042573),(18,102,1.19838557084872),(18,103,-0.21790215765862),(18,104,1.88795129245888),(18,110,0.288903469954527),(18,111,-1.13591418195135),(18,116,0.625057222205267),(18,117,-0.304536576433607),(18,118,1.52926725058748),(19,87,2.60010071108127),(19,89,-0.656613361003448),(19,93,-0.309266945402387),(19,95,1.20128482924894),(19,101,2.04392376476333),(19,105,-3.11767174291208),(19,115,1.42844935453352),(20,88,-5.37906277657399),(20,101,0.58439893795587),(20,103,1.92726676229133),(20,104,-1.76889858699301),(20,105,1.7506637775811),(20,106,1.82914212469863),(20,111,-0.403988769188513),(20,116,-0.10285500656148),(21,86,2.61680959501938),(21,87,0.0713370159001434),(21,94,0.938680684835353),(21,96,-0.752662739951781),(21,101,3.46971800897244),(21,102,2.25058748130741),(21,105,-1.49237800225837),(21,107,3.33800775170141),(21,108,2.21248512222663),(22,86,-3.28051087984863),(22,88,-0.0618991668446913),(22,91,-0.226393932920316),(22,92,-2.3365810113834),(22,93,-1.32137516403699),(22,98,0.589693899349956),(22,106,-0.933637501144444),(22,115,2.10869930112613),(22,117,-4.17928098391675),(23,85,0.847628711813715),(23,86,1.79235206152532),(23,88,-1.20842616046632),(23,90,-1.5158238471633),(23,97,1.09379863887448),(23,104,4.32766197698904),(23,112,-0.81228827784051),(23,114,-2.48880733664968),(23,115,-2.64165166173284),(23,116,-0.726432081057161),(24,89,-6.07952360606708),(24,90,-1.88864558854946),(24,91,-1.13911862544633),(24,101,1.07305368205817),(24,107,-2.29269539475692),(24,108,3.05958738975188),(24,110,-4.28717154454176),(24,112,-4.37855922116764),(25,90,-3.66374706259346),(25,92,1.78913998840297),(25,94,-2.53875850703452),(25,98,-0.42612231818598),(25,105,-1.79194006164739),(25,108,-2.30040894802698),(25,109,0.297326578569903),(25,115,3.51924192022462),(26,85,0.903447065645314),(26,87,-3.92124698629719),(26,89,0.645428327280496),(26,95,1.14673299356059),(26,98,2.18296609393597),(26,100,0.891064180425428),(26,101,-0.22735526596881),(26,102,2.78064821314127),(26,103,-0.530213324381237),(26,104,1.56227301858577),(26,107,-0.138935514389477),(26,109,0.614185003204444),(26,112,-1.71170690023499),(26,113,-2.26121555223243),(26,117,-1.86207159642323),(27,85,0.702459791863766),(27,87,-3.09724723044526),(27,94,0.712073122348704),(27,100,-0.231788079470199),(27,102,3.42619861445967),(27,103,1.10301522873623),(27,104,1.51165044099246),(27,105,0.122592852565081),(27,108,-1.96646015808588),(27,110,0.18786431470687),(27,114,-0.674771874141667),(28,87,1.72156437879574),(28,88,0.0565507980590234),(28,97,-0.43313394573809),(28,99,1.0190740684225),(28,104,-3.78458510086367),(28,113,-0.984450819421979),(28,114,-1.31679738761559),(29,88,-0.422444837794122),(29,91,0.456114383373516),(29,102,-3.64667195654164),(29,105,-0.932874538407544),(29,116,-2.20148319956053),(30,95,1.4063539536729),(30,96,1.17743461409345),(30,99,-0.706968901638844),(30,101,-2.38929410687582),(30,104,0.440191351054414),(30,109,-0.407391582995087),(30,110,0.254745628223518),(30,114,-3.01466414380322),(30,118,-2.51610614337596),(31,85,3.04332865382855),(31,92,0.632702108829005),(31,94,-3.4400234992523),(31,96,3.39979247413556),(31,99,3.07992797631764),(31,103,-1.46749778740806),(31,107,0.54322946867275),(31,108,3.22139652699362),(31,109,2.38540299691763),(31,111,1.61369670705283),(31,112,-1.66482284005249),(31,117,2.80677968688009),(32,86,-4.13457136753441),(32,87,2.35269478438673),(32,89,-1.095835749382),(32,92,-1.60631122775964),(32,98,2.9270760216071),(32,99,-3.73812067018647),(32,104,0.768715475936156),(32,106,2.99693288979766),(32,109,4.07637256996368),(32,116,1.52978606524857),(32,118,-0.968184453871272),(33,96,-0.465323343607898),(33,98,-3.07406079287088),(33,108,2.71718497268593),(33,110,-0.161702322458571),(33,111,-1.3977401043733),(33,114,-1.76155125583667),(34,85,0.0306176946317942),(34,90,1.68734550004578),(34,99,1.59871211890011),(34,104,2.99861140781884),(34,109,-0.524895474105045),(35,86,2.06064790795618),(35,87,-0.361674855800043),(35,97,-2.32505264442885),(35,98,2.53673665578173),(35,100,-1.21501052888577),(35,104,-1.75358592486343),(35,107,-4.01988280892361),(35,109,1.42527542954802),(35,110,-0.63121433149205),(35,112,-0.667592394787439),(36,85,-1.6360744041261),(36,87,-2.66982787560656),(36,90,0.994712668233283),(36,91,1.48400067140721),(36,104,-1.50330362865078),(36,107,-0.347552415540025),(36,109,-0.831133457441939),(36,112,-1.5406811731315),(36,115,-2.17200231940672),(36,117,-2.70314645832698),(36,118,1.14259010589923),(37,85,0.226531266212958),(37,86,-2.20873897518845),(37,87,1.47953733939634),(37,91,1.33621478926969),(37,99,2.83555101168859),(37,105,-2.04873805963317),(37,111,3.98409222693564),(37,112,-0.302903836176641),(37,118,3.25865962706381),(38,87,0.095431379131443),(38,90,4.94783623767815),(38,103,4.51886806848354),(38,105,2.93783379619739),(38,106,-0.623149815363018),(38,111,0.288865321817682),(38,115,1.33745078890347),(39,87,4.82655568102054),(39,89,-0.76563310647908),(39,91,-5.81453901791437),(39,94,-2.30604724265267),(39,97,-0.810113834040346),(39,98,-0.967131565294351),(39,107,0.956450086977752),(39,108,7.23464918973357),(39,109,-0.650784325693533),(39,111,0.189886165959654),(39,113,2.03587450788903),(39,116,-2.49036378063295),(39,118,-3.63184759056368),(40,88,0.818247016815698),(40,92,-1.4074373607593),(40,99,-0.462508011108737),(40,104,-1.33620715964232),(40,110,-2.89970091860714),(40,116,0.663182470168157),(40,118,1.10003967406232),(41,88,0.302896206549272),(41,93,4.94134342478713),(41,96,2.22396771141697),(41,97,-0.990440076906644),(41,100,2.29609820856349),(41,101,-2.45719016083254),(41,104,1.97650074770348),(41,105,-2.1058534501175),(41,106,-0.562448500015259),(41,107,0.288171025727104),(41,109,2.89216284676656),(41,110,0.532166508987701),(41,111,-2.9603030487991),(41,112,2.72004608294931),(42,85,0.999938962981048),(42,86,2.43870357371746),(42,87,1.75212866603595),(42,99,1.99747459334086),(42,100,-1.87611774040956),(42,103,-1.40350810266427),(42,109,1.6058763389996),(42,113,-1.0561387981811),(43,85,-0.396008178960539),(43,88,-1.33522293771172),(43,89,-2.30104220709861),(43,93,-1.48107089449751),(43,97,-4.24174474318674),(43,98,1.10113834040345),(43,101,0.460440382091739),(43,102,1.76409955137791),(43,103,0.941343424787133),(43,105,-0.481353190710166),(43,110,-2.19552446058534),(43,112,0.0584963530381176),(43,114,-1.28973509933775),(43,116,-2.97029023102512),(44,89,3.67503891109958),(44,98,1.40610217596973),(44,99,2.40708639790033),(45,87,-4.425626392407),(45,88,-3.04721976378674),(45,90,0.426618243964965),(45,91,-1.59591204565569),(45,95,0.0966597491378521),(45,98,-3.40006714072085),(45,108,-1.59176152836695),(45,109,5.76812036500137),(45,112,2.67268135624256),(45,115,0.7639545884579),(46,85,-1.76914273506882),(46,89,1.40105136265145),(46,91,3.07300027466658),(46,94,1.24253822443312),(46,97,-0.108539078951384),(46,100,2.50165562913907),(46,101,-0.0108951078829311),(46,108,-3.96069215979492),(46,112,1.45585497604297),(47,86,1.66188543351543),(47,91,3.08822901089511),(47,92,-2.09449293496506),(47,94,-2.42828913235878),(47,95,-1.70850245674001),(47,100,-0.752151554918058),(47,101,3.78299813837092),(47,104,-0.318994720297861),(47,105,2.94662312692648),(47,108,-0.54399243140965),(47,112,0.975669118320261),(47,114,2.02932828760643),(47,118,0.356631672109134),(48,86,0.7779091769158),(48,91,-3.375713370159),(48,98,1.37768944364757),(48,99,-1.18208868678854),(48,100,-1.08165227210303),(48,103,-0.926389355143895),(48,105,-0.52272103030488),(48,106,-2.54374828333384),(48,111,-2.46900082399976),(48,115,-1.34292886135441),(49,87,3.04829554124577),(49,89,1.10193182164983),(49,93,-2.08998382518998),(49,94,1.48895992919706),(49,95,-0.264915921506394),(49,102,-0.743415631580554),(49,113,-1.6212347788934),(49,114,3.62148655659658),(50,89,0.333658864101077),(50,105,-2.87423322244942),(50,107,4.27384258552812),(51,87,0.798425244911039),(51,92,1.01960051271096),(51,97,0.664387951292459),(51,98,1.93875698110904),(51,103,-4.55388805810724),(51,106,1.67081972716453),(51,112,-0.590380565813166),(51,118,-2.73561815240944),(52,89,-0.128322702719199),(52,97,0.0833231604968412),(52,106,-0.219313638721885),(52,110,-0.357409894100772),(52,111,0.859530930509354),(52,113,1.73491622669149),(52,114,0.482276375621815),(52,118,4.1462141788995),(53,88,2.40469832453383),(53,90,-1.29055146946623),(53,92,-0.485908078249458),(53,94,0.116733298745689),(53,104,-3.94138157292398),(53,105,2.22772148808252),(53,109,-2.46541489913633),(54,85,-0.102076784569842),(54,91,-2.32169560838649),(54,94,-1.49255348368786),(54,96,-2.3772392956328),(54,111,-2.59861293374432),(54,112,2.00042725913266),(54,113,2.73069704275643),(54,118,-0.315515610217597),(55,87,2.69524216437269),(55,95,-0.451216162602619),(55,107,-2.75990325632496),(55,110,-0.0174718466750085),(55,117,-2.7308267464217),(56,107,-1.70831934568316),(56,111,-2.50977355265969),(56,113,-2.31752220221564),(56,114,0.25465407269509),(57,87,-2.46580401013215),(57,90,-1.38983581041902),(57,91,0.999061555833613),(57,92,0.584459974974822),(57,93,6.78332621234779),(57,94,-1.13959166234321),(57,95,-2.18327127903073),(57,96,-1.08824427014985),(57,100,0.616145817438276),(57,102,-1.8511764885403),(57,103,1.16401409955138),(57,115,-2.71259956663717),(58,86,0.466483046967986),(58,87,-1.64499343852046),(58,89,-0.748527481917783),(58,90,-0.641537217322306),(58,95,0.140102847376934),(58,96,1.24652851954711),(58,101,-0.879718924527726),(58,103,2.3554338206122),(58,109,-1.51882992034669),(58,110,2.98511459700308),(58,113,-1.83644367809076),(58,114,-0.348216193121128),(58,115,3.77934354686117),(58,118,0.685674611651967),(59,85,1.65227210303049),(59,86,-1.12392040772729),(59,90,-0.919621875667592),(59,91,0.448698385570849),(59,93,1.99467452009644),(59,97,-1.54980620746483),(59,98,1.43749046296579),(59,100,2.10593737601856),(59,102,-3.63380840479751),(59,112,4.16554765465255),(59,114,-0.128040406506546),(60,85,-0.0754341257972957),(60,87,0.988090151676992),(60,90,-2.86408581804865),(60,91,2.08075197607349),(60,96,0.33135471663564),(60,100,-0.769005401776177),(60,101,-1.26682332834864),(60,105,-0.0790429395428327),(60,107,1.41454054383984),(60,109,1.23623615222633),(60,110,1.85438093203528),(60,114,2.72080141605884),(61,89,-0.468146305734428),(61,94,-1.60925626392407),(61,96,-1.14499343852046),(61,98,0.331392864772485),(61,100,2.956289864803),(61,102,0.794587542344432),(61,103,-0.388729514450514),(61,114,0.420522171697134),(61,115,3.84899441511277),(62,93,-1.8160573137608),(62,95,-1.22989593188269),(62,107,1.47701956236457),(62,109,-4.53227332377087),(62,110,-0.209662160100101),(62,111,-0.668202764976959),(63,87,0.209486678670614),(63,90,2.37395855586413),(63,93,0.237662892544328),(63,97,0.0268333994567704),(63,100,1.55885494552446),(63,103,3.99075289162877),(63,104,-0.378383739738151),(63,108,-0.479674672688986),(63,111,1.53136539811396),(63,114,1.09720908230842),(63,117,-1.02717673268838),(64,87,4.2204428235725),(64,94,-4.66508224738304),(64,99,-1.33748893704032),(64,110,0.692388683736686),(64,112,0.523033845027009),(64,116,0.849452192754906),(65,87,3.23886074404126),(65,88,-2.7911008026368),(65,90,1.36043885616626),(65,97,-0.0794930875576041),(65,99,-1.9598834192938),(65,107,-0.11794640949736),(65,110,-2.05825983458968),(65,111,0.957960753196814),(65,114,-5.1117587817011),(65,116,2.13034455397198),(65,117,-3.58096560563982),(66,85,-0.119190038758507),(66,102,1.11829737235633),(66,105,0.897656178472243),(66,108,1.07388531144139),(66,111,2.6153523361919),(66,115,-0.292458876308481),(66,118,-2.13760795922727),(67,86,1.99324015015107),(67,90,1.46412549211097),(67,92,1.30086672566912),(67,104,-1.60283211767937),(67,109,2.15286721396527),(67,111,-1.64799951170385),(68,87,-1.05673390911588),(68,88,-3.00086977752007),(68,90,0.517830439161351),(68,93,-2.1842631305887),(68,95,-2.7467268898587),(68,96,-0.660283211767937),(68,97,2.28117465742973),(68,103,-1.0605182042909),(68,107,-0.15881069368572),(68,112,-1.60901211584826),(68,114,0.314088869899594),(69,87,-2.05694753868221),(69,88,-2.14625995666372),(69,92,0.422299874874111),(69,94,1.50074007385479),(69,95,1.31893368327891),(69,97,-2.99208807641835),(69,108,-0.0825220496230967),(69,113,-1.15855128635517),(69,114,0.157696768089847),(69,118,1.13582262642293),(70,85,2.66525009918516),(70,86,1.05140842921232),(70,87,-4.0306405835139),(70,90,-0.709936826685385),(70,96,-0.793710135196997),(70,97,-0.455336161381878),(70,99,2.00437940610981),(70,105,-1.18755149998474),(70,107,-0.137424848170415),(70,109,2.14393292031617),(70,110,-5.28370769371624),(70,111,0.339747306741539),(71,85,1.53027436140019),(71,93,0.842593157750176),(71,96,0.637607959227271),(71,100,-0.888157292397839),(71,104,0.0677129428998688),(71,106,1.77167577135533),(71,111,1.27666554765465),(71,113,-2.34778893398846),(72,94,2.22338023010956),(72,96,0.175954466383862),(72,99,-0.727416302987762),(72,110,0.0847270119327375),(72,112,-0.781517990661336),(72,114,-1.48236030152287),(72,115,1.31839960936308),(72,116,-0.19922482985931),(73,88,2.64592425305948),(73,94,-2.21312601092563),(73,99,0.320291756950591),(73,100,-0.391857661671804),(73,106,-2.18153935361797),(73,110,-1.96470534379101),(73,115,1.07715079195532),(74,90,0.770676290169988),(74,94,0.756904812768944),(74,99,-1.00016785180212),(74,102,-1.91084017456587),(74,106,1.85621204260384),(74,107,-2.33199560533464),(74,110,-1.38785210730308),(74,113,-1.05064546647542),(74,116,1.24935148167364),(75,85,-3.03234962004456),(75,86,-2.45735038300729),(75,93,0.474097415082247),(75,98,3.22008423108615),(75,103,1.67578661458174),(75,105,-2.05801568651387),(75,111,0.115077669606616),(75,117,-0.548081911679434),(76,86,0.77249214148381),(76,89,3.48011719107639),(76,92,0.668279061250649),(76,94,-4.20712912381359),(76,99,-2.49229407635731),(76,101,-0.0338755455183569),(76,103,2.469481490524),(76,106,-2.14819788201544),(76,110,1.88726462599567),(76,113,1.26915036469619),(77,88,-1.23905148472549),(77,91,0.636661885433515),(77,93,1.11915189062166),(77,98,2.18537705618458),(77,101,-4.32572405163732),(77,102,-2.69392223883785),(77,103,0.43542283394879),(77,104,-1.75580614642781),(77,105,0.302415540025025),(77,109,-2.26135288552507),(78,88,-0.995895260475478),(78,93,-0.680104983672597),(78,94,-0.357295449690237),(78,101,-0.927076021607105),(78,104,2.21343119602039),(78,110,1.24503311258278),(78,114,4.13941618091372),(78,116,0.968504898220771),(78,117,0.0364696188238167),(78,118,-2.33603930784021),(79,87,-0.24047059541612),(79,92,1.25022888882107),(79,94,0.0302896206549272),(79,107,-0.4082003234962),(79,108,-0.341914120914334),(79,114,1.62816248054445),(79,118,-3.11565752128666),(80,87,2.44239631336406),(80,88,-1.47648548844874),(80,91,2.88554033021027),(80,99,-1.28609576708274),(80,101,1.68713950010681),(80,107,1.33249916074099),(80,113,-0.97628711813715),(81,85,-0.730613116855373),(81,86,1.37302774132511),(81,90,-2.157658619953),(81,93,0.103061006500443),(81,96,-1.26171147801141),(81,97,-5.60203100680563),(81,106,2.26203192236091),(81,107,3.00438703573717),(81,110,2.43425550096133),(81,115,0.984168523209326),(82,86,-3.26479384746849),(82,92,-1.13040559099094),(82,110,-2.88063447981201),(82,112,-2.24662007507553),(83,87,-1.10568559831538),(83,91,-0.0136036255989259),(83,93,4.78851435895871),(83,101,-0.651409955137791),(83,103,4.04812768944365),(83,105,-1.28373058259835),(83,108,-2.29765465254677),(84,85,-2.31443983275857),(84,86,-1.71842097231971),(84,89,-1.32908108767968),(84,95,0.418103579821162),(84,99,0.644016846217231),(84,104,0.0821710867641225),(84,111,0.76418347727897),(84,113,-2.39463484603412),(84,114,-1.05883968626972),(10,119,0.746635334330271),(119,109,4.16633350627155),(58,120,2.22970519119846),(120,118,3.27253791924802),(95,104,-1.89642017883847)]
orgname='BHNEAT_12_10'
cnodes = 121

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()