edge = [(0,85,-0.136356700338755),(0,89,-0.938451796014283),(0,90,-1.22135074922941),(0,93,-2.62717062898648),(0,98,0.343676564836573),(0,101,-0.214880825220496),(0,105,0.0160832544938505),(0,108,-2.0524460585345),(0,113,2.21117282631916),(0,114,-0.221243934446242),(0,117,0.971480452894681),(0,118,-1.45200201422163),(1,86,1.38647114474929),(1,92,2.13183996093631),(1,98,0.601947080904569),(1,102,1.29760124515519),(1,104,1.2963423566393),(1,107,-1.54597613452559),(1,108,-0.587710196234016),(1,109,1.75198370311594),(1,113,0.368236335337382),(2,87,-2.26703695791498),(2,88,1.93296609393597),(2,100,1.31745353556932),(2,106,-0.346110415967284),(2,108,-0.986617633594775),(2,110,0.476378673665578),(2,113,2.1264763328959),(2,118,1.01158177434614),(3,89,2.41821039460433),(3,92,-1.00778221991638),(3,97,0.684232612079226),(3,99,1.64903714102603),(3,101,0.784035767693106),(3,103,2.44576860866115),(3,105,-0.964568010498367),(3,108,-1.76223792229987),(3,109,-0.0756706442457351),(3,111,0.385555589465011),(3,112,-1.97503585924863),(3,116,-1.36258278145695),(4,90,-2.9357890560625),(4,91,-0.276566362498855),(4,97,1.36552018799402),(4,99,1.61703848384045),(4,101,-1.61584063234352),(4,108,2.57170323801386),(4,113,-2.7049623096408),(4,118,1.52117984557634),(5,86,-2.67432935575426),(5,87,1.67635120700705),(5,89,1.29554124576556),(5,92,-1.43804742576373),(5,93,1.37408062990204),(5,99,1.14487136448256),(5,104,-1.1246299630726),(5,114,-1.3548692281869),(5,118,0.691274758140813),(6,89,-1.91328928495132),(6,92,-1.70850245674001),(6,94,1.40712454603717),(6,100,-0.510208441419721),(6,101,-0.933538315988647),(6,103,2.00006103701895),(6,107,-0.843234046449171),(6,110,-0.243949705496384),(6,113,0.378322702719199),(7,85,-0.60483108005005),(7,86,0.580523087252419),(7,90,-1.34851374858852),(7,95,0.724784081545457),(7,99,2.35714285714286),(7,100,-0.402401806695761),(7,104,1.81245612964263),(7,106,1.76671651356548),(7,108,-1.15501113925596),(7,112,1.46818445387127),(7,116,-1.41829432050539),(8,92,1.08819849238563),(8,93,2.03483687856685),(8,95,-0.999290444654683),(8,99,-0.732734153263955),(8,106,-0.0791039765617847),(8,107,-1.33825189977721),(8,115,-0.112872707296976),(8,116,-1.70313119907224),(8,118,-1.27941221350749),(9,85,-0.907483138523514),(9,87,0.564714499343852),(9,98,1.79317606128117),(9,101,-0.686925870540483),(9,103,-0.945310831019013),(9,105,0.973586230048525),(9,106,1.60226752525407),(9,113,-2.66870632038331),(10,89,-1.1745658742027),(10,96,-0.82891323587756),(10,106,2.90464491714225),(10,108,-0.314157536545915),(10,109,-1.12743003631703),(10,111,-2.09472182378613),(10,112,-0.2150028992584),(10,114,-1.92611468855861),(10,115,2.08959471419416),(10,116,1.34447767571032),(10,117,-2.21797845393231),(11,89,1.61320078127384),(11,97,1.20209356975005),(11,105,1.2047639393292),(11,112,1.12321085238197),(11,115,-2.32734153263955),(12,92,-1.7141178624836),(12,93,2.51239051484725),(12,94,-2.15353862117374),(12,97,0.82380138554033),(12,98,-0.229483932004761),(12,99,2.76603747672964),(12,108,-0.763786736655782),(12,116,0.374858851893674),(13,86,-1.43039490951262),(13,87,-1.89712210455641),(13,90,-1.23063600573748),(13,99,-0.0465254676961577),(13,102,2.59642323068941),(13,104,2.09633167516099),(13,113,0.903424176763207),(13,116,-0.00369273964659567),(13,118,-0.262237922299875),(14,90,-0.518509475997192),(14,93,0.4049272133549),(14,95,-1.84476760155034),(14,102,-1.59227271340068),(14,104,1.01542710654012),(14,106,-0.239158299508652),(14,109,0.945272682882168),(14,110,-0.706053346354564),(14,111,1.50908688619648),(15,85,-0.403729361857967),(15,92,-0.000869777520065951),(15,99,-0.032242805261391),(15,101,-2.63795129245888),(15,104,0.300294503616443),(15,108,-2.40005188146611),(15,117,-1.51384014404736),(16,86,-1.82004760887478),(16,87,1.48371837519456),(16,88,0.122257148960845),(16,90,1.97027497177038),(16,91,0.674947355571154),(16,95,1.63387707144383),(16,97,-2.00365459150975),(16,98,-1.65932187871944),(16,99,-0.152531510361034),(16,101,-0.625659962767418),(16,108,-0.999519333475753),(16,110,-0.865695669423505),(17,89,-1.84008301034577),(17,96,2.05503250221259),(17,99,-2.63449507126072),(17,101,2.17012543107395),(17,106,-1.45539719840083),(17,107,-1.54464857936338),(17,109,-2.0544145023957),(18,90,0.172322763756218),(18,91,1.80803857539598),(18,93,-2.58803064058351),(18,99,-0.525681325724052),(18,102,0.222052674947356),(18,103,-1.04354991302225),(18,104,-0.814134647663808),(18,110,1.11632129886776),(18,111,-0.647160252693259),(18,116,0.945768608661153),(18,117,-0.29200872829371),(18,118,1.8002563554796),(19,87,-1.49102755821406),(19,89,-1.99579607531968),(19,93,0.968474379711295),(19,95,-0.147824030274361),(19,101,2.98370311593982),(19,105,-0.0961256752220221),(19,115,-2.92361980040895),(20,88,-1.11984618671224),(20,101,-1.82306131168554),(20,103,1.83840449232459),(20,104,-0.311639759514145),(20,105,-0.20089571825312),(20,106,1.62427137058626),(20,111,-0.929105502487259),(20,116,0.139683217871639),(21,86,1.31615649891659),(21,87,-1.77314065981017),(21,94,0.0480056154057437),(21,96,-1.05265968810083),(21,101,-1.44395275734733),(21,102,-0.795861690115055),(21,105,-0.753746147038179),(21,107,1.00211340678121),(21,108,0.583094271675771),(22,86,-2.26978362376782),(22,88,-2.48212378307443),(22,91,1.58270516067995),(22,92,-2.32591479232154),(22,93,1.9261909848323),(22,98,-2.2762840662862),(22,106,-1.03689687795648),(22,115,2.62226477858821),(22,117,-1.90229499191259),(23,85,-0.326456495864742),(23,86,0.212393566698203),(23,88,-1.75971251564074),(23,90,1.21626941740165),(23,97,2.64145329142125),(23,104,0.854533524582659),(23,112,1.74733726004822),(23,114,-1.15224158452101),(23,115,-0.209227271340068),(23,116,1.19905697805719),(24,89,0.630283516953032),(24,90,0.668156987212744),(24,91,1.93840601825007),(24,101,0.600817896053957),(24,107,-0.786614581743828),(24,108,1.15088351084933),(24,110,1.04849391155736),(24,112,1.65201269569994),(25,90,2.86594744712668),(25,92,-0.124019592883084),(25,94,0.0468916898098697),(25,98,1.7191381572924),(25,105,2.28807947019868),(25,108,-1.04953154087954),(25,109,0.978888821069979),(25,115,-0.700613422040468),(26,85,2.15367595446638),(26,87,-2.8046357615894),(26,89,-2.30758079775384),(26,95,2.74256111331523),(26,98,-1.35538804284799),(26,100,-1.59556871242409),(26,101,-1.58247627185888),(26,102,1.80367442854091),(26,103,0.573107089449751),(26,104,2.62710959196753),(26,107,-0.143223364970855),(26,109,1.80577257606738),(26,112,0.141544846949675),(26,113,0.510208441419721),(26,117,0.063798944059572),(27,85,-1.15890224921415),(27,87,-0.76639606921598),(27,94,0.114604632709738),(27,100,1.21585741752373),(27,102,1.38731040375988),(27,103,0.340174565874203),(27,104,0.652592547379986),(27,105,-1.30892361217078),(27,108,-2.80368205816828),(27,110,0.865260780663472),(27,114,-1.96963408307138),(28,87,1.10074159978027),(28,88,0.961516159550768),(28,97,0.317773979918821),(28,99,0.558091982787561),(28,104,1.50115970336009),(28,113,0.950651570177312),(28,114,-0.595332193975646),(29,88,-1.0825220496231),(29,91,-0.993133335367901),(29,102,0.558679464094974),(29,105,-0.24557481612598),(29,116,-2.127780999176),(30,95,0.891170995208594),(30,96,-0.955359050263985),(30,99,-2.87867366557817),(30,101,-0.328806421094394),(30,104,-1.56437879573962),(30,109,0.502800073244423),(30,110,1.27509384441664),(30,114,-2.55622272408216),(30,118,1.35982085634938),(31,85,-2.02080599383526),(31,92,-0.663365581225013),(31,94,-2.28672902615436),(31,96,-1.45539719840083),(31,99,1.62434766685995),(31,103,-2.58920560319834),(31,107,-2.10588396862697),(31,108,0.985488448744163),(31,109,2.06597338785974),(31,111,-0.427861873226112),(31,112,-0.969649342326121),(31,117,1.71721549119541),(32,86,-0.295113986632893),(32,87,0.664853358561968),(32,89,2.24674214911344),(32,92,-2.48661763359478),(32,98,1.53627124851222),(32,99,-1.17197180089724),(32,104,0.0862453077791682),(32,106,-0.101001007110813),(32,109,-1.27331614123966),(32,116,1.83299508651997),(32,118,1.73931089205603),(33,96,1.60257271034883),(33,98,1.02225562303537),(33,108,1.52553636280404),(33,110,-1.9158299508652),(33,111,2.13818781090732),(33,114,1.82440412610248),(34,85,2.20128482924894),(34,90,1.41225928525651),(34,99,0.340968047120579),(34,104,-2.46214178899503),(34,109,-0.422299874874111),(35,86,-0.416348765526292),(35,87,0.720824304940947),(35,97,1.00993377483444),(35,98,2.06721701712088),(35,100,-1.97084719382305),(35,104,-0.0741142002624592),(35,107,1.13499862666707),(35,109,-1.80080568865017),(35,110,-1.44920957060457),(35,112,-1.53134250923185),(36,85,-2.16370128482925),(36,87,-0.733787041840877),(36,90,-3.27410199285867),(36,91,-0.399410992767113),(36,104,2.19946897793512),(36,107,-1.8063600573748),(36,109,-0.574892422254097),(36,112,1.88787499618519),(36,115,-1.19731742301706),(36,117,0.121570482497635),(36,118,-0.610202337717826),(37,85,2.17937253944517),(37,86,-1.394466994232),(37,87,-0.383770256660665),(37,91,1.87559892574847),(37,99,1.99818414868618),(37,105,-0.621501815851314),(37,111,-1.60289315469832),(37,112,1.26663258766442),(37,118,2.14648884548479),(38,87,-0.340693380535295),(38,90,-1.7481536301767),(38,103,-1.72899563585315),(38,105,0.451948606830042),(38,106,1.72040467543565),(38,111,-1.4808267464217),(38,115,1.76665547654653),(39,87,-1.16449476607562),(39,89,-0.421231727042451),(39,91,0.68244727927488),(39,94,-2.40370647297586),(39,97,1.03407391582995),(39,98,-0.346888637958922),(39,107,-2.33038575395978),(39,108,-0.934781945249794),(39,109,2.04647968993194),(39,111,1.84282967619861),(39,113,-0.143604846339305),(39,116,0.596087527085177),(39,118,-2.82436597796564),(40,88,-0.0960112308114871),(40,92,-0.456534012878811),(40,99,2.03785821100497),(40,104,0.359340189825129),(40,110,-1.95723593859676),(40,116,-0.426023133030183),(40,118,2.16879787591174),(41,88,-2.13789788506729),(41,93,2.26189458906827),(41,96,-1.13020722067934),(41,97,1.00358592486343),(41,100,0.169454023865474),(41,101,1.70175786614582),(41,104,2.95667897579882),(41,105,1.60418256172369),(41,106,-2.18711661122471),(41,107,1.15260780663472),(41,109,0.775864436780908),(41,110,0.34247871333964),(41,111,0.334429456465346),(41,112,-1.38301492355113),(42,85,2.92632068849757),(42,86,-1.82000183111057),(42,87,-0.941908017212439),(42,99,1.62660603656117),(42,100,-2.37271492660298),(42,103,1.3883632923368),(42,109,-0.657795953245643),(42,113,-0.200628681295206),(43,85,1.77097384563738),(43,88,0.259788811914426),(43,89,0.597079378643147),(43,93,-0.417004913480026),(43,97,-2.26310007019257),(43,98,-0.249603259376812),(43,101,-0.160481582079531),(43,102,0.0585345011749625),(43,103,-1.74765007477035),(43,105,-1.58082064271981),(43,110,-1.60510574663533),(43,112,-0.149838251899777),(43,114,-0.543595690786462),(43,116,1.57856990264595),(44,89,2.64588610492264),(44,98,2.05864131595813),(44,99,1.65381328775903),(45,87,2.67736594744713),(45,88,2.28104495376446),(45,90,0.926221503341777),(45,91,-0.285256508072146),(45,95,1.56285287026582),(45,98,1.58357493820002),(45,108,-1.86234626300851),(45,109,0.109973448896756),(45,112,-1.34145634327219),(45,115,-0.248382518997772),(46,85,-1.06054109317301),(46,89,0.268631550035096),(46,91,0.292931913205359),(46,94,-1.9362315744499),(46,97,1.76767784661397),(46,100,-1.04027680288095),(46,101,1.04039124729148),(46,108,-1.38546403393658),(46,112,1.08780938138981),(47,86,1.29035309915464),(47,91,2.57086397900327),(47,92,-2.05322428052614),(47,94,-2.37636951811274),(47,95,-2.45131534775842),(47,100,-0.717017120883816),(47,101,1.99854274117252),(47,104,-0.097964415417951),(47,105,-0.330111087374493),(47,108,2.69005401776177),(47,112,1.85581530198065),(47,114,-0.0574510940885647),(47,118,-0.993240150151067),(48,86,1.54542680135502),(48,91,1.90185247352519),(48,98,1.97903378398999),(48,99,0.766319772942289),(48,100,1.20519119846187),(48,103,1.64242988372448),(48,105,-0.667149876400037),(48,106,-2.7552186651204),(48,111,-0.321451460310678),(48,115,-1.20867030854213),(49,87,1.40227210303049),(49,89,0.456656086916715),(49,93,0.303697317423017),(49,94,-0.348445081942198),(49,95,1.69437238685263),(49,102,2.51944792016358),(49,113,2.21606341746269),(49,114,1.65872676778466),(50,89,2.43250068666646),(50,105,2.46413312173833),(50,107,0.533494064149907),(51,87,-0.659901730399487),(51,92,1.24388866847743),(51,97,-1.4477752006592),(51,98,0.319948423718986),(51,103,1.09515671254616),(51,106,1.18704794457839),(51,112,2.01720480971709),(51,118,1.05072939237648),(52,89,1.7605822931608),(52,97,-0.559968871120335),(52,106,-2.52966399121067),(52,110,-0.459608752708518),(52,111,-1.1628772850734),(52,113,-1.25780510879849),(52,114,0.858424634540849),(52,118,-0.483291116061892),(53,88,2.03267006439405),(53,90,-0.447225867488632),(53,92,-0.0338373973815119),(53,94,-0.809114352855007),(53,104,-0.950613422040468),(53,105,3.05000457777642),(53,109,-2.16522721030305),(54,85,0.731727042451247),(54,91,1.06406598101749),(54,94,1.51797540208136),(54,96,0.581453901791437),(54,111,-0.65256202887051),(54,112,0.761803033539842),(54,113,-1.73567918942839),(54,118,-0.26029236732078),(55,87,-1.64912869655446),(55,95,-2.65518662068545),(55,107,-2.5724051637318),(55,110,-1.34043397320475),(55,117,-0.224219489120151),(56,107,0.706534012878811),(56,111,-1.6181829279458),(56,113,0.660664693136387),(56,114,-2.02782525101474),(57,87,1.7012695699942),(57,90,0.984862819299905),(57,91,0.598696859645375),(57,92,-1.42014831995605),(57,93,0.0383159886471145),(57,94,1.60441145054476),(57,95,2.48686178167058),(57,96,-3.21704763939329),(57,100,-2.00061799981689),(57,102,1.61893063142796),(57,103,1.89199499496445),(57,115,-0.678174687948241),(58,86,-1.05218665120396),(58,87,-2.04461043122654),(58,89,1.46345408490249),(58,90,-1.9731742301706),(58,95,0.0899380474257638),(58,96,-0.377437665944395),(58,101,1.5205999938963),(58,103,0.631954405346843),(58,109,2.50070192571795),(58,110,-1.71059297463912),(58,113,-0.617954039124729),(58,114,0.57052827539903),(58,115,1.53338724936674),(58,118,0.182042909024323),(59,85,-1.74845118564409),(59,86,-1.47279274880215),(59,90,2.55520798364208),(59,91,2.57942442091128),(59,93,-0.381893368327891),(59,97,2.62894833216346),(59,98,1.78225806451613),(59,100,1.47996459852901),(59,102,-0.687398907437361),(59,112,-2.5648747215186),(59,114,-1.07789086581011),(60,85,-0.149449140903958),(60,87,2.15958128604999),(60,90,3.09643848994415),(60,91,-1.81882686849574),(60,96,0.122760704367199),(60,100,1.48096407971435),(60,101,-3.04611346781823),(60,105,-0.777710806604205),(60,107,0.565401165807062),(60,109,2.05729850154118),(60,110,-2.20936460463271),(60,114,-0.765274513992737),(61,89,0.611102633747368),(61,94,-0.181333353679006),(61,96,0.414426099429304),(61,98,1.82859279152806),(61,100,1.18625446333201),(61,102,-0.212317270424513),(61,103,-0.913296914578692),(61,114,-0.736472670674764),(61,115,1.15794091616565),(62,93,-2.68816949980163),(62,95,-2.72370830408643),(62,107,-2.04748680074465),(62,109,1.52287362285226),(62,110,-0.0551850947599719),(62,111,-0.191335795159764),(63,87,0.299874874111148),(63,90,-0.192945646534623),(63,93,2.7460631122776),(63,97,-1.60150456251717),(63,100,-1.98047578356273),(63,103,-0.246589556566057),(63,104,1.1468550675985),(63,108,1.35401470992157),(63,111,-2.14630573442793),(63,114,-1.35705130161443),(63,117,0.764610736411634),(64,87,-1.39423810541093),(64,94,-1.60036011841182),(64,99,-1.33657338175604),(64,110,0.254646443067721),(64,112,1.55123294778283),(64,116,-0.697920163579211),(65,87,0.310708944975127),(65,88,-0.245551927243873),(65,90,-1.64178136539811),(65,97,-1.73241370891446),(65,99,1.53898739585559),(65,107,-1.65413373210852),(65,110,1.8064821314127),(65,111,0.00599688711203345),(65,114,1.46932889797662),(65,116,2.08597827082125),(65,117,1.33920560319834),(66,85,-0.226538895840327),(66,102,0.728316599017304),(66,105,-0.15431684316538),(66,108,2.04834131900998),(66,111,3.02694784386731),(66,115,-0.579195532090213),(66,118,2.53927732169561),(67,86,-0.977462080751976),(67,90,2.08836634418775),(67,92,-1.40955839716788),(67,104,-1.53543198950163),(67,109,1.2577288125248),(67,111,-0.892818994720298),(68,87,1.36936552018799),(68,88,0.759392071291238),(68,90,1.82401501510666),(68,93,-0.337000640888699),(68,95,0.683194982757042),(68,96,-0.693319498275704),(68,97,-1.61455122531816),(68,103,0.495284890285958),(68,107,1.95280312509537),(68,112,-2.3225043488876),(68,114,-1.20925016022217),(69,87,0.95699942014832),(69,88,-1.92756431775872),(69,92,-0.259338663899655),(69,94,0.220007934812464),(69,95,1.63861507003998),(69,97,-0.115100558488723),(69,108,0.269920957060457),(69,113,0.620899075289163),(69,114,1.02381969664602),(69,118,2.5164647358623),(70,85,0.958128604998932),(70,86,-2.63136692403943),(70,87,1.47300637836848),(70,90,2.48751792962432),(70,96,-0.00350962858973968),(70,97,-2.21359141819514),(70,99,2.94772179326762),(70,105,-0.879032258064516),(70,107,0.750511185033723),(70,109,-0.59949797051912),(70,110,-2.47657704397717),(70,111,-1.23033845027009),(71,85,2.45208594012268),(71,93,-0.556184575945311),(71,96,-0.831385235145116),(71,100,-0.0394451734977264),(71,104,1.18343150120548),(71,106,-0.743659779656362),(71,111,2.77264473403119),(71,113,2.51647999511704),(72,94,1.26674703207495),(72,96,-2.71508682515946),(72,99,1.69196905423139),(72,110,0.0777001251258888),(72,112,1.04256569109165),(72,114,0.697576830347606),(72,115,-2.16040528580584),(72,116,0.718008972441786),(73,88,-0.232047486800745),(73,94,2.00512710959197),(73,99,-0.311136204107791),(73,100,-2.03894161809137),(73,106,0.0778221991637928),(73,110,0.00862910855433822),(73,115,-1.8339487899411),(74,90,0.497543259987182),(74,94,-0.730185857722709),(74,99,-1.88790551469466),(74,102,-0.360957670827357),(74,106,-1.04660939359722),(74,107,-0.315073091830195),(74,110,-1.47918637653737),(74,113,-0.777191991943114),(74,116,-0.500717184972686),(75,85,2.37846003601184),(75,86,0.253303628650777),(75,93,0.106997894222846),(75,98,1.14123203222755),(75,103,1.00574510940886),(75,105,-1.85789056062502),(75,111,0.512070070497757),(75,117,-0.725363933225501),(76,86,-0.379589220862453),(76,89,2.6348689230018),(76,92,1.86631366924039),(76,94,1.47778252510147),(76,99,-1.89635151219214),(76,101,1.54225287636952),(76,103,0.555742057557909),(76,106,-1.68466750083926),(76,110,-0.551149021881771),(76,113,-1.53042695394757),(77,88,-0.644367809076205),(77,91,1.87624744407483),(77,93,0.536965544602802),(77,98,0.0988494521927549),(77,101,-0.831965086825159),(77,102,2.25185399945067),(77,103,-2.05992309335612),(77,104,0.423749504074221),(77,105,0.222922452467421),(77,109,0.472685934018983),(78,88,-0.549577318643757),(78,93,0.0737479781487471),(78,94,0.155987731559191),(78,101,0.529374065370647),(78,104,-0.665761284218879),(78,110,1.62636188848537),(78,114,-1.66296121097446),(78,116,0.569505905331584),(78,117,0.247535630359813),(78,118,2.07696768089846),(79,87,0.682164983062227),(79,92,-0.414746543778802),(79,94,-0.0314035462508011),(79,107,0.0136036255989258),(79,108,-1.61838129825739),(79,114,0.394077883236183),(79,118,-0.766228217413861),(80,87,0.273827326273385),(80,88,-2.5889690847499),(80,91,-0.194906460768456),(80,99,0.556451612903226),(80,101,0.42360454115421),(80,107,0.43595690786462),(80,113,0.243079927976318),(81,85,1.60191656239509),(81,86,-0.456648457289346),(81,90,-3.18340098269601),(81,93,-2.12851344340342),(81,96,-1.22508926664022),(81,97,-0.489150669881283),(81,106,-0.8800698873867),(81,107,-1.1115375225074),(81,110,2.29253517258217),(81,115,-0.0562379833368938),(82,86,0.294259468367565),(82,92,0.19365520187994),(82,110,0.687582018494217),(82,112,-1.46066164128544),(83,87,-0.97460860011597),(83,91,2.22903378398999),(83,93,0.0527665028839991),(83,101,-2.54187139500107),(83,103,0.321825312051759),(83,105,0.819765312662129),(83,108,-1.80939664906766),(84,85,-0.401806695760979),(84,86,-0.839030121768853),(84,89,1.804193243202),(84,95,2.53958250679037),(84,99,-0.895390179143651),(84,104,0.427373577074496),(84,111,-1.98660237434004),(84,113,-1.45771660512101),(84,114,0.932889797662282)]
orgname='BHNEAT_5_8'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()