edge = [(0,85,0.526436658833583),(0,89,0.501029999694815),(0,90,1.4939954832606),(0,93,-2.23413800469985),(0,98,0.26418347727897),(0,101,-1.50856044190802),(0,105,2.14085818048647),(0,108,-2.59994811853389),(0,113,0.432210760826441),(0,114,0.963667714468825),(0,117,0.508934293649098),(0,118,1.24544511246071),(1,86,1.31742301705985),(1,92,-1.3240302743614),(1,98,0.363971373638112),(1,102,0.692228461561937),(1,104,1.67572557756279),(1,107,0.592608417004913),(1,108,-0.608462782677694),(1,109,-2.68629261146886),(1,113,-2.30831324198126),(2,87,-1.68924527726066),(2,88,-0.417836542863247),(2,100,1.2158650471511),(2,106,-3.67602313303018),(2,108,-0.740714743491928),(2,110,0.262756736960967),(2,113,-0.673322244941557),(2,118,0.450056459242531),(3,89,-1.4071169164098),(3,92,1.80014954069643),(3,97,-0.2702795495468),(3,99,-1.39139225440229),(3,101,-2.40331736198004),(3,103,0.894894253364666),(3,105,1.27303384502701),(3,108,1.1123004852443),(3,109,-2.00272377697073),(3,111,0.619632557145909),(3,112,-2.67896816919462),(3,116,0.669530320139164),(4,90,2.08857997375408),(4,91,2.4568315683462),(4,97,-2.86135441145054),(4,99,0.81015961180456),(4,101,-0.352748191778314),(4,108,-1.56899472029786),(4,113,-3.55011902218696),(4,118,0.337137974181341),(5,86,1.09574419385357),(5,87,0.292809839167455),(5,89,1.4164708395642),(5,92,-0.288109988708152),(5,93,-0.312601092562639),(5,99,-0.874294259468367),(5,104,-0.662587359233375),(5,114,1.32061220130009),(5,118,0.902844325083163),(6,89,0.628749961851863),(6,92,-1.24607074190497),(6,94,-1.9864879299295),(6,100,-2.05413983581042),(6,101,2.67329172643208),(6,103,-1.84630115665151),(6,107,2.20434430982391),(6,110,-0.183118686483352),(6,113,-2.31730094302194),(7,85,0.887173070467238),(7,86,1.68208868678854),(7,90,-0.73940244758446),(7,95,0.0835901974547564),(7,99,0.282776879177221),(7,100,-0.10033722952971),(7,104,2.89068269905698),(7,106,3.12074648274178),(7,108,-1.99653614917447),(7,112,-1.19104586931974),(7,116,1.14135410626545),(8,92,2.21402630695517),(8,93,-2.77091280861843),(8,95,0.745040742210151),(8,99,-1.50970488601337),(8,106,0.624149296548357),(8,107,-0.0493026520584735),(8,115,-1.69129001739555),(8,116,1.25830866420484),(8,118,-2.4511703848384),(9,85,-3.23760948515275),(9,87,-1.0024109622486),(9,98,-1.51012451551866),(9,101,-1.1347468489639),(9,103,-0.568330942716758),(9,105,0.976790673543504),(9,106,1.00547807245094),(9,113,-0.0358745078890347),(10,89,0.520706808679464),(10,96,3.50986510818812),(10,106,0.401402325510422),(10,108,-0.239692373424482),(10,109,0.156964323862422),(10,111,-1.04435102389599),(10,112,-1.18961149937437),(10,114,-0.774529251991333),(10,115,3.372859889523),(10,116,-0.799508651997436),(10,117,1.27391125217444),(11,89,1.33977782525101),(11,97,0.220625934629353),(11,105,2.30294961394086),(11,112,-1.23452711569567),(11,115,-0.0285729544969023),(12,92,1.55336161381878),(12,93,1.4252067629017),(12,94,-3.0607394634846),(12,97,0.472724082155827),(12,98,0.177289651173437),(12,99,1.47674489577929),(12,108,2.16347239600818),(12,116,-2.0879848628193),(13,86,-0.0367290261543625),(13,87,2.97527237769707),(13,90,0.60650959807123),(13,99,0.213721121860408),(13,102,1.33167516098514),(13,104,-3.0429471724601),(13,113,-2.19489883114109),(13,116,-3.113948484756),(13,118,-2.56069368572039),(14,90,-2.32573168126469),(14,93,1.79432813501389),(14,95,1.60592211676382),(14,102,0.220084231086154),(14,104,0.733092745750298),(14,106,2.69029816583758),(14,109,2.09224982451857),(14,110,1.32765434736167),(14,111,0.145962401196326),(15,85,-3.94772942289499),(15,92,-1.07332834864345),(15,99,1.50694296090579),(15,101,-2.98867763298441),(15,104,-1.83564256721702),(15,108,1.2958006530961),(15,117,0.850611896114994),(16,86,-1.87643055513169),(16,87,1.42341380046999),(16,88,-2.74321726126896),(16,90,0.196928312021241),(16,91,-2.47589037751396),(16,95,0.212591937009797),(16,97,-4.24490340891751),(16,98,-2.19579912717063),(16,99,-0.654705954161199),(16,101,0.445272682882168),(16,108,0.820551164281136),(16,110,-3.02925962096011),(17,89,-2.0434888760033),(17,96,-1.55813013092441),(17,99,-0.39615314188055),(17,101,0.700811792352062),(17,106,0.525597399822993),(17,107,2.45575579088717),(17,109,-1.5992309335612),(18,90,0.132190923795282),(18,91,-0.688726462599566),(18,93,0.923917355876339),(18,99,3.21409497360149),(18,102,-3.22334208197272),(18,103,-1.93469038972137),(18,104,-1.28475295266579),(18,110,0.317896053956725),(18,111,3.56435590685751),(18,116,-1.57029175695059),(18,117,0.509125034333323),(18,118,1.06237220374157),(19,87,-1.72623371074557),(19,89,1.32628864406262),(19,93,2.93065431684317),(19,95,1.43272957548753),(19,101,4.05398724326304),(19,105,2.48591570787683),(19,115,1.4907452620014),(20,88,-2.0480666524247),(20,101,-1.18533127842036),(20,103,1.38566240424818),(20,104,-2.31113620410779),(20,105,0.652378917813654),(20,106,0.475226599932859),(20,111,-0.0343714712973417),(20,116,0.155140842921232),(21,86,2.93618579668569),(21,87,-2.2247001556444),(21,94,-2.42662587359233),(21,96,1.22272408215583),(21,101,2.12762840662862),(21,102,3.16753898739586),(21,105,1.23780785546434),(21,107,2.73501541184729),(21,108,-2.8181478316599),(22,86,0.572176274910733),(22,88,2.09129612109745),(22,91,1.88101596118046),(22,92,1.31857509079257),(22,93,3.58494827112644),(22,98,1.16498306222724),(22,106,-0.345233008819849),(22,115,-0.625431073946348),(22,117,-1.46877956480606),(23,85,-0.430639057588427),(23,86,-2.28733939634388),(23,88,0.0264595477156896),(23,90,1.79047517319254),(23,97,-0.709044160283212),(23,104,-0.295968504898221),(23,112,-1.15661336100345),(23,114,-0.574114200262459),(23,115,-0.173009430219428),(23,116,-2.49864192632832),(24,89,-1.72922452467421),(24,90,-2.10766930143132),(24,91,-1.81678212836085),(24,101,-2.91895046845912),(24,107,-1.25299081392865),(24,108,0.916539506210517),(24,110,-3.01501510666219),(24,112,1.71732230597858),(25,90,2.20745719779046),(25,92,0.490958891567736),(25,94,1.0286721396527),(25,98,1.14889980773339),(25,105,-1.16685995056001),(25,108,-1.73505355998413),(25,109,0.797540208136235),(25,115,0.963988158818323),(26,85,0.937063203833125),(26,87,-1.34970397045808),(26,89,2.05477309488205),(26,95,2.02385784478286),(26,98,1.14700766014588),(26,100,0.428098391674551),(26,101,0.374469740897855),(26,102,-2.1550492873928),(26,103,-1.38328196050905),(26,104,1.62219611194189),(26,107,2.99060792870876),(26,109,-0.855914487136448),(26,112,-1.11066774498733),(26,113,-0.108554338206122),(26,117,-0.00978881191442604),(27,85,-0.969191564683981),(27,87,-0.423963133640553),(27,94,3.32950834681234),(27,100,2.18008209479049),(27,102,-0.782609027375103),(27,103,0.972586748863185),(27,104,-2.21028778954436),(27,105,2.8753700369274),(27,108,-2.11912900173956),(27,110,-0.0400250251777704),(27,114,-1.77031006805628),(28,87,-0.812540055543687),(28,88,-0.196470534379101),(28,97,2.66586809900204),(28,99,-1.42110965300455),(28,104,-0.468581194494461),(28,113,0.457747123630482),(28,114,-0.517494735557115),(29,88,-1.41654713583789),(29,91,2.59639271217994),(29,102,-2.70899075289163),(29,105,0.553170873134556),(29,116,-0.61391033661916),(30,95,-1.28596606341746),(30,96,1.89889217810602),(30,99,-0.505249183629871),(30,101,-0.327585680715354),(30,104,-3.10529648731956),(30,109,-0.403118991668447),(30,110,1.23423718985565),(30,114,0.95234534745323),(30,118,2.30272835474715),(31,85,-0.157605212561418),(31,92,-1.32872249519333),(31,94,-1.07792901394696),(31,96,2.71495712149419),(31,99,-1.36402478102969),(31,103,-0.74954222235786),(31,107,1.53881954405347),(31,108,-0.246879482406079),(31,109,2.94750816370128),(31,111,-1.59448530533769),(31,112,-0.468077639088107),(31,117,-1.53730124820704),(32,86,-1.37565996276742),(32,87,2.54328287606433),(32,89,2.78516495254372),(32,92,-1.55599383526109),(32,98,0.517563402203436),(32,99,1.44242683187353),(32,104,0.858462782677694),(32,106,1.66750846888638),(32,109,-0.693136387218848),(32,116,-2.50212866603595),(32,118,1.38933225501267),(33,96,-1.54322183904538),(33,98,1.95336771752068),(33,108,-2.33027130954924),(33,110,-2.43441572313608),(33,111,0.391903439436018),(33,114,-1.55375835444197),(34,85,-0.0911893063142797),(34,90,-1.42336802270577),(34,99,0.807252723776971),(34,104,-1.58996093630787),(34,109,1.37398907437361),(35,86,1.57341990417188),(35,87,2.19924771874142),(35,97,-2.09223456526383),(35,98,-0.820490127262185),(35,100,-1.64088869899594),(35,104,0.0478072450941496),(35,107,-2.35574663533433),(35,109,1.1814325388348),(35,110,-1.27809228797266),(35,112,1.17133854182562),(36,85,-2.09484389782403),(36,87,-2.556260872219),(36,90,-1.17305520798364),(36,91,4.05579546494949),(36,104,-1.28566850795007),(36,107,-2.12506485183264),(36,109,2.26203192236091),(36,112,-0.415723136082034),(36,115,0.997230445265053),(36,117,1.55090487380596),(36,118,1.29868465224158),(37,85,0.550653096102786),(37,86,1.54740287484359),(37,87,-1.7337565233314),(37,91,-1.95829645680105),(37,99,-3.48278756065554),(37,105,2.77243873409223),(37,111,-2.63964506973479),(37,112,1.02350688192389),(37,118,0.611651966917936),(38,87,3.36903744621113),(38,90,2.82901242103336),(38,103,1.9093829157384),(38,105,1.47832422864467),(38,106,2.3772392956328),(38,111,-0.390003662221137),(38,115,0.963057344279306),(39,87,1.61791589098788),(39,89,-0.48551133762627),(39,91,0.717604602191229),(39,94,1.27655873287149),(39,97,0.445066682943205),(39,98,-1.33084353160192),(39,107,-0.509941404461806),(39,108,2.13782921842097),(39,109,2.34769737846004),(39,111,-1.12733085116123),(39,113,-0.559114352855007),(39,116,-1.71446882534257),(39,118,-0.604663228247932),(40,88,0.355487228003784),(40,92,-1.86029389324625),(40,99,-2.63641010773034),(40,104,-1.36606189153722),(40,110,0.702131717886898),(40,116,-3.13698995941038),(40,118,1.84156315805536),(41,88,-0.793443098239082),(41,93,1.52929013946959),(41,96,-1.71040223395489),(41,97,-0.0909451582384716),(41,100,1.17095706045717),(41,101,-0.405339213232826),(41,104,2.39239173558763),(41,105,2.5982238227485),(41,106,-2.06781212805567),(41,107,-1.11095004119999),(41,109,-1.01628162480544),(41,110,0.830233161412397),(41,111,-1.50026703695791),(41,112,-0.980849635303812),(42,85,-0.655583361308634),(42,86,-0.867595446638386),(42,87,-0.244254890591144),(42,99,1.21593371379742),(42,100,1.05092776268807),(42,103,1.96909237952818),(42,109,-1.66597491378521),(42,113,1.36733603930784),(43,85,0.920537430951872),(43,88,-1.4318521683401),(43,89,0.676267281105991),(43,93,0.365565965758232),(43,97,1.97769859920041),(43,98,-1.65895565660573),(43,101,1.38156529435102),(43,102,-0.810327463606677),(43,103,0.867221594897305),(43,105,2.60734885708182),(43,110,-1.26963103122044),(43,112,-2.00722525711844),(43,114,-2.46874141666921),(43,116,-2.34145634327219),(44,89,2.54768517105625),(44,98,1.58185064241462),(44,99,-0.915540025025178),(45,87,0.674932096316416),(45,88,1.72964415417951),(45,90,-0.414197210608234),(45,91,-0.768173772392956),(45,95,-0.140850550859096),(45,98,-2.89255958738975),(45,108,-3.42718283639027),(45,109,3.06578264717551),(45,112,1.69780571916868),(45,115,-1.21324045533616),(46,85,-1.01777703176977),(46,89,0.912945951719718),(46,91,-1.03996398815882),(46,94,-1.87694936979278),(46,97,3.36701559495834),(46,100,1.81273842585528),(46,101,-0.40317239906003),(46,108,-1.23390148625141),(46,112,-0.717024750511185),(47,86,1.60503707998901),(47,91,2.20258186590167),(47,92,0.422139652699362),(47,94,-1.93808557390057),(47,95,-2.20141453291421),(47,100,1.40749076815088),(47,101,-0.21828363902707),(47,104,2.2727896969512),(47,105,-1.25012970366527),(47,108,-0.497260963774529),(47,112,0.292809839167455),(47,114,0.185743278298288),(47,118,-0.923085726493118),(48,86,1.63864558854946),(48,91,-2.41640217291787),(48,98,-0.366634113589892),(48,99,1.84843745231483),(48,100,0.983550523392437),(48,103,2.61056093020417),(48,105,-0.957068086794641),(48,106,-3.45136875515),(48,111,2.3212988677633),(48,115,1.50055696279794),(49,87,2.42770165105136),(49,89,-2.143040253914),(49,93,0.163090914639729),(49,94,0.127262184514908),(49,95,-1.48157444990387),(49,102,-1.71169164098025),(49,113,2.45513016144292),(49,114,4.20603045747246),(50,89,2.31750694296091),(50,105,0.159703360087893),(50,107,1.14485610522782),(51,87,1.50836970122379),(51,92,2.60965300454726),(51,97,2.11479537339396),(51,98,2.5898541215247),(51,103,-1.48795281838435),(51,106,-1.9463484603412),(51,112,-1.96230201116977),(51,118,-2.72617267372662),(52,89,1.49133274330882),(52,97,-1.99426252021851),(52,106,2.54364146855068),(52,110,0.685827204199347),(52,111,1.30263679921873),(52,113,2.43652912991729),(52,114,-2.94174016541032),(52,118,2.84234900967437),(53,88,-0.204382457960753),(53,90,-2.49351481673635),(53,92,-1.01799829096347),(53,94,2.92535172582171),(53,104,-0.55993072298349),(53,105,0.368991668446913),(53,109,-2.11578722495193),(54,85,-1.14394054994354),(54,91,1.81764427625355),(54,94,2.77984710226753),(54,96,-0.0619907223731193),(54,111,0.891712698751793),(54,112,-0.812540055543687),(54,113,0.433774834437086),(54,118,2.08354441969054),(55,87,-2.2991729483932),(55,95,1.07493820001831),(55,107,0.733283486434523),(55,110,-3.06180761131626),(55,117,-2.79235206152531),(56,107,-0.959486678670614),(56,111,-1.91623432111576),(56,113,-2.48564104129154),(56,114,0.374317148350475),(57,87,-0.272591326639607),(57,90,1.61558885464034),(57,91,-0.0113681447798091),(57,92,1.3040711691641),(57,93,0.654667806024354),(57,94,-0.0962401196325571),(57,95,0.0501495406964324),(57,96,2.40978728598895),(57,100,0.645481734672079),(57,102,2.22277748954741),(57,103,2.75616473891415),(57,115,1.49658955656606),(58,86,1.30436872463149),(58,87,-1.56621753593554),(58,89,-0.179853205969421),(58,90,-2.51998962370678),(58,95,-2.40044099246193),(58,96,-1.0898541215247),(58,101,-2.47350993377483),(58,103,-0.795640430921354),(58,109,-1.40247810296945),(58,110,2.27970213934751),(58,113,-0.774689474166082),(58,114,-3.11082796716208),(58,115,-0.701300088503677),(58,118,-0.999557481612598),(59,85,1.69979705191198),(59,86,-2.58739738151189),(59,90,-0.0504013183996094),(59,91,2.40627002777184),(59,93,-1.82067323831904),(59,97,3.33920560319834),(59,98,1.42276528214362),(59,100,-3.7955793939024),(59,102,1.55494857631153),(59,112,0.100138859218116),(59,114,-3.69330423902097),(60,85,1.85873744926298),(60,87,0.383976256599628),(60,90,1.78164769432661),(60,91,-0.294656208990753),(60,96,-1.42272713400678),(60,100,2.49676503799554),(60,101,-2.11625263222144),(60,105,-0.26745658742027),(60,107,3.93720053712577),(60,109,0.192503128147221),(60,110,-0.313066499832148),(60,114,-1.59494308297983),(61,89,-1.11799981688894),(61,94,-1.38826410718101),(61,96,-2.26139866328929),(61,98,-1.50131992553484),(61,100,1.54534287545396),(61,102,0.696661275063326),(61,103,0.715811639759514),(61,114,2.4052476577044),(61,115,-2.36014893032624),(62,93,0.381984923856319),(62,95,0.855624561296426),(62,107,-1.53416547135838),(62,109,-1.36967833491012),(62,110,-0.478606524857326),(62,111,1.48778496658223),(63,87,-1.29576250495926),(63,90,-0.609653004547258),(63,93,-1.23428296761986),(63,97,-1.32424390392773),(63,100,3.12739188818018),(63,103,-2.55620746482742),(63,104,-0.478598895229957),(63,108,-0.35910367137669),(63,111,-2.14694662312693),(63,114,2.66447187719352),(63,117,-1.75012970366527),(64,87,2.84058656575213),(64,94,0.454474013489181),(64,99,-2.94336527603992),(64,110,-1.49244666890469),(64,112,0.761482589190344),(64,116,-0.240081484420301),(65,87,1.80719931638539),(65,88,0.621517075106052),(65,90,-3.29485457930235),(65,97,-1.68040253913999),(65,99,-1.76143681142613),(65,107,0.370120853297525),(65,110,1.78456221198157),(65,111,-1.16118350779748),(65,114,0.96256141850032),(65,116,1.47452467421491),(65,117,3.16980498672445),(66,85,-0.318758201849421),(66,102,1.00953703421125),(66,105,0.246429334391308),(66,108,1.99584948271126),(66,111,1.87684255500961),(66,115,-1.90490432447279),(66,118,-0.150013733329264),(67,86,0.869403668324839),(67,90,3.38078707235939),(67,92,1.24925229651784),(67,104,0.55466628009888),(67,109,1.85058137760552),(67,111,0.0501037629322184),(68,87,0.281739249855037),(68,88,1.43907742545854),(68,90,0.0231711783196509),(68,93,-0.633266701254311),(68,95,-2.2072511978515),(68,96,-0.260246589556566),(68,97,-0.337809381389813),(68,103,1.29955442976165),(68,107,-2.01208532975249),(68,112,0.149311807611316),(68,114,-0.524231696523942),(69,87,1.61707663197729),(69,88,0.678655354472488),(69,92,1.61568803979614),(69,94,1.21047090060121),(69,95,1.81447798089541),(69,97,-2.11539048432875),(69,108,0.652699362163152),(69,113,-1.72171697134312),(69,114,2.03004547257912),(69,118,-0.0964156010620441),(70,85,-1.27809991760002),(70,86,0.644718771935179),(70,87,-2.13843195898312),(70,90,1.14201788384655),(70,96,0.398266548661763),(70,97,0.960402233954894),(70,99,0.544778283028657),(70,105,1.98848689230018),(70,107,0.803270058290353),(70,109,1.70438245796075),(70,110,-0.898083437604907),(70,111,-1.51026947843867),(71,85,-0.549172948393201),(71,93,-0.219069490646077),(71,96,-0.106044190801721),(71,100,0.170072023682363),(71,104,-1.94959868160039),(71,106,-0.793885616626484),(71,111,2.6217764824366),(71,113,-0.37793359172338),(72,94,1.90945921201209),(72,96,0.456610309152501),(72,99,-0.455694753868221),(72,110,0.0302133243812372),(72,112,2.45506912442396),(72,114,-0.677282021546068),(72,115,2.68158513138218),(72,116,-1.75176244392224),(73,88,2.22356334116642),(73,94,0.381542405468917),(73,99,1.2130344553972),(73,100,-0.27774895474105),(73,106,1.4371929074984),(73,110,-1.32724997711112),(73,115,1.07808923612171),(74,90,-0.393902401806696),(74,94,-1.34425641651662),(74,99,-1.21784112063967),(74,102,0.6876354258858),(74,106,1.36102633747368),(74,107,-0.180333872493667),(74,110,1.03901791436506),(74,113,-1.20059816278573),(74,116,0.544808801538133),(75,85,-1.14382610553301),(75,86,-1.24790185247353),(75,93,-0.0173268837549975),(75,98,0.793389690847499),(75,103,-0.853801080355235),(75,105,-0.694463942381054),(75,111,2.10593737601856),(75,117,-0.317789239173559),(76,86,-2.29802087466048),(76,89,2.14803765984069),(76,92,-0.86123996704001),(76,94,0.617084261604663),(76,99,0.994033631397442),(76,101,0.637379070406201),(76,103,-0.96393475142674),(76,106,1.24849696340831),(76,110,-0.485267189550462),(76,113,1.0544145023957),(77,88,0.951109347819453),(77,91,-0.212515640736106),(77,93,0.669347209082308),(77,98,-0.697149571214942),(77,101,-0.511566515091403),(77,102,1.86384166997284),(77,103,-2.59788811914426),(77,104,-0.0506225775933103),(77,105,-1.91007721182897),(77,109,-1.53474532303842),(78,88,-1.70307016205329),(78,93,2.77112643818476),(78,94,0.134357737968078),(78,101,-0.136120181890316),(78,104,-0.684011352885525),(78,110,-1.57441938535722),(78,114,-1.98477126377148),(78,116,-0.684835352641377),(78,117,-1.36053041169469),(78,118,0.10505996887112),(79,87,1.2971053193762),(79,92,-0.225951414532914),(79,94,0.690794091616565),(79,107,0.615779595324564),(79,108,0.327669606616413),(79,114,0.43717764824366),(79,118,-0.546273689992981),(80,87,0.779465620899075),(80,88,1.1020615253151),(80,91,-1.57089449751274),(80,99,-0.629337443159276),(80,101,1.040215765862),(80,107,2.57338175603503),(80,113,-1.11411633655812),(81,85,-2.75040437025056),(81,86,0.993758964812159),(81,90,-0.324427014984588),(81,93,0.18519394512772),(81,96,1.89217047639393),(81,97,-0.246719260231331),(81,106,-2.73208563493759),(81,107,-0.747528000732444),(81,110,0.376674703207495),(81,115,0.371051667836543),(82,86,-1.81821649830622),(82,92,1.82025360881375),(82,110,1.08943449201941),(82,112,1.60288552507096),(83,87,-1.53744621112705),(83,91,0.614581743827632),(83,93,-0.313722647785882),(83,101,-1.05749687185278),(83,103,-0.578821680349132),(83,105,-1.42094180120243),(83,108,-1.74301889095737),(84,85,1.34110538041322),(84,86,0.405285805841243),(84,89,0.406018250068667),(84,95,0.834215826899014),(84,99,-1.09801782280953),(84,104,0.942335276345103),(84,111,-0.137043366801965),(84,113,2.25211340678121),(84,114,0.710257271034883),(35,105,0.424283577990051)]
orgname='BHNEAT_7_3'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()