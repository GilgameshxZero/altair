edge = [(0,85,1.21478926969207),(0,89,1.35184789574877),(0,90,-1.41476180303354),(0,93,-1.8633838923307),(0,98,0.571581163975951),(0,101,-0.961638233588672),(0,105,-0.033661915952025),(0,108,-2.18001342814417),(0,113,5.40432447279275),(0,114,-0.850230414746544),(0,117,1.5515610217597),(0,118,4.49232459486679),(1,86,0.237678151799066),(1,92,2.07542649616993),(1,98,1.72185430463576),(1,102,-2.02566606646931),(1,104,0.316049684133427),(1,107,0.95852534562212),(1,108,-3.03071687978759),(1,109,0.871517075106052),(1,113,-0.725775933103427),(2,87,0.390026551103244),(2,88,0.10422070986053),(2,100,-2.19530320139164),(2,106,1.05113376262703),(2,108,1.67757194738609),(2,110,1.28994109927671),(2,113,2.01196325571459),(2,118,0.00302133243812372),(3,89,-2.27721488082522),(3,92,0.918774987029634),(3,97,0.236899929807428),(3,99,1.85262611774041),(3,101,0.567278054139836),(3,103,3.20873134556108),(3,105,2.76577043977172),(3,108,-1.3677632984405),(3,109,1.56079287087619),(3,111,-3.37890255439924),(3,112,1.61571092867824),(3,116,-1.24248481704154),(4,90,-0.114047669911801),(4,91,0.290459913937803),(4,97,-2.23296304208502),(4,99,-1.06558427686392),(4,101,0.806527909176916),(4,108,-1.62587359233375),(4,113,-0.556382946256905),(4,118,1.61777092806787),(5,86,-2.2229529709769),(5,87,-2.85351115451521),(5,89,2.41541795098727),(5,92,0.103213599047822),(5,93,-1.38670003357036),(5,99,-0.305520798364208),(5,104,1.76352732932524),(5,114,2.51289407025361),(5,118,0.417874691000092),(6,89,-1.62080751976074),(6,92,-2.67769402142399),(6,94,-1.66318247016816),(6,100,2.24066896572771),(6,101,-0.85247352519303),(6,103,-0.841975157933287),(6,107,1.42921231727042),(6,110,0.488021485030671),(6,113,2.05577257606739),(7,85,1.29772331919309),(7,86,1.14299447614978),(7,90,-0.613513595995972),(7,95,-1.25922421948912),(7,99,1.38673055207984),(7,100,1.41903439436018),(7,104,1.4329355754265),(7,106,0.645771660512101),(7,108,-0.511200292977691),(7,112,-1.43322550126652),(7,116,1.2137974181341),(8,92,-1.90778832361827),(8,93,-0.305246131778924),(8,95,-1.68582720419935),(8,99,-2.12735374004334),(8,106,-0.488662373729667),(8,107,-1.22722556230354),(8,115,2.84383678701132),(8,116,-0.538117618335521),(8,118,-2.41836298715171),(9,85,-0.870021668141728),(9,87,-1.92831202124088),(9,98,0.58455153050325),(9,101,1.8490096743675),(9,103,2.24272896511734),(9,105,1.59001434369945),(9,106,-0.558488723410749),(9,113,0.958113345744194),(10,89,-2.34275337992492),(10,96,2.48432874538408),(10,106,-2.20232245857112),(10,108,1.86780907620472),(10,111,-1.37348551896725),(10,112,-1.45298623615223),(10,114,0.953688161870174),(10,115,-3.18831446272164),(10,116,-1.12163151951659),(10,117,1.88119144260994),(11,89,1.49839777825251),(11,97,1.96014282662435),(11,105,1.04538102359081),(11,112,0.97849971007416),(11,115,0.259407330545976),(12,92,-0.947401348918119),(12,93,1.39289529099399),(12,94,-0.921430097354045),(12,97,-2.90975676747948),(12,98,1.34801782280953),(12,99,2.34542374950407),(12,108,-0.0459913937803278),(12,116,0.804940946684164),(13,86,-1.68111209448531),(13,87,-2.00416577654347),(13,90,-2.27149266029847),(13,99,1.40606402783288),(13,102,1.89046906949065),(13,104,1.21343119602039),(13,113,-0.620914334543901),(13,116,1.12587359233375),(13,118,-2.05122531815546),(14,90,1.30115665150914),(14,93,-0.86405529953917),(14,95,-2.3139896847438),(14,102,1.32718894009217),(14,104,1.01260414441359),(14,106,-3.6944029053621),(14,109,1.04483169042024),(14,110,1.75884273812067),(14,111,-0.0679342020935697),(15,85,1.97958311716056),(15,92,-1.77620777001251),(15,99,-3.32656331064791),(15,101,-0.171895504623554),(15,104,-3.18723105563524),(15,108,-1.59871211890011),(15,117,0.662556840723899),(16,86,-0.486159855952635),(16,87,1.26453444013794),(16,88,1.60567033906064),(16,90,1.52462843714713),(16,91,-2.76505325479904),(16,95,2.50949125644703),(16,97,-1.02923673207801),(16,98,-2.64557329020051),(16,99,-0.157948545793023),(16,101,0.438978240302743),(16,108,-1.36967070528275),(16,110,0.0747856074709311),(17,89,-1.42243720816675),(17,96,1.30843531601917),(17,99,-2.22264778588214),(17,101,-0.59012115848262),(17,106,-0.0964079714346751),(17,107,0.888058107242042),(17,109,0.828363902706992),(18,90,2.13408307138279),(18,91,2.14125492110965),(18,93,1.4775536362804),(18,99,1.4440595721305),(18,102,1.52703939939573),(18,103,1.3767967772454),(18,104,-0.185934018982513),(18,110,0.830988494521928),(18,111,-1.94135868404187),(18,116,-2.34466078676717),(18,117,1.94593646046327),(18,118,-0.493362224188971),(19,87,-1.44625690481277),(19,89,0.0807519760734886),(19,93,2.21327860347301),(19,95,1.80341502121036),(19,101,-0.486159855952635),(19,105,-2.31698049867245),(19,115,0.390331736198004),(20,88,2.30120242927335),(20,101,2.44384594256416),(20,103,0.661412396618549),(20,104,-2.32448805200354),(20,105,-1.56163212988678),(20,106,0.51936399426252),(20,111,-4.6683400982696),(20,116,-0.30596331675161),(21,86,0.856654560991241),(21,87,0.486831263161107),(21,94,-1.54200872829371),(21,96,-0.165410321359905),(21,101,3.13951536606952),(21,102,-0.000320444349497961),(21,105,-1.43321024201178),(21,107,2.87476729636525),(21,108,0.729895931882687),(22,86,-2.72794274727622),(22,88,-1.57116916409803),(22,91,1.73886837366863),(22,92,-1.6730399487289),(22,93,0.697744682149724),(22,98,-2.65608691671499),(22,106,-1.79062776573992),(22,115,2.00320444349498),(22,117,0.613422040467544),(23,85,0.722312082277901),(23,86,0.308694723349711),(23,88,0.729911191137425),(23,90,-1.83275856807154),(23,97,-0.788827173680837),(23,104,1.00801110873745),(23,112,-1.06769005401776),(23,114,2.61835077974792),(23,115,1.04330576494644),(23,116,-0.478469191564684),(24,89,-1.18401135288553),(24,90,-2.07426679280984),(24,91,-0.08714560380871),(24,101,-1.17864009521775),(24,107,-1.14760277108066),(24,108,0.694631794183172),(24,110,-1.40386669515061),(24,112,0.0695516830957975),(25,90,2.43372905667287),(25,92,1.00233466597491),(25,94,-0.429319132053591),(25,98,4.81814020203253),(25,105,1.91190832239753),(25,108,-0.684301278725547),(25,109,-2.38050477614673),(25,115,-1.11111789300211),(26,85,2.68324839014863),(26,87,1.28553117465743),(26,89,-0.283211767937254),(26,95,-2.02368236335337),(26,98,1.60039063692129),(26,100,0.740684224982452),(26,101,-0.674031800286874),(26,102,1.73325296792505),(26,103,0.0664235358745079),(26,104,0.929120761741997),(26,107,1.12459181493576),(26,109,0.726569414349803),(26,112,1.24858851893674),(26,113,-0.34766685995056),(26,117,-1.91853083895383),(27,85,-0.963393047883541),(27,87,-0.86703085421308),(27,94,2.36214789269692),(27,100,1.15215002899258),(27,102,0.235602893154698),(27,103,-1.47480697042756),(27,104,1.08359019745476),(27,105,-0.724600970488602),(27,108,-2.31437116611225),(27,110,-1.09105197302164),(27,114,1.51728873561815),(28,87,1.97929319132054),(28,88,-0.834681234168523),(28,97,-2.6532792138432),(28,99,-2.6649678029725),(28,104,2.04199346903897),(28,113,-0.371242408520768),(28,114,2.55880916776025),(29,88,2.99253822443312),(29,91,-0.717764824365978),(29,102,-2.57295449690237),(29,105,2.77091280861843),(29,116,2.030518509476),(30,95,2.68948942533647),(30,96,0.0338297677541428),(30,99,0.176381725516526),(30,101,-2.47685171056246),(30,104,0.00602740562150927),(30,109,-0.905987731559191),(30,110,-0.173772392956328),(30,114,-2.16670735801263),(30,118,3.96415601062044),(31,85,-1.59918515579699),(31,92,0.813425092318491),(31,94,2.19205298013245),(31,96,2.00163274025697),(31,99,-0.991546372875149),(31,103,1.1741233558153),(31,107,0.165410321359905),(31,108,-2.10013122959075),(31,109,-1.71648304696799),(31,111,-1.4755851924192),(31,112,1.77365947447127),(31,117,0.727134006775109),(32,86,-0.748924222540971),(32,87,0.524369029816584),(32,89,-0.163609729300821),(32,92,0.65141758476516),(32,98,-1.15489669484542),(32,99,2.42767113254189),(32,104,0.316354869228187),(32,106,-3.35122226630451),(32,109,-0.34934537797174),(32,116,-0.0308236945707572),(32,118,-0.604556413464766),(33,96,-1.31225012970367),(33,98,2.0844904934843),(33,108,2.47955259865108),(33,110,1.21593371379742),(33,111,0.837931455427717),(33,114,0.0963621936704611),(34,85,3.2026734214301),(34,90,1.82242805261391),(34,99,-3.16782128360851),(34,104,-0.0549943540757469),(34,109,-2.35338908047731),(35,86,1.28070925016022),(35,87,0.944746238593707),(35,97,0.678426465651418),(35,98,2.88666951506088),(35,100,1.29651783806879),(35,104,0.669469283120212),(35,107,1.45582445753349),(35,109,-1.25211340678121),(35,110,-2.85601367229225),(35,112,0.97689748832667),(36,85,-0.660054322946867),(36,87,2.06729331339457),(36,90,-1.78533280434584),(36,91,0.115512558366649),(36,104,-4.08230842005676),(36,107,1.34481337931455),(36,109,2.2773674733726),(36,112,1.08487197485275),(36,115,-2.63161107211524),(36,117,-2.53704947050386),(36,118,-0.24535355693228),(37,85,-1.3051545762505),(37,86,-2.10501419110691),(37,87,1.10850856044191),(37,91,-0.0585955381939147),(37,99,1.25637073885311),(37,105,-2.36800744651631),(37,111,1.46017334513382),(37,112,2.05064546647542),(37,118,0.69441816461684),(38,87,0.589617603076266),(38,90,-1.42239143040254),(38,103,0.653889584032716),(38,105,1.56015198217719),(38,106,2.61024811548204),(38,111,-1.19251075777459),(38,115,-0.86512344737083),(39,87,2.80092776268807),(39,89,-1.40697958311716),(39,91,1.63533433027131),(39,94,-2.35811944944609),(39,97,-1.91328165532395),(39,98,-2.35462508011109),(39,107,0.24314096499527),(39,108,0.610599078341014),(39,109,-1.46282845545824),(39,111,-0.54239020966216),(39,113,-0.496551408429212),(39,116,-3.42335276345103),(39,118,0.410092471083712),(40,88,2.58160649433882),(40,92,-0.689184240241707),(40,99,2.19737846003601),(40,104,-2.60333567308573),(40,110,0.41293069246498),(40,116,-0.775994140446181),(40,118,-1.55705435346538),(41,88,3.31270790734581),(41,93,0.370052186651204),(41,96,0.795281838435011),(41,97,1.35525070955535),(41,100,-0.415204321420942),(41,101,1.65768913846248),(41,104,-1.67363505966369),(41,105,0.636997589037751),(41,106,2.18387401959288),(41,107,-0.513931699575793),(41,109,-1.11943418683431),(41,110,4.0713980529191),(41,111,0.124362926114689),(41,112,1.83097323526719),(42,85,-0.748054445020905),(42,86,2.46375926999725),(42,87,0.929975280007324),(42,99,1.26346629230628),(42,100,3.78922391430403),(42,103,2.27408673360393),(42,109,-0.946043275246437),(42,113,-0.666035950804163),(43,85,-0.71446882534257),(43,88,0.382778405102695),(43,89,0.41460921048616),(43,93,-1.00280770287179),(43,97,0.862285225989563),(43,98,2.04000976592303),(43,101,0.353511154515214),(43,102,2.09343241676077),(43,103,-1.80188909573656),(43,105,-1.92289498580889),(43,110,1.24256111331523),(43,112,-0.184240241706595),(43,114,-2.11804559465316),(43,116,-1.63151951658681),(44,89,-0.579393902401807),(44,98,-1.0887478255562),(44,99,-0.634083071382794),(45,87,1.09797967467269),(45,88,1.53494369335002),(45,90,1.27964110232856),(45,91,-0.201025421918393),(45,95,0.93145542771691),(45,98,1.85827204199347),(45,108,0.37336344492935),(45,109,-2.32154301583911),(45,112,3.11737418744469),(45,115,-1.27422406689657),(46,85,1.59314249092074),(46,89,-1.42698446607868),(46,91,-1.49461348307749),(46,94,-1.37026581621754),(46,97,-1.07823419904172),(46,100,-0.624546037171545),(46,101,-2.55743583483383),(46,108,-3.97160252693258),(46,112,-0.61253700369274),(47,86,2.17218543046358),(47,91,-0.022446363719596),(47,92,1.97866756187628),(47,94,2.16460158085879),(47,95,-0.255592516861476),(47,100,-2.04283272804956),(47,101,-1.54934842982269),(47,104,-0.116351817377239),(47,105,1.12346263008515),(47,108,1.88062685018464),(47,112,1.77753532517472),(47,114,-2.41096224860378),(47,118,2.42278817102573),(48,86,1.64525284585101),(48,91,0.997650074770348),(48,98,-0.323099459822382),(48,99,-0.590105899227882),(48,100,2.87501144444105),(48,103,0.226981414227729),(48,105,-0.674077578051088),(48,106,-2.13815729239784),(48,111,-1.21745963927122),(48,115,-0.227973265785699),(49,87,0.744682149723807),(49,89,0.898281807916501),(49,93,1.29909665211951),(49,94,2.09410382396924),(49,95,-1.64290292062136),(49,102,2.22350230414747),(49,113,2.27285073397015),(49,114,0.672750022888882),(50,89,-0.252372814111759),(50,105,-1.2401806695761),(50,107,-2.1974547563097),(51,87,1.46336252937407),(51,92,-1.93441572313608),(51,97,-0.32624286629841),(51,98,1.16893520920438),(51,103,-2.69095431379131),(51,106,-1.05574205755791),(51,112,-0.694219794305246),(51,118,0.333994567705313),(52,89,2.04249702444533),(52,97,2.56169316690573),(52,106,1.067384868923),(52,110,0.156483657338175),(52,111,0.565996276741844),(52,113,3.83924375133518),(52,114,0.559648426770836),(52,118,-1.84228034302805),(53,88,-1.74883266701254),(53,90,-0.332880642109439),(53,92,1.76143681142613),(53,94,-1.35608996856594),(53,104,0.542359691152684),(53,105,-0.885433515427107),(53,109,0.458769493697928),(54,85,-3.84693441572314),(54,91,3.67374187444685),(54,94,0.883510849330119),(54,96,-1.05708487197485),(54,111,-0.678884243293558),(54,112,-2.24881740775781),(54,113,-1.96157719656972),(54,118,-1.53805658131657),(55,87,1.53889584032716),(55,95,-0.685369426557207),(55,107,-0.632343516342662),(55,110,-2.87614062929167),(55,117,-2.50570696127201),(56,107,0.82601397747734),(56,111,-1.81127353740043),(56,113,-2.36782433545946),(56,114,-1.51728873561815),(57,87,-0.790643024994659),(57,90,-1.40198980681783),(57,91,1.72170171208838),(57,92,2.91561632129887),(57,93,-1.64073610644856),(57,94,-1.89553514206366),(57,95,-1.09210486159856),(57,96,-4.02694784386731),(57,100,-1.35972167119358),(57,102,-0.752281258583331),(57,103,0.305108798486282),(57,115,-1.08348338267159),(58,86,1.20511490218818),(58,87,-2.32181768242439),(58,89,2.01805169835505),(58,90,1.61320841090121),(58,95,-0.693319498275704),(58,96,1.93105868709372),(58,101,-0.957502975554674),(58,103,2.06360057374798),(58,109,-0.0685140537736137),(58,110,1.48858607745598),(58,113,0.725547044282357),(58,114,0.952406384472182),(58,115,-1.68370616779076),(58,118,-0.967513046662801),(59,85,0.480590227973266),(59,86,-0.527207251197852),(59,90,4.22315134128849),(59,91,1.96874904629658),(59,93,-0.746513260292368),(59,97,1.02143925290689),(59,98,-2.67865535447249),(59,100,1.2581713309122),(59,102,-2.4039429914243),(59,112,-3.74668111209449),(59,114,-4.31847590563677),(60,85,-0.157963805047761),(60,87,1.04770043031098),(60,90,1.09312723166601),(60,91,-0.457090975676748),(60,96,2.67835016937773),(60,100,0.91331217383343),(60,101,-4.35497604297006),(60,105,-1.86216315195166),(60,107,2.77249977111118),(60,109,-2.08803064058351),(60,110,0.937986388744774),(60,114,1.5584276863918),(61,89,0.391674550614948),(61,94,0.857097079378643),(61,96,2.06099124118778),(61,98,-0.519959105197302),(61,100,2.48878444776757),(61,102,-0.672551652577288),(61,103,-2.48268074587237),(61,114,-0.271904660176397),(61,115,0.406888027588733),(62,93,-1.42532120731223),(62,95,-1.39248329111606),(62,107,-0.909909360026856),(62,109,-0.844111453596606),(62,110,1.13643299661245),(62,111,-0.0133365886410108),(63,87,0.229758598590045),(63,90,-1.79483932004761),(63,93,-1.9556260872219),(63,97,1.26967680898465),(63,100,0.559068575090792),(63,103,1.65942869350261),(63,104,2.87244788964507),(63,108,0.0826288644062624),(63,111,-0.0682241279335917),(63,114,0.00411999877925962),(63,117,1.08478041932432),(64,87,2.29102450636311),(64,94,-0.828196050904874),(64,99,2.02732932523576),(64,110,0.810937833796197),(64,112,0.491012298959319),(64,116,-1.16359447004608),(65,87,-0.115359965819269),(65,88,-0.684911648915067),(65,90,2.2697378460036),(65,97,0.456602679525132),(65,99,-2.26050599688711),(65,107,1.48698385570849),(65,110,0.56602679525132),(65,111,0.851771599475082),(65,114,-0.638050477614673),(65,116,0.834742271187475),(65,117,-1.72048097170934),(66,85,0.46835230567339),(66,102,0.835428937650685),(66,105,0.405667287209693),(66,108,-1.42115543076876),(66,111,1.80458998382519),(66,115,2.67172765282144),(66,118,-1.66296884060183),(67,86,2.41238135929441),(67,90,1.0140537736137),(67,92,1.41019928586688),(67,104,1.10037537766655),(67,109,-0.765617847224342),(67,111,-0.214987640003662),(68,87,2.94589068269906),(68,88,2.44346446119572),(68,90,0.032059694204535),(68,93,-1.63870662556841),(68,95,2.89400921658986),(68,96,2.47762993255409),(68,97,-0.943067720572527),(68,103,-1.09126560258797),(68,107,0.6579790643025),(68,112,1.64815210425123),(68,114,-0.118869594409009),(69,87,-0.23421430097354),(69,88,0.590990936002686),(69,92,1.04213080233161),(69,94,3.26105533005768),(69,95,0.0796533097323527),(69,97,0.799813837092196),(69,108,-1.30422376171148),(69,113,-2.17294839320048),(69,114,0.0807977538377026),(69,118,1.97911008026368),(70,85,1.77404095583972),(70,86,-3.65710928678243),(70,87,-0.600756859035005),(70,90,0.767723624378185),(70,96,-0.744727927488021),(70,97,-0.41804254280221),(70,99,0.515137180700095),(70,105,-1.06593523972289),(70,107,0.414197210608234),(70,109,0.678823206274606),(70,110,0.928601947080904),(70,111,-1.72954496902371),(71,85,1.0165868099002),(71,93,-0.694357127597888),(71,96,-0.519119846186712),(71,100,1.67688528092288),(71,104,0.353328043458357),(71,106,-1.53041169469283),(71,111,1.7621082186346),(71,113,1.62999359111301),(72,94,1.80802331614124),(72,96,0.0785088656270028),(72,99,-0.950209051789911),(72,110,0.153355510116886),(72,112,-1.40720847193823),(72,114,0.295113986632893),(72,115,-2.2766045106357),(72,116,2.56163212988678),(73,88,-1.3738670003357),(73,94,-1.30063783684805),(73,99,-2.05130161442915),(73,100,1.21402630695517),(73,106,0.386593218787195),(73,110,1.55583361308634),(73,115,-0.495025482955412),(74,90,-3.41532639545885),(74,94,-0.645725882747887),(74,99,2.89712210455641),(74,102,-0.223075045014802),(74,106,-0.168294320505387),(74,107,3.58076723532823),(74,110,-1.93845942564165),(74,113,0.313348796044801),(74,116,-0.737083040864284),(75,85,2.25032807397687),(75,86,-0.274056215094455),(75,93,2.21605578783532),(75,98,-0.249031037324137),(75,103,0.559404278695029),(75,105,-0.54506057924131),(75,111,-1.47354045228431),(75,117,-3.1338847010712),(76,86,0.191122165593432),(76,89,-1.1971343119602),(76,92,2.07612842188788),(76,94,1.64548173467208),(76,99,0.488982818079165),(76,101,2.08807641834773),(76,103,0.354503006073183),(76,106,-0.446272164067507),(76,110,0.076448866237373),(76,113,0.193868831446272),(77,88,1.51763969847713),(77,91,-1.68332468642232),(77,93,-0.76082644123661),(77,98,0.396023438215278),(77,101,-1.5691091647084),(77,102,0.148625141148106),(77,103,0.717108676412244),(77,104,-3.7564470351268),(77,105,2.10769981994079),(77,109,-2.33577990050966),(78,88,-0.534440137943663),(78,93,1.19296853541673),(78,94,0.559785760063478),(78,101,-0.0984679708243049),(78,104,-0.655537583544419),(78,110,-0.576647236548967),(78,114,0.696203497421186),(78,116,-0.684835352641377),(78,117,-2.62743003631703),(78,118,-1.56643879512925),(79,87,-2.15739921262246),(79,92,-1.51944029053621),(79,94,4.14629047517319),(79,107,-0.525452436902982),(79,108,2.87554551835688),(79,114,0.942365794854579),(79,118,0.428632465590381),(80,87,-2.28522598956267),(80,88,-0.319299905392621),(80,91,0.883144627216407),(80,99,0.0116275521103549),(80,101,1.7046418652913),(80,107,0.587389751884518),(80,113,2.31154820398572),(81,85,0.365306558427686),(81,86,-1.86439100314341),(81,90,-1.54379406109806),(81,93,2.2049623096408),(81,96,0.0936002685628834),(81,97,3.22182378612629),(81,106,-0.0022125919370098),(81,107,0.970717490157781),(81,110,0.371944334238716),(81,115,-1.20885341959899),(82,86,0.294259468367565),(82,92,0.948835718863491),(82,110,2.34176152836695),(82,112,0.302316354869228),(83,87,-2.20274971770379),(83,91,-1.85276345103305),(83,93,2.1410718100528),(83,101,-1.27303384502701),(83,103,0.0552385021515549),(83,105,-2.14461195715201),(83,108,-1.67900631733146),(84,85,1.62912381359294),(84,86,-1.16170232245857),(84,89,-0.721976378673665),(84,95,1.93128757591479),(84,99,-0.575731681264687),(84,104,1.29520554216132),(84,111,0.736564226203192),(84,113,-0.465834528641621),(84,114,-1.45800653096103),(35,105,1.34168523209326)]
orgname='BHNEAT_7_1'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()