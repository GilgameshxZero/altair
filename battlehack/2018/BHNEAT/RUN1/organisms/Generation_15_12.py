edge = [(0,85,3.46304208502457),(0,89,-0.97148808252205),(0,90,0.785470137638478),(0,93,-1.43214209418012),(0,98,-3.31619464705344),(0,101,-0.210417493209632),(0,105,6.4798425244911),(0,108,-4.23627430036317),(0,113,5.20748008667257),(0,114,2.41874446852016),(0,117,5.92822046571245),(0,118,-3.40137943662832),(1,86,-1.57375560777612),(1,92,3.34109775078585),(1,98,2.72667622913297),(1,102,-1.61451307718131),(1,104,1.04990539262062),(1,107,-4.18208868678854),(1,108,-0.807748649555956),(1,109,0.0603350932340463),(1,113,2.82409894100772),(2,87,-4.64511551255837),(2,88,2.20526749473556),(2,100,1.67241431928465),(2,106,-3.63043610950041),(2,108,-2.53875087740715),(2,110,0.200720236823634),(2,113,1.293710135197),(2,118,3.24190496536149),(3,89,7.25212103640858),(3,92,-3.45365001373333),(3,97,-1.19735557115391),(3,99,0.955290383617664),(3,101,-0.745979186376537),(3,103,-0.120609149449141),(3,105,4.84511093478194),(3,108,-2.2923062837611),(3,109,-8),(3,111,-0.388164922025208),(3,112,-1.33870967741935),(3,116,-0.256019775994141),(4,90,-1.94649342326121),(4,91,-4.30214850306711),(4,97,2.04562517166662),(4,99,-2.45970793786431),(4,101,-4.33442182683798),(4,108,4.28670613727226),(4,113,-5.08033997619556),(4,118,0.417325357829524),(5,86,2.07771538438063),(5,87,-3.62494277779473),(5,89,2.72224341563158),(5,92,-3.69836268196661),(5,93,-1.48496963408307),(5,99,5.82056642353587),(5,104,3.50582903530992),(5,114,2.82925656910916),(5,118,-0.951918088320566),(6,89,-2.80803094576861),(6,92,-6.21745963927122),(6,94,2.3868144779809),(6,100,3.12530899990844),(6,101,-0.290208136234626),(6,103,3.38403729361858),(6,107,1.46774193548387),(6,110,1.90648365733818),(6,113,-0.554246650593585),(7,85,2.70611438337352),(7,86,-5.01580858790857),(7,90,-0.0616626483962524),(7,95,0.277741325113682),(7,99,-0.61406292916654),(7,100,2.21696371349223),(7,104,1.38963744010743),(7,106,2.0387127292703),(7,108,2.5092547379986),(7,112,2.1560335093234),(7,116,-0.869281594286935),(8,92,-1.84838404492325),(8,93,1.76364177373577),(8,95,-0.804994354075747),(8,99,-2.23708304086428),(8,106,0.0373851741080966),(8,107,-2.08532975249489),(8,115,1.21113467818232),(8,116,1.01225318155461),(8,118,-0.0770592364268927),(9,85,-0.836527603991821),(9,87,-1.78708761864071),(9,98,-3.87061677907651),(9,101,-2.29995117038484),(9,103,4.21735282448805),(9,105,0.625102999969481),(9,106,3.40758995330668),(9,113,1.70932645649586),(10,89,-7.54321420941801),(10,96,-0.784318063905759),(10,106,1.48164311655019),(10,108,5.20859401226844),(10,111,-1.31901760917997),(10,112,0.826059755241554),(10,114,-1.29552598651082),(10,115,-3.81291390728477),(10,116,1.18209631641591),(10,117,-2.50325022125919),(11,89,-2.70407727286599),(11,97,0.886806848353527),(11,105,1.20831171605579),(11,112,1.53701132236701),(11,115,-0.481315042573321),(12,92,4.01292458876308),(12,93,1.04807428205206),(12,94,0.351306192205573),(12,97,0.571031830805383),(12,98,3.01051362651448),(12,99,1.27658925138096),(12,108,2.286080507828),(12,116,-1.97605822931608),(13,86,1.77309488204596),(13,87,1.30632953886532),(13,90,-1.30555131687368),(13,99,5.65459913937803),(13,102,1.33541367839595),(13,104,-2.53234962004456),(13,113,3.25150303659169),(13,116,-4.36806848353526),(13,118,-1.25606555375835),(14,90,-4.16716513565477),(14,93,-0.514282662434767),(14,95,-6.60954618976409),(14,102,-1.48182622760704),(14,104,-5.63425092318491),(14,106,1.08731345561083),(14,109,3.21446882534257),(14,110,1.74526200140385),(14,111,-2.18115024262215),(15,85,-0.215086825159459),(15,92,6.23490096743675),(15,99,-3.56346324045534),(15,101,-2.02063051240577),(15,104,-6.49936674092837),(15,108,-1.25099948118534),(15,117,0.410992767113255),(16,86,2.22075563829463),(16,87,0.00762199774163053),(16,88,-2.55888546403394),(16,90,-5.95236060670797),(16,91,-1.17839594714194),(16,95,-2.98261970885342),(16,97,-2.79393902401807),(16,98,-1.08828241828669),(16,99,-0.879940183721427),(16,101,2.69193090609455),(16,108,8),(16,110,4.61708426160466),(17,89,0.378803369243446),(17,96,-1.2146824549089),(17,99,1.05945005645924),(17,101,0.0668126468703266),(17,106,-1.24179815057833),(17,107,-1.57512894070254),(17,109,-4.16057313760796),(18,90,5.24839014862514),(18,91,-2.70645771660512),(18,93,5.50199896237068),(18,99,-2.59197515793329),(18,102,6.38370921964171),(18,103,-3.91087832270272),(18,104,0.301522873622852),(18,110,-2.86159855952635),(18,111,-0.701864680928983),(18,116,5.31331064790796),(18,117,-0.536172063356426),(18,118,-0.794869838557085),(19,87,0.778679769280068),(19,89,1.68118076113163),(19,93,1.92873165074618),(19,95,-0.76578569902646),(19,101,0.119502853480636),(19,105,-7.43367564928129),(19,115,-2.17326883754997),(20,88,-1.53823206274606),(20,101,-0.303155613879818),(20,103,0.796555986205634),(20,104,0.300332651753288),(20,105,0.15095980712302),(20,106,-1.67583239234596),(20,111,-0.87214270455031),(20,116,5.07613605151524),(21,86,2.8713339640492),(21,87,1.63434247871334),(21,94,1.37067781609546),(21,96,2.5930051576281),(21,101,5.41084780419324),(21,102,4.80531479842525),(21,105,-0.143612475966674),(21,107,3.38546403393658),(21,108,0.980071413312174),(22,86,0.385372478408154),(22,88,-2.55152287362285),(22,91,0.503189184240242),(22,92,-1.93152409436323),(22,93,-3.19788201544237),(22,98,0.495544297616504),(22,106,-0.49610889004181),(22,115,4.90083773308512),(22,117,-0.237128818628498),(23,85,-3.01418347727897),(23,86,-3.1291848506119),(23,88,-3.41038239692373),(23,90,-0.48269600512711),(23,97,-1.36996063112278),(23,104,4.36947233497116),(23,112,0.731261635181738),(23,114,1.55439924314096),(23,115,0.487945188756981),(23,116,0.694128238776818),(24,89,-3.58913693655202),(24,90,-1.88750114444411),(24,91,-2.85540330210273),(24,101,-1.22861415448469),(24,107,0.346850489822077),(24,108,1.20245979186377),(24,110,-3.78094576860866),(24,112,0.730468153935361),(25,90,-4.0623645741142),(25,92,0.545358134708701),(25,94,-4.65746024964141),(25,98,-1.50762199774163),(25,105,-0.550675984984893),(25,108,6.19541001617481),(25,109,1.44254890591144),(25,115,-0.475951414532914),(26,85,-1.64278847621082),(26,87,3.804834131901),(26,89,-0.723517563402203),(26,95,-1.27758110293893),(26,98,0.193769646290475),(26,100,0.876720480971709),(26,101,-0.581980346079897),(26,102,6.56273079622791),(26,103,-1.57692190313425),(26,104,1.5643330179754),(26,107,-3.8396099734489),(26,109,-2.13960692159795),(26,112,6.79423657948546),(26,113,2.89267403180029),(26,117,-2.41300698873867),(27,85,1.69644764549699),(27,87,1.98695333719901),(27,94,2.61162144840846),(27,100,3.10864589373455),(27,102,1.0136341441084),(27,103,0.942258980071413),(27,104,-1.09066286202582),(27,105,-2.30835901974548),(27,108,-1.61816766869106),(27,110,5.27385021515549),(27,114,2.61710715048677),(28,87,-1.53491317484054),(28,88,-0.538773766289254),(28,97,-3.89862514114811),(28,99,-3.98283333841975),(28,104,-0.88425855281228),(28,113,0.310083315530869),(28,114,-1.30840479750969),(29,88,5.95287179174169),(29,91,-2.61532944730979),(29,102,-5.14780114139225),(29,105,-3.29807428205206),(29,116,1.64491714224677),(30,95,6.45150608844264),(30,96,0.870189519943846),(30,99,6.63471633045442),(30,101,-4.77088229010895),(30,104,2.6261558885464),(30,109,-1.39870906704917),(30,110,1.71604815820795),(30,114,-0.907895138401441),(30,118,1.07912686544389),(31,85,2.47293771172216),(31,92,7.67423780022584),(31,94,0.915501876888333),(31,96,4.99255348368786),(31,99,-0.850474562822352),(31,103,0.629810480056154),(31,107,-1.81173131504257),(31,108,2.34009826960051),(31,109,-3.61049226355785),(31,111,-0.0354930265205851),(31,112,-2.49691000091556),(31,117,6.36081270790735),(32,86,-6.52645954771569),(32,87,4.27925199133274),(32,89,3.66215247047334),(32,92,8),(32,98,2.77043977172155),(32,99,-0.706183050019837),(32,104,3.02655110324412),(32,106,5.07974486526078),(32,109,4.8592486342967),(32,116,2.33501693777276),(32,118,-3.74483474227119),(33,96,-3.76307718131047),(33,98,-1.4658879360332),(33,108,1.32226020081179),(33,110,-3.22789696951201),(33,111,-0.12076937162389),(33,114,-1.90487380596332),(34,85,0.589487899410993),(34,90,2.34772789696951),(34,99,1.30329294717246),(34,104,-8),(34,109,-5.1904660176397),(35,86,2.44357890560625),(35,87,-2.31340983306375),(35,97,1.36860255745109),(35,98,-2.03516495254372),(35,100,0.74108096560564),(35,104,0.118724631488998),(35,107,-4.40556047242653),(35,109,-3.89440595721305),(35,110,-0.841792046876431),(35,112,4.15135654774621),(36,85,-1.00487533188879),(36,87,-4.63308359019745),(36,90,0.669385357219153),(36,91,0.341769157994324),(36,104,-1.83984649189734),(36,107,3.47511978514969),(36,109,-2.51998962370678),(36,112,-2.72167119357891),(36,115,5.26402325510422),(36,117,-2.83658864101077),(36,118,2.3310190130314),(37,85,3.06139561143834),(37,86,-2.06743827631459),(37,87,5.45545060579241),(37,91,3.00328836939604),(37,99,-1.66028321176794),(37,105,0.36619159520249),(37,111,4.7002853480636),(37,112,-0.0753120517593918),(37,118,-0.906048768578142),(38,87,1.54155095065157),(38,90,-1.8354747154149),(38,103,0.900250251777703),(38,105,7.09689626758629),(38,106,0.662366100039674),(38,111,-1.27169866023743),(38,115,-3.24688711203345),(39,87,-0.543252357554857),(39,89,0.572832422864467),(39,91,-1.81424909207434),(39,94,-0.352710043641469),(39,97,-0.0545976134525592),(39,98,0.603579821161534),(39,107,-0.213644825586718),(39,108,3.01187932981353),(39,109,3.25939970091861),(39,111,-0.676610614337596),(39,113,-1.82868434705649),(39,116,0.837717825861384),(39,118,-5.32318338572344),(40,88,0.127002777184363),(40,92,-4.70336008789331),(40,99,2.59259315775018),(40,104,-4.41644032105472),(40,110,-2.98553422650838),(40,116,2.85021515549181),(40,118,-2.12614825891903),(41,88,-2.3612170781579),(41,93,3.5799127170629),(41,96,-1.56963560899686),(41,97,-0.0463499862666712),(41,100,1.24397259437849),(41,101,6.1476180303354),(41,104,4.95319986571856),(41,105,1.80570390942106),(41,106,2.60666982024598),(41,107,-4.338206122013),(41,109,3.26952421643727),(41,110,0.313119907223731),(41,111,-2.00972777489547),(41,112,3.27159184545427),(42,85,-2.4795983764153),(42,86,1.7118289742729),(42,87,3.94143498031556),(42,99,0.353175450910978),(42,100,-6.03926206244087),(42,103,-3.27276680806909),(42,109,-1.45841090121158),(42,113,-2.04211554307688),(43,85,2.43771172215949),(43,88,-1.1020615253151),(43,89,-0.632137516403699),(43,93,-2.17918179876095),(43,97,-2.21539201025422),(43,98,1.61529892880032),(43,101,4.05857264931181),(43,102,1.03245643482772),(43,103,-4.35384685811945),(43,105,5.46861171300394),(43,110,1.63313699758904),(43,112,-0.535317545091098),(43,114,-0.998893704031495),(43,116,1.097903378399),(44,89,-3.51870784630879),(44,98,6.83198797570727),(44,99,-1.33989989928892),(45,87,-4.76682332834864),(45,88,-2.35479293191321),(45,90,1.88608966338084),(45,91,1.76593066194647),(45,95,-1.4018753624073),(45,98,-1.34472182378613),(45,108,4.04569383831294),(45,109,5.21230201116977),(45,112,-0.244544816431165),(45,115,-4.17494735557115),(46,85,1.7058473464156),(46,89,1.88988158818323),(46,91,1.84083071382794),(46,94,-2.47904141361736),(46,97,2.65933713797418),(46,100,2.17388683736686),(46,101,2.94779808954131),(46,108,-5.83277382732627),(46,112,-4.37829218420972),(47,86,-2.31723990600299),(47,91,-1.73453474532304),(47,92,2.8275246436964),(47,94,1.91327402569658),(47,95,-1.72708059938353),(47,100,0.69091616565447),(47,101,3.16736350596637),(47,104,-6.17763298440504),(47,105,1.94424268318735),(47,108,2.35557115390484),(47,112,-3.14143040253914),(47,114,1.43963438825648),(47,118,1.99394970549638),(48,86,4.63480025635548),(48,91,3.15684987945189),(48,98,4.23514511551256),(48,99,-1.06207464827418),(48,100,-1.8299127170629),(48,103,0.678731650746178),(48,105,-0.31130405590991),(48,106,-0.537156285287027),(48,111,-2.35249641407514),(48,115,0.0318536942655722),(49,87,3.77074495681631),(49,89,4.99119541001618),(49,93,0.227515488143558),(49,94,5.32353434858241),(49,95,3.18977935117649),(49,102,-2.53843806268502),(49,113,4.84769737846004),(49,114,3.97370830408643),(50,89,-0.0948973052156137),(50,105,-3.44958342234565),(50,107,-1.69161046174505),(51,87,0.648045289468062),(51,92,4.02185888241218),(51,97,-0.736800744651631),(51,98,3.46613208410901),(51,103,1.02069917905209),(51,106,-0.688337351603747),(51,112,-0.395786919766839),(51,118,-4.3217413861507),(52,89,-2.19289986877041),(52,97,-0.0532471694082459),(52,106,-3.19105349894711),(52,110,-2.3890270699179),(52,111,1.23414563432722),(52,113,1.36938077944273),(52,114,-0.088877529221473),(52,118,1.8665578173162),(53,88,-1.8685033722953),(53,90,-8),(53,92,0.165356913968322),(53,94,1.9907223731193),(53,104,-4.00836970122379),(53,105,-0.403584398937956),(53,109,2.94250312814722),(54,85,0.110446485793634),(54,91,-3.34597308267464),(54,94,-6.60371715445418),(54,96,1.00154118472854),(54,111,-4.80677968688009),(54,112,2.75759147923215),(54,113,2.48021637623219),(54,118,-1.79757072664571),(55,87,-3.10754722739341),(55,95,0.747703482161931),(55,107,-3.51378673665578),(55,110,-5.95736564226203),(55,117,-1.76224555192724),(56,107,-2.35798211615345),(56,111,-5.02289651173437),(56,113,-2.66436506241035),(56,114,1.12912381359294),(57,87,-1.42458876308481),(57,90,2.11880092776269),(57,91,1.58711508529923),(57,92,0.692876979888302),(57,93,0.762787255470443),(57,94,2.22202215643788),(57,95,-1.53097628711814),(57,96,-1.21375164036988),(57,100,-3.79065065462203),(57,102,-1.85094759971923),(57,103,2.10360271004364),(57,115,-5.41074098941008),(58,86,2.04886776329844),(58,87,1.22138126773888),(58,89,0.83866389965514),(58,90,-4.53173162022767),(58,95,-2.60854670857875),(58,96,0.00473036896877943),(58,101,-3.6837214270455),(58,103,-3.42042298654134),(58,109,-2.24257637256996),(58,110,0.989356669820245),(58,113,-5.06102938932463),(58,114,4.41618091372417),(58,115,-0.240783410138248),(59,85,3.38686788537248),(59,86,3.15393536179693),(59,90,-2.10747856074709),(59,91,-2.25783562730796),(59,93,3.85744804223762),(59,97,0.624103518784143),(59,98,1.26864680928983),(59,100,4.18806268501846),(59,102,3.14534440137944),(59,112,-0.858638264107181),(59,114,-4.23911252174444),(60,85,-0.072992645039216),(60,87,-2.57883693960387),(60,90,0.945921201208533),(60,91,-5.00961333048494),(60,96,5.05859553819391),(60,100,-0.408825952940458),(60,101,-2.44102298043764),(60,105,-4.03744621112705),(60,107,-1.54224524674215),(60,109,2.26390881069369),(60,110,2.92849513229774),(60,114,-0.552323984496597),(61,89,-0.00830866420484),(61,94,-7.55700857570116),(61,96,0.78003784295175),(61,98,3.50856044190802),(61,100,2.25039674062319),(61,102,1.84530167546617),(61,103,0.734427930539872),(61,114,0.948721274452956),(61,115,3.51825006866665),(62,93,3.29518265327921),(62,95,-1.64830469679861),(62,107,3.34009826960051),(62,109,0.917798394726401),(62,110,-2.5328073976867),(62,111,2.81418805505539),(63,87,3.42499313333537),(63,90,7.44631794183172),(63,93,0.791421246986297),(63,97,0.974433118686483),(63,100,-1.12654499954222),(63,103,0.879985961485641),(63,104,1.58418530838954),(63,108,3.63787499618519),(63,111,-0.640980254524369),(63,114,1.89530625324259),(63,117,-3.30797753837703),(64,87,4.59742271187475),(64,94,2.86906033509323),(64,99,-0.983626819666128),(64,110,-0.0146488845484785),(64,112,-1.90354625080111),(64,116,-0.344508194219794),(65,87,0.0530335398419142),(65,88,-5.77550584429456),(65,90,-2.34702597125156),(65,97,3.60855433820612),(65,99,4.63180944242683),(65,107,-0.103984191412092),(65,110,-4.48387096774194),(65,111,-4.10667744987335),(65,114,1.05587939085055),(65,116,6.7177343058565),(65,117,-1.78769798883023),(66,85,3.25461592455824),(66,102,-2.181974242378),(66,105,-3.29436628315073),(66,108,1.57194738608966),(66,111,3.73446607867672),(66,115,1.34188360240486),(66,118,0.591891232032228),(67,86,-2.87884151738029),(67,90,-2.01362651448103),(67,92,-1.03631702627644),(67,104,0.889721366008484),(67,109,-2.0018463698233),(67,111,-2.49496444593646),(68,87,0.998123111667226),(68,88,-0.660786767174291),(68,90,1.00932340464492),(68,93,-0.634685811944944),(68,95,-4.1183050019837),(68,96,-1.46824549089023),(68,97,2.43110446485794),(68,103,1.00405896176031),(68,107,0.238425855281228),(68,112,1.56033509323405),(68,114,-2.52848139896847),(69,87,2.24114200262459),(69,88,-0.971831415753655),(69,92,-0.0285348063600574),(69,94,1.74176763206885),(69,95,0.432561723685415),(69,97,0.412076174199652),(69,108,0.552232428968169),(69,113,1.16505172887356),(69,114,0.716109195226905),(69,118,1.00878933072909),(70,85,-1.23599963377789),(70,86,0.598132267220069),(70,87,1.20281075472274),(70,90,4.38431958983123),(70,96,-1.80864131595813),(70,97,-1.05777916806543),(70,99,2.66853846858119),(70,105,-0.709097567674795),(70,107,0.787530137028107),(70,109,-3.49986266670736),(70,110,-4.34938352610858),(70,111,-1.99156163212989),(71,85,1.44032105471969),(71,93,-0.248672444837794),(71,96,-4.11839655751213),(71,100,0.236068300424207),(71,104,-1.83149204992828),(71,106,1.21364482558672),(71,111,1.48693807794427),(71,113,1.3647114474929),(72,94,-0.816904202398755),(72,96,1.89857173375652),(72,99,0.10574663533433),(72,110,1.45306253242592),(72,112,-2.16414380321665),(72,114,0.499511703848384),(72,115,4.90951261940367),(72,116,2.345194860683),(73,88,1.65330973235267),(73,94,-0.718039490951262),(73,99,-0.32845545823542),(73,100,-4.23017059846797),(73,106,1.91618091372417),(73,110,1.76252021851253),(73,115,-4.38872951445051),(74,90,-2.82966856898709),(74,94,-0.580874050111392),(74,99,-1.44379253517258),(74,102,-1.18503372295297),(74,106,-0.0504318369090854),(74,107,1.11304055909909),(74,110,4.02829065828425),(74,113,-4.52475051118503),(74,116,-0.0698873867000336),(75,85,-0.992309335612049),(75,86,-1.24874111148412),(75,93,-0.169988097781304),(75,98,-3.04316080202643),(75,103,0.267204809717093),(75,105,-5.59793389690847),(75,111,0.890224921414838),(75,117,-0.416348765526292),(76,86,1.20426038392285),(76,89,-0.622043519394513),(76,92,-5.57428968169195),(76,94,1.2892544328135),(76,99,2.16022217474899),(76,101,4.18919949949644),(76,103,1.46050141911069),(76,106,-1.7688528092288),(76,110,3.62205877864925),(76,113,3.34406567583239),(77,88,-1.90050965910825),(77,91,1.98748741111484),(77,93,0.0733970152897733),(77,98,-0.184713278603473),(77,101,-1.82493057039094),(77,102,3.19212927640614),(77,103,4.4190038758507),(77,104,3.64322336497085),(77,105,-0.0720847193823053),(77,109,-1.06960509048738),(78,88,0.452146977141636),(78,93,-0.182180242316965),(78,94,-1.31086916714988),(78,101,2.66222113711966),(78,104,1.16611224707785),(78,110,0.00437940610980581),(78,114,-0.541589098788415),(78,116,0.611590929898984),(78,117,1.05584887234107),(78,118,-1.29200109866634),(79,87,3.8657948545793),(79,92,-3.85994293038728),(79,94,3.88959166234321),(79,107,2.1035645619068),(79,108,-0.658467360454115),(79,114,-1.44276253547777),(79,118,2.10219122898038),(80,87,3.52342295602283),(80,88,1.24729148228401),(80,91,2.65138706625568),(80,99,-0.274712363048189),(80,101,-2.07965330973235),(80,107,0.118625446333201),(80,113,0.615100558488723),(81,85,-2.54421369060335),(81,86,-0.0695822016052736),(81,90,-1.59184545426801),(81,93,0.557786797692801),(81,96,-1.8389690847499),(81,97,-6.28183080538347),(81,106,0.377521591845454),(81,107,-0.258270516067995),(81,110,-0.369426557206946),(81,115,-1.99642170476394),(82,86,-0.472655415509507),(82,92,-1.01306192205573),(82,110,0.608996856593524),(82,112,1.22249519333476),(83,87,4.02088991973632),(83,91,0.684377574999237),(83,93,1.6458708456679),(83,101,-2.98764000366222),(83,103,-1.34708700827052),(83,105,0.43519394512772),(83,108,-2.99858851893673),(84,85,-1.65227210303049),(84,86,-1.27986999114963),(84,89,1.76778466139714),(84,95,1.11430707724235),(84,99,-0.145954771568957),(84,104,1.17667928098392),(84,111,-2.17757194738609),(84,113,-3.8914151432844),(84,114,-1.35586107974487),(10,119,-0.663396099734489),(119,109,1.3814966277047),(58,120,-0.205694753868221),(120,118,0.398266548661763),(95,104,-1.58398693807794)]
orgname='BHNEAT_15_12'
cnodes = 121

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()