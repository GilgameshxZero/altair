edge = [(0,85,1.05716116824854),(0,89,-1.28655354472488),(0,90,1.73047578356273),(0,93,1.90719321268349),(0,98,1.85869930112613),(0,101,-3.03650776696066),(0,105,-0.149174474318674),(0,108,0.508972441785943),(0,113,-0.335177159947508),(0,114,-1.40423291726432),(0,117,2.65602587969604),(0,118,-1.3129062776574),(1,86,0.666982024597919),(1,92,0.3037507248146),(1,98,-1.27307962279122),(1,102,0.353053376873073),(1,104,-0.621173741874447),(1,107,-3.5289925840022),(1,108,-3.44500564592425),(1,109,1.58629871517075),(1,113,-2.6602679525132),(2,87,-0.115062410351878),(2,88,1.57673879207739),(2,100,-0.965369121372112),(2,106,-1.37092196417127),(2,108,0.334414197210608),(2,110,-1.42370372631001),(2,113,-1.82126834925382),(2,118,1.42350535599841),(3,89,1.86956389049959),(3,92,4.12852107303079),(3,97,2.83574175237281),(3,99,2.89565721610157),(3,101,-0.510330515457625),(3,103,1.25466933194983),(3,105,2.1361735892819),(3,108,0.966917935728019),(3,109,-2.23222296823023),(3,111,-3.06059450056459),(3,112,-0.684316537980285),(3,116,-2.34516434217353),(4,90,-1.68666646320994),(4,91,0.940061647389142),(4,97,-1.34681234168523),(4,99,3.60584582049013),(4,101,-0.878017517624439),(4,108,1.31084627826777),(4,113,-4.80635242774743),(4,118,2.3413800469985),(5,86,-1.51644947660756),(5,87,0.597445600756859),(5,89,1.38447218237861),(5,92,2.35589922788171),(5,93,1.75914792321543),(5,99,1.96752830591754),(5,104,2.42492446668905),(5,114,1.12071596423231),(5,118,0.567949461348308),(6,89,1.99491866817225),(6,92,2.06175420392468),(6,94,-0.196310312204352),(6,100,1.83072908719138),(6,101,0.214911343729972),(6,103,-2.21141697439497),(6,107,0.340006714072085),(6,110,2.216628009888),(6,113,0.636463515121921),(7,85,2.47291482284005),(7,86,1.13719595934935),(7,90,2.70182653279214),(7,95,3.3422421948912),(7,99,-0.727515488143559),(7,100,-0.809823908200323),(7,104,2.38212225714896),(7,106,-1.74626911221656),(7,108,1.79657124546037),(7,112,-1.69223609118931),(7,116,-2.26950895718253),(8,92,-2.46058534501175),(8,93,-4.09092989898373),(8,95,1.33405560472427),(8,99,0.703276161992249),(8,106,1.38067262794885),(8,107,-2.82198553422651),(8,115,-3.46934415723136),(8,116,1.44737083040864),(8,118,-2.55447553941466),(9,85,-2.34550004577776),(9,87,-1.60683004242073),(9,98,0.0829798272652364),(9,101,-0.227668080690939),(9,103,1.63167210913419),(9,105,-1.17644276253548),(9,106,1.62088381603442),(9,113,-2.24144718771935),(10,89,0.00747703482161954),(10,96,1.6104312265389),(10,106,2.2445600756859),(10,108,-1.16005432294687),(10,111,-1.53218939786981),(10,112,-0.723136082033753),(10,114,-1.17101046784875),(10,115,-0.888592181157872),(10,116,-1.43234809411908),(10,117,1.32193975646229),(11,89,-1.77472762230293),(11,97,2.92559587389752),(11,105,0.224509414960174),(11,112,1.55543687246315),(11,115,0.537812433240761),(12,92,0.889736625263222),(12,93,1.92747276223029),(12,94,0.143627735221412),(12,97,-0.0728324228644673),(12,98,0.00701925717947935),(12,99,1.2630695516831),(12,108,2.16049684133427),(12,116,1.19439527573473),(13,86,-0.245216223639637),(13,87,0.0195928830835901),(13,90,0.020897549363689),(13,99,-0.372173223059786),(13,102,0.00862147892696918),(13,104,2.34649189733573),(13,113,-1.47686696981719),(13,116,-0.603808709982604),(13,118,3.01622058778649),(14,90,-1.92277291177099),(14,93,-1.23203985717338),(14,95,-0.370265816217536),(14,102,-0.558549760429701),(14,104,-1.3548692281869),(14,106,1.73444318979461),(14,109,0.330698568681906),(14,110,2.17169713431196),(14,111,-2.45010223700674),(15,85,0.530442213202307),(15,92,2.71134067812128),(15,99,1.6460921048616),(15,101,-1.39233069856868),(15,104,1.52253791924802),(15,108,-1.16382335886715),(15,117,0.0742591631824703),(16,86,-5.17921994689779),(16,87,-0.638843958861049),(16,88,-1.49439985351115),(16,90,0.883022553178503),(16,91,-0.508209479049043),(16,95,-1.09523300881985),(16,97,1.10042115543077),(16,98,-2.82787560655538),(16,99,1.97697378460036),(16,101,-1.82515945921201),(16,108,1.85634937589648),(16,110,0.625324259163182),(17,89,2.28590502639851),(17,96,2.12079989013337),(17,99,1.11684011352886),(17,101,-0.931775872066408),(17,106,-1.15932950834681),(17,107,0.607821893978698),(17,109,0.232322153386029),(18,90,-0.204504531998657),(18,91,1.55289620654927),(18,93,-0.973448896755882),(18,99,-4.46718497268593),(18,102,-0.807473982970671),(18,103,-0.843729972228156),(18,104,1.5480895413068),(18,110,2.13019959105197),(18,111,1.64983062227241),(18,116,4.07094027527696),(18,117,-1.22989593188269),(18,118,0.833277382732627),(19,87,1.16425824762719),(19,89,2.18790246284371),(19,93,0.180669576097903),(19,95,-2.37372966704306),(19,101,-2.31507309183019),(19,105,1.90427869502853),(19,115,1.37393566698202),(20,88,2.74063081759087),(20,101,0.91117587817011),(20,103,1.23837244788964),(20,104,-2.74953459273049),(20,105,2.03036591692862),(20,106,-0.0620136112552263),(20,111,0.234839930417798),(20,116,0.815515610217597),(21,86,2.50816370128483),(21,87,-0.943113498336741),(21,94,-0.56640827661977),(21,96,3.38152714621418),(21,101,0.473677785576952),(21,102,0.697294534134953),(21,105,-0.970854823450423),(21,107,-2.29082613605152),(21,108,1.14268929105502),(22,86,-0.824274422437208),(22,88,0.846919156468398),(22,91,4.19920957060457),(22,92,-2.83602404858547),(22,93,-0.569421979430525),(22,98,-2.86342204046754),(22,106,-1.09991760002442),(22,115,-1.07303079317606),(22,117,0.997688222907193),(23,85,1.32032227546007),(23,86,-2.16919461653493),(23,88,1.46847437971129),(23,90,-2.77191991943114),(23,97,0.263618884853664),(23,104,-3.58630634479812),(23,112,0.456709494308298),(23,114,-0.596430860316782),(23,115,1.54411450544755),(23,116,-1.7615436262093),(24,89,1.58108767967772),(24,90,-1.04591509750664),(24,91,2.32839442121647),(24,101,-0.166570024719993),(24,107,0.337504196295053),(24,108,-2.72191534165471),(24,110,2.3011185033723),(24,112,-2.1584215826899),(25,90,-0.865092928861354),(25,92,-0.328959013641774),(25,94,1.45287942136906),(25,98,-2.02395702993866),(25,105,-0.882900479140599),(25,108,1.4706869716483),(25,109,-0.0518814661091952),(25,115,1.43450727866451),(26,85,1.26665547654653),(26,87,0.0879848628193),(26,89,-0.839411603137303),(26,95,2.49259926145207),(26,98,0.671308023316141),(26,100,1.62739951780755),(26,101,-1.92601550340281),(26,102,0.375301370281075),(26,103,3.33239997558519),(26,104,1.91792046876431),(26,107,0.56198309274575),(26,109,4.34360026856288),(26,112,-0.354762413403729),(26,113,0.167012543107395),(26,117,-1.29248176519059),(27,85,-2.6181829279458),(27,87,0.121250038148137),(27,94,1.33886226996673),(27,100,-1.37841425824763),(27,102,2.08151493881039),(27,103,-0.426763206884976),(27,104,-0.26113162633137),(27,105,0.857364116336558),(27,108,-0.896023438215278),(27,110,0.0704977568895535),(27,114,-4.2241584521012),(28,87,0.423078096865749),(28,88,-0.921704763939329),(28,97,-0.989181188390759),(28,99,-1.00331125827815),(28,104,-1.09390545365764),(28,113,-2.41247291482284),(28,114,0.445516830957976),(29,88,-1.87638477736747),(29,91,1.43406476027711),(29,102,-0.831324198126163),(29,105,1.30106509598071),(29,116,0.308511612292856),(30,95,2.25836970122379),(30,96,-2.14145329142125),(30,99,0.170140690328684),(30,101,2.37643055513169),(30,104,-0.862681966612751),(30,109,-1.60318308053835),(30,110,1.57257301553392),(30,114,1.31141087069308),(30,118,0.157582323679312),(31,85,0.664143803216651),(31,92,0.153843806268502),(31,94,1.96005127109592),(31,96,0.899105807672353),(31,99,-0.209814752647481),(31,103,1.85470900601215),(31,107,-2.15681936094241),(31,108,4.73835718863491),(31,109,-0.837435529648732),(31,111,0.970320749534593),(31,112,-0.0428785058137761),(31,117,-0.569704275643178),(32,86,0.571497238074892),(32,87,-0.121616260261849),(32,89,2.3693884090701),(32,92,1.81015961180456),(32,98,1.16061891537217),(32,99,-2.84106723227638),(32,104,-2.41187780388806),(32,106,-0.0368358409375286),(32,109,-0.203711050752281),(32,116,-1.64864040040284),(32,118,2.88054292428358),(33,96,2.11569566942351),(33,98,-0.634022034363842),(33,108,-1.99723807489242),(33,110,-1.90995513779107),(33,111,-0.442213202307199),(33,114,0.900387585070345),(34,85,-1.30311746574297),(34,90,-0.616458632160405),(34,99,-3.09465315713981),(34,104,1.87789544358654),(34,109,-2.57590716269417),(35,86,-0.750144962920011),(35,87,0.935361796929838),(35,97,-0.0658436841944636),(35,98,-1.47747734000671),(35,100,-1.70558793908506),(35,104,-0.139690847499008),(35,107,-2.18297372356334),(35,109,-0.651051362651448),(35,110,-1.90687276833399),(35,112,0.390331736198004),(36,85,-1.24485000152593),(36,87,-0.883510849330119),(36,90,-2.47802667317728),(36,91,3.1793420209357),(36,104,0.278252510147404),(36,107,1.80211798455763),(36,109,1.77381206701865),(36,112,-2.77240058595538),(36,115,0.2211066011536),(36,117,1.91438032166509),(36,118,0.32357249671926),(37,85,2.68185979796747),(37,86,1.33594775231178),(37,87,0.754722739341411),(37,91,2.12523270363475),(37,99,-0.752220221564379),(37,105,-2.04202398754845),(37,111,2.32308420056764),(37,112,-0.15446943571276),(37,118,0.344866786706137),(38,87,2.07684560686056),(38,90,-0.549501022370067),(38,103,-0.4297845393231),(38,105,2.910367137669),(38,106,2.10676900540178),(38,111,1.15959654530473),(38,115,0.30405590990936),(39,87,-0.496444593646046),(39,89,1.80784020508438),(39,91,-2.98852504043702),(39,94,-1.14168980986969),(39,97,-0.981826227607044),(39,98,-1.18800927762688),(39,107,3.96327097384564),(39,108,-1.28897976622822),(39,109,-1.54736472670675),(39,111,-0.556443983275857),(39,113,-1.3871578112125),(39,116,-1.23975341044343),(39,118,1.46977141636402),(40,88,0.749656666768395),(40,92,-2.1344264046144),(40,99,-2.3499938962981),(40,104,-1.38145084994049),(40,110,0.278878139591662),(40,116,2.00354014709922),(40,118,1.9479964598529),(41,88,-1.4638966032899),(41,93,2.94390697958312),(41,96,1.0239722891934),(41,97,-2.17974639118625),(41,100,1.74039429914243),(41,101,0.356578264717551),(41,104,-0.489669484542375),(41,105,2.11911374248482),(41,106,1.64178899502548),(41,107,-0.946531571398053),(41,109,2.73791467024751),(41,110,1.74666585283975),(41,111,-1.32299264503922),(41,112,-0.864421521652883),(42,85,0.970519119846187),(42,86,-0.910817285683767),(42,87,0.86504715109714),(42,99,2.50221259193701),(42,100,1.97436445204016),(42,103,0.485091708120975),(42,109,-0.757133701590014),(42,113,1.27204199346904),(43,85,2.33059175389874),(43,88,0.792947172460097),(43,89,0.326181829279458),(43,93,1.09366130558184),(43,97,1.94851527451399),(43,98,-0.1004135258034),(43,101,1.53995635853145),(43,102,3.67490157780694),(43,103,2.09250160222175),(43,105,1.98019348735008),(43,110,-0.510879848628193),(43,112,4.22179326761681),(43,114,0.587878048036134),(43,116,-2.86145359660634),(44,89,4.03008362071596),(44,98,3.00832392345958),(44,99,-0.634083071382794),(45,87,-1.37034211249123),(45,88,2.67904446546831),(45,90,-1.6232032227546),(45,91,3.07952360606708),(45,95,2.12656025879696),(45,98,0.473311563463241),(45,108,-0.945265053254799),(45,109,-3.48863948484756),(45,112,-1.51380962553789),(45,115,1.46755882442702),(46,85,0.2195806756798),(46,89,-0.397885067293313),(46,91,-1.29520554216132),(46,94,-0.920880764183477),(46,97,2.44743186742759),(46,100,-0.32372508926664),(46,101,-2.40316476943266),(46,108,0.242011780144658),(46,112,-2.71823786126286),(47,86,-0.128864406262398),(47,91,3.03857539597766),(47,92,4.53350932340464),(47,94,1.36593218787194),(47,95,0.624752037110508),(47,100,3.87971892452773),(47,101,0.988723410748619),(47,104,1.37737662892544),(47,105,-2.49671926023133),(47,108,2.695165868099),(47,112,-1.01298562578204),(47,114,1.59543137913144),(47,118,-1.56797997985778),(48,86,2.74578081606494),(48,91,0.789529099398786),(48,98,0.753288369396039),(48,99,-0.821634571367534),(48,100,-1.72305978576006),(48,103,-4.61767174291208),(48,105,-0.116977446821497),(48,106,-1.89812921536912),(48,111,0.339159825434126),(48,115,2.07907345805231),(49,87,-2.75574510940886),(49,89,-1.82457960753197),(49,93,0.309732352671896),(49,94,0.180211798455763),(49,95,-1.80852687154759),(49,102,5.08764152958769),(49,113,2.69003875850703),(49,114,-0.352977080599383),(50,89,1.09662160100101),(50,105,1.72469252601703),(50,107,1.40606402783288),(51,87,-1.68967253639332),(51,92,2.67711416974395),(51,97,0.289498580889309),(51,98,-5.44012268440809),(51,103,-0.773323770867031),(51,106,0.117160557878353),(51,112,0.507217627491073),(51,118,-3.27745139927366),(52,89,-0.895672475356303),(52,97,-2.22907193212684),(52,106,0.273827326273385),(52,110,-1.69343394268624),(52,111,2.24375133518479),(52,113,1.69421216467788),(52,114,0.720404675435652),(52,118,1.38680684835353),(53,88,1.14149906918546),(53,90,-0.991012298959319),(53,92,-2.66968291268654),(53,94,3.1129642628254),(53,104,-0.560396130252999),(53,105,-0.782204657124546),(53,109,-0.442762535477767),(54,85,-1.25136570329905),(54,91,0.98055970946379),(54,94,-0.921941282387768),(54,96,-0.120166631061739),(54,111,-1.11453596606342),(54,112,-1.47013763847774),(54,113,2.89925077059236),(54,118,-1.20680104983673),(55,87,-2.05647450178533),(55,95,2.12569048127689),(55,107,-1.57517471846675),(55,110,1.94135868404187),(55,117,-1.16670735801263),(56,107,3.60857722708823),(56,111,1.20756401257363),(56,113,-1.33027130954924),(56,114,-1.64081240272225),(57,87,-0.35026093325602),(57,90,-0.420514542069765),(57,91,1.36246070741905),(57,92,-3.20215460676901),(57,93,-0.338854640339366),(57,94,2.50363170262764),(57,95,-0.664899136326182),(57,96,-0.0733893856624042),(57,100,-0.4781945249794),(57,102,0.485930967131565),(57,103,-2.03161717581713),(57,115,0.571077608569597),(58,86,1.66350291451765),(58,87,1.60660115359966),(58,89,0.723075045014801),(58,90,0.798821985534226),(58,95,0.533944212164678),(58,96,-2.23868526261177),(58,101,-0.797219763786737),(58,103,0.343729972228156),(58,109,1.42620624408704),(58,110,0.0953398236030152),(58,113,-2.3366801965392),(58,114,0.272148808252205),(58,115,1.25508896145512),(58,118,-0.642033143101291),(59,85,2.17882320627461),(59,86,-4.42640461439863),(59,90,0.0624103518784143),(59,91,-2.6913510544145),(59,93,-0.120578630939665),(59,97,-0.0717337565233314),(59,98,1.01484725486007),(59,100,2.45536667989135),(59,102,0.703253273110141),(59,112,-1.5980254524369),(59,114,-2.42991424298837),(60,85,-1.36886196478164),(60,87,-0.181585131382183),(60,90,2.37368388927885),(60,91,1.94380016479995),(60,96,-2.51342814416944),(60,100,0.915562913907285),(60,101,2.31060975981933),(60,105,-0.535447248756371),(60,107,0.645130771813105),(60,109,0.216498306222724),(60,110,-2.0739082003235),(60,114,-2.3935819574572),(61,89,3.98912015137181),(61,94,1.85628833887753),(61,96,-1.04892117069002),(61,98,-0.32738731040376),(61,100,1.2900173955504),(61,102,0.376750999481185),(61,103,-2.5518814661092),(61,114,0.0144734031189919),(61,115,1.64777062288278),(62,93,-0.551499984740745),(62,95,-0.280846583452864),(62,107,-1.59245582445753),(62,109,-2.92967009491256),(62,110,-2.0070879238258),(62,111,-0.591372417371136),(63,87,0.358813745536668),(63,90,0.892208624530778),(63,93,-1.60809656056398),(63,97,-1.54988250373852),(63,100,4.72877437665944),(63,103,0.155095065157018),(63,104,-0.266762291329691),(63,108,0.979323709830012),(63,111,-5.07917264320811),(63,114,-2.7384334849086),(63,117,-3.25190740684225),(64,87,-0.971442304757836),(64,94,-2.38080996124149),(64,99,-1.33922849208045),(64,110,2.37142551957762),(64,112,-4.5183339945677),(64,116,3.54610583819086),(65,87,0.967711416974395),(65,88,1.08299508651997),(65,90,-0.0259407330545976),(65,97,2.17078920865505),(65,99,-1.96423230689413),(65,107,-0.878658406323435),(65,110,-3.39069795831172),(65,111,-0.273705252235481),(65,114,-1.52858058412427),(65,116,2.65208136234626),(65,117,1.90420239875484),(66,85,2.83410901211585),(66,102,1.4570299386578),(66,105,-1.75077059236427),(66,108,-0.802484206671346),(66,111,-0.626285592211676),(66,115,2.3937040314951),(66,118,-1.33312479018525),(67,86,1.32966093935972),(67,90,4.63761558885464),(67,92,1.09471419415876),(67,104,1.02919095431379),(67,109,0.475630970183416),(67,111,-0.817361980040895),(68,87,0.833841975157933),(68,88,-2.04039124729148),(68,90,0.190435499130222),(68,93,2.78495132297739),(68,95,-1.42275765251625),(68,96,1.39216284676656),(68,97,0.0474562822351756),(68,103,1.43452253791925),(68,107,-2.38860744041261),(68,112,-2.49549851985229),(68,114,1.44838557084872),(69,87,2.73401593066195),(69,88,-1.3820383312479),(69,92,1.42941068758202),(69,94,1.07084871974853),(69,95,1.78861354411451),(69,97,-2.22191534165471),(69,108,2.52009643848994),(69,113,2.0952940458388),(69,114,3.31926938688314),(69,118,0.231925412762841),(70,85,0.138401440473647),(70,86,-1.71758171330912),(70,87,1.70105594042787),(70,90,-1.61664174321726),(70,96,-3.66637928403577),(70,97,-1.04336680196539),(70,99,-1.58986175115207),(70,105,-1.44776757103183),(70,107,-0.378139591662343),(70,109,0.913190099795526),(70,110,3.96221808526872),(70,111,-0.87481307412946),(71,85,2.16740165410321),(71,93,-1.96697897274697),(71,96,-0.848872341074862),(71,100,-0.466856898709067),(71,104,2.23403118991668),(71,106,1.67021698660237),(71,111,2.85749382000183),(71,113,0.429395428327281),(72,94,-1.23482467116306),(72,96,0.643803216650899),(72,99,1.24057741019929),(72,110,-0.184636982329783),(72,112,-2.51701406903287),(72,114,0.694448683126316),(72,115,1.56979583117161),(72,116,0.407650990325633),(73,88,-0.588549455244606),(73,94,1.65103610339671),(73,99,1.51638843958861),(73,100,0.410626544999542),(73,106,1.90023499252297),(73,110,-1.91202276680807),(73,115,0.862681966612751),(74,90,0.700331125827815),(74,94,1.4739371929075),(74,99,1.9525742362743),(74,102,-0.284569841608936),(74,106,1.84263130588702),(74,107,-2.2713858455153),(74,110,-1.2533951841792),(74,113,-0.360354930265206),(74,116,1.97769096957305),(75,85,-0.140415662099063),(75,86,-1.43696401867733),(75,93,1.85506759849849),(75,98,0.101420636616107),(75,103,-0.815424054689169),(75,105,-1.16382335886715),(75,111,3.96775719473861),(75,117,-1.0188756981109),(76,86,2.01290932950835),(76,89,-0.494064149906919),(76,92,-0.301293984801782),(76,94,-0.991775261696219),(76,99,-0.54139835810419),(76,101,0.785279396954253),(76,103,2.60257271034883),(76,106,4.04010132145146),(76,110,-1.03033539841914),(76,113,-2.45185705130161),(77,88,0.410084841456343),(77,91,0.243850520340587),(77,93,-1.54911954100162),(77,98,-1.45721304971465),(77,101,-1.65846736045412),(77,102,0.054857020783105),(77,103,-0.900830103457747),(77,104,0.043565172276986),(77,105,-0.325617236854152),(77,109,-0.0946913052766503),(78,88,1.06633198034608),(78,93,0.321970274971771),(78,94,-1.13856929227577),(78,101,-0.172734763634144),(78,104,1.09527878658406),(78,110,-0.846591082491531),(78,114,-1.71864986114078),(78,116,1.18968779564806),(78,117,-0.782662434766686),(78,118,-0.204641865291299),(79,87,-1.45387127292703),(79,92,0.453810235908078),(79,94,2.19547105319376),(79,107,-1.63853877376629),(79,108,1.70928067873165),(79,114,-2.48333689382611),(79,118,-3.20107119968261),(80,87,-0.338694418164617),(80,88,-1.76297799615467),(80,91,0.358287301248207),(80,99,-1.85972167119358),(80,101,1.75423444318979),(80,107,1.3584856715598),(80,113,-1.9891964476455),(81,85,-1.61122470778527),(81,86,2.6224402600177),(81,90,-1.52815332499161),(81,93,1.81240272225105),(81,96,-0.830103457747124),(81,97,-0.346591082491531),(81,106,-3.33992278817103),(81,107,-1.17017120883816),(81,110,0.954618976409192),(81,115,-2.76384777367473),(82,86,-2.06527909176916),(82,92,-1.56949064607685),(82,110,0.87206640827662),(82,112,0.946600238044374),(83,87,2.24158452101199),(83,91,2.63771477401044),(83,93,2.01316110721152),(83,101,-2.06190679647206),(83,103,0.635929441206092),(83,105,2.4747001556444),(83,108,0.741523483993042),(84,85,-0.396588030640584),(84,86,-2.11914426099429),(84,89,-2.4955214087344),(84,95,1.96351512192145),(84,99,0.791955320902127),(84,104,-0.458845789971618),(84,111,-0.0273598437452315),(84,113,1.09343241676077),(84,114,-3.75860621967223)]
orgname='BHNEAT_6_8'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()