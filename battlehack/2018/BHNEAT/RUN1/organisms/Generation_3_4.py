edge = [(0,85,0.741599780266732),(0,89,-0.449507126071963),(0,90,2.01889095736564),(0,93,-0.616031373027741),(0,98,-2.1028015991699),(0,101,-2.07342753379925),(0,105,2.08944975127415),(0,108,-1.2165288247322),(0,113,-2.87229529709769),(0,114,0.586336863307596),(0,117,-3.00068666646321),(0,118,-1.6671346171453),(1,86,-1.25377666554765),(1,92,-0.185033722952971),(1,98,1.16164128543962),(1,102,1.05597094637898),(1,104,0.338831751457259),(1,107,-1.39452803125095),(1,108,0.216406750694296),(1,109,0.121539963988159),(1,113,-1.01672414319285),(2,87,0.116809595019379),(2,88,-2.85177159947508),(2,100,0.0644703512680441),(2,106,-1.87963499862667),(2,108,1.03154087954344),(2,110,0.178044984282968),(2,113,2.25112155522324),(2,118,0.414197210608234),(3,89,-1.447233497116),(3,92,-0.574953459273049),(3,97,-1.21791741691336),(3,99,0.805688650166326),(3,101,2.5903958250679),(3,103,0.32929471724601),(3,105,2.55586413159581),(3,108,-0.341273232215339),(3,109,0.461531418805506),(3,111,-1.62839136936552),(3,112,-1.63357951597644),(3,116,-0.455458235419782),(4,90,2.81453901791437),(4,91,-1.14940336313974),(4,97,-0.522171697134312),(4,99,-1.16252632221442),(4,101,0.928846095156713),(4,108,0.316110721152379),(4,113,-0.491378521073031),(4,118,1.36251411481063),(5,86,-0.928312021240883),(5,87,-2.24486526078066),(5,89,0.247169408246101),(5,92,-2.05969420453505),(5,93,0.429166539506211),(5,99,-1.21715445417646),(5,104,0.476790673543504),(5,114,-0.794579912717063),(5,118,-1.5631275368511),(6,89,1.50692770165105),(6,92,-1.06341746269112),(6,94,0.866313669240394),(6,100,0.567644276253548),(6,101,1.74434644611957),(6,103,1.68506424146245),(6,107,0.49755851924192),(6,110,0.768166142765587),(6,113,-0.196264534440138),(7,85,-1.1864528336436),(7,86,0.838511307107761),(7,90,1.85917233802301),(7,95,-0.386669515060884),(7,99,-0.815988647114475),(7,100,-0.0133671071504868),(7,104,0.920926541947691),(7,106,0.884365367595447),(7,108,2.1036866359447),(7,112,-1.24286629840999),(7,116,0.12793359172338),(8,92,0.21301919614246),(8,93,0.283333841975158),(8,95,0.717795342875454),(8,99,0.161305581835383),(8,106,0.736060670796838),(8,107,2.84166997283853),(8,115,-1.16283150730918),(8,116,0.0664082766197699),(8,118,1.51434369945372),(9,85,-1.9001281777398),(9,87,-2.40562150944548),(9,98,0.669911801507614),(9,101,0.595049897762993),(9,103,2.8316599017304),(9,105,-1.0827661976989),(9,106,0.214117862483596),(9,113,-0.36870937223426),(10,89,0.3255561998352),(10,96,-0.825388348033082),(10,106,-0.559938352610858),(10,108,2.31679738761559),(10,109,-0.97735526596881),(10,111,0.690664387951292),(10,112,-1.59428693502609),(10,114,-0.155430768761254),(10,115,-1.69893490401929),(10,116,-1.20372631000702),(10,117,0.67169713431196),(11,89,-0.971327860347301),(11,97,0.835444196905423),(11,105,-1.21051667836543),(11,112,0.120349742118595),(11,115,1.40278328806421),(12,92,-0.0915707876827295),(12,93,2.28594317453536),(12,94,-0.598178044984283),(12,97,2.01231421857356),(12,98,-0.273354289376507),(12,99,-2.08058412427137),(12,108,-2.67943357646413),(12,116,0.45738090151677),(13,86,0.222449415570544),(13,87,1.88152714621418),(13,90,-1.71880245368816),(13,99,2.37325663014618),(13,102,0.732840968047121),(13,104,0.329432050538652),(13,113,-1.40876491592151),(13,116,-1.85644093142491),(13,118,0.0860316782128361),(14,90,1.35061189611499),(14,93,0.874584185308389),(14,95,-2.35967589342936),(14,102,1.77671132541887),(14,104,-0.97605822931608),(14,106,1.41651661732841),(14,109,0.658803064058351),(14,110,-0.368800927762688),(14,111,-2.499359111301),(15,85,-0.777535325174718),(15,92,-0.858989226966155),(15,99,1.71610156559954),(15,101,-0.0904110843226417),(15,104,-0.877651295510727),(15,108,0.400830103457747),(15,117,0.362941373943297),(16,86,1.80104983672597),(16,87,-1.0547349467452),(16,88,-0.675984984893338),(16,90,-1.95110934781945),(16,91,-0.517319254127628),(16,95,-1.60760826441237),(16,97,-0.153813287759026),(16,98,-1.09004486220893),(16,99,2.46284371471297),(16,101,-0.341807306131169),(16,108,1.46943571275979),(16,110,2.57342753379925),(17,89,0.521942808313242),(17,96,-0.284249397259438),(17,99,0.75548570207831),(17,101,0.200994903408918),(17,106,-0.779366435743278),(17,107,2.42167424542985),(17,109,-0.493713187047945),(18,90,-0.167043061616871),(18,91,-0.0933561204870754),(18,93,1.52342295602283),(18,99,-0.526779992065188),(18,102,0.570757164220099),(18,103,-0.789437543870357),(18,104,-0.665517136143071),(18,110,1.51942503128147),(18,111,0.0425885799737541),(18,116,-1.44627216406751),(18,117,2.67210913418989),(18,118,-0.200277718436232),(19,87,0.262382885219886),(19,89,-0.463133640552995),(19,93,2.4969481490524),(19,95,-0.695516830957976),(19,101,-2.62555314798425),(19,105,-0.142902920621357),(19,115,-2.32622760704367),(20,88,-0.490508743552965),(20,101,2.73432111575671),(20,103,2.35442670979949),(20,104,-0.810419019135105),(20,105,1.02433851130711),(20,106,-1.77568895535142),(20,111,1.86953337199011),(20,116,0.352153080843532),(21,86,-1.67490157780694),(21,87,1.16183965575121),(21,94,2.45246742149113),(21,96,1.12598040711692),(21,101,0.449903866695151),(21,102,-0.288018433179724),(21,105,1.79830317087313),(21,107,-2.51104770043031),(21,108,-2.32473220007935),(22,86,1.64845728934599),(22,88,-1.65196691793573),(22,91,-2.00170903653066),(22,92,-0.372478408154546),(22,93,-1.74819177831355),(22,98,0.84179204687643),(22,106,-1.73853267006439),(22,115,-2.05105746635334),(22,117,-1.94402905362102),(23,85,0.279152806176946),(23,86,-0.118015076143681),(23,88,-0.951185644093143),(23,90,0.818521683400983),(23,97,-0.758583330790124),(23,104,0.897274697103793),(23,112,-0.74153874324778),(23,114,-2.43301187170019),(23,115,-0.581255531479843),(23,116,-1.54301583910642),(24,89,-1.63168736838893),(24,90,-1.1416364024781),(24,91,-0.931287575914792),(24,101,-2.58174382763146),(24,107,-1.04707480086673),(24,108,0.573320719016083),(24,110,-0.166539506210517),(24,112,0.276314584795679),(25,90,-0.184392834253975),(25,92,1.06532486953337),(25,94,-1.67885372478408),(25,98,-0.182515945921201),(25,105,-0.87328714865566),(25,108,0.563234351634266),(25,109,0.755699331644642),(25,115,1.01619006927702),(26,85,2.40937528611103),(26,87,-2.66280098879971),(26,89,0.70052186651204),(26,95,2.04771568956572),(26,98,-0.169301431318094),(26,100,0.133747367778558),(26,101,-0.47315897091586),(26,102,-1.16499832148198),(26,103,2.78313547166356),(26,104,0.305536057618946),(26,107,1.3129062776574),(26,109,0.548493911557359),(26,112,1.09813226722007),(26,113,-1.29810480056154),(26,117,0.527863399151586),(27,85,2.69157994323557),(27,87,-1.66116824854274),(27,94,1.89197973570971),(27,100,0.942777794732505),(27,102,-0.919766838587604),(27,103,2.14445936460463),(27,104,0.525833918271432),(27,105,-0.0386516922513505),(27,108,1.77455977050081),(27,110,0.960478530228584),(27,114,0.181218909268471),(28,87,1.63438825647755),(28,88,-0.241645558030946),(28,97,0.95616016113773),(28,99,2.11113315225684),(28,104,-0.846919156468398),(28,113,1.04506057924131),(28,114,-2.72995696890164),(29,88,1.89939573351238),(29,91,0.417844172490616),(29,102,0.441114535966063),(29,105,0.10406811731315),(29,116,-0.0478072450941496),(30,95,-2.58851893673513),(30,96,-0.381862849818415),(30,99,-2.4839777825251),(30,101,0.422315134128849),(30,104,0.534501174962615),(30,109,1.93235572374645),(30,110,1.18759727774895),(30,114,1.2979674672689),(30,118,-0.709677419354839),(31,85,-1.79074983977783),(31,92,2.58539078951384),(31,94,1.54780724509415),(31,96,-1.56817835016938),(31,99,-0.963759269997253),(31,103,2.14157536545915),(31,107,0.766579180272835),(31,108,-1.88125247962889),(31,109,-2.21419415875729),(31,111,0.920438245796075),(31,112,2.65926084170049),(31,117,0.69457075716422),(32,86,-1.81954405346843),(32,87,1.77510910367138),(32,89,2.58059938352611),(32,92,-1.26113162633137),(32,98,-0.91552476577044),(32,99,1.30658894619587),(32,104,-1.41105380413221),(32,106,0.396801660206916),(32,109,-2.76985992004151),(32,116,-1.21539963988159),(32,118,1.39733573412275),(33,96,2.14911343729972),(33,98,1.54887539292581),(33,108,-0.449079866939299),(33,110,-2.12950529496139),(33,111,-1.45348979155858),(33,114,-1.5678273873104),(34,85,1.06175420392468),(34,90,-1.87765129551073),(34,99,-1.77478865932188),(34,104,1.65039521469771),(34,109,2.96450697347942),(35,86,2.17221594897305),(35,87,0.893658253730888),(35,97,-1.9270760216071),(35,98,1.40762047181616),(35,100,1.90870387890255),(35,104,2.0097201452681),(35,107,0.137073885311441),(35,109,2.41210669270913),(35,110,-1.45667897579882),(35,112,0.527741325113681),(36,85,1.2204657124546),(36,87,-2.29651783806879),(36,90,-1.96523941770684),(36,91,0.184423352763451),(36,104,0.750862147892697),(36,107,-0.65507980590228),(36,109,-0.166554765465255),(36,112,0.295754875331889),(36,115,1.19838557084872),(36,117,-1.97882015442366),(36,118,1.76660969878231),(37,85,1.32404553361614),(37,86,0.135715811639759),(37,87,1.28594317453536),(37,91,-1.50476088747826),(37,99,-0.757866145817438),(37,105,-2.97840815454573),(37,111,0.737281411175878),(37,112,0.730521561326945),(37,118,-2.29212317270424),(38,87,1.07562486648152),(38,90,1.16182439649647),(38,103,-1.43867305520798),(38,105,-1.26056703390606),(38,106,0.409939878536332),(38,111,1.43998535111545),(38,115,0.635853144932401),(39,87,0.274697103793451),(39,89,-0.458174382763146),(39,91,-2.54838709677419),(39,94,-1.35779900509659),(39,97,-0.236136967070528),(39,98,-0.819147312845241),(39,107,1.87765129551073),(39,108,-1.72130497146519),(39,109,0.445722830896939),(39,111,0.10879848628193),(39,113,-1.41216772972808),(39,116,2.64876247444075),(39,118,-0.314218573564867),(40,88,1.06877346110416),(40,92,-0.191885128330332),(40,99,-2.10272530289621),(40,104,-1.26496169927061),(40,110,-2.9544206060976),(40,116,-1.47616504409925),(40,118,0.960798974578082),(41,88,0.754921109653005),(41,93,0.341807306131169),(41,96,-2.42121646778771),(41,97,-1.77440717795343),(41,100,0.777489547410504),(41,101,-2.60467848750267),(41,104,-0.97613452558977),(41,105,-0.980224005859554),(41,106,1.33616138187811),(41,107,-1.11807611316263),(41,109,-2.10043641468551),(41,110,0.839106418042543),(41,111,-0.760765404217658),(41,112,-1.44506668294321),(42,85,2.43453779717399),(42,86,2.04051332132939),(42,87,1.26618243964965),(42,99,-2.01147495956298),(42,100,-1.31600390636921),(42,103,-1.84858241523484),(42,109,-0.415173802911466),(42,113,1.01249732963042),(43,85,1.38641010773034),(43,88,-0.162739951780755),(43,89,1.620151371807),(43,93,-0.812082277901547),(43,97,0.828623310037538),(43,98,0.831781975768303),(43,101,-0.0178380687887203),(43,102,0.0772576067384869),(43,103,0.731192968535417),(43,105,-0.426190984832301),(43,110,0.576952421643727),(43,112,-1.30214850306711),(43,114,0.765587328714866),(43,116,-0.348902859584338),(44,89,0.969725638599811),(44,98,1.24796288949248),(44,99,1.5585497604297),(45,87,2.17789239173559),(45,88,0.127506332590716),(45,90,-0.127903073213904),(45,91,2.05290383617664),(45,95,2.36159855952635),(45,98,-0.986419263283181),(45,108,-1.785439619129),(45,109,-1.9506057924131),(45,112,2.45185705130161),(45,115,-0.316965239417707),(46,85,-2.64967802972503),(46,89,-1.68918424024171),(46,91,-2.05893124179815),(46,94,-2.99127170628987),(46,97,-2.34275337992492),(46,100,-0.960448011719108),(46,101,-0.646137882625813),(46,108,-0.171285134434034),(46,112,0.832468642231513),(47,86,0.397991882076479),(47,91,-1.69049653614917),(47,92,0.475417340617084),(47,94,-1.81380657368694),(47,95,1.07878353221229),(47,100,0.624195074312571),(47,101,-1.02122562334056),(47,104,-0.354136783959471),(47,105,-1.98051393169958),(47,108,2.08136234626301),(47,112,-2.47627185888241),(47,114,0.80108035523545),(47,118,2.18398083437605),(48,86,2.19360942411573),(48,91,1.26200140385144),(48,98,-0.784508804589984),(48,99,0.693624683370464),(48,100,0.749534592730491),(48,103,-2.41918698690756),(48,105,-0.650212103640858),(48,106,-1.03091525009919),(48,111,0.228370006408887),(48,115,-2.30607013153478),(49,87,0.346385082552568),(49,89,-1.64415417950987),(49,93,-0.932325205236976),(49,94,-2.9580370494705),(49,95,0.318597979674673),(49,102,-0.0749229407635731),(49,113,-2.01516769920957),(49,114,-2.00271614734336),(50,89,-0.166127506332591),(50,105,0.623645741142003),(50,107,1.82638019959105),(51,87,-0.27858821375164),(51,92,-1.93243202002014),(51,97,0.97865230262154),(51,98,2.01443525498215),(51,103,0.603656117435224),(51,106,0.803155613879818),(51,112,2.48298593096713),(51,118,2.05633716849269),(52,89,-1.43565172276986),(52,97,-1.96685689870907),(52,106,-1.07708975493637),(52,110,-1.56839197973571),(52,111,1.08716086306345),(52,113,-1.07925656910916),(52,114,1.49436933500168),(52,118,2.07142857142857),(53,88,-0.818430127872555),(53,90,0.981185338908048),(53,92,1.17027802362133),(53,94,-1.59425641651662),(53,104,-0.290917691579943),(53,105,0.262001403851436),(53,109,-1.25446333201086),(54,85,1.31859797967467),(54,91,2.14819788201544),(54,94,-0.721854304635762),(54,96,0.350810266426588),(54,111,-0.32959990234077),(54,112,-2.62088381603442),(54,113,-0.43786431470687),(54,118,1.2648396252327),(55,87,1.09796441541795),(55,95,2.10364085818049),(55,107,1.76206244087039),(55,110,-0.0412152470473342),(55,117,-2.68237861262856),(56,107,-1.57329020050661),(56,111,-1.55774101992859),(56,113,1.3511764885403),(56,114,2.47468489638966),(57,87,0.771767326883755),(57,90,3.08911404766991),(57,91,-1.45634327219459),(57,92,-0.65752128666036),(57,93,-1.07148960844752),(57,94,-0.181585131382183),(57,95,-0.745948667867061),(57,96,-1.89890743736076),(57,100,-2.22281563768426),(57,102,-1.63220618305002),(57,103,-0.247276223029267),(57,115,-1.73450422681356),(58,86,-1.22005371257668),(58,87,0.705710013122959),(58,89,0.422116763817255),(58,90,0.8068025757622),(58,95,-2.69913327433088),(58,96,-0.337168492690817),(58,101,0.823664052247688),(58,103,-0.882671590319529),(58,109,-1.95205542161321),(58,110,-0.453917050691244),(58,113,-1.52949613940855),(58,114,-2.10957670827357),(58,115,-2.33751945554979),(58,118,0.252189703054903),(59,85,0.0640888698995941),(59,86,-1.69045075838496),(59,90,-1.78966643269143),(59,91,1.25321207312235),(59,93,0.51860103152562),(59,97,1.56010620441298),(59,98,-0.410962248603778),(59,100,-2.37212744529557),(59,102,-0.409909360026856),(59,112,0.303872798852504),(59,114,-0.922315134128849),(60,85,0.033112582781457),(60,87,0.0984221930600909),(60,90,0.96066164128544),(60,91,-0.493881038850063),(60,96,1.33336893826106),(60,100,1.48083437604907),(60,101,0.379573961607715),(60,105,1.18288216803491),(60,107,2.13225196081423),(60,109,-3.24178289132359),(60,110,-0.0479140598773156),(60,114,0.817621387371441),(61,89,-0.717612231818598),(61,94,-1.87949766533402),(61,96,1.40202032532731),(61,98,-1.770180364391),(61,100,-1.49710074159978),(61,102,-0.313974425489059),(61,103,-0.0616168706320383),(61,114,1.22997222815638),(61,115,-3.12359996337779),(62,93,-0.966978972746971),(62,95,1.92385631885739),(62,107,-2.76975310525834),(62,109,-0.127277443769646),(62,110,0.599139378032777),(62,111,0.336085085604419),(63,87,1.36860255745109),(63,90,-0.712897122104556),(63,93,-0.0489516891994995),(63,97,2.65382854701376),(63,100,2.02134769737846),(63,103,0.456221198156682),(63,104,0.80260628070925),(63,108,1.95980712302011),(63,111,-2.12385937070833),(63,114,0.454390087588122),(63,117,1.43636890774255),(64,87,-1.21984008301035),(64,94,0.233390301217689),(64,99,-0.746024964140751),(64,110,-1.95059053315836),(64,112,-0.247352519302957),(64,116,1.00262459181494),(65,87,-0.323587755973998),(65,88,-0.373409222693564),(65,90,0.347529526657918),(65,97,-1.94169438764611),(65,99,0.916547135837886),(65,107,-2.3127842036195),(65,110,-0.124408703878903),(65,111,-0.959501937925352),(65,114,1.88035218359935),(65,116,-1.36642048402356),(65,117,-3.38810388500626),(66,85,-1.7049623096408),(66,102,0.441618091372417),(66,105,0.985564745017853),(66,108,-1.64929654835658),(66,111,2.37899410992767),(66,115,-1.33556627094333),(66,118,2.30414746543779),(67,86,-2.2054048280282),(67,90,2.02665791802728),(67,92,0.0674459059419538),(67,104,-0.473113193151646),(67,109,-2.20331431012909),(67,111,-1.15684987945189),(68,87,1.12945951719718),(68,88,1.18419446394238),(68,90,2.2166508987701),(68,93,-0.50289925840022),(68,95,-2.21304971465194),(68,96,1.03704947050386),(68,97,-0.419583727530747),(68,103,0.511139255958739),(68,107,3.33779412213508),(68,112,-1.6497085482345),(68,114,-0.644260994293039),(69,87,-2.48558000427259),(69,88,-1.64203314310129),(69,92,2.25307473982971),(69,94,1.03749198889126),(69,95,2.25074007385479),(69,97,0.378673665578173),(69,108,-0.583208716086306),(69,113,-0.140873439741203),(69,114,-1.66997283852657),(69,118,0.788476210821863),(70,85,0.740348521378216),(70,86,1.18613238929411),(70,87,-1.40739158299509),(70,90,1.86661885433515),(70,96,-2.13414410840175),(70,97,-1.53086947233497),(70,99,-0.58508560441908),(70,105,-1.52381969664602),(70,107,1.55301065095981),(70,109,-1.98222296823023),(70,110,0.224402600177007),(70,111,0.295068208868679),(71,85,2.47344889675588),(71,93,-1.78485976744896),(71,96,-0.75960570085757),(71,100,-1.15269936216315),(71,104,-0.963408307138279),(71,106,1.86497085482345),(71,111,0.330072939237648),(71,113,-0.751213110751671),(72,94,-2.97413556321909),(72,96,0.186773277993103),(72,99,-0.0915707876827296),(72,110,3.17732779931028),(72,112,2.13576158940397),(72,114,2.09555345316935),(72,115,0.947691274758141),(72,116,-0.780465102084414),(73,88,1.21916867580187),(73,94,2.16197698904385),(73,99,-1.17853328043458),(73,100,0.200567644276254),(73,106,2.23554185613575),(73,110,-2.73328348643452),(73,115,1.03439436017945),(74,90,1.90420239875484),(74,94,0.649021881771294),(74,99,-0.577074495681631),(74,102,-0.825830866420484),(74,106,0.732413708914457),(74,107,1.8241523483993),(74,110,0.281365398113956),(74,113,-1.42828150273141),(74,116,1.14973906674398),(75,85,3.11687063203833),(75,86,-1.40588091677602),(75,93,0.713736381115146),(75,98,0.447630237739189),(75,103,2.00872829371014),(75,105,0.950453199865719),(75,111,-0.854304635761589),(75,117,-0.809289834284494),(76,86,-0.471724600970489),(76,89,3.22737815485092),(76,92,-2.37995544297616),(76,94,-1.48683126316111),(76,99,1.45970030823695),(76,101,-0.616321298867763),(76,103,0.935071871089816),(76,106,-1.39521469771416),(76,110,-3.03749198889126),(76,113,-2.17406231879635),(77,88,-1.80361339152196),(77,91,-0.0179143650624104),(77,93,0.756218146305734),(77,98,1.42916653950621),(77,101,-0.773567918942839),(77,102,-1.0004425183874),(77,103,-0.804086428418836),(77,104,2.11612292855617),(77,105,0.720389416180914),(77,109,-0.711462752159185),(78,88,1.2246009704886),(78,93,0.0946073793755913),(78,94,-2.64963225196081),(78,101,-0.563951536606952),(78,104,-1.06721701712088),(78,110,0.149342326120792),(78,114,-2.06892605365154),(78,116,0.886379589220862),(78,117,1.59697256385998),(78,118,0.776329844050417),(79,87,0.480117191076388),(79,92,-1.19365520187994),(79,94,-0.021225623340556),(79,107,-0.327784051026948),(79,108,0.461989196447646),(79,114,1.42362743003632),(79,118,2.64308603167821),(80,87,-1.66760765404218),(80,88,1.08894619586779),(80,91,0.269096957304605),(80,99,0.787377544480728),(80,101,-2.29651783806879),(80,107,0.5917996765038),(80,113,0.95585497604297),(81,85,-0.0534836878566851),(81,86,-0.929074983977783),(81,90,0.49755851924192),(81,93,-2.22533341471603),(81,96,1.24542985320597),(81,97,1.63953062532426),(81,106,2.73923459578234),(81,107,0.7811822870571),(81,110,-2.45503097628712),(81,115,-1.14763328959014),(82,86,1.72704245124668),(82,92,-0.43549913022248),(82,110,-2.35328226569414),(82,112,0.114261299478133),(83,87,0.581789605395672),(83,91,1.308969389935),(83,93,-1.38416699728385),(83,101,0.316248054445021),(83,103,-2.23303933835871),(83,105,0.959044160283212),(83,108,-1.85268715475936),(84,85,-0.717810602130192),(84,86,-0.0610217596972564),(84,89,-1.00779747917112),(84,95,-3.00454725791192),(84,99,-0.497817926572466),(84,104,0.699179052095096),(84,111,0.402294991912595),(84,113,-0.255302591021455),(84,114,-0.839396343882565)]
orgname='BHNEAT_3_4'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()