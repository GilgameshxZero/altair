edge = [(0,85,3.20340586565752),(0,89,-1.01512955107273),(0,90,2.00384533219398),(0,93,-1.04531998657186),(0,98,-0.13814966277047),(0,101,0.545983764152959),(0,105,3.14951017792291),(0,108,-2.50167851802118),(0,113,0.970824304940947),(0,114,3.35505233924375),(0,117,3.56952116458632),(0,118,-2.85799737540819),(1,86,-0.279847102267525),(1,92,5.79051332132939),(1,98,2.78160954618976),(1,102,-6.46390423291726),(1,104,-1.44779808954131),(1,107,-3.13373973815119),(1,108,-0.913037507248146),(1,109,0.699926755577257),(1,113,-3.49788659321879),(2,87,-1.50544755394147),(2,88,1.97981200598163),(2,100,0.375453962828455),(2,106,1.13449507126072),(2,108,-2.52455977050081),(2,110,-0.147877437665944),(2,113,-2.8604312265389),(2,118,2.91116061891537),(3,89,3.95024719992676),(3,92,0.13845484786523),(3,97,-0.627117221594897),(3,99,3.48653370769372),(3,101,-5.74834437086093),(3,103,-1.78241828669088),(3,105,1.3054979094821),(3,108,-2.18169194616535),(3,109,-3.19814142277291),(3,111,-0.0479140598773156),(3,112,-5.40041810357982),(3,116,-2.77002014221625),(4,90,5.8789864803003),(4,91,-0.0574053163243504),(4,97,-0.210226752525406),(4,99,-1.11315500350963),(4,101,0.321863460188604),(4,108,-3.597903378399),(4,113,-6.5462202826014),(4,118,0.858317819757683),(5,86,0.52310251167333),(5,87,-2.70786156804102),(5,89,-0.2018112735374),(5,92,-2.60274819177831),(5,93,0.368648335215308),(5,99,5.10994293038728),(5,104,-1.85802789391766),(5,114,-1.33316293832209),(5,118,1.42871639149144),(6,89,-2.70381023590808),(6,92,-4.10706656086917),(6,94,0.182348094119083),(6,100,0.979247413556322),(6,101,-1.81186101870785),(6,103,-1.78617969298379),(6,107,0.408902249214148),(6,110,-0.275894955290384),(6,113,-2.01699880977813),(7,85,3.98705252235481),(7,86,-0.147556993316446),(7,90,-0.974967192602313),(7,95,0.721381267738884),(7,99,0.444547868282113),(7,100,2.39938810388501),(7,104,-2.34109775078585),(7,106,-0.614795373393964),(7,108,2.03278450880459),(7,112,-1.30270546586505),(7,116,-0.836130863368633),(8,92,-2.63965269936216),(8,93,0.158139286477248),(8,95,-1.35303048799097),(8,99,1.13551744132817),(8,106,0.500274666585284),(8,107,-1.22486037781915),(8,115,-1.38156529435102),(8,116,1.36634418774987),(8,118,-1.22646259956664),(9,85,-0.363170262764367),(9,87,1.49212622455519),(9,98,-3.3457365642262),(9,101,0.697424237800226),(9,103,4.34270760216071),(9,105,2.56852168340098),(9,106,5.05108798486282),(9,113,0.0438550981170078),(10,89,-0.638477736747337),(10,96,1.76741080965606),(10,106,1.51574755088961),(10,108,3.07779168065432),(10,111,-1.40790276802881),(10,112,2.09257789849544),(10,114,1.99255348368786),(10,115,-1.30665761284219),(10,116,-1.54786065248573),(10,117,-1.18572038941618),(11,89,-1.27169103061007),(11,97,5.15173039948729),(11,105,-1.30977050080874),(11,112,-2.68552964873196),(11,115,-1.01596118045595),(12,92,4.51953184606464),(12,93,3.21877956480605),(12,94,0.505615405743583),(12,97,-1.32424390392773),(12,98,1.89764091921751),(12,99,4.26282540360729),(12,108,1.36919003875851),(12,116,-2.47337260048219),(13,86,0.957670827356792),(13,87,3.83838923306986),(13,90,1.76316110721152),(13,99,2.81111331522568),(13,102,3.01293984801782),(13,104,-2.00994903408917),(13,113,-0.112094485305338),(13,116,-3.25887325663015),(13,118,-0.299615466780602),(14,90,-8),(14,93,4.43823053682058),(14,95,-6.94174016541032),(14,102,0.732291634876553),(14,104,0.556581316568499),(14,106,0.32059694204535),(14,109,0.240058595538194),(14,110,-0.767174291207618),(14,111,-2.26622058778649),(15,85,-2.39265114291818),(15,92,0.920285653248695),(15,99,-0.249305703909421),(15,101,-3.41883602404859),(15,104,3.91766106143376),(15,108,-0.0774407177953429),(15,117,-2.05198828089236),(16,86,0.927304910428175),(16,87,-3.72700430310984),(16,88,3.87853633228553),(16,90,-0.268715475936155),(16,91,-0.880153813287759),(16,95,-3.18491927854244),(16,97,-2.67896053956725),(16,98,0.85353404339732),(16,99,-3.42165898617512),(16,101,-0.256767479476302),(16,108,7.6311761833552),(16,110,1.14780114139225),(17,89,3.04673146763512),(17,96,-2.34318063905759),(17,99,0.00862147892696921),(17,101,0.0699407940916168),(17,106,-3.67114780114139),(17,107,3.0997726371044),(17,109,-6.28763695181127),(18,90,-0.0804162724692526),(18,91,1.77270577105014),(18,93,0.573717459639271),(18,99,0.348559526352733),(18,102,2.243797112949),(18,103,-2.04604480117191),(18,104,4.3694875942259),(18,110,-2.7202215643788),(18,111,-0.788369396038697),(18,116,3.20501571703238),(18,117,0.461325418866542),(18,118,-0.168706320383313),(19,87,-2.35831781975768),(19,89,-4.6589632862331),(19,93,1.44867549668874),(19,95,-2.17886898403882),(19,101,-1.93792535172582),(19,105,-5.45744956816309),(19,115,-3.43528550065615),(20,88,-5.15452284310434),(20,101,3.61389507736442),(20,103,0.777405621509445),(20,104,-1.00978118228706),(20,105,2.06195257423627),(20,106,-1.31945249794),(20,111,0.200888088625751),(20,116,4.8957716605121),(21,86,1.22478408154546),(21,87,0.119098483230079),(21,94,4.61860255745109),(21,96,3.29760124515519),(21,101,-2.31818597979675),(21,102,4.18319498275704),(21,105,1.30327005829035),(21,107,3.10698263496811),(21,108,3.6537217322306),(22,86,-1.51890621662038),(22,88,-1.54202398754845),(22,91,0.526612140263069),(22,92,-4.01952421643727),(22,93,-2.38319040498062),(22,98,1.28070925016022),(22,106,-4.72597430341502),(22,115,5.56949827570421),(22,117,-4.42945646534623),(23,85,-0.109965819269387),(23,86,0.232657856990265),(23,88,-2.19971312601093),(23,90,-0.949629200109867),(23,97,-1.24826807458724),(23,104,-2.2659230323191),(23,112,0.32372508926664),(23,114,3.7994933927427),(23,115,-0.389110995818964),(23,116,-0.391796624652852),(24,89,-5.07782982879116),(24,90,-4.16685232093265),(24,91,1.76839503158666),(24,101,3.49004333628346),(24,107,1.26347392193365),(24,108,4.07676931058687),(24,110,-3.94132053590503),(24,112,-3.73278756065554),(25,90,-1.80819116794336),(25,92,0.154187139500107),(25,94,-5.74666585283975),(25,98,-1.78228095339824),(25,105,0.624286629840999),(25,108,6.24088259529405),(25,109,2.98615985595264),(25,115,-0.442823572496719),(26,85,0.503578295236061),(26,87,-3.94878994109928),(26,89,0.452856532486954),(26,95,-2.08182012390515),(26,98,-1.23327585680715),(26,100,-0.198675496688742),(26,101,-0.471053193762017),(26,102,0.295983764152959),(26,103,-0.630771813104648),(26,104,3.26856288338878),(26,107,-3.23229163487655),(26,109,3.89034699545274),(26,112,2.7904370250557),(26,113,-3.60120700704978),(26,117,-2.45832697531053),(27,85,-1.71369060335093),(27,87,-1.25308999908444),(27,94,1.75870540482803),(27,100,-2.41622669148839),(27,102,-3.27406384472182),(27,103,0.889919736320078),(27,104,1.29413739432966),(27,105,-2.2792138431959),(27,108,0.232245857112338),(27,110,-0.0433133945738089),(27,114,3.17338328196051),(28,87,1.11012604144414),(28,88,2.13943906979583),(28,97,1.3814966277047),(28,99,-4.05272072511979),(28,104,-2.46824549089022),(28,113,1.30886257515183),(28,114,-2.84127323221534),(29,88,-1.79670094912564),(29,91,-1.7788933988464),(29,102,0.553987243263039),(29,105,-2.23830378124332),(29,116,-0.992797631763665),(30,95,3.77678762169256),(30,96,4.09752189703055),(30,99,0.0346385082552568),(30,101,1.92785424359874),(30,104,2.34187597277749),(30,109,1.85514389477218),(30,110,4.25511185033723),(30,114,2.25241859187597),(30,118,1.38270973845637),(31,85,4.26490829187902),(31,92,2.39362010559404),(31,94,0.785874507889035),(31,96,3.53147984252449),(31,99,2.19038972136601),(31,103,-0.239432966093936),(31,107,-0.43664357432783),(31,108,3.52719199194311),(31,109,-0.197378460036012),(31,111,0.71210364085818),(31,112,-0.263565477462081),(31,117,4.00455488753929),(32,86,-1.26628925443281),(32,87,0.591700491348002),(32,89,-0.637676625873592),(32,92,-3.53332621234779),(32,98,2.06752220221564),(32,99,-4.05490279854732),(32,104,5.00170903653066),(32,106,3.14014099551378),(32,109,-0.809350871303446),(32,116,0.766747032074953),(32,118,-0.414502395702994),(33,96,-2.3317590868862),(33,98,-0.385067293313395),(33,108,1.00013733329264),(33,110,-2.90585039826655),(33,111,-3.05878627887814),(33,114,-0.0362636188848537),(34,85,0.815683462019715),(34,90,1.3799707022309),(34,99,-1.35250404370251),(34,104,0.483733634449293),(34,109,0.563371684926908),(35,86,1.1020615253151),(35,87,1.97523422956023),(35,97,-1.00207525864437),(35,98,2.43991668446913),(35,100,-1.59130375072481),(35,104,-3.98075045014801),(35,107,-3.79915768913846),(35,109,0.98055970946379),(35,110,-0.277275917844173),(35,112,1.16611224707785),(36,85,-0.977408673360393),(36,87,-2.50579088717307),(36,90,1.40305032502213),(36,91,1.57464064455092),(36,104,1.77018799401837),(36,107,2.49356822412793),(36,109,3.04910428174688),(36,112,0.90957365642262),(36,115,4.55118717001862),(36,117,-1.15398113956114),(36,118,2.040215765862),(37,85,0.690481276894436),(37,86,-4.94502853480636),(37,87,1.32568590350047),(37,91,4.02245399334696),(37,99,-0.284279915768914),(37,105,-1.52999969481491),(37,111,0.0609378337961977),(37,112,-0.0865276039918208),(37,118,0.136082033753472),(38,87,-0.209906308175909),(38,90,-4.15892513809625),(38,103,1.52607043671987),(38,105,0.533616138187811),(38,106,-3.14725943784906),(38,111,-0.243758964812159),(38,115,1.17974639118625),(39,87,1.94354838709677),(39,89,-2.76879177220985),(39,91,-2.74567400128178),(39,94,1.80098117007965),(39,97,0.0721762749107333),(39,98,-1.93556016724143),(39,107,-0.1029236732078),(39,108,1.95578630939665),(39,109,-0.982749412518693),(39,111,-2.7038789025544),(39,113,0.054322946867275),(39,116,-0.813447981200598),(39,118,-4.44348735007782),(40,88,-2.29082613605152),(40,92,-1.18907742545854),(40,99,1.64357432782983),(40,104,0.80092776268807),(40,110,1.93496505630665),(40,116,2.23358867152928),(40,118,-3.4926908169805),(41,88,-5.1890621662038),(41,93,1.54676961577197),(41,96,-0.590296639912107),(41,97,-0.996467482528153),(41,100,1.00669118320261),(41,101,1.29063539536729),(41,104,3.20899075289163),(41,105,1.10286263618885),(41,106,2.74957274086734),(41,107,-4.35300759910886),(41,109,2.04275643177587),(41,110,2.73186437574389),(41,111,1.6363948484756),(41,112,7.29110843226417),(42,85,2.1697439497055),(42,86,1.66406750694296),(42,87,3.35778374584185),(42,99,3.51378673665578),(42,100,-4.12483596301157),(42,103,2.26218451490829),(42,109,-2.51076540421766),(42,113,-3.26949369792779),(43,85,-2.40745262001404),(43,88,-4.70568712424085),(43,89,-3.23185674611652),(43,93,3.75453199865719),(43,97,2.00544755394147),(43,98,0.491988891262551),(43,101,1.92464980010376),(43,102,2.12124240852077),(43,103,0.491576891384625),(43,105,-1.06303598132267),(43,110,-1.10624256111332),(43,112,-2.08311716055788),(43,114,0.76349681081576),(43,116,1.25148777733695),(44,89,-2.26699118015076),(44,98,-1.82512131107517),(44,99,-2.06976531266213),(45,87,-0.35445722830897),(45,88,-4.56593523972289),(45,90,-0.352900784325693),(45,91,-0.718123416852321),(45,95,0.992767113254189),(45,98,-2.92680135502182),(45,108,2.42149876400037),(45,109,2.72069460127567),(45,112,2.1474196600238),(45,115,-0.000534073915829936),(46,85,1.18504898220771),(46,89,0.387585070345164),(46,91,0.675786614581744),(46,94,-0.0160451063570055),(46,97,0.366756187627796),(46,100,4.30987731559191),(46,101,-1.68918424024171),(46,108,-3.03453169347209),(46,112,0.0798516800439466),(47,86,-2.27100436414686),(47,91,-0.181142612994781),(47,92,2.3993652150029),(47,94,3.08541367839595),(47,95,0.447134311960204),(47,100,0.46607104709006),(47,101,-0.253456221198157),(47,104,-1.47511215552232),(47,105,4.24541459395123),(47,108,1.50440992461928),(47,112,2.37036500137333),(47,114,1.52981658375805),(47,118,-0.856479079561755),(48,86,4.11789300210578),(48,91,1.47320474868007),(48,98,1.33449812311167),(48,99,-1.08000427259133),(48,100,-2.77123325296792),(48,103,-0.684301278725547),(48,105,1.40063173314615),(48,106,-4.99331644642476),(48,111,-1.83146916104617),(48,115,-2.56420331431013),(49,87,0.00849940488906514),(49,89,-0.355479598376415),(49,93,1.01489303262429),(49,94,4.85484633930479),(49,95,2.34891811883908),(49,102,1.26628925443281),(49,113,-1.01528977324747),(49,114,1.80525376140629),(50,89,-1.20157475508896),(50,105,-0.0939970091860715),(50,107,-0.235221411786248),(51,87,1.15907773064364),(51,92,5.14028595843379),(51,97,0.346003601184118),(51,98,2.13034455397198),(51,103,0.00588244270149829),(51,106,2.98151341288491),(51,112,1.04636524552141),(51,118,-3.71068453016755),(52,89,-0.617915890987884),(52,97,2.97876674703207),(52,106,-0.393765068514054),(52,110,-4.45734275337992),(52,111,1.15627002777184),(52,113,-1.70422986541337),(52,114,-0.284119693594165),(52,118,1.9184392834254),(53,88,4.56617175817133),(53,90,-2.53501998962371),(53,92,-0.646511734366893),(53,94,0.0955992309335608),(53,104,-1.93913846247749),(53,105,3.12397381511887),(53,109,3.55226294747765),(54,85,-1.75649281289102),(54,91,-0.129093295083468),(54,94,-1.88451796014283),(54,96,-1.93403424176763),(54,111,0.834490493484298),(54,112,1.67348246711631),(54,113,0.958410901211585),(54,118,-0.98094119083224),(55,87,0.100863673818171),(55,95,0.339976195562609),(55,107,0.206419568468276),(55,110,-3.86761070589312),(55,117,0.650242622150334),(56,107,1.05642872402112),(56,111,2.03427991576891),(56,113,-2.42868587298196),(56,114,1.31687368388928),(57,87,1.05992309335612),(57,90,3.36792352061525),(57,91,-0.960913418988617),(57,92,-0.0924405652027953),(57,93,2.33977782525101),(57,94,-3.44289986877041),(57,95,-1.68208105716117),(57,96,0.860591448713645),(57,100,-1.48009430219428),(57,102,-4.37246314889981),(57,103,1.07886745811335),(57,115,-4.79945524460585),(58,86,-3.29744102298044),(58,87,1.51359599597156),(58,89,3.38261055330058),(58,90,-3.4595400860622),(58,95,1.70064394054994),(58,96,4.70007934812464),(58,101,-3.10566270943327),(58,103,0.662648396252327),(58,109,-2.7294991912595),(58,110,6.02132480849635),(58,113,-0.214613788262581),(58,114,-2.39654225287637),(58,115,3.35017700735496),(59,85,-0.524918362987152),(59,86,-4.40443128757591),(59,90,0.864642780846584),(59,91,-1.99926755577258),(59,93,3.43324076052126),(59,97,-1.75885799737541),(59,98,3.63032166508988),(59,100,4.53002258369701),(59,102,2.90043336283456),(59,112,0.708716086306345),(59,114,0.773476363414411),(60,85,2.06177709280679),(60,87,0.46782586138493),(60,90,1.62160100100711),(60,91,-0.334788048951689),(60,96,1.526383251442),(60,100,1.33327738273263),(60,101,-0.896404919583728),(60,105,-0.963774529251991),(60,107,-2.59261604663228),(60,109,3.28719443342387),(60,110,2.03985717337565),(60,114,4.69870601519822),(61,89,3.59813989684744),(61,94,-0.010528885769219),(61,96,0.714957121494186),(61,98,4.64213232825709),(61,100,-2.78881954405347),(61,102,3.4408093508713),(61,103,0.344019898068179),(61,114,-0.758713034455397),(61,115,0.562990203558458),(62,93,1.42750328073977),(62,95,0.648976104007081),(62,107,0.0815607165746024),(62,109,-4.24288155766472),(62,110,-2.5205999938963),(62,111,-1.42971587267678),(63,87,0.673596911526841),(63,90,1.39362773522141),(63,93,0.43855098117008),(63,97,3.19938505203406),(63,100,-0.28705710013123),(63,103,2.43301187170019),(63,104,0.47834711752678),(63,108,-1.61397137363811),(63,111,1.36004211554308),(63,114,2.11835840937529),(63,117,0.565584276863918),(64,87,0.682851649525437),(64,94,1.64876247444075),(64,99,1.58320871608631),(64,110,2.22060304574725),(64,112,2.34569841608936),(64,116,-2.62767418439283),(65,87,-0.439306314279611),(65,88,0.000656147953734254),(65,90,-0.0930814539017917),(65,97,5.98571733756523),(65,99,1.29773857844783),(65,107,1.61283455916013),(65,110,-7.66367076631977),(65,111,-0.278710287789544),(65,114,-4.80153813287759),(65,116,1.06143375957518),(65,117,-5.15625476851711),(66,85,0.561922055726798),(66,102,1.33307138279366),(66,105,0.426190984832301),(66,108,-0.589449751274148),(66,111,1.17022461622974),(66,115,2.71231727042451),(66,118,0.210867641224403),(67,86,5.84101382488479),(67,90,3.09938352610858),(67,92,-2.76221503341777),(67,104,-0.619342631305887),(67,109,-2.44749290444655),(67,111,1.94067201757866),(68,87,-1.42185735648671),(68,88,-0.369029816583758),(68,90,-1.47289193395795),(68,93,0.685140537736137),(68,95,-2.1497085482345),(68,96,-0.21752067629017),(68,97,-0.69205298013245),(68,103,0.988570818201239),(68,107,-2.07293160802026),(68,112,-0.940580462050233),(68,114,-0.0936384166997284),(69,87,3.31051057466353),(69,88,-1.0088351084933),(69,92,-2.16353343302713),(69,94,-0.683469649342326),(69,95,2.78736991485336),(69,97,-1.25843073824274),(69,108,1.59489730521561),(69,113,-1.53416547135838),(69,114,-0.719862971892453),(69,118,0.967650379955443),(70,85,0.97392193365276),(70,86,5.42555009613331),(70,87,-2.0010834070864),(70,90,3.01797540208136),(70,96,-2.37556077761162),(70,97,2.55829035309915),(70,99,4.29264961699271),(70,105,3.34260841700491),(70,107,-5.95692312387463),(70,109,-1.26628162480544),(70,110,-4.06159398174993),(70,111,-0.82905819879757),(71,85,1.44032105471969),(71,93,-0.904972991119114),(71,96,-1.46725363933226),(71,100,0.986594744712668),(71,104,4.12282174138615),(71,106,1.86193426313059),(71,111,5.3527024140141),(71,113,1.11667226172674),(72,94,1.2883693960387),(72,96,-1.21692556535539),(72,99,-2.8108386486404),(72,110,-0.449575792718283),(72,112,0.702383495590075),(72,114,-0.525070955534532),(72,115,1.46595660267953),(72,116,-0.0757621997741631),(73,88,0.126346629230628),(73,94,0.421063875240334),(73,99,-2.02566606646931),(73,100,-0.429013946958831),(73,106,-0.128101443525498),(73,110,1.72589800714133),(73,115,-4.25017548142949),(74,90,1.00345622119816),(74,94,1.65300454725791),(74,99,2.23471785637989),(74,102,0.941038239692373),(74,106,-0.33143101290933),(74,107,-1.0505996887112),(74,110,-2.90378276924955),(74,113,3.06337168492691),(74,116,-0.163350321970275),(75,85,-1.88375499740593),(75,86,-1.3380840479751),(75,93,2.4816888943144),(75,98,-1.08722952970977),(75,103,0.552247688222907),(75,105,-2.18688009277627),(75,111,-2.86505478072451),(75,117,-1.02679525131993),(76,86,0.847346415601062),(76,89,0.505005035554064),(76,92,-4.89181951353496),(76,94,-1.75336466566973),(76,99,2.14453566087832),(76,101,-0.828119754631184),(76,103,2.08307901242103),(76,106,-3.1480605487228),(76,110,1.35502182073428),(76,113,1.95608386486404),(77,88,0.490508743552965),(77,91,-0.110965300454726),(77,93,-1.59218878749962),(77,98,-1.17679372539445),(77,101,1.41846980193487),(77,102,-2.4725333414716),(77,103,0.454268013550218),(77,104,-2.2567674794763),(77,105,1.22669148838771),(77,109,-2.7285149693289),(78,88,-0.823412274544511),(78,93,2.00309762871181),(78,94,-0.451849421674245),(78,101,3.40145573290201),(78,104,1.04715109714042),(78,110,-0.643101290932951),(78,114,5.16720328379162),(78,116,1.14993743705557),(78,117,1.5934476760155),(78,118,0.538270210882901),(79,87,2.57669301431318),(79,92,-1.29375591296121),(79,94,2.78810235908078),(79,107,1.78853724784082),(79,108,-0.0399334696493422),(79,114,2.23477126377148),(79,118,-1.18259224219489),(80,87,-0.613055818353832),(80,88,-0.449232459486678),(80,91,2.51832636494034),(80,99,2.08742027039399),(80,101,-3.12082277901547),(80,107,0.287331766716514),(80,113,-2.17387157811212),(81,85,-1.3898892178106),(81,86,0.125278481398968),(81,90,-2.08868678853725),(81,93,-2.36596270638142),(81,96,-1.97401348918119),(81,97,-4.5158009582812),(81,106,2.23396252327036),(81,107,-2.2049623096408),(81,110,2.0455793939024),(81,115,-2.16351054414502),(82,86,-0.472655415509507),(82,92,-2.07121494186224),(82,110,-0.66621143223365),(82,112,-0.554826502273629),(83,87,-0.723288674581133),(83,91,2.61780144657735),(83,93,3.36246070741905),(83,101,-0.720419934690389),(83,103,0.774941251869259),(83,105,1.84556108279672),(83,108,-0.216368602557451),(84,85,-1.18006683553575),(84,86,-3.69556260872219),(84,89,-0.681402020325327),(84,95,1.34258552812281),(84,99,-3.47170934171575),(84,104,3.19219794305246),(84,111,0.397961363567003),(84,113,-0.831400494399853),(84,114,-1.22730185857723),(10,119,-0.842844935453352),(119,109,3.71298104800562),(58,120,1.11608478041932),(120,118,5.43172246467482),(95,104,1.36027100436415)]
orgname='BHNEAT_15_13'
cnodes = 121

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()