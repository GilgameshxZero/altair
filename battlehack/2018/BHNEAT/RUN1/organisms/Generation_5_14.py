edge = [(0,85,2.56929227576525),(0,89,-2.58900723288675),(0,90,0.184865871150853),(0,93,1.03587450788903),(0,98,0.93618579668569),(0,101,-0.163960692159795),(0,105,-1.11600085451827),(0,108,0.767159031952879),(0,113,1.25899533066805),(0,114,-0.816888943144017),(0,117,0.741523483993042),(0,118,0.491027558214057),(1,86,0.237678151799066),(1,92,0.360423596911527),(1,98,0.0947599719229713),(1,102,2.3588061159093),(1,104,-0.905835139011811),(1,107,-0.994201483199561),(1,108,0.10559404278695),(1,109,-0.623722037415693),(1,113,2.3710135196997),(2,87,-1.91874446852016),(2,88,4.33423871578112),(2,100,-0.39509262367626),(2,106,-2.07185583056124),(2,108,-2.1323587755974),(2,110,1.62570574053163),(2,113,-0.360576189458907),(2,118,-2.44936979277932),(3,89,0.308755760368664),(3,92,0.549272133548998),(3,97,-2.7970061342204),(3,99,1.28058717612232),(3,101,2.06138798181097),(3,103,-0.250236518448439),(3,105,-0.254493850520341),(3,108,-1.99627674184393),(3,109,-2.39767143772698),(3,111,2.03367717520676),(3,112,1.51058992278817),(3,116,1.55807672353282),(4,90,-0.606006042664876),(4,91,-0.705359050263985),(4,97,-2.12213507492294),(4,99,-0.232795190282907),(4,101,0.21660512100589),(4,108,1.38981292153691),(4,113,0.814233832819605),(4,118,-2.35473189489425),(5,86,-1.11438337351604),(5,87,-1.71112704855495),(5,89,1.58531449324015),(5,92,-2.24915311136204),(5,93,0.400692770165105),(5,99,1.40977202673421),(5,104,1.98661763359477),(5,114,-1.20891445661794),(5,118,-1.2566454054384),(6,89,-0.215277565843684),(6,92,1.43353068636128),(6,94,0.0878933072908719),(6,100,0.382000183111057),(6,101,-0.775795770134587),(6,103,-0.708868678853725),(6,107,-1.10881374553667),(6,110,0.078463087862789),(6,113,-2.961851863155),(7,85,-0.738303781243324),(7,86,-0.994842371898556),(7,90,-3.24909207434309),(7,95,-0.427823725089267),(7,99,-0.314294869838557),(7,100,-1.01948606830042),(7,104,-0.187475203711051),(7,106,-1.5301980651265),(7,108,1.46548356578265),(7,112,1.35586107974487),(7,116,-0.210272530289621),(8,92,1.17755668813135),(8,93,0.258659627063815),(8,95,1.46299630726035),(8,99,-1.7253639332255),(8,106,1.05343791009247),(8,107,-1.84279915768914),(8,115,2.56909390545366),(8,116,-2.57405316324351),(8,118,-2.56263924069948),(9,85,-2.07342753379925),(9,87,-0.413251136814478),(9,98,-2.19972838526566),(9,101,-0.248985259559923),(9,103,0.0820947904904323),(9,105,-0.129581591235084),(9,106,1.86541337321085),(9,113,1.40391247291482),(10,89,1.72101504562517),(10,96,0.342921231727042),(10,106,-1.23889889217811),(10,108,-0.718451490829188),(10,109,-1.40353099154637),(10,111,-5.65016632587664),(10,112,-2.29758598590045),(10,114,0.287697988830226),(10,115,1.48673970763268),(10,116,-1.96516312143315),(10,117,1.78208258308664),(11,89,-1.54919583727531),(11,97,0.365779595324564),(11,105,-0.92748802148503),(11,112,1.72893459883419),(11,115,0.779290139469588),(12,92,0.741828669087802),(12,93,0.908261360515152),(12,94,1.53454695272683),(12,97,-1.34319589831233),(12,98,0.749168370616779),(12,99,-1.33922849208045),(12,108,-2.04052858058412),(12,116,3.76111636707663),(13,86,-0.210226752525407),(13,87,-1.99461348307749),(13,90,1.9292428357799),(13,99,-1.3087710196234),(13,102,0.907391582995086),(13,104,0.583376567888424),(13,113,0.354701376384777),(13,116,2.08578753013703),(13,118,-0.266655476546525),(14,90,-4.46046327097385),(14,93,-0.160420545060579),(14,95,-2.00476088747826),(14,102,-1.37290566728721),(14,104,-0.778298287911618),(14,106,1.72594378490555),(14,109,1.53167821283609),(14,110,2.23645741142003),(14,111,-0.183294167912839),(15,85,1.23046052430799),(15,92,1.32790612506485),(15,99,-3.37142551957762),(15,101,0.147938474684897),(15,104,-2.85374004333628),(15,108,-2.33887752922147),(15,117,1.88230536820582),(16,86,-0.860087893307291),(16,87,0.498199407940916),(16,88,0.334955900753807),(16,90,0.192678609576708),(16,91,-0.969115268410291),(16,95,-1.80422376171148),(16,97,1.97886593218787),(16,98,-4.00131229590747),(16,99,1.36591692861721),(16,101,1.42632831812494),(16,108,-1.26155888546403),(16,110,2.00889614551225),(17,89,1.24297311319315),(17,96,3.37331766716514),(17,99,-0.175847651600696),(17,101,0.186468092898343),(17,106,1.84141056550798),(17,107,-1.53576769310587),(17,109,-1.59076204718162),(18,90,0.222907193212683),(18,91,-2.1309549241615),(18,93,0.64783165990173),(18,99,1.55728324228645),(18,102,2.16003906369213),(18,103,0.893841364787744),(18,104,0.281044953764458),(18,110,-0.860530411694693),(18,111,0.512848292489395),(18,116,0.847727896969512),(18,117,-1.92327646717734),(18,118,2.64783165990173),(19,87,2.15518662068545),(19,89,0.0195776238288522),(19,93,1.24332407605213),(19,95,-0.507827997680593),(19,101,-1.71178319650868),(19,105,-1.4870296334727),(19,115,1.18094424268319),(20,88,-0.335825678273873),(20,101,0.757057405316324),(20,103,-1.17300943021943),(20,104,2.45158238471633),(20,105,-0.99710074159978),(20,106,3.08757286294137),(20,111,1.51219214453566),(20,116,-2.93520920438246),(21,86,1.90658284249397),(21,87,2.0379497665334),(21,94,0.0856196783349104),(21,96,0.708868678853725),(21,101,1.62216559343242),(21,102,-1.66022217474899),(21,105,-3.14589373455),(21,107,-1.10754722739341),(21,108,0.65385906552324),(22,86,0.0990325632496109),(22,88,-1.53973509933775),(22,91,1.21938230536821),(22,92,-2.22878200628681),(22,93,0.699346903897214),(22,98,-1.57506027405621),(22,106,-3.42672505874813),(22,115,-3.09178441724906),(22,117,-2.71309549241615),(23,85,-2.90130314035463),(23,86,-0.154210028382214),(23,88,-1.97997985778375),(23,90,0.329248939481796),(23,97,0.657200842310862),(23,104,1.684682760094),(23,112,0.479445783867916),(23,114,-2.33352153080844),(23,115,-0.328806421094394),(23,116,-1.2331156346324),(24,89,-1.01293984801782),(24,90,-2.07614368114261),(24,91,2.17557298501541),(24,101,0.265419476912748),(24,107,1.21985534226508),(24,108,-0.468382824182867),(24,110,1.36629840998566),(24,112,-0.521973326822718),(25,90,-0.975951414532914),(25,92,2.93179113132115),(25,94,1.13513595995972),(25,98,2.69603564561907),(25,105,3.13183996093631),(25,108,-2.19328897976623),(25,109,0.518585772270882),(25,115,-0.467787713248085),(26,85,-0.890392773216956),(26,87,1.59199804681539),(26,89,-2.45445112460707),(26,95,2.097903378399),(26,98,-1.43078402050844),(26,100,0.735343485824152),(26,101,0.381786553544725),(26,102,4.26766258735923),(26,103,2.3497726371044),(26,104,-0.182729575487533),(26,107,0.818948942533647),(26,109,2.15401165807062),(26,112,-2.06907864619892),(26,113,-1.31319620349742),(26,117,-0.554429761650441),(27,85,-4.00082399975585),(27,87,-1.0594347972045),(27,94,0.571764275032807),(27,100,1.25659962767418),(27,102,-2.41164891506699),(27,103,1.05221716971343),(27,104,-3.25820184942167),(27,105,-0.940916165654469),(27,108,1.20505386516923),(27,110,2.05853450117496),(27,114,1.59459212012085),(28,87,0.283150730918302),(28,88,-3.31221961119419),(28,97,0.517670216986602),(28,99,1.24834437086093),(28,104,1.84060182500687),(28,113,1.84737693411054),(28,114,-1.31414227729118),(29,88,2.12805566576128),(29,91,0.157811212500381),(29,102,0.469359416486099),(29,105,-0.432004760887478),(29,116,2.52865688039796),(30,95,0.884502700888089),(30,96,1.23358867152928),(30,99,0.159993285927915),(30,101,-1.7956785790582),(30,104,-2.01307718131046),(30,109,-2.72939237647633),(30,110,1.47170934171575),(30,114,-1.4190038758507),(30,118,-1.80857264931181),(31,85,1.51446577349162),(31,92,2.75180822168645),(31,94,3.43797112949004),(31,96,-1.44227423932615),(31,99,0.0843073824274423),(31,103,-1.8469191564684),(31,107,-0.533539841914121),(31,108,3.23543504135258),(31,109,-2.17680898464919),(31,111,2.30245368816187),(31,112,-0.307931760612812),(31,117,0.622272408215583),(32,86,0.556810205389569),(32,87,1.33387249366741),(32,89,-1.60115359965819),(32,92,-3.07638782921842),(32,98,1.35865352336192),(32,99,-0.419766838587603),(32,104,2.04004028443251),(32,106,3.13182470168157),(32,109,-0.178975798821986),(32,116,-0.271019623401593),(32,118,2.08282723471786),(33,96,0.538315988647114),(33,98,3.00129703665273),(33,108,-1.17049165318766),(33,110,-1.87383648182623),(33,111,-0.410473952452162),(33,114,1.35311441389203),(34,85,0.584429456465346),(34,90,1.09814752647481),(34,99,-1.87994018372143),(34,104,-2.48542741172521),(34,109,0.523880733664968),(35,86,-0.144581438642537),(35,87,-0.020859401226844),(35,97,-1.29825739310892),(35,98,-1.03578295236061),(35,100,1.03387554551836),(35,104,-0.994781334879604),(35,107,0.457487716299936),(35,109,2.50463881344035),(35,110,-0.309747611926634),(35,112,-0.236136967070528),(36,85,-2.62437818536943),(36,87,0.144657734916227),(36,90,1.63327433088168),(36,91,0.199133274330882),(36,104,-0.513168736838893),(36,107,-1.3659932248909),(36,109,2.03924680318613),(36,112,0.842768639179662),(36,115,0.204931791131321),(36,117,0.666554765465255),(36,118,1.18947416608173),(37,85,-0.521744438001648),(37,86,1.58230842005676),(37,87,0.961561937314982),(37,91,-0.298547318948943),(37,99,-2.22443311868648),(37,105,-0.289880062257759),(37,111,0.121555223242897),(37,112,0.187734611041597),(37,118,1.11194189275796),(38,87,0.884380626850185),(38,90,-0.51776177251503),(38,103,2.07094027527696),(38,105,-0.453840754417554),(38,106,2.32474745933409),(38,111,0.410824915311136),(38,115,-0.112674336985382),(39,87,0.19808038575396),(39,89,-1.53469954527421),(39,91,-1.48332163457137),(39,94,0.843119602038636),(39,97,-0.462172307504502),(39,98,0.185094759971923),(39,107,1.35189367351299),(39,108,-1.07702871791742),(39,109,-0.283227027191992),(39,111,0.118869594409009),(39,113,1.01625110629597),(39,116,1.45854060487686),(39,118,1.35964537491989),(40,88,1.46462904751732),(40,92,0.80741294595172),(40,99,2.65602587969604),(40,104,-0.0086977752006592),(40,110,-2.49316385387738),(40,116,-1.68247016815699),(40,118,0.531327249977111),(41,88,-3.84464552751244),(41,93,0.935178685872982),(41,96,-2.45071260719626),(41,97,2.30716879787591),(41,100,2.31971190527055),(41,101,-1.32216864528336),(41,104,1.51368755149998),(41,105,-2.65344706564531),(41,106,2.83033234656819),(41,107,-0.231177709280679),(41,109,2.43464461195715),(41,110,3.06941434980316),(41,111,-2.34727011932737),(41,112,2.05665761284219),(42,85,-1.26145207068087),(42,86,2.18375194555498),(42,87,-1.73813592944121),(42,99,1.38096255378887),(42,100,0.21477401043733),(42,103,-0.010299996948149),(42,109,-4.32436597796564),(42,113,-3.16595965453047),(43,85,-0.0073244422742394),(43,88,0.696127201147496),(43,89,-0.208258308664205),(43,93,-0.727378154850917),(43,97,0.692938016907254),(43,98,1.47576830347606),(43,101,-1.02061525315104),(43,102,1.49229407635731),(43,103,-0.162205877864925),(43,105,1.80585650196844),(43,110,-1.90357676931059),(43,112,-0.968733787041841),(43,114,-3.71813104647969),(43,116,0.00556962797936955),(44,89,0.297112949003571),(44,98,-0.658742027039399),(44,99,-2.45558030945769),(45,87,-1.30816064943388),(45,88,0.660954618976409),(45,90,1.46481215857418),(45,91,-1.64906765953551),(45,95,1.89107943968017),(45,98,0.934293649098178),(45,108,-0.375255592516861),(45,109,1.05845820490127),(45,112,0.666737876522111),(45,115,-1.32894375438704),(46,85,0.94784386730552),(46,89,-0.253700369273965),(46,91,1.20558793908506),(46,94,-2.15269936216315),(46,97,2.79128391369366),(46,100,0.568178350169378),(46,101,1.07402264473403),(46,108,-0.466399121066927),(46,112,-0.832941679128391),(47,86,-1.53085421308023),(47,91,-2.15025788140507),(47,92,-0.290780358287301),(47,94,-1.50643940549944),(47,95,0.763969847712638),(47,100,1.26561784722434),(47,101,2.40493484298227),(47,104,-0.228507339701529),(47,105,-2.13806573686941),(47,108,1.17801446577349),(47,112,-0.298104800561541),(47,114,0.0601214636677145),(47,118,3.04855494857631),(48,86,4.15337076937162),(48,91,-1.8725394451735),(48,98,2.22696615497299),(48,99,2.51805169835505),(48,100,-0.391918698690756),(48,103,-0.0592516861476486),(48,105,-0.510574663533433),(48,106,-0.142048402356029),(48,111,1.1997436445204),(48,115,-2.11943418683432),(49,87,1.54547257911924),(49,89,1.66791283913694),(49,93,2.1552476577044),(49,94,0.145039216284677),(49,95,-1.89246803186132),(49,102,2.01991332743309),(49,113,-0.855739005706961),(49,114,3.33625293740654),(50,89,0.473281044953765),(50,105,-2.12469862971892),(50,107,1.67374187444685),(51,87,0.805917538987396),(51,92,2.69069490646077),(51,97,-0.0988494521927549),(51,98,1.55053865169225),(51,103,-1.12218085268715),(51,106,-0.923093356120487),(51,112,0.21599475081637),(51,118,-2.26645710623493),(52,89,-1.7061677907651),(52,97,0.670186468092898),(52,106,-0.10498367259743),(52,110,-2.72354808191168),(52,111,-2.25139622180853),(52,113,-0.198507644886624),(52,114,-0.633777886288034),(52,118,-0.564165166173284),(53,88,-2.15041047395245),(53,90,0.234458449049348),(53,92,-4.85207678456984),(53,94,-1.12558366649373),(53,104,-2.10544145023957),(53,105,1.48684652241585),(53,109,-0.939222388378552),(54,85,-2.23467207861568),(54,91,1.78914761803034),(54,94,1.47236548966948),(54,96,0.919522690511795),(54,111,-0.904568620868557),(54,112,-2.552766502884),(54,113,0.117053743095187),(54,118,-0.535477767265847),(55,87,-1.99887081514939),(55,95,-0.889614551225318),(55,107,-0.632343516342662),(55,110,-0.216040528580584),(55,117,-0.802545243690298),(56,107,-1.04766991180151),(56,111,0.920422986541337),(56,113,1.97836237678152),(56,114,1.84333323160497),(57,87,0.793939024018067),(57,90,2.34247871333964),(57,91,2.08006530961028),(57,92,-0.587633899960326),(57,93,-0.810251167332987),(57,94,-1.21373638111515),(57,95,1.00068666646321),(57,96,-2.83845027008881),(57,100,0.110889004181036),(57,102,-0.265053254799036),(57,103,0.829111606189154),(57,115,0.725424970244453),(58,86,0.514313180944243),(58,87,-2.19432660908841),(58,89,5.27292703024384),(58,90,-1.32976775414289),(58,95,0.570223090304269),(58,96,1.97180089724418),(58,101,1.41676076540422),(58,103,-1.0863368633076),(58,109,2.13278603473006),(58,110,3.20601519821772),(58,113,1.88990447706534),(58,114,-1.82656331064791),(58,115,0.754524369029817),(58,118,-2.05961790826136),(59,85,-0.00386059144871376),(59,86,0.527802362132634),(59,90,0.45768608661153),(59,91,0.0106051820429089),(59,93,-0.82723471785638),(59,97,0.297387615588855),(59,98,0.440992461928159),(59,100,-0.184667500839259),(59,102,-0.951765495773186),(59,112,0.940351573229164),(59,114,1.01623584704123),(60,85,0.405652027954955),(60,87,-2.01947080904569),(60,90,3.22476882229072),(60,91,-0.54582354197821),(60,96,-1.09004486220893),(60,100,-1.48121585741752),(60,101,-2.69362468337046),(60,105,0.680364391003143),(60,107,1.04480117191076),(60,109,-1.08297982726524),(60,110,-2.89199499496445),(60,114,2.30002746665853),(61,89,2.42382580034791),(61,94,-2.66176335947752),(61,96,-0.653111362041078),(61,98,-0.525223548081912),(61,100,-2.49916074098941),(61,102,2.31810968352306),(61,103,0.0657826471755119),(61,114,3.2276528214362),(61,115,-2.27707754753258),(62,93,-1.19071016571551),(62,95,0.505920590838343),(62,107,-0.43168431653798),(62,109,-1.82711264381848),(62,110,1.53419598986785),(62,111,0.424146244697409),(63,87,-0.69579149754326),(63,90,1.57000946073794),(63,93,-0.490508743552965),(63,97,0.295525986510819),(63,100,4.08326975310526),(63,103,0.716513565477462),(63,104,-0.620242927335429),(63,108,-3.36124759666738),(63,111,1.68727683339946),(63,114,0.92817468794824),(63,117,0.680013428144169),(64,87,-1.04518265327921),(64,94,2.21543015839106),(64,99,0.704046754356517),(64,110,-1.49916074098941),(64,112,0.981612598040712),(64,116,3.64632099368267),(65,87,1.80060731833857),(65,88,-0.0688497573778497),(65,90,0.356990264595477),(65,97,0.0317087313455611),(65,99,1.71446882534257),(65,107,1.32844019898068),(65,110,0.966139713736381),(65,111,1.95048371837519),(65,114,-0.411221655934324),(65,116,2.0734885708182),(65,117,2.08105716116825),(66,85,-1.13078707235939),(66,102,-1.16718039490951),(66,105,-0.416547135837886),(66,108,0.923642689291055),(66,111,0.0518356883449815),(66,115,-0.916928617206336),(66,118,-1.4763481551561),(67,86,0.922498245185705),(67,90,2.34838404492325),(67,92,0.0606707968382824),(67,104,3.25002288888211),(67,109,-0.502029480880154),(67,111,1.4443037202063),(68,87,-0.728156376842555),(68,88,-1.93098239082003),(68,90,-0.471648304696799),(68,93,1.61795403912473),(68,95,0.337626270332957),(68,96,1.58503982665487),(68,97,-2.07057405316324),(68,103,-2.15727713858455),(68,107,0.611285744804224),(68,112,-0.244224372081668),(68,114,0.0392315439313946),(69,87,2.76377147740104),(69,88,-1.04596087527085),(69,92,-0.022354808191168),(69,94,1.00131229590747),(69,95,-1.37791070284127),(69,97,-1.12277596362194),(69,108,-2.12515640736106),(69,113,1.20850245674001),(69,114,0.518967253639332),(69,118,-1.25272377697073),(70,85,0.93733024079104),(70,86,-2.08470412305063),(70,87,-1.17531357768487),(70,90,0.0281838435010834),(70,96,-1.59283730582598),(70,97,-0.465117343668935),(70,99,1.65050202948088),(70,105,-2.5884273812067),(70,107,0.376049073763237),(70,109,2.04321420941801),(70,110,3.97518845179601),(70,111,-0.944547868282113),(71,85,1.82227546006653),(71,93,0.997360148930326),(71,96,-3.30277413251137),(71,100,-0.132023071993164),(71,104,-0.266045106357006),(71,106,-0.45348979155858),(71,111,-1.82024597918638),(71,113,-2.17024750511185),(72,94,0.951902829065828),(72,96,-2.50868251594592),(72,99,1.62463759269997),(72,110,-1.65083773308512),(72,112,0.0942716757713553),(72,114,-1.72846156193732),(72,115,0.945463423566393),(72,116,1.54368724631489),(73,88,-0.234153263954588),(73,94,0.115955076754051),(73,99,-2.59819330423902),(73,100,-0.399029511398663),(73,106,-1.08836634418775),(73,110,-0.353404339732048),(73,115,-1.35038300729392),(74,90,1.06022827845088),(74,94,-1.63170262764367),(74,99,-2.48649555955687),(74,102,1.31121250038148),(74,106,0.435529648731956),(74,107,-0.315073091830195),(74,110,-0.460982085634938),(74,113,-1.0446943571276),(74,116,2.94228949858089),(75,85,-0.82494582964568),(75,86,-1.41010773033845),(75,93,0.93031098361156),(75,98,1.92967009491256),(75,103,-2.15141758476516),(75,105,0.606067079683828),(75,111,3.2808618427076),(75,117,-2.20215460676901),(76,86,0.67894528031251),(76,89,-0.314264351329081),(76,92,0.890179143650624),(76,94,-3.65329447309793),(76,99,0.336558122501297),(76,101,0.967665639210181),(76,103,0.00576799829096347),(76,106,2.28873561815241),(76,110,0.489059114352855),(76,113,-1.05021820734275),(77,88,0.28293710135197),(77,91,-2.81994079409162),(77,93,-1.14644306772057),(77,98,1.98504593035676),(77,101,-3.06080813013092),(77,102,0.989532151249733),(77,103,-1.93220313119907),(77,104,2.47436445204016),(77,105,-0.109683523056734),(77,109,0.201681569872127),(78,88,-1.99664296395764),(78,93,1.13750114444411),(78,94,2.74521622363964),(78,101,2.85889767143773),(78,104,-1.2204657124546),(78,110,-0.779717398602253),(78,114,-1.63100070192572),(78,116,-0.684835352641377),(78,117,-3.48347422711875),(78,118,0.594561601611377),(79,87,-2.25417340617084),(79,92,0.175328836939604),(79,94,0.428495132297739),(79,107,-2.87958922086245),(79,108,2.14661091952269),(79,114,-1.7680898464919),(79,118,-2.14978484450819),(80,87,1.93769646290475),(80,88,-0.573671681875057),(80,91,-3.59468367564928),(80,99,1.90627765739921),(80,101,-1.48069704275643),(80,107,-0.260536515396588),(80,113,2.49473555711539),(81,85,0.676824243903928),(81,86,2.28284554582354),(81,90,0.537736136967071),(81,93,1.6101107821894),(81,96,-0.270302438428907),(81,97,0.935834833826716),(81,106,1.98809778130436),(81,107,2.38790551469466),(81,110,2.33136997589038),(81,115,-3.01026947843867),(82,86,0.753501998962371),(82,92,-0.434415723136082),(82,110,-0.844294564653462),(82,112,0.0363475447859127),(83,87,-2.68234809411908),(83,91,3.0004425183874),(83,93,1.53894161809137),(83,101,0.25823236793115),(83,103,3.29477828302866),(83,105,2.99795525986511),(83,108,-2.93835261085849),(84,85,1.21102023377178),(84,86,1.76342051454207),(84,89,-0.529023102511673),(84,95,-0.0484481337931455),(84,99,1.8055970946379),(84,104,-1.54499954222236),(84,111,2.99592577898495),(84,113,0.353968932157353),(84,114,-1.5031739249855)]
orgname='BHNEAT_5_14'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()