edge = [(0,85,0.245857112338633),(0,89,-2.63089388714255),(0,90,1.48045289468062),(0,93,-1.99032563249611),(0,98,0.348261970885342),(0,101,0.827631458479568),(0,105,0.544282357249672),(0,108,0.245292519913327),(0,113,-1.1978972746971),(0,114,1.57957701345866),(0,117,1.07051301614429),(0,118,-0.752449110385449),(1,86,-1.70734275337993),(1,92,2.59363078707236),(1,98,-1.32190923795282),(1,102,1.26670125431074),(1,104,-1.15730765709403),(1,107,-2.161152989288),(1,108,-1.35959959715567),(1,109,0.540467543565172),(1,113,1.59546189764092),(2,87,-1.68611713003937),(2,88,-0.87237159337138),(2,100,-2.83436078981903),(2,106,-1.46148564104129),(2,108,0.0988494521927549),(2,110,-0.797463911862545),(2,113,-0.0729850154118473),(2,118,0.80550553910947),(3,89,0.96028015991699),(3,92,1.12393566698202),(3,97,0.423596911526841),(3,99,2.89222388378552),(3,101,0.490905484176153),(3,103,1.42156743064669),(3,105,3.27794732505264),(3,108,-1.45434430982391),(3,109,-2.14276558732871),(3,111,-2.54185613574633),(3,112,0.523682363353374),(3,116,-1.07238990447707),(4,90,-0.251762443922239),(4,91,1.98226874599445),(4,97,-1.74958037049471),(4,99,1.67772453993347),(4,101,-0.961973937192908),(4,108,2.70294808801538),(4,113,-0.995544297616504),(4,118,0.510330515457625),(5,86,0.383709219641713),(5,87,0.331095309305094),(5,89,1.22634052552873),(5,92,1.61464278084658),(5,93,-0.407132175664541),(5,99,-1.92620624408704),(5,104,-2.40194402905362),(5,114,3.0817590868862),(5,118,-2.63333536790063),(6,89,-2.22957548753319),(6,92,0.186239204077273),(6,94,2.1111941892758),(6,100,-1.89803765984069),(6,101,-0.496551408429212),(6,103,-1.26602984710227),(6,107,1.93978698080386),(6,110,-1.24169133579516),(6,113,1.60638752403333),(7,85,-1.38515884884182),(7,86,1.68826868495743),(7,90,1.22675252540666),(7,95,-1.07397686696982),(7,99,1.42922757652516),(7,100,1.85573900570696),(7,104,-1.73397015289773),(7,106,0.241248817407758),(7,108,0.175542466505936),(7,112,1.32383190404981),(7,116,1.01924192022462),(8,92,-1.49246192815943),(8,93,-1.94340342417676),(8,95,-0.405270546586505),(8,99,1.33008819849239),(8,106,1.30399487289041),(8,107,1.69566942350536),(8,115,-0.641224402600177),(8,116,2.11076693014313),(8,118,1.60283211767937),(9,85,1.91296121097446),(9,87,0.595995971556749),(9,98,0.344904934842982),(9,101,1.90348521378216),(9,103,1.27033295693838),(9,105,-0.00224311044648579),(9,106,0.0799279763176366),(9,113,-1.08441419721061),(10,89,-2.89211706900235),(10,96,-0.167043061616871),(10,106,2.83033234656819),(10,108,3.1227607043672),(10,109,2.35204626606037),(10,111,-0.612628559221168),(10,112,-2.27179784539323),(10,114,2.63487655262917),(10,115,1.01927243873409),(10,116,-2.695165868099),(10,117,-0.507568590350047),(11,89,-0.487441633350627),(11,97,1.92954802087466),(11,105,-2.99015778069399),(11,112,1.0389110995819),(11,115,-2.07235938596759),(12,92,-1.1328012939848),(12,93,-1.43372905667287),(12,94,-1.29345072786645),(12,97,-2.74762718588824),(12,98,2.16583758049257),(12,99,0.551454206976531),(12,108,-1.07324442274239),(12,116,-0.904095583971679),(13,86,2.65019684438612),(13,87,-1.52464369640187),(13,90,2.12945951719718),(13,99,0.657155064546648),(13,102,2.01452681051057),(13,104,1.30452894680624),(13,113,-2.15759758293405),(13,116,-1.16270943327128),(13,118,2.84264656514176),(14,90,-2.13945432905057),(14,93,-0.203985717337565),(14,95,-0.892132328257088),(14,102,0.153675954466384),(14,104,1.31191442609943),(14,106,-1.03173924985504),(14,109,2.53123569444868),(14,110,1.4597613452559),(14,111,0.011337626270333),(15,85,1.43897824030274),(15,92,-0.506790368358409),(15,99,-1.56953642384106),(15,101,-2.545777764214),(15,104,0.401745658742027),(15,108,-0.467940305795465),(15,117,-0.200521866512039),(16,86,-1.65730765709403),(16,87,-3.13373210852382),(16,88,-1.63379314554277),(16,90,2.26345103305155),(16,91,-1.91549424726096),(16,95,-0.225501266518143),(16,97,1.78574480422376),(16,98,-1.6093478194525),(16,99,-1.96060060426649),(16,101,2.48333689382611),(16,108,0.0256202887050996),(16,110,1.29499191259499),(17,89,1.1434827723014),(17,96,-0.954588457899716),(17,99,-3.00704977568896),(17,101,-0.407162694174017),(17,106,1.15462202826014),(17,107,0.725318155461287),(17,109,0.908856471449934),(18,90,-0.970442823572497),(18,91,-0.138096255378887),(18,93,0.351054414502396),(18,99,-0.482879116183966),(18,102,1.37673574022645),(18,103,1.07313760795923),(18,104,-0.996047853022858),(18,110,-0.741859187597278),(18,111,-1.22586748863186),(18,116,2.8598895229957),(18,117,1.34678182317576),(18,118,-1.70471816156499),(19,87,0.878337961973937),(19,89,-1.22704245124668),(19,93,1.61755729850154),(19,95,1.34617145298624),(19,101,-1.10860011597034),(19,105,-1.05107272560808),(19,115,1.24648274178289),(20,88,-0.522522659993286),(20,101,-2.35552537614063),(20,103,0.233512375255593),(20,104,0.979827265236366),(20,105,1.53810235908078),(20,106,1.50495925778985),(20,111,1.31527146214179),(20,116,1.80149235511338),(21,86,2.39257484664449),(21,87,2.3814966277047),(21,94,-1.02235480819117),(21,96,-0.596026490066225),(21,101,0.0478682821131016),(21,102,-0.791512802514725),(21,105,-1.25055696279794),(21,107,0.36603900265511),(21,108,-3.02555925168615),(22,86,-0.0924405652027954),(22,88,0.296288949247719),(22,91,-0.12785729544969),(22,92,0.916455580309458),(22,93,-0.710074159978027),(22,98,1.64168218024232),(22,106,0.180333872493667),(22,115,1.80796227912229),(22,117,-0.133060701315348),(23,85,1.65991698965423),(23,86,0.515442365794854),(23,88,0.493850520340587),(23,90,0.731864375743889),(23,97,1.297204504532),(23,104,1.65286721396527),(23,112,1.30199591051973),(23,114,2.30469679860836),(23,115,-1.2947172460097),(23,116,-0.513565477462081),(24,89,-1.65117343668935),(24,90,-0.0134739219336527),(24,91,1.31228064821314),(24,101,1.00053407391583),(24,107,1.59486678670614),(24,108,1.03529465620899),(24,110,2.67416913357952),(24,112,-0.621539963988159),(25,90,2.7621082186346),(25,92,1.39411603137303),(25,94,-1.51855525376141),(25,98,1.31003753776666),(25,105,1.92414624469741),(25,108,1.04396191290017),(25,109,0.246223334452345),(25,115,1.76059755241554),(26,85,-0.602374340037232),(26,87,-1.93157750175481),(26,89,-1.24004333628346),(26,95,1.67331461531419),(26,98,-2.30314035462508),(26,100,2.1263771477401),(26,101,-1.56227301858577),(26,102,-0.753624073000275),(26,103,-3.12138737144078),(26,104,-0.561861018707846),(26,107,1.14801477095859),(26,109,2.31415753654592),(26,112,1.11279641102329),(26,113,1.1774956511124),(26,117,1.66037476729637),(27,85,1.33465071565905),(27,87,0.0144352549821467),(27,94,-1.05317850276193),(27,100,1.60080263679922),(27,102,-2.77863399151585),(27,103,-2.38921781060213),(27,104,-1.71091341898862),(27,105,3.0417645802179),(27,108,0.383617664113285),(27,110,-0.254692220831935),(27,114,0.0955076754051333),(28,87,-0.979552598651082),(28,88,1.04696798608356),(28,97,1.06532486953337),(28,99,-0.429334391308329),(28,104,0.215643787957396),(28,113,-0.177449873348186),(28,114,0.662770470290231),(29,88,-0.647404400769066),(29,91,-1.82276375621815),(29,102,1.90205084383679),(29,105,0.215521713919492),(29,116,2.3888058107242),(30,95,2.34363841669973),(30,96,-0.355204931791131),(30,99,-1.25135044404431),(30,101,-0.421430097354045),(30,104,1.44840845973083),(30,109,-0.792535172582171),(30,110,2.42762535477767),(30,114,-0.976027710806604),(30,118,2.12266914883877),(31,85,-2.95603808709983),(31,92,0.782525101474044),(31,94,1.74190496536149),(31,96,1.57028412732322),(31,99,-2.07289345988342),(31,103,-2.05108798486282),(31,107,1.39957884456923),(31,108,0.188314462721641),(31,109,2.50437940610981),(31,111,0.813074129459517),(31,112,0.902584917752617),(31,117,-1.91630298776208),(32,86,-1.87551499984741),(32,87,-2.22473830378124),(32,89,0.402127140110477),(32,92,1.02385021515549),(32,98,0.347956785790582),(32,99,0.785866878261666),(32,104,2.90981780449843),(32,106,2.08389538254952),(32,109,1.0455793939024),(32,116,-0.222281563768426),(32,118,-1.10498367259743),(33,96,-0.61123996704001),(33,98,2.43380535294656),(33,108,1.15974913785211),(33,110,-2.67055269020661),(33,111,0.640247810296945),(33,114,0.0375530259102145),(34,85,2.29978331858272),(34,90,-0.530243842890713),(34,99,-1.05090487380596),(34,104,-0.699850459303568),(34,109,2.27756584368419),(35,86,-1.23874629963073),(35,87,1.89692373424482),(35,97,1.93014313180944),(35,98,-0.857036042359691),(35,100,-1.65897091586047),(35,104,-0.00514236884670549),(35,107,0.842555009613331),(35,109,-2.90499588000122),(35,110,0.862590411084323),(35,112,2.03444013794366),(36,85,-1.01651051362651),(36,87,-1.03125095370342),(36,90,0.199743644520402),(36,91,-0.98231452375866),(36,104,0.0663014618366039),(36,107,2.26845606860561),(36,109,-1.30779442732017),(36,112,2.05841242713706),(36,115,-1.11354411450545),(36,117,0.786721396526993),(36,118,2.66779076509903),(37,85,1.76447340311899),(37,86,1.59436323129978),(37,87,-0.00724814600054932),(37,91,-0.251243629261147),(37,99,-2.76995147556993),(37,105,-2.38009277626881),(37,111,1.76863917966247),(37,112,2.45158238471633),(37,118,-0.397610400708029),(38,87,-2.0130924405652),(38,90,1.67583239234596),(38,103,1.03552354503006),(38,105,1.19972838526566),(38,106,1.74962614825892),(38,111,-0.61253700369274),(38,115,-2.02999969481491),(39,87,1.25531785027619),(39,89,0.87481307412946),(39,91,-0.726493118076113),(39,94,-1.64909817804498),(39,97,1.99983214819788),(39,98,0.242652668843654),(39,107,0.932554094058046),(39,108,-0.563020722067934),(39,109,2.72605059968871),(39,111,-2.30530716879788),(39,113,2.82332834864345),(39,116,-0.310388500625629),(39,118,-2.8444318979461),(40,88,2.54200872829371),(40,92,-0.0262459181493576),(40,99,-1.17217017120884),(40,104,-0.454145939512314),(40,110,-2.02427747428816),(40,116,-3.03512680440687),(40,118,2.4946592608417),(41,88,1.59222693563646),(41,93,0.342814416943876),(41,96,1.98695333719901),(41,97,1.61687063203833),(41,100,1.46931363872189),(41,101,-0.131183812982574),(41,104,1.94041261024812),(41,105,-0.911832026123844),(41,106,1.57350383007294),(41,107,-2.90169988097781),(41,109,1.99543748283334),(41,110,2.55372783593249),(41,111,-0.421323282570879),(41,112,-0.811319315164647),(42,85,-0.252967925046541),(42,86,-1.41303750724815),(42,87,-2.32973723563341),(42,99,2.31383709219642),(42,100,-0.288430433057649),(42,103,1.59169286172063),(42,109,-3.11903744621113),(42,113,-0.344141972106082),(43,85,-0.797555467390973),(43,88,1.05281228064821),(43,89,1.30376598406934),(43,93,0.638172551652577),(43,97,-1.54600665303507),(43,98,-2.72557756279183),(43,101,1.34131900997955),(43,102,0.236838892788476),(43,103,-2.30857264931181),(43,105,-0.776696066164128),(43,110,-1.39300210577715),(43,112,-0.543595690786462),(43,114,1.48054445020905),(43,116,-1.05945005645924),(44,89,2.57271034882656),(44,98,1.88947721793268),(44,99,-1.03418073061312),(45,87,-0.960097048860134),(45,88,2.71082186346019),(45,90,-2.10904263435774),(45,91,2.88119144260994),(45,95,-2.03959776604511),(45,98,0.626819666127506),(45,108,1.42808313241981),(45,109,0.360240485854671),(45,112,1.61418500320444),(45,115,0.356822412793359),(46,85,1.68425550096133),(46,89,2.16298409985656),(46,91,-2.0869014557329),(46,94,0.431165501876888),(46,97,0.854884487441633),(46,100,-2.00146488845485),(46,101,1.78870509964293),(46,108,-2.97479171117283),(46,112,-0.0480971709341716),(47,86,0.843028046510209),(47,91,1.83643604846339),(47,92,0.704809717093417),(47,94,-0.292641987365337),(47,95,2.14674825281533),(47,100,0.442457350383007),(47,101,0.310678426465651),(47,104,-0.65546128727073),(47,105,1.19249549851985),(47,108,0.396130252998444),(47,112,-1.53975035859249),(47,114,1.84629352702414),(47,118,-1.6860103152562),(48,86,-1.31600390636921),(48,91,0.474501785332804),(48,98,1.50656147953734),(48,99,-0.254020813623463),(48,100,2.72341074861904),(48,103,-0.372280037842952),(48,105,0.969252601702933),(48,106,-1.82503738517411),(48,111,-0.0267952513199255),(48,115,-2.66479995117039),(49,87,1.28600421155431),(49,89,0.580813013092441),(49,93,2.16281624805445),(49,94,-0.468611713003937),(49,95,1.9820093386639),(49,102,-0.150669881282998),(49,113,-0.343577379680776),(49,114,-1.38091677602466),(50,89,0.806237983336894),(50,105,-1.00572222052675),(50,107,-1.89013336588641),(51,87,-0.578188421277505),(51,92,2.48072756126591),(51,97,2.50537125766778),(51,98,-1.59860530411695),(51,103,1.50289925840022),(51,106,0.48300119022187),(51,112,0.245750297555467),(51,118,1.12770470290231),(52,89,-1.69716483046968),(52,97,1.58929715872677),(52,106,0.450300607318339),(52,110,-0.8661152989288),(52,111,1.05650502029481),(52,113,1.72904141361736),(52,114,-0.606311227759636),(52,118,1.57068086794641),(53,88,-0.665578173162023),(53,90,-0.369350260933256),(53,92,0.320734275337992),(53,94,-0.379192480239265),(53,104,-2.08261360515152),(53,105,-0.559648426770836),(53,109,-1.10303048799097),(54,85,-1.41525009918516),(54,91,-1.29833368938261),(54,94,2.94174016541032),(54,96,0.174336985381634),(54,111,3.19109164708396),(54,112,-0.548326059755242),(54,113,-1.71915341654714),(54,118,-2.41956846827601),(55,87,1.19855342265084),(55,95,1.25972777489547),(55,107,-0.515076143681143),(55,110,-1.61366618854335),(55,117,-0.267632068849757),(56,107,-1.51948606830042),(56,111,-1.33848078859828),(56,113,0.764976958525346),(56,114,2.12456129642628),(57,87,-1.13924069948424),(57,90,1.78368480483413),(57,91,-0.611667226172674),(57,92,1.62727744376965),(57,93,1.52769554734947),(57,94,0.0718405713064974),(57,95,-0.229972228156377),(57,96,-1.49597155674917),(57,100,-0.324152348399304),(57,102,1.23088778344066),(57,103,-0.312204351939451),(57,115,0.910672322763756),(58,86,1.99279763176366),(58,87,-2.01091036713767),(58,89,-0.183706167790765),(58,90,0.510422070986053),(58,95,-1.98211615344707),(58,96,-0.21744438001648),(58,101,-0.763405255287332),(58,103,-0.0179143650624103),(58,109,2.31162450025941),(58,110,0.343760490737632),(58,113,-1.73836481826228),(58,114,0.826212347788934),(58,115,-1.27550584429456),(58,118,-0.54498428296762),(59,85,-1.92774742881558),(59,86,2.45414593951231),(59,90,2.54863124485),(59,91,1.39530625324259),(59,93,-1.01194799645985),(59,97,-1.15979491561632),(59,98,-0.473616748558),(59,100,-0.408825952940458),(59,102,2.45852534562212),(59,112,-2.16696676534318),(59,114,0.80588702047792),(60,85,-0.187948240607929),(60,87,-1.12222663045137),(60,90,2.39855647450179),(60,91,1.18762779625843),(60,96,1.0172276985992),(60,100,-0.751167332987457),(60,101,-1.86016418958098),(60,105,-0.639439069795831),(60,107,1.93591113010041),(60,109,0.966948454237495),(60,110,-1.11429181798761),(60,114,-0.553926206244087),(61,89,-0.364268929105503),(61,94,-0.592913602099673),(61,96,-1.21167638172552),(61,98,-2.15742973113193),(61,100,-1.05616931669057),(61,102,-2.39501632740257),(61,103,-1.11781670583209),(61,114,-3.06457716605121),(61,115,-0.925168614764855),(62,93,0.682210760826441),(62,95,1.0986663411359),(62,107,0.76044495986816),(62,109,0.475051118503372),(62,110,1.05090487380596),(62,111,-1.623645741142),(63,87,1.51062044129765),(63,90,3.23476363414411),(63,93,0.641422772911771),(63,97,1.71349223303934),(63,100,1.16257209997864),(63,103,-2.19391460921049),(63,104,0.453398236030152),(63,108,-2.19978942228462),(63,111,-0.160161137730033),(63,114,0.520371105075228),(63,117,-2.06523331400494),(64,87,-2.04962309640797),(64,94,0.766716513565477),(64,99,1.53186132389294),(64,110,0.596697897274697),(64,112,0.313241981261635),(64,116,-0.531434064760277),(65,87,2.03845332193976),(65,88,-0.0227668080690939),(65,90,0.192419202246162),(65,97,-1.42349009674367),(65,99,-2.63357951597644),(65,107,-0.551118503372295),(65,110,-0.551026947843867),(65,111,-0.538987395855586),(65,114,-1.72626422925504),(65,116,1.25040437025056),(65,117,2.17146824549089),(66,85,0.643070772423475),(66,102,2.15222632526627),(66,105,-0.175145725882748),(66,108,2.95802179021577),(66,111,2.02989288003174),(66,115,-1.66022217474899),(66,118,-0.0055085909604175),(67,86,-1.00920133060701),(67,90,2.06456190679647),(67,92,0.929898983733634),(67,104,3.03006073183386),(67,109,-0.616229743339335),(67,111,0.95440534684286),(68,87,0.661122470778527),(68,88,0.95783867915891),(68,90,0.345393230994598),(68,93,-2.61728263191626),(68,95,-0.526123844111454),(68,96,0.485915707876827),(68,97,0.477462080751976),(68,103,0.376293221839045),(68,107,-1.73055207983642),(68,112,2.21671193578906),(68,114,0.223487044892727),(69,87,0.762901699880978),(69,88,0.32792138431959),(69,92,0.673085726493118),(69,94,1.301339762566),(69,95,1.37409588915677),(69,97,-1.85850093081454),(69,108,-2.85814996795557),(69,113,-1.34696493423261),(69,114,0.905514694662313),(69,118,0.990844447157201),(70,85,-1.14578691976684),(70,86,-0.603411969359416),(70,87,-0.25693533127842),(70,90,0.739188818018128),(70,96,-2.17375713370159),(70,97,-1.57864619891964),(70,99,1.98362681966613),(70,105,-1.92942594683676),(70,107,1.66110721152379),(70,109,1.7131565294351),(70,110,0.0257881405072176),(70,111,-0.274117252113407),(71,85,0.136051515243995),(71,93,-2.67348246711631),(71,96,-0.831385235145116),(71,100,0.667821283608509),(71,104,0.467696157719657),(71,106,-1.57634205145421),(71,111,0.767967772453993),(71,113,1.33167516098514),(72,94,3.42909024323252),(72,96,-1.52194280831324),(72,99,0.766533402508621),(72,110,-2.33977782525101),(72,112,2.50859096041749),(72,114,0.623676259651479),(72,115,1.14261299478133),(72,116,-0.375316629535813),(73,88,1.49751274147771),(73,94,0.381542405468917),(73,99,-0.311136204107791),(73,100,-0.293649098178045),(73,106,-1.13284707174902),(73,110,-1.5546128727073),(73,115,0.529557176427503),(74,90,1.33497116000855),(74,94,0.404675435651723),(74,99,0.570543534653768),(74,102,1.31894894253365),(74,106,-0.253059480574969),(74,107,-0.315073091830195),(74,110,-0.928434095278787),(74,113,-1.18305001983703),(74,116,-0.316232795190283),(75,85,-0.140415662099063),(75,86,-0.677358317819758),(75,93,-0.858760338145085),(75,98,1.24193548387097),(75,103,-0.815424054689169),(75,105,0.606067079683828),(75,111,-0.61398663289285),(75,117,1.02121036408582),(76,86,-0.379589220862453),(76,89,-0.550065614795373),(76,92,-1.12236396374401),(76,94,1.47572252571184),(76,99,-0.0566423535874508),(76,101,-0.343333231604968),(76,103,1.17331461531419),(76,106,0.89486373485519),(76,110,-3.04535050508133),(76,113,0.151066621906186),(77,88,0.0842310861537522),(77,91,-0.537125766777551),(77,93,0.689489425336467),(77,98,-2.3115024262215),(77,101,-2.60173345133824),(77,102,0.207037568285165),(77,103,2.454222235786),(77,104,0.460982085634938),(77,105,0.84919278542436),(77,109,-1.88909573656423),(78,88,-0.00875881221961128),(78,93,1.0036927396466),(78,94,0.521897030549028),(78,101,-0.601947080904569),(78,104,-0.64912869655446),(78,110,2.25478377636036),(78,114,-0.494399853511155),(78,116,-2.54005554368725),(78,117,-0.962950529496139),(78,118,1.86101870784631),(79,87,-0.87328714865566),(79,92,0.242164372692038),(79,94,1.643040253914),(79,107,-1.30024109622486),(79,108,0.85003204443495),(79,114,0.336039307840205),(79,118,0.447950682088687),(80,87,-0.289559617908261),(80,88,-2.39867854853969),(80,91,-0.367961668752098),(80,99,1.61133152256844),(80,101,-2.42973113193152),(80,107,-0.144672994170965),(80,113,0.482497634815516),(81,85,-0.408490249336222),(81,86,-0.456648457289346),(81,90,-1.16643269142735),(81,93,0.810327463606678),(81,96,0.638737144077883),(81,97,-2.0283516953032),(81,106,1.80437635425886),(81,107,-1.53578295236061),(81,110,0.926145207068087),(81,115,0.75724051637318),(82,86,2.34617145298624),(82,92,-1.36042359691153),(82,110,-0.852443006683554),(82,112,-1.07898190252388),(83,87,-1.70392468031861),(83,91,1.59544663838618),(83,93,2.39544358653523),(83,101,-0.454908902249214),(83,103,0.226752525406659),(83,105,1.29546494949187),(83,108,-0.982726523636586),(84,85,-0.752616962187567),(84,86,0.88937040314951),(84,89,1.71691030610065),(84,95,0.344431897946104),(84,99,2.78321176793725),(84,104,0.336771752067629),(84,111,0.326456495864742),(84,113,-1.6674550614948),(84,114,0.710257271034883)]
orgname='BHNEAT_3_3'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()