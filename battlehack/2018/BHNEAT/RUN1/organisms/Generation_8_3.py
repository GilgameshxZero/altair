edge = [(0,85,-0.678205206457716),(0,89,2.0381710257271),(0,90,0.0292596209601121),(0,93,-3.05653553880428),(0,98,0.412121951963866),(0,101,0.791009247108371),(0,105,4.38373973815119),(0,108,-1.57803582873013),(0,113,-0.74862666707358),(0,114,3.11445966978973),(0,117,0.139965514084292),(0,118,1.38979766228217),(1,86,1.35351115451521),(1,92,-2.08439893795587),(1,98,-1.52695547349467),(1,102,1.56185338908048),(1,104,0.0834986419263284),(1,107,1.67654957731864),(1,108,0.924558244575335),(1,109,-1.49141666920988),(1,113,-3.7436750389111),(2,87,-2.61517685476241),(2,88,1.34125034333323),(2,100,2.21305734427931),(2,106,-1.25361644337291),(2,108,1.26114688558611),(2,110,-1.57201605273598),(2,113,0.422673726615192),(2,118,-0.793038727988525),(3,89,0.0935544907986694),(3,92,3.68985564745018),(3,97,-2.58610034485916),(3,99,-3.87430188909574),(3,101,-1.25566881313517),(3,103,-1.08560441908017),(3,105,3.32120731223487),(3,108,0.927205725272378),(3,109,-0.735976744895779),(3,111,1.7724692526017),(3,112,-3.49381237220374),(3,116,2.58311716055788),(4,90,-0.254325998718222),(4,91,0.95242164372692),(4,97,-1.53158665730766),(4,99,0.494979705191199),(4,101,1.23192541276284),(4,108,0.677930539872433),(4,113,-3.48831904049806),(4,118,2.51944029053621),(5,86,3.08272804956206),(5,87,-0.976226081118198),(5,89,2.71381267738884),(5,92,-0.272850733970153),(5,93,-1.70569475386822),(5,99,0.824137089144566),(5,104,0.539765617847224),(5,114,0.235526596881008),(5,118,-0.654820398571734),(6,89,1.59359263893551),(6,92,0.639515366069521),(6,94,-0.49085207678457),(6,100,-4.26291695913572),(6,101,0.311235389263588),(6,103,-1.38600573747978),(6,107,1.95821253089999),(6,110,-0.0724127933591723),(6,113,-0.706686605426191),(7,85,1.49449140903958),(7,86,0.88784447767571),(7,90,-0.113010040589618),(7,95,-0.836771752067629),(7,99,-1.35469374675741),(7,100,-0.217986083559679),(7,104,4.6707510605182),(7,106,2.56775109103671),(7,108,-1.9429761650441),(7,112,-0.913556321909238),(7,116,0.322237311929685),(8,92,2.59840693380535),(8,93,-3.88468581194494),(8,95,-1.73512222663045),(8,99,-2.28731650746178),(8,106,2.09132663960692),(8,107,0.34400463881344),(8,115,-2.83123264259774),(8,116,3.29625843073824),(8,118,-2.5442518387402),(9,85,-2.89015625476852),(9,87,-1.44431897946104),(9,98,-2.90382854701376),(9,101,-2.99065370647298),(9,103,1.30550553910947),(9,105,0.0727561265907776),(9,106,-0.106616412854396),(9,113,0.67757194738609),(10,89,1.39551988280892),(10,96,2.57004760887478),(10,106,0.897938474684896),(10,108,0.310785241248817),(10,109,2.47728659932249),(10,111,-0.123683889278848),(10,112,-3.63864558854946),(10,114,-2.51545762504959),(10,115,5.18298898281808),(10,116,1.43902401806696),(10,117,1.24140903958251),(11,89,1.12950529496139),(11,97,-1.91566972869045),(11,105,3.67139957884457),(11,112,-0.700529496139409),(11,115,-1.52726065858943),(12,92,3.899243140965),(12,93,-0.00572985015411853),(12,94,-5.08701590014344),(12,97,-1.84996337778863),(12,98,1.98062837611011),(12,99,2.73120822779015),(12,108,-0.267403180028688),(12,116,-4.22634052552873),(13,86,1.71610156559954),(13,87,4.91342661824396),(13,90,1.68678853724784),(13,99,-1.98948637348552),(13,102,-0.54940946684164),(13,104,-2.12914670247505),(13,113,-1.91382335886715),(13,116,-0.974524674214912),(13,118,-4.44025238807337),(14,90,-3.33490249336222),(14,93,3.66984313486129),(14,95,0.110362559892575),(14,102,0.727378154850917),(14,104,2.7428128910184),(14,106,1.3856318857387),(14,109,3.40195165868099),(14,110,3.48081148716697),(14,111,2.36732840968047),(15,85,-5.61854152043214),(15,92,-1.74481185338908),(15,99,2.4050263985107),(15,101,-3.02194280831324),(15,104,-2.13525803399762),(15,108,0.510788293099765),(15,117,-1.2278511917478),(16,86,-1.39629810480056),(16,87,1.72653889584033),(16,88,-4.27417828913236),(16,90,-1.15054017761773),(16,91,-4.28022095400861),(16,95,2.35460982085635),(16,97,-4.77432325205237),(16,98,-0.957205420087283),(16,99,1.3642460402234),(16,101,0.257507553331095),(16,108,3.0226905117954),(16,110,-3.25677510910367),(17,89,-1.57335123752556),(17,96,0.22781304361095),(17,99,1.43884853663747),(17,101,2.49575792718284),(17,106,2.42514572588275),(17,107,3.77369762260811),(17,109,0.541718802453688),(18,90,-0.856532486953337),(18,91,-1.19533371990112),(18,93,2.68781090731529),(18,99,0.892094180120242),(18,102,-4.21015808587909),(18,103,-0.423108615375225),(18,104,-0.0196844386120183),(18,110,-1.81405072176275),(18,111,1.40494247260964),(18,116,-1.35284737693411),(18,117,2.69539475692007),(18,118,2.00112155522324),(19,87,-2.85793633838923),(19,89,2.399243140965),(19,93,3.10926389355144),(19,95,-0.354586931974242),(19,101,1.70780053102207),(19,105,4.22058778649251),(19,115,2.23249763481552),(20,88,-2.50981170079653),(20,101,0.939977721488083),(20,103,-0.744148075807977),(20,104,-1.52475051118503),(20,105,2.70024719992676),(20,106,0.708922086245308),(20,111,-1.05277413251137),(20,116,-0.0417798394726401),(21,86,5.43183690908536),(21,87,-3.66593676564837),(21,94,-2.48277993102817),(21,96,2.11676381725517),(21,101,1.9455854976043),(21,102,5.2524109622486),(21,105,0.881046479689932),(21,107,3.63180181279946),(21,108,-0.34492782372509),(22,86,-1.05934324167608),(22,88,3.64568010498367),(22,91,2.7665868099002),(22,92,-0.968253120517594),(22,93,5.32549516281625),(22,98,0.298867763298441),(22,106,-1.10949278237251),(22,115,1.52970976897488),(22,117,-1.14276558732872),(23,85,-2.58539841914121),(23,86,-1.0643101290933),(23,88,-0.760536515396588),(23,90,2.41022980437635),(23,97,-3.20004119998779),(23,104,0.00448622089297163),(23,112,0.974036378063295),(23,114,-0.34110538041322),(23,115,1.04292428357799),(23,116,-0.0521256141850031),(24,89,-3.66501358073672),(24,90,-1.88785973693045),(24,91,-0.312982573931089),(24,101,-3.00348673970763),(24,107,0.563699758903775),(24,108,-0.722228156376843),(24,110,-1.0905941953795),(24,112,1.89158299508652),(25,90,1.39329966124454),(25,92,-1.62504196295053),(25,94,1.5341349528489),(25,98,1.92277291177099),(25,105,0.791665395062105),(25,108,0.672475356303598),(25,109,2.09266945402387),(25,115,1.06675923947874),(26,85,2.26866206854457),(26,87,-1.81137272255623),(26,89,1.13013855403302),(26,95,1.41989654225288),(26,98,-0.982573931089206),(26,100,0.909909360026856),(26,101,0.20364238410596),(26,102,-1.64844203009125),(26,103,-0.157887508774071),(26,104,3.61070589312418),(26,107,3.50896481215857),(26,109,-0.467490157780694),(26,112,-1.84196752830592),(26,113,1.27378154850917),(26,117,-0.73239082003235),(27,85,1.26918851283303),(27,87,-2.4851832636494),(27,94,2.3233893856624),(27,100,1.30832087160863),(27,102,-1.80154576250496),(27,103,3.46594897305216),(27,104,-2.91808832056642),(27,105,4.32499923703726),(27,108,-0.890301217688528),(27,110,1.69266335032197),(27,114,-3.67275765251625),(28,87,1.58545182653279),(28,88,0.76890621662038),(28,97,1.69248023926511),(28,99,0.213995788445692),(28,104,1.71059297463912),(28,113,1.44463942381054),(28,114,-2.47907193212683),(29,88,-3.05981627857295),(29,91,4.43475142674032),(29,102,-3.98466444898831),(29,105,1.61048463393048),(29,116,1.80536820581683),(30,95,0.280549027985473),(30,96,1.7991729483932),(30,99,0.292504654072695),(30,101,-2.60037537766655),(30,104,-5.36770989104892),(30,109,-0.979079561754204),(30,110,2.69340342417676),(30,114,2.34574419385357),(30,118,0.207403790398877),(31,85,2.07474745933409),(31,92,-1.2093188268685),(31,94,-1.9909665211951),(31,96,2.14738914151433),(31,99,-1.43444624164556),(31,103,1.47144230475784),(31,107,-0.42992950224311),(31,108,-0.169820245979186),(31,109,4.07554857020783),(31,111,-0.961760307626575),(31,112,-2.73262733848079),(31,117,-4.0170064394055),(32,86,-2.41718039490951),(32,87,0.330233161412397),(32,89,2.65057832575457),(32,92,-2.20771660512101),(32,98,-0.0907467879268777),(32,99,3.31435590685751),(32,104,-0.247070223090304),(32,106,1.61494033631397),(32,109,-3.04283272804956),(32,116,-4.13586077455977),(32,118,3.34801019318216),(33,96,-1.83024842066713),(33,98,-0.119296853541673),(33,108,-0.130802331614124),(33,110,-0.141636402478103),(33,111,2.06004516739402),(33,114,-1.12039551988281),(34,85,1.91830195013276),(34,90,-0.336909085360271),(34,99,2.58640552995392),(34,104,-3.58869441816462),(34,109,2.67979979857784),(35,86,2.33424634540849),(35,87,4.2358241523484),(35,97,-0.282792138431959),(35,98,0.374462111270486),(35,100,-0.399166844691305),(35,104,1.79995117038484),(35,107,-4.29809717093417),(35,109,0.971694082461013),(35,110,-2.80066072573016),(35,112,-1.02454451124607),(36,85,-2.66760002441481),(36,87,-3.42909024323252),(36,90,-2.39944151127659),(36,91,4.71400341807306),(36,104,-2.32299264503922),(36,107,-3.38319040498062),(36,109,0.093081453901791),(36,112,1.59689626758629),(36,115,0.101054414502396),(36,117,-0.00317392498550362),(36,118,-1.12181463057344),(37,85,0.828524124881741),(37,86,2.54314554277169),(37,87,-1.10805078279977),(37,91,-2.32718894009217),(37,99,-3.66383861812189),(37,105,0.741431928464614),(37,111,-2.56212805566576),(37,112,2.30551316873684),(37,118,1.83124790185247),(38,87,2.26121555223243),(38,90,2.01332895901364),(38,103,3.27920621356853),(38,105,-0.245590075380719),(38,106,3.18346201971496),(38,111,-2.50051118503372),(38,115,2.81034272286142),(39,87,2.0379268776513),(39,89,0.256317331461531),(39,91,1.37672811059908),(39,94,0.779717398602252),(39,97,0.9368724631489),(39,98,0.298463393047884),(39,107,-2.65798669392987),(39,108,2.86851863155004),(39,109,1.20378734702597),(39,111,-2.97148808252205),(39,113,-0.243705557420576),(39,116,-2.36802270577105),(39,118,1.05905331583605),(40,88,-1.13023010956145),(40,92,-0.846697897274697),(40,99,-4.76126132999664),(40,104,-0.881885738700522),(40,110,2.14146092104862),(40,116,-4.40892513809626),(40,118,-0.479903561510056),(41,88,0.952978606524857),(41,93,-0.909825434125797),(41,96,-0.851687673574022),(41,97,-0.391094698934904),(41,100,-0.690977202673422),(41,101,-2.03540910061953),(41,104,1.04812768944365),(41,105,3.65843684194464),(41,106,-0.992721335489975),(41,107,-2.74201178014466),(41,109,-0.853389080477309),(41,110,2.93585772270882),(41,111,-1.47417371135594),(41,112,-3.07792901394696),(42,85,-2.83162938322092),(42,86,-0.875301370281075),(42,87,1.06865138706626),(42,99,2.49748222296823),(42,100,2.28494369335002),(42,103,3.93700216681417),(42,109,-2.72008423108615),(42,113,1.26815088351085),(43,85,-0.818559831537828),(43,88,-3.81176183355205),(43,89,0.225051118503372),(43,93,1.55403302102725),(43,97,2.18545335245827),(43,98,-3.55110324411756),(43,101,-0.96988586077456),(43,102,-1.28397473067415),(43,103,2.70062105166784),(43,105,4.07811212500382),(43,110,-1.57916501358074),(43,112,-3.23521378215888),(43,114,-4.51706747642445),(43,116,-0.880001220740379),(44,89,2.39638966032899),(44,98,0.946302682576983),(44,99,-0.328669087801752),(45,87,1.32741782891324),(45,88,3.26503036591693),(45,90,-1.76845606860561),(45,91,-1.31582842493973),(45,95,0.196150090029603),(45,98,-4.90830713827937),(45,108,-2.84908597064119),(45,109,0.609881893368328),(45,112,2.57330545976135),(45,115,-2.31762901699881),(46,85,-2.61748100222785),(46,89,1.73900570696127),(46,91,-1.79827265236366),(46,94,-3.71111178930021),(46,97,3.73979918820765),(46,100,2.53724784081545),(46,101,0.264954069643239),(46,108,1.08672597430342),(46,112,-2.79182561723685),(47,86,-0.226836451307718),(47,91,2.15985595263527),(47,92,-1.90260780663472),(47,94,-2.1071581163976),(47,95,-2.20675527207251),(47,100,2.54453413495285),(47,101,2.0974608600116),(47,104,1.80478835413678),(47,105,0.0914639728995634),(47,108,-1.08321634571368),(47,112,0.326075014496292),(47,114,0.38045136875515),(47,118,0.315813165684988),(48,86,0.671742912076174),(48,91,-4.46648304696799),(48,98,1.67955565050203),(48,99,2.80832087160863),(48,100,-1.37835322122868),(48,103,2.94458601641896),(48,105,-1.71247749259926),(48,106,-1.75751518295846),(48,111,0.900814844203009),(48,115,0.188947721793267),(49,87,4.58192693868831),(49,89,-3.26245918149358),(49,93,-0.259056367687002),(49,94,-2.30216376232185),(49,95,0.753601184118168),(49,102,-4.17873165074618),(49,113,1.1164357432783),(49,114,2.98910489211707),(50,89,3.53237250892666),(50,105,-0.921414838099307),(50,107,3.54177983947264),(51,87,3.35786767174291),(51,92,2.70555742057558),(51,97,1.13156529435102),(51,98,0.449056978057192),(51,103,-3.19828638569292),(51,106,0.283181249427777),(51,112,-3.3962141788995),(51,118,-1.73195593127232),(52,89,1.03828547013764),(52,97,-4.37218848231452),(52,106,1.54805139316996),(52,110,0.362178411206397),(52,111,2.86701559495834),(52,113,3.21368297372356),(52,114,-4.53671376689962),(52,118,1.34190649128697),(53,88,-1.63097018341624),(53,90,-0.294122135074923),(53,92,-0.932622760704367),(53,94,5.38834803308206),(53,104,0.319917905209509),(53,105,0.353808709982604),(53,109,0.193777275917844),(54,85,0.635898922696616),(54,91,3.60267189550462),(54,94,2.52318643757439),(54,96,2.09978789635914),(54,111,1.1035874507889),(54,112,-1.8981597338786),(54,113,-0.245414593951231),(54,118,2.73442793053987),(55,87,-0.02424695577868),(55,95,3.44607379375591),(55,107,3.05780205694754),(55,110,-5.52411725211341),(55,117,-2.49029511398663),(56,107,1.47909482100894),(56,111,-2.99895474105045),(56,113,-2.50616473891415),(56,114,-0.632106997894223),(57,87,0.0832544938505203),(57,90,3.37093722342601),(57,91,-0.0637073885311443),(57,92,3.3473616748558),(57,93,-0.869121372112186),(57,94,-2.21369060335093),(57,95,0.198316904202399),(57,96,1.33683278908658),(57,100,2.38404492324595),(57,102,0.242660298471022),(57,103,3.08187353129673),(57,115,3.81988738670003),(58,86,2.55883205664235),(58,87,-3.81947538682211),(58,89,-2.27143925290689),(58,90,-1.86841944639424),(58,95,-3.74684133426923),(58,96,0.417836542863246),(58,101,-2.46931363872188),(58,103,-1.40356913968322),(58,109,-0.530487990966521),(58,110,2.31769768364513),(58,113,-0.0382778405102694),(58,114,-3.60797448652608),(58,115,-1.03601184118168),(58,118,-2.42461928159429),(59,85,-0.438024536881619),(59,86,-4.02886288033692),(59,90,-0.996246223334452),(59,91,4.00429548020875),(59,93,-4.11757255775628),(59,97,4.7820444349498),(59,98,2.60993530075991),(59,100,-3.39822840052492),(59,102,2.65933713797418),(59,112,2.04607531968139),(59,114,-4.5668202764977),(60,85,1.22143467513047),(60,87,-1.43103579821162),(60,90,-0.118282113101597),(60,91,-0.509887997070223),(60,96,0.745384075441756),(60,100,2.60693685720389),(60,101,-0.29452650532548),(60,105,-1.64819025238807),(60,107,4.87556840723899),(60,109,-0.468451490829188),(60,110,-0.670819727164525),(60,114,-1.53611865596484),(61,89,-1.67633594775231),(61,94,-0.198576311532945),(61,96,-1.4142048402356),(61,98,-3.5227896969512),(61,100,2.90700247199927),(61,102,-0.836512344737083),(61,103,1.09965819269387),(61,114,4.59105960264901),(61,115,-4.32813501388592),(62,93,0.58706930753502),(62,95,-0.523430585650197),(62,107,-0.356761375774407),(62,109,-0.524010437330241),(62,110,-1.43673512985626),(62,111,0.863910336619159),(63,87,-3.18791009247108),(63,90,-0.984038819544053),(63,93,-3.0813394573809),(63,97,-2.17616809595019),(63,100,4.18630787072359),(63,103,-3.46344645527512),(63,104,-2.26911984618671),(63,108,1.94244972075564),(63,111,-2.94897305215613),(63,114,0.330950346385082),(63,117,-3.88436536759545),(64,87,4.61920529801325),(64,94,0.25053407391583),(64,99,-2.30224768822291),(64,110,-0.779534287545396),(64,112,-0.957243568224128),(64,116,-2.10781426435133),(65,87,-0.17200231940672),(65,88,1.53485976744896),(65,90,-1.54484694967498),(65,97,-0.701292458876309),(65,99,-0.0410321359904784),(65,107,-0.366214484084598),(65,110,1.52919858394116),(65,111,-3.03082369457076),(65,114,1.98607593005158),(65,116,-0.384968108157598),(65,117,4.10504470961638),(66,85,-2.39745017853328),(66,102,1.90556047242653),(66,105,1.44611194189276),(66,108,3.86564226203192),(66,111,0.460631122775964),(66,115,-0.648304696798608),(66,118,2.32564775536363),(67,86,-1.21218756675924),(67,90,2.35559404278695),(67,92,-1.2481536301767),(67,104,0.55466628009888),(67,109,0.218604083376568),(67,111,0.0501037629322184),(68,87,0.281739249855037),(68,88,3.66990417188024),(68,90,1.86755729850154),(68,93,-1.74794763023774),(68,95,-2.72148808252205),(68,96,1.71071504867702),(68,97,0.945417645802179),(68,103,1.5751365703299),(68,107,2.44293038727989),(68,112,0.149311807611316),(68,114,-0.524231696523942),(69,87,-0.421636097293008),(69,88,0.678655354472488),(69,92,4.00200659199805),(69,94,-2.16032898953215),(69,95,2.52128666035951),(69,97,-2.11539048432875),(69,108,0.652699362163152),(69,113,-3.24306466872158),(69,114,-0.115024262215034),(69,118,-1.02852717673269),(70,85,2.47505111850337),(70,86,0.644718771935179),(70,87,-0.986816003906369),(70,90,3.43838312936796),(70,96,-1.61801507614368),(70,97,0.639728995635853),(70,99,-1.80438398388623),(70,105,1.98848689230018),(70,107,0.803270058290353),(70,109,-0.718863490707114),(70,110,0.524918362987152),(70,111,-1.51026947843867),(71,85,-0.549172948393201),(71,93,0.24877925962096),(71,96,-2.53066347239601),(71,100,1.45527512436293),(71,104,-0.237281411175878),(71,106,1.52353740043336),(71,111,0.480521561326945),(71,113,-2.44926297799615),(72,94,1.90945921201209),(72,96,-0.148113956114383),(72,99,-0.455694753868221),(72,110,-0.847880489516892),(72,112,0.784249397259438),(72,114,0.997116000854518),(72,115,4.46844386120182),(72,116,0.470900601214637),(73,88,3.74315622425001),(73,94,2.30079042939543),(73,99,0.891140476699118),(73,100,0.186010315256203),(73,106,1.4371929074984),(73,110,-2.78031250953703),(73,115,1.36671803949095),(74,90,-0.393902401806696),(74,94,0.358752708517716),(74,99,-1.21784112063967),(74,102,-1.05130924405652),(74,106,1.68536179692984),(74,107,-0.180333872493667),(74,110,1.03901791436506),(74,113,-1.20059816278573),(74,116,0.516525772881252),(75,85,-1.14382610553301),(75,86,1.22997222815638),(75,93,1.35264900662252),(75,98,0.793389690847499),(75,103,-0.883709219641713),(75,105,1.90572832422864),(75,111,2.11722922452467),(75,117,1.88717307046724),(76,86,-2.22500534073916),(76,89,2.14803765984069),(76,92,-2.35496841334269),(76,94,-1.51791436506241),(76,99,-0.329401532029176),(76,101,-2.2918637653737),(76,103,-0.96393475142674),(76,106,1.24849696340831),(76,110,-0.485267189550462),(76,113,1.0544145023957),(77,88,-1.38615070039979),(77,91,1.4449446089053),(77,93,1.62327951902829),(77,98,-0.697149571214942),(77,101,-2.36106448561052),(77,102,0.76792199468978),(77,103,-2.59788811914426),(77,104,-0.0506225775933103),(77,105,-1.91007721182897),(77,109,-1.53474532303842),(78,88,-1.60640278328806),(78,93,1.13544114505448),(78,94,1.95463423566393),(78,101,0.189588610492264),(78,104,-0.129322183904538),(78,110,-2.02398754844813),(78,114,0.180135502182074),(78,116,-0.684835352641377),(78,117,-2.53419598986785),(78,118,-0.926541947691275),(79,87,-0.796914578691977),(79,92,-0.963660084841456),(79,94,0.690794091616565),(79,107,2.12263100070193),(79,108,2.31147190771203),(79,114,-2.03199865718558),(79,118,-0.546273689992981),(80,87,-2.41096224860378),(80,88,2.93744468520157),(80,91,-0.817697683645131),(80,99,-2.60701315347758),(80,101,2.2402798547319),(80,107,2.97798089541307),(80,113,-1.11411633655812),(81,85,-3.60187078463088),(81,86,-0.927610095522935),(81,90,-0.324427014984588),(81,93,0.18519394512772),(81,96,1.89217047639393),(81,97,-0.246719260231331),(81,106,-2.73208563493759),(81,107,-0.892513809625538),(81,110,0.949430829798273),(81,115,0.371051667836543),(82,86,-1.81821649830622),(82,92,-0.65591906491287),(82,110,1.65509506515702),(82,112,1.81208990752892),(83,87,-0.881527146214179),(83,91,-0.0968199713126011),(83,93,-1.34768974883267),(83,101,-2.01882992034669),(83,103,1.84579760124516),(83,105,-1.42094180120243),(83,108,-1.74301889095737),(84,85,1.34110538041322),(84,86,1.23462630085147),(84,89,0.269325846125675),(84,95,0.478293710135197),(84,99,-0.173841059602649),(84,104,-1.77434614093448),(84,111,-1.43621631519517),(84,113,2.00308236945708),(84,114,1.52569658497879),(35,105,-1.50364696188238)]
orgname='BHNEAT_8_3'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()