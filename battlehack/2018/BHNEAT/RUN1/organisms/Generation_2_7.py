edge = [(0,85,0.871639149143956),(0,89,-3.28131962034974),(0,90,1.83729056672872),(0,93,-1.37110507522813),(0,98,0.399227881710257),(0,101,-2.70664082766198),(0,105,-0.41621143223365),(0,108,2.14728232673116),(0,113,-1.60592974639119),(0,114,1.65617847224342),(0,117,0.234229560228278),(0,118,-0.84881130405591),(1,86,2.57432782982879),(1,92,-1.92463454084902),(1,98,-0.0880458998382518),(1,102,-0.322931608020264),(1,104,-0.231833857234413),(1,107,-1.84223456526383),(1,108,-2.51075777459029),(1,109,-2.02735984374523),(1,113,-2.18311105685598),(2,87,2.16425061799982),(2,88,1.64220099490341),(2,100,-0.921308023316141),(2,106,-2.68398083437605),(2,108,1.66330454420606),(2,110,-2.73477889339885),(2,113,-0.426770836512345),(2,118,1.79163487655263),(3,89,0.492965483565783),(3,92,0.00299081392864775),(3,97,2.04367198706015),(3,99,1.33150730918302),(3,101,-0.706946012756737),(3,103,-1.09521774956511),(3,105,-0.36718344676046),(3,108,-0.439069795831172),(3,109,-2.03968932157353),(3,111,1.30317087313456),(3,112,0.273659474471267),(3,116,-2.43702505569628),(4,90,-1.24224066896573),(4,91,0.446729941709647),(4,97,-1.89965514084292),(4,99,0.58890041810358),(4,101,1.10802026429029),(4,108,-0.0869014557329021),(4,113,1.29311502426221),(4,118,1.30693990905484),(5,86,1.38860744041261),(5,87,-2.12480544450209),(5,89,1.28104495376446),(5,92,-0.512955107272561),(5,93,0.599520859401227),(5,99,0.47659230323191),(5,104,1.14590899380474),(5,114,1.55278176213874),(5,118,-0.679387798699912),(6,89,-1.60577715384381),(6,92,0.120624408703879),(6,94,-0.0151066621906186),(6,100,1.57084871974853),(6,101,-1.50419629505295),(6,103,0.314065981017487),(6,107,0.410199285866878),(6,110,1.30874050111393),(6,113,-0.71378215887936),(7,85,-1.07409894100772),(7,86,1.80431531723991),(7,90,-0.617099520859401),(7,95,2.06523331400494),(7,99,0.490020447401349),(7,100,-0.214331492049928),(7,104,1.69203772087771),(7,106,-0.98292489394818),(7,108,-0.804940946684164),(7,112,1.12363048188726),(7,116,1.90427869502853),(8,92,-1.35398419141209),(8,93,0.449552903836177),(8,95,0.856288338877529),(8,99,-2.57269508957183),(8,106,-1.38186284981841),(8,107,-0.19434186834315),(8,115,-1.51313821832942),(8,116,-2.60403759880367),(8,118,-1.90252388073367),(9,85,1.93523972289193),(9,87,2.21988586077456),(9,98,2.11345255897702),(9,101,1.41007721182897),(9,103,2.53425702688681),(9,105,-1.47682119205298),(9,106,2.13000885036775),(9,113,1.61014130069887),(10,89,1.62988677632984),(10,96,-2.02829065828425),(10,106,-1.35200048829615),(10,108,2.50758384960479),(10,109,0.303491317484054),(10,111,1.32422864467299),(10,112,-0.65393536179693),(10,114,-0.817606128116703),(10,115,-0.719290749839778),(10,116,-0.638676107058931),(10,117,-0.382671590319529),(11,89,-1.72290719321268),(11,97,3.13716544083987),(11,105,0.935285500656148),(11,112,-0.540955839716788),(11,115,-2.62207403790399),(12,92,-3.13695181127354),(12,93,0.39692373424482),(12,94,1.57811212500381),(12,97,-0.713644825586718),(12,98,-1.3568376720481),(12,99,3.09372234260079),(12,108,0.337473677785577),(12,116,2.02766502883999),(13,86,3.24599444563128),(13,87,-0.105304116946928),(13,90,0.105014191106906),(13,99,1.5792718283639),(13,102,-1.08432264168218),(13,104,0.834391308328501),(13,113,-0.808069093905454),(13,116,1.72815637684256),(13,118,-1.56552323984497),(14,90,-0.649006622516556),(14,93,1.7488937040315),(14,95,1.49410992767113),(14,102,-0.932172612689596),(14,104,1.85262611774041),(14,106,-0.594027527695547),(14,109,2.52452162236396),(14,110,2.56598101748711),(14,111,0.764839625232704),(15,85,-1.70007934812464),(15,92,-1.08534501174963),(15,99,-0.968245490890225),(15,101,-0.597323526718955),(15,104,1.69008453627125),(15,108,-2.42463454084902),(15,117,1.55459761345256),(16,86,0.716116824854274),(16,87,0.275109103671377),(16,88,1.55180516983551),(16,90,0.855327005829035),(16,91,1.91129795220801),(16,95,1.23740348521378),(16,97,-1.00563066499832),(16,98,1.45951719718009),(16,99,1.4467909787286),(16,101,-0.448576311532945),(16,108,0.309213538010804),(16,110,2.33979308450575),(17,89,2.26992095706046),(17,96,-2.11238441114536),(17,99,-0.965819269386883),(17,101,1.6909085360271),(17,106,0.523270363475448),(17,107,-0.996383556627094),(17,109,0.19876705221717),(18,90,-1.21138645588549),(18,91,-0.616702780236213),(18,93,0.233329264198736),(18,99,-2.04611346781823),(18,102,-0.487334818567461),(18,103,-2.47074800866726),(18,104,0.000839259010589899),(18,110,2.66858424634541),(18,111,2.87086092715232),(18,116,0.477538377025666),(18,117,-0.0717184972685934),(18,118,-1.88065736869411),(19,87,-1.85352641376995),(19,89,-0.542588579973754),(19,93,-2.25638599810785),(19,95,-1.32793664357433),(19,101,0.900967436750389),(19,105,0.923932615131077),(19,115,-2.88084047975097),(20,88,-1.44586016418958),(20,101,-1.27867976928007),(20,103,-0.726752525406659),(20,104,1.81145664845729),(20,105,-1.57234412671285),(20,106,-1.02380443739128),(20,111,-0.676595355082858),(20,116,-2.49276711325419),(21,86,-0.256965849787896),(21,87,-1.06976531266213),(21,94,1.36098818933683),(21,96,1.25194555497909),(21,101,2.72998748741111),(21,102,-1.61551255836665),(21,105,-1.2233954893643),(21,107,-0.863704336680197),(21,108,-2.54145939512314),(22,86,-0.844111453596606),(22,88,1.17926572466201),(22,91,-1.83193456831568),(22,92,-0.779076509903256),(22,93,0.41697439497055),(22,98,-1.22179326761681),(22,106,-1.40754417554247),(22,115,-1.71845149082919),(22,117,-0.490813928647725),(23,85,-1.97605822931608),(23,86,-2.11075167088839),(23,88,0.473632007812738),(23,90,1.44363231299783),(23,97,0.826532792138432),(23,104,-2.71372112186041),(23,112,1.90458388012329),(23,114,-0.629276406140324),(23,115,-1.44700460829493),(23,116,0.520477919858394),(24,89,-2.96781823175756),(24,90,-2.82522049623096),(24,91,-0.373943296609394),(24,101,0.0935239722891934),(24,107,0.828089236121708),(24,108,-0.791695913571581),(24,110,2.38599810785241),(24,112,-0.317804498428297),(25,90,-0.844569231238746),(25,92,-1.45860164189581),(25,94,-2.00715659047212),(25,98,1.54205450605792),(25,105,-0.160496841334269),(25,108,-1.4577929013947),(25,109,0.636173589281899),(25,115,0.67665639210181),(26,85,2.22363963744011),(26,87,1.07083346049379),(26,89,1.23409222693564),(26,95,-0.685689870906705),(26,98,-1.23003326517533),(26,100,2.63382366405225),(26,101,0.452940458388012),(26,102,2.27152317880795),(26,103,0.0539872432630391),(26,104,0.0121158482619709),(26,107,-1.15254676961577),(26,109,0.922666096987823),(26,112,1.91802728354747),(26,113,1.127140110477),(26,117,0.892834253975036),(27,85,-1.11301004058962),(27,87,-1.29549546800134),(27,94,1.06595049897763),(27,100,1.57486190374462),(27,102,0.772652363658559),(27,103,0.736106448561052),(27,104,-2.57061983092746),(27,105,-0.541413617358928),(27,108,-0.385372478408155),(27,110,-2.1068605609302),(27,114,-1.09562974944304),(28,87,1.48825037385174),(28,88,-2.50920133060701),(28,97,-0.568941312906278),(28,99,-0.902829065828425),(28,104,2.0324869533372),(28,113,-1.14122440260018),(28,114,-0.748252815332499),(29,88,-0.212820825830866),(29,91,-0.455076754051332),(29,102,-0.189077425458541),(29,105,1.86161381878109),(29,116,1.88471633045442),(30,95,0.419446394238105),(30,96,0.574694051942503),(30,99,-0.344492934965056),(30,101,-0.974730674153874),(30,104,2.09906308175909),(30,109,1.11136204107791),(30,110,2.55252235480819),(30,114,-0.00866725669118329),(30,118,2.90218817712943),(31,85,-2.66374706259346),(31,92,1.33971678823206),(31,94,1.46105838190863),(31,96,1.99227881710257),(31,99,1.01321451460311),(31,103,-0.746040223395489),(31,107,-1.68408764915921),(31,108,-1.45251319925535),(31,109,1.36680196539201),(31,111,1.11551255836665),(31,112,-0.600756859035005),(31,117,-3.00474562822352),(32,86,1.19747001556444),(32,87,2.6346476638081),(32,89,-2.62431714835047),(32,92,-0.218939786980804),(32,98,1.21193578905606),(32,99,1.34107486190374),(32,104,0.684942167424543),(32,106,1.31337931455428),(32,109,2.45004119998779),(32,116,-1.12326425977355),(32,118,-2.02198858607746),(33,96,-1.03865169225135),(33,98,0.233726004821925),(33,108,0.383053071687979),(33,110,1.09138767662587),(33,111,0.246101260414441),(33,114,-0.883190404980621),(34,85,1.95522934659871),(34,90,-0.45524460585345),(34,99,-1.93784905545213),(34,104,-1.2066103091525),(34,109,2.42947172460097),(35,86,0.00625629444257941),(35,87,0.530152287362285),(35,97,0.852687154759362),(35,98,-1.33754997405927),(35,100,1.02436902981658),(35,104,1.95986816003906),(35,107,-2.2732322153386),(35,109,-0.273461104159673),(35,110,0.179891354106265),(35,112,2.89429914242988),(36,85,-2.4537797173986),(36,87,0.337809381389813),(36,90,-0.820184942167425),(36,91,-0.787377544480727),(36,104,0.355998413037507),(36,107,0.385616626483963),(36,109,2.48313852351451),(36,112,-1.17326883754997),(36,115,0.76227607043672),(36,117,0.0271156956694235),(36,118,1.03199865718558),(37,85,0.15118869594409),(37,86,-1.10065004425184),(37,87,-1.88566240424818),(37,91,0.582216864528336),(37,99,-3.23696096682638),(37,105,-2.34179204687643),(37,111,-2.40255439924314),(37,112,0.907498397778252),(37,118,0.631397442548906),(38,87,-1.56202887050996),(38,90,-0.936246833704642),(38,103,2.14815210425123),(38,105,-1.45751823480941),(38,106,1.42712179937132),(38,111,1.1727958006531),(38,115,-0.938352610858486),(39,87,2.66061891537217),(39,89,0.487151707510605),(39,91,0.683462019714957),(39,94,-2.5989867854854),(39,97,-0.429517502365184),(39,98,0.638248847926267),(39,107,1.73442793053987),(39,108,-0.512283700064089),(39,109,1.28008362071596),(39,111,0.905774101992859),(39,113,1.97422711874752),(39,116,-1.33130893887143),(39,118,0.812829981383709),(40,88,2.60464796899319),(40,92,-2.01361125522629),(40,99,-1.60385448774682),(40,104,-0.0610675374614704),(40,110,-0.691839350566118),(40,116,1.30216376232185),(40,118,-0.782647175511948),(41,88,0.149922177800836),(41,93,1.59056367687002),(41,96,-1.63872188482315),(41,97,1.71628467665639),(41,100,-2.29979857783746),(41,101,1.27228614154485),(41,104,-0.396923734244819),(41,105,-0.813409833063753),(41,106,1.14716025269326),(41,107,-3.12021240882595),(41,109,3.1248512222663),(41,110,2.18720053712577),(41,111,-2.32514419995727),(41,112,-1.5497146519364),(42,85,3.44854579302347),(42,86,1.46302682576983),(42,87,-2.14448988311411),(42,99,-0.536667989135411),(42,100,-0.268669698171941),(42,103,-2.67426068910794),(42,109,-1.71686452833644),(42,113,0.772759178441725),(43,85,1.688177129429),(43,88,-1.57635731070895),(43,89,-0.13106173894467),(43,93,0.955412457655568),(43,97,1.66370128482925),(43,98,-0.938413647877438),(43,101,-0.736762596514786),(43,102,-0.702063051240578),(43,103,-0.0366222113711967),(43,105,1.17587817011017),(43,110,-1.62150944547868),(43,112,1.23303933835871),(43,114,-0.56953642384106),(43,116,0.479827265236366),(44,89,0.732978301339762),(44,98,1.12704855494858),(44,99,1.72545548875393),(45,87,0.162984099856563),(45,88,-1.02914517654958),(45,90,-1.24834437086093),(45,91,-1.25109103671377),(45,95,0.640385143589587),(45,98,-1.47880489516892),(45,108,0.231376079592273),(45,109,-1.22031311990722),(45,112,-0.562700277718436),(45,115,1.54246650593585),(46,85,1.89368877224036),(46,89,-2.03773613696707),(46,91,1.65024262215033),(46,94,-2.16473891415143),(46,97,1.71932126834925),(46,100,0.483428449354534),(46,101,1.65884884182257),(46,108,0.699331644642476),(46,112,-0.293084505752739),(47,86,-1.85412152470473),(47,91,2.13811151463363),(47,92,2.33678701132237),(47,94,-0.206503494369335),(47,95,-1.6010773033845),(47,100,-2.27643665883358),(47,101,2.69577623828852),(47,104,-0.709021271401105),(47,105,-0.376079592272713),(47,108,-1.32656331064791),(47,112,0.810861537522507),(47,114,-1.29757072664571),(47,118,1.80202642902921),(48,86,1.78742332224494),(48,91,1.0936460463271),(48,98,-0.192709128086184),(48,99,-2.09459212012085),(48,100,2.43279824213385),(48,103,-0.17505417035432),(48,105,-2.88447218237861),(48,106,-1.81946775719474),(48,111,0.142429883724479),(48,115,-0.441908017212439),(49,87,-2.28260139774773),(49,89,2.24727622302927),(49,93,0.076342051454207),(49,94,0.0864436780907621),(49,95,0.915234839930418),(49,102,2.44431897946104),(49,113,0.0429395428327281),(49,114,0.242362743003632),(50,89,-0.600360118411817),(50,105,1.55348368785668),(50,107,0.685628833887753),(51,87,-1.66640217291787),(51,92,2.18370616779077),(51,97,0.087084566789758),(51,98,-0.838923306985687),(51,103,0.187780388805811),(51,106,-2.37902462843715),(51,112,2.02154606769005),(51,118,-1.69998779259621),(52,89,0.713568529313028),(52,97,-2.56053346354564),(52,106,-1.1817529831843),(52,110,-2.62833033234657),(52,111,1.96290475173193),(52,113,-1.39628284554582),(52,114,0.597415082247383),(52,118,0.318430127872555),(53,88,-0.107089449751274),(53,90,-1.23874629963073),(53,92,1.397961363567),(53,94,-1.20799890133366),(53,104,-2.76569414349803),(53,105,0.706030457472457),(53,109,-2.38564714499344),(54,85,1.25786614581744),(54,91,-1.23416852320933),(54,94,0.0665150914029358),(54,96,2.59971922971282),(54,111,1.71872615741447),(54,112,1.54646443067721),(54,113,-1.84374523148289),(54,118,-0.097872859889523),(55,87,-1.95439008758812),(55,95,1.6537217322306),(55,107,-1.63289284951323),(55,110,-1.63899655140843),(55,117,0.116138187810907),(56,107,-1.67772453993347),(56,111,1.29877620777001),(56,113,0.782448805200354),(56,114,0.669515060884426),(57,87,-1.19096957304605),(57,90,0.971205786309397),(57,91,0.618228705710013),(57,92,1.9867091891232),(57,93,-1.73122348704489),(57,94,2.52957243568224),(57,95,-1.59384441663869),(57,96,-2.57411420026246),(57,100,1.12837611011078),(57,102,-3.10571611682485),(57,103,2.09471419415876),(57,115,1.76519058809168),(58,86,2.98998992889187),(58,87,-0.59050263985107),(58,89,-0.902798547318949),(58,90,-0.846125675222022),(58,95,-3.07879879146702),(58,96,2.71568956572161),(58,101,0.451918088320566),(58,103,2.17560350352489),(58,109,-0.942793053987243),(58,110,0.543122653889584),(58,113,2.60640278328806),(58,114,1.67699209570605),(58,115,1.55958738975188),(58,118,-3.05284279915769),(59,85,1.308969389935),(59,86,2.64435254982147),(59,90,2.13518173772393),(59,91,2.31070894497513),(59,93,-0.161015655995361),(59,97,1.12466811120945),(59,98,-1.18111209448531),(59,100,0.321481978820154),(59,102,1.38167973876156),(59,112,1.61893063142796),(59,114,-0.668843653675954),(60,85,0.36787011322367),(60,87,1.4176763206885),(60,90,2.69260231330302),(60,91,1.40079958494827),(60,96,0.903088473158971),(60,100,0.525498214667196),(60,101,-3.20030823694571),(60,105,-2.95258949552904),(60,107,2.48715170751061),(60,109,2.03646961882382),(60,110,0.381954405346843),(60,114,-2.07496871852779),(61,89,-1.86883144627216),(61,94,-1.99829096346934),(61,96,1.07095553453169),(61,98,-0.224005859553819),(61,100,1.16687520981475),(61,102,-0.698110904263436),(61,103,-2.22502822962127),(61,114,-0.688253425702689),(61,115,0.712912381359294),(62,93,-1.4210486159856),(62,95,-2.78176213873714),(62,107,-2.18749046296579),(62,109,-1.97459334086123),(62,110,3.29271828363903),(62,111,0.913281655323954),(63,87,-1.97093111972411),(63,90,1.26067384868923),(63,93,1.31511886959441),(63,97,-1.39046906949065),(63,100,0.114032410657064),(63,103,1.08514664143803),(63,104,1.40290536210211),(63,108,-2.1892605365154),(63,111,-2.47262489700003),(63,114,-1.04148991363262),(63,117,1.72730185857723),(64,87,0.378048036133915),(64,94,1.49145481734672),(64,99,0.010437330240791),(64,110,-1.72690511795404),(64,112,-1.13806573686941),(64,116,-0.0669423505355998),(65,87,0.553804132206183),(65,88,1.21712393566698),(65,90,1.42529068880276),(65,97,-2.63652455214087),(65,99,1.19756157109287),(65,107,-0.93572801904355),(65,110,-2.4926908169805),(65,111,1.33812982573931),(65,114,0.141697439497055),(65,116,-0.603518784142582),(65,117,-0.820337534714805),(66,85,-1.04017761772515),(66,102,0.446623126926481),(66,105,-0.564180425428022),(66,108,3.12518692587054),(66,111,-0.80314035462508),(66,115,2.47152623065889),(66,118,0.546342356639302),(67,86,-1.4042634357738),(67,90,1.40459913937803),(67,92,0.265755180516984),(67,104,3.26055177465133),(67,109,-0.107867671742912),(67,111,-1.12833033234657),(68,87,-0.303415021210364),(68,88,0.759392071291238),(68,90,-0.208960234382153),(68,93,-0.798303170873135),(68,95,0.651051362651448),(68,96,0.277169103061007),(68,97,1.48384044923246),(68,103,0.21935178685873),(68,107,-0.98017822809534),(68,112,1.77594836268197),(68,114,0.606418042542802),(69,87,0.762901699880978),(69,88,2.39219336527604),(69,92,-1.27162999359111),(69,94,0.119785149693289),(69,95,0.160145878475295),(69,97,-0.210974456007569),(69,108,-0.617694631794183),(69,113,-0.583849604785302),(69,114,0.905514694662313),(69,118,0.990844447157201),(70,85,0.656254768517106),(70,86,-0.512085329752495),(70,87,2.07849360637226),(70,90,2.21407208471938),(70,96,-1.65890987884152),(70,97,0.375591296121097),(70,99,0.743186742759484),(70,105,-1.36483352153081),(70,107,0.750511185033723),(70,109,1.77169103061006),(70,110,-0.586642048402356),(70,111,0.389126255073702),(71,85,-2.27225562303537),(71,93,-0.46134830774865),(71,96,0.797311319315165),(71,100,1.21437726981414),(71,104,-0.955458235419782),(71,106,-1.03608813745537),(71,111,-1.29866939298685),(71,113,0.233619190038759),(72,94,2.82406079287088),(72,96,-1.79921872615741),(72,99,0.766533402508621),(72,110,-0.184636982329783),(72,112,2.04585406048769),(72,114,0.10963774529252),(72,115,2.63657032990509),(72,116,0.470351268044069),(73,88,2.20996734519486),(73,94,-0.872768333994568),(73,99,2.05557420575579),(73,100,0.297723319193091),(73,106,1.94853053376873),(73,110,-1.15253151036103),(73,115,-1.48359630115665),(74,90,2.54922635578478),(74,94,-2.42732016968291),(74,99,-0.192114017151402),(74,102,-0.518723105563524),(74,106,-0.253059480574969),(74,107,-1.52551347392193),(74,110,-0.536118655964843),(74,113,-0.740348521378216),(74,116,-0.719855342265084),(75,85,1.34675130466628),(75,86,-0.184026612140263),(75,93,0.836542863246559),(75,98,2.6621143223365),(75,103,-0.815424054689169),(75,105,0.190328684347057),(75,111,0.924375133518479),(75,117,-1.78632465590381),(76,86,0.788125247962889),(76,89,0.451857051301614),(76,92,0.65378276924955),(76,94,0.469679860835597),(76,99,-2.25862910855434),(76,101,-1.78624835963012),(76,103,-1.68825342570269),(76,106,0.748832667012543),(76,110,-0.633472701193274),(76,113,0.640964995269631),(77,88,1.83770256660665),(77,91,-2.07162694174017),(77,93,2.44499038666951),(77,98,0.0988494521927549),(77,101,-0.831965086825159),(77,102,2.2933896908475),(77,103,2.12317270424512),(77,104,0.423749504074221),(77,105,0.147953733939634),(77,109,0.143925290688803),(78,88,-1.56138798181097),(78,93,-1.34859767448958),(78,94,0.521897030549028),(78,101,-0.601947080904569),(78,104,0.102511673329875),(78,110,-1.65791802728355),(78,114,-0.847727896969512),(78,116,-0.684835352641377),(78,117,-2.30332346568194),(78,118,0.594561601611377),(79,87,-0.8098544267098),(79,92,2.36846522415845),(79,94,0.238166447950682),(79,107,2.47779778435621),(79,108,0.574983977782525),(79,114,-2.15857417523728),(79,118,-2.78235724967193),(80,87,1.76068910794397),(80,88,-0.941343424787133),(80,91,-2.09019745475631),(80,99,0.479476302377392),(80,101,1.81153294473098),(80,107,0.89150669881283),(80,113,1.32641071810053),(81,85,-2.5952940458388),(81,86,-2.85784478286081),(81,90,1.15321817682424),(81,93,-0.340525528733177),(81,96,1.51440473647267),(81,97,1.42336802270577),(81,106,0.243003631702628),(81,107,-2.35068819238868),(81,110,0.112674336985382),(81,115,-2.02186651203955),(82,86,2.492370372631),(82,92,-1.08386486404004),(82,110,-0.852443006683554),(82,112,0.838831751457259),(83,87,-0.97460860011597),(83,91,2.04033021027253),(83,93,0.126773888363292),(83,101,1.00158696249275),(83,103,0.226752525406659),(83,105,0.779702139347514),(83,108,-0.982726523636586),(84,85,1.03572191534165),(84,86,0.152500991851558),(84,89,-0.632099368266854),(84,95,0.658772545548875),(84,99,-0.690786461989196),(84,104,-1.98515274513993),(84,111,0.237891781365398),(84,113,-0.465834528641621),(84,114,-0.78583635975219)]
orgname='BHNEAT_2_7'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()