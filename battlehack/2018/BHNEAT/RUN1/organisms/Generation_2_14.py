edge = [(0,85,-1.24283577990051),(0,89,-0.461790826136051),(0,90,1.41451765495773),(0,93,2.84389782403027),(0,98,2.91283913693655),(0,101,-0.317087313455611),(0,105,-2.75302896206549),(0,108,-0.573168126468703),(0,113,0.442365794854579),(0,114,2.69594409009064),(0,117,2.98358104190191),(0,118,-1.35047456282235),(1,86,1.83854182561724),(1,92,0.755516220587786),(1,98,1.33098849452193),(1,102,-2.76367992187262),(1,104,2.13988158818323),(1,107,-1.40139469588305),(1,108,-1.56392101809748),(1,109,2.02394177068392),(1,113,-0.0365916928617206),(2,87,-1.8662373729667),(2,88,0.373851741080966),(2,100,-1.2790154728843),(2,106,-2.01998962370678),(2,108,-1.4949797051912),(2,110,1.58676412244026),(2,113,2.78609576708274),(2,118,1.89991454817347),(3,89,0.793633838923307),(3,92,0.111194189275796),(3,97,1.0989867854854),(3,99,1.44520401623585),(3,101,-0.481673635059664),(3,103,0.841990417188025),(3,105,0.30123294778283),(3,108,0.771187475203711),(3,109,1.26924954985199),(3,111,-2.73653370769372),(3,112,-0.424542985320597),(3,116,1.18668172246467),(4,90,-0.351695303201392),(4,91,2.78493606372265),(4,97,2.42869350260933),(4,99,0.507736442152165),(4,101,-1.89347514267403),(4,108,-0.590685750907926),(4,113,2.0480666524247),(4,118,-1.51870784630879),(5,86,0.163548692281869),(5,87,-2.28203680532243),(5,89,1.24140140995514),(5,92,-0.327448347422712),(5,93,0.0270546586504715),(5,99,1.11072115237892),(5,104,-3.31659901730399),(5,114,-2.02508621478927),(5,118,-2.4022949919126),(6,89,1.38090151676992),(6,92,2.16495254371776),(6,94,0.242469557786798),(6,100,0.526139103366192),(6,101,0.0569017609179968),(6,103,0.123035370952483),(6,107,2.10383922849208),(6,110,2.06807153538621),(6,113,1.3127842036195),(7,85,-0.551225318155461),(7,86,1.37995544297616),(7,90,-2.72159489730522),(7,95,-1.00695822016053),(7,99,0.900051881466109),(7,100,-0.773262733848079),(7,104,-0.364375743888669),(7,106,-0.45966978972747),(7,108,-1.08551286355174),(7,112,0.47575304422132),(7,116,1.177053132725),(8,92,1.06514175847652),(8,93,-0.926892910550249),(8,95,1.3955504013184),(8,99,1.11323892941069),(8,106,-0.159291360209967),(8,107,0.621402630695517),(8,115,1.6259346293527),(8,116,-0.634372997222816),(8,118,2.44708090456862),(9,85,-2.54057435834834),(9,87,-0.0815607165746025),(9,98,-1.63214514603107),(9,101,-0.454268013550218),(9,103,-2.68161564989166),(9,105,0.288567766350291),(9,106,-1.57350383007294),(9,113,-1.7348399304178),(10,89,-1.09971922971282),(10,96,-1.04013183996094),(10,106,2.01554918057802),(10,108,-1.94012268440809),(10,109,0.87137974181341),(10,111,2.02253791924802),(10,112,1.71611682485427),(10,114,-2.94317453535569),(10,115,1.556260872219),(10,116,-0.463942381054109),(10,117,-2.13626514481033),(11,89,-0.153355510116886),(11,97,0.491897335734123),(11,105,1.09755241554003),(11,112,0.971160008545183),(11,115,-0.397778252510147),(12,92,1.1217993713187),(12,93,-0.352885525070955),(12,94,-0.749122592852565),(12,97,2.81221961119419),(12,98,-1.71744438001648),(12,99,-0.485808893093661),(12,108,-1.07924130985443),(12,116,-0.570863979003265),(13,86,-1.04747154148991),(13,87,-1.21655934324168),(13,90,1.86794640949736),(13,99,2.83869441816462),(13,102,-2.11604663228248),(13,104,-0.536973174230171),(13,113,-0.943876461073641),(13,116,-0.960860011597033),(13,118,1.97506637775811),(14,90,1.11598559526353),(14,93,1.33956419568468),(14,95,-0.196676534318064),(14,102,-1.70300912503433),(14,104,1.48162785729545),(14,106,2.21918393505661),(14,109,2.20477919858394),(14,110,-1.19475386822108),(14,111,1.6224402600177),(15,85,3.18562883388775),(15,92,2.33603930784021),(15,99,-1.31345561082797),(15,101,-1.91584521011994),(15,104,-0.504104739524522),(15,108,1.73499252296518),(15,117,1.74333933530686),(16,86,-1.62916959135716),(16,87,0.943571275978881),(16,88,1.59289834284494),(16,90,-0.489059114352855),(16,91,-1.46838282418287),(16,95,2.81199072237312),(16,97,-0.893154698324534),(16,98,-0.0598620563371685),(16,99,-0.9728537858211),(16,101,1.85889767143773),(16,108,-2.75226599932859),(16,110,0.654499954222236),(17,89,1.2238380077517),(17,96,-1.56501968443861),(17,99,0.8638264107181),(17,101,0.218085268715476),(17,106,-2.33652760399182),(17,107,0.489135410626545),(17,109,-0.12564470351268),(18,90,-1.67149876400037),(18,91,0.204321420941801),(18,93,-0.6564531388287),(18,99,1.23308511612293),(18,102,-0.195379497665334),(18,103,2.46349986266671),(18,104,-2.66006958220161),(18,110,-1.26621295815912),(18,111,1.25711844233528),(18,116,-1.64708395641957),(18,117,2.0408795434431),(18,118,-0.197866756187628),(19,87,-1.5884273812067),(19,89,1.99777214880825),(19,93,0.800958281197546),(19,95,-0.492416150395215),(19,101,-1.15935239722892),(19,105,0.600817896053957),(19,115,-1.49906918546098),(20,88,-2.74567400128178),(20,101,0.668523209326456),(20,103,0.122592852565081),(20,104,-1.38068788720359),(20,105,-0.944822534867397),(20,106,0.0333262123477889),(20,111,1.98178044984283),(20,116,1.20722067934202),(21,86,2.84588152714621),(21,87,0.315698721274453),(21,94,-0.780373546555986),(21,96,0.376079592272713),(21,101,1.19127475814081),(21,102,-2.12977996154668),(21,105,1.16887417218543),(21,107,-1.90810876796777),(21,108,-2.75063325907163),(22,86,1.79374065370647),(22,88,-1.62788781395917),(22,91,-0.478286080507828),(22,92,1.62541581469161),(22,93,-0.670278023621326),(22,98,-0.838404492324595),(22,106,-2.08153019806513),(22,115,2.80732139042329),(22,117,-1.49766533402509),(23,85,-1.63547166356395),(23,86,-2.67581713309122),(23,88,-2.16684469130528),(23,90,-0.652821436201056),(23,97,1.83747367778558),(23,104,1.18430127872555),(23,112,-2.24146244697409),(23,114,2.76447340311899),(23,115,-1.28279976805933),(23,116,1.28481398968474),(24,89,-2.54118472853786),(24,90,0.442258980071413),(24,91,3.01713614307077),(24,101,0.236854152043214),(24,107,-1.09016693624683),(24,108,-1.67392498550371),(24,110,1.17198706015198),(24,112,1.15227210303049),(25,90,-0.0544297616504409),(25,92,-1.61156041138951),(25,94,1.95162816248054),(25,98,2.56057924130985),(25,105,1.7607806634724),(25,108,1.74422437208167),(25,109,-0.630359813226722),(25,115,1.7612231818598),(26,85,1.06314279610584),(26,87,1.28186895352031),(26,89,0.170583208716086),(26,95,1.38230536820582),(26,98,-0.818704794457839),(26,100,1.70838038270211),(26,101,-0.111499374370556),(26,102,-0.579912717062899),(26,103,1.52281258583331),(26,104,0.450300607318339),(26,107,0.349131748405408),(26,109,-2.42728965117344),(26,112,1.6710715048677),(26,113,-0.845515305032502),(26,117,-2.39178136539811),(27,85,-0.691427350688192),(27,87,-1.05662709433271),(27,94,0.499298074282052),(27,100,0.964903714102603),(27,102,-2.58510086367382),(27,103,-1.0614795373394),(27,104,-1.60155034028138),(27,105,-0.266808069093905),(27,108,0.719077120273446),(27,110,-3.10251167332987),(27,114,0.95226905117954),(28,87,-1.96099734488968),(28,88,0.356776635029145),(28,97,-2.54867702261422),(28,99,0.0737479781487472),(28,104,1.88682210760826),(28,113,0.372463148899808),(28,114,-0.775887325663015),(29,88,-0.763542588579974),(29,91,0.191702017273476),(29,102,0.697683645130772),(29,105,0.677709280678732),(29,116,2.02328562273019),(30,95,-0.0523697622608111),(30,96,1.39843440046388),(30,99,1.75774407177953),(30,101,0.857646412549211),(30,104,-2.80922879726554),(30,109,1.15402691732536),(30,110,-2.52133243812372),(30,114,1.58577227088229),(30,118,-0.886272774437696),(31,85,-1.01017792291024),(31,92,1.88163396099734),(31,94,1.44160283211768),(31,96,-1.84479812005982),(31,99,-0.102984710226753),(31,103,1.50560014648885),(31,107,-1.02160710470901),(31,108,-0.119464705343791),(31,109,1.10632648701437),(31,111,-1.22849208044679),(31,112,2.25109103671377),(31,117,2.76541947691275),(32,86,-0.303201391644032),(32,87,-0.680425428022095),(32,89,2.15532395397809),(32,92,-0.166737876522111),(32,98,-0.353663747062594),(32,99,-1.77517014069033),(32,104,3.03399761955626),(32,106,-1.19418927579577),(32,109,-2.58944975127415),(32,116,-2.04701376384777),(32,118,-1.01402325510422),(33,96,1.75005340739158),(33,98,1.67383342997528),(33,108,-0.678960539567247),(33,110,2.50987273781549),(33,111,0.434766685995056),(33,114,-1.80698568681906),(34,85,0.437650685140538),(34,90,0.268150883510849),(34,99,-2.96601763969848),(34,104,0.628177739799188),(34,109,-1.53921628467666),(35,86,1.86550492873928),(35,87,-1.57097079378643),(35,97,-2.33326212347789),(35,98,2.44965971861934),(35,100,-0.161870174260689),(35,104,1.39036225470748),(35,107,-0.215704824976348),(35,109,-0.677663502914518),(35,110,1.10190130314035),(35,112,-0.932050538651692),(36,85,-1.62356944486831),(36,87,2.50344859157079),(36,90,-0.155934324167608),(36,91,-2.63167210913419),(36,104,0.664479506820887),(36,107,0.608218634601886),(36,109,-0.991424298837245),(36,112,1.0198370311594),(36,115,-2.66647846919156),(36,117,1.02655110324412),(36,118,2.06524857325968),(37,85,1.14607684560686),(37,86,-2.0044557023835),(37,87,-1.63959166234321),(37,91,0.194296090578936),(37,99,3.45997497482223),(37,105,-0.554246650593585),(37,111,2.76201666310617),(37,112,1.99198889126255),(37,118,-2.20491653187658),(38,87,-0.14775536362804),(38,90,2.334070863979),(38,103,-1.19029816583758),(38,105,0.78247932370983),(38,106,-2.67230750450148),(38,111,-1.7019104586932),(38,115,1.0788293099765),(39,87,-0.796395764030885),(39,89,-1.17053743095187),(39,91,-2.0888698995941),(39,94,0.537537766655477),(39,97,1.54687643055513),(39,98,1.24365977965636),(39,107,-1.72255623035371),(39,108,-1.04115421002838),(39,109,1.47282326731162),(39,111,1.81936094241157),(39,113,1.05017242957854),(39,116,2.25356303598132),(39,118,1.20659504989776),(40,88,-1.19336527603992),(40,92,-2.88648640400403),(40,99,-0.832682271797845),(40,104,-1.78084658345286),(40,110,-1.67055269020661),(40,116,-0.588045899838252),(40,118,-0.704260383922849),(41,88,-0.356532486953337),(41,93,1.95277260658589),(41,96,-1.01344340342418),(41,97,0.252632221442305),(41,100,-2.27858821375164),(41,101,3.12257759331034),(41,104,1.04947050386059),(41,105,-1.29815057832575),(41,106,0.58684041871395),(41,107,1.20758690145573),(41,109,-2.85209204382458),(41,110,-0.582216864528336),(41,111,-1.88583025605029),(41,112,1.38387707144383),(42,85,-0.733924375133518),(42,86,-1.25475325785089),(42,87,-0.432248908963286),(42,99,1.30686361278115),(42,100,1.01908932767724),(42,103,0.587115085299234),(42,109,0.292168950468459),(42,113,0.805185094759972),(43,85,1.17281105990783),(43,88,0.011352885525071),(43,89,2.30608539078951),(43,93,1.70220038453322),(43,97,2.60710470900601),(43,98,-1.83564256721702),(43,101,-2.02922147282327),(43,102,1.1738029114658),(43,103,0.00648518326364939),(43,105,-2.21481978820154),(43,110,-2.36562700277718),(43,112,-0.640171514023255),(43,114,1.99273659474471),(43,116,-1.153523361919),(44,89,0.207373271889401),(44,98,1.92265083773309),(44,99,0.623157444990387),(45,87,1.62532425916318),(45,88,1.08595538193915),(45,90,0.841715750602741),(45,91,0.770897549363689),(45,95,0.798745689260536),(45,98,-1.42533646656697),(45,108,-1.90746787926878),(45,109,-0.179952391125217),(45,112,-1.11804559465316),(45,115,-2.93072298348949),(46,85,-1.8176061281167),(46,89,1.81282998138371),(46,91,1.97630237739189),(46,94,-2.27381206701865),(46,97,-2.81717886898404),(46,100,1.7581713309122),(46,101,1.1809900204474),(46,108,2.95327616199225),(46,112,-0.881054109317301),(47,86,-0.187917722098453),(47,91,-0.819437238685263),(47,92,-1.2315897091586),(47,94,1.88143559068575),(47,95,3.43568224127934),(47,100,-0.311792352061525),(47,101,-1.69971312601093),(47,104,1.69495223853267),(47,105,-1.28153324991607),(47,108,1.46922208319346),(47,112,-1.43688772240364),(47,114,-0.428891872920926),(47,118,1.80460524307993),(48,86,2.45374919888913),(48,91,1.7354045228431),(48,98,-0.798333689382611),(48,99,1.03732413708914),(48,100,-1.38407544175542),(48,103,-0.858058412427137),(48,105,-0.0196081423383281),(48,106,-0.700277718436232),(48,111,-2.59021271401105),(48,115,-1.13562425611133),(49,87,-0.848063600573748),(49,89,-1.99996948149052),(49,93,-0.973876155888546),(49,94,0.508606219672231),(49,95,2.20010986663411),(49,102,-1.86887722403638),(49,113,-2.3251136814478),(49,114,-2.5742515335551),(50,89,2.57458723715934),(50,105,1.55580309457686),(50,107,2.60544145023957),(51,87,-1.28693502609333),(51,92,-0.39593188268685),(51,97,1.17317728202155),(51,98,-0.473647267067476),(51,103,-2.10264900662252),(51,106,2.10679952391125),(51,112,-0.2429120761742),(51,118,-1.54847865230262),(52,89,0.0115665150914029),(52,97,-1.92283394878994),(52,106,-0.424741355632191),(52,110,-1.29815057832575),(52,111,-1.30086672566912),(52,113,0.374019592883084),(52,114,-1.30445265053255),(52,118,3.02465895565661),(53,88,1.61088900418104),(53,90,-1.89551988280892),(53,92,0.741584521011994),(53,94,-1.02752769554735),(53,104,-2.11783196508683),(53,105,0.674474318674276),(53,109,-1.83422345652638),(54,85,-0.313837092196417),(54,91,1.13179418317209),(54,94,-0.949980162968841),(54,96,-2.16034424878689),(54,111,0.0382549516281625),(54,112,1.81121250038148),(54,113,0.283379619739372),(54,118,-0.953474532303842),(55,87,-0.238746299630726),(55,95,0.170262764366588),(55,107,-0.724158452101199),(55,110,-0.922757652516251),(55,117,1.70650349436933),(56,107,1.1774956511124),(56,111,0.0845057527390362),(56,113,-1.56381420331431),(56,114,2.29323709830012),(57,87,1.54257332071902),(57,90,1.84360789819025),(57,91,-0.706289864803003),(57,92,-0.320825830866421),(57,93,-2.94030579546495),(57,94,-0.511001922666097),(57,95,-1.5670644245735),(57,96,0.588869899594104),(57,100,0.332148197882015),(57,102,1.10177922910245),(57,103,-2.34788048951689),(57,115,-0.152348399304178),(58,86,-1.18100527970214),(58,87,2.16585283974731),(58,89,-1.14362010559404),(58,90,0.741447187719352),(58,95,-0.87420270393994),(58,96,-2.90522476882229),(58,101,0.956526383251442),(58,103,-1.2334360789819),(58,109,0.319528794213691),(58,110,-0.664494766075625),(58,113,1.57795953245643),(58,114,-3.03547776726585),(58,115,1.51812799462874),(58,118,1.95806756797998),(59,85,-2.22095400860622),(59,86,1.21854304635762),(59,90,1.24701681569872),(59,91,2.21504867702261),(59,93,-1.70125431073946),(59,97,-0.809640797143467),(59,98,-1.05981627857295),(59,100,2.27262184514908),(59,102,-0.100222785119175),(59,112,-0.148808252204962),(59,114,2.84293649098178),(60,85,-1.73435163426618),(60,87,0.69235816522721),(60,90,0.541261024811548),(60,91,-0.915890987884152),(60,96,-2.38042847987304),(60,100,1.96166875209815),(60,101,1.72562334055605),(60,105,-0.189809869685965),(60,107,0.592272713400677),(60,109,-0.864635151219214),(60,110,-0.840021973326823),(60,114,-3.02609332560198),(61,89,-0.327417828913236),(61,94,2.23093356120487),(61,96,-0.892315439313944),(61,98,-1.85901974547563),(61,100,0.775566881313517),(61,102,-2.11471907712027),(61,103,-0.102603228858303),(61,114,2.8933835871456),(61,115,1.20236823633534),(62,93,2.33584093752861),(62,95,2.55238502151555),(62,107,-2.13260292367321),(62,109,2.20972319711905),(62,110,2.51171910763878),(62,111,-2.7047639393292),(63,87,0.8706930753502),(63,90,0.63495284890286),(63,93,-1.2116306039613),(63,97,1.81237220374157),(63,100,0.729026154362621),(63,103,0.253410443433943),(63,104,-0.336451307718131),(63,108,-0.396343882564776),(63,111,0.528321176793725),(63,114,-2.01644947660756),(63,117,1.2996154667806),(64,87,1.51782280953398),(64,94,-0.153309732352672),(64,99,-0.303872798852504),(64,110,2.47462385937071),(64,112,0.28659932248909),(64,116,2.61844233527635),(65,87,0.646214178899503),(65,88,0.885631885738701),(65,90,0.555742057557909),(65,97,-2.11073641163366),(65,99,-2.35279396954253),(65,107,0.021546067690054),(65,110,-0.660924100466933),(65,111,-0.00941496017334512),(65,114,-2.14728232673116),(65,116,1.7994933927427),(65,117,2.05363628040407),(66,85,-1.07498397778253),(66,102,0.91567735831782),(66,105,2.41880550553911),(66,108,-0.76036866359447),(66,111,-0.274269844660787),(66,115,0.774010437330241),(66,118,-1.47570726645711),(67,86,-0.221060823389386),(67,90,2.35067293313395),(67,92,-0.571626941740165),(67,104,-0.275078585161901),(67,109,-1.10455641346477),(67,111,-0.478667561876278),(68,87,-0.249366740928373),(68,88,2.61511581774346),(68,90,-1.19426557206946),(68,93,1.28196050904874),(68,95,-0.637150181585131),(68,96,1.0698721274453),(68,97,0.0151371807000946),(68,103,-0.132297738578448),(68,107,-0.110370189519944),(68,112,0.949705496383557),(68,114,-0.949217200231941),(69,87,1.86902981658376),(69,88,1.63861507003998),(69,92,-2.41302224799341),(69,94,-1.5812402722251),(69,95,-1.45031586657308),(69,97,-1.04107791375469),(69,108,0.818201239051485),(69,113,-0.11139255958739),(69,114,-0.144810327463607),(69,118,-0.879314554277169),(70,85,0.946256904812769),(70,86,2.08618427076022),(70,87,-1.11755729850154),(70,90,-1.39817499313334),(70,96,-1.5252998443556),(70,97,0.298776207770013),(70,99,2.1649678029725),(70,105,0.879268776512955),(70,107,-0.157155064546648),(70,109,0.611682485427412),(70,110,0.527207251197852),(70,111,0.869594409009064),(71,85,-2.18146305734428),(71,93,1.42657246620075),(71,96,-2.15421002838221),(71,100,-1.17587817011017),(71,104,2.05847346415601),(71,106,-0.458388012329478),(71,111,0.536805322428053),(71,113,0.462233344523453),(72,94,0.0460676900540177),(72,96,0.348918118839076),(72,99,-0.578249458296457),(72,110,0.937223426007874),(72,112,0.625232703634754),(72,114,0.775170140690329),(72,115,-0.979674672688986),(72,116,1.8122653889584),(73,88,-0.387035737174596),(73,94,-0.508804589983825),(73,99,-0.285821100497452),(73,100,0.985686819055757),(73,106,-0.254356517227699),(73,110,-0.481276894436476),(73,115,0.287118137150182),(74,90,-2.72594378490555),(74,94,-0.560014648884548),(74,99,-1.04800561540574),(74,102,1.36738181707205),(74,106,-0.312662129581591),(74,107,1.96382030701621),(74,110,-2.88190862758263),(74,113,0.149571214941862),(74,116,-1.60187078463088),(75,85,-1.77872554704428),(75,86,1.60498367259743),(75,93,-2.29366435743278),(75,98,2.21274452955718),(75,103,-0.142887661366619),(75,105,-0.722373119296854),(75,111,-2.48158207953124),(75,117,-0.0198065126499222),(76,86,0.312921536912137),(76,89,-1.18558305612354),(76,92,-1.52140873439741),(76,94,0.678884243293558),(76,99,-2.73406170842616),(76,101,-0.45616016113773),(76,103,0.851893673512986),(76,106,0.10361033967101),(76,110,2.82787560655538),(76,113,-0.109317300943022),(77,88,0.298852504043703),(77,91,1.00741599780267),(77,93,0.797997985778375),(77,98,0.761803033539842),(77,101,-1.94241157261879),(77,102,2.33764152958769),(77,103,0.688024536881619),(77,104,-1.89248329111606),(77,105,-0.415356913968322),(77,109,0.760567033906064),(78,88,-0.504684591204566),(78,93,-0.282662434766686),(78,94,-2.3894466994232),(78,101,-0.262001403851436),(78,104,-0.154728843043306),(78,110,-0.0191045869319742),(78,114,-0.43115024262215),(78,116,-0.0154728843043306),(78,117,1.44367809076205),(78,118,0.638630329294717),(79,87,-0.844477675710318),(79,92,-2.23670155949583),(79,94,-0.773476363414411),(79,107,0.257637256996368),(79,108,-1.72435682241279),(79,114,0.694540238654744),(79,118,1.97228919339579),(80,87,0.985015411847285),(80,88,-2.51235999633778),(80,91,1.48966948454238),(80,99,1.80745872371593),(80,101,0.782158879360332),(80,107,-1.25197607348857),(80,113,-0.731833857234413),(81,85,0.494857631153295),(81,86,-0.291146580401013),(81,90,0.535157322916349),(81,93,0.845271156956694),(81,96,2.08941923276467),(81,97,-1.75344096194342),(81,106,-1.79126865443892),(81,107,-2.26926480910672),(81,110,-2.02475051118503),(81,115,0.469771416364025),(82,86,1.99308755760369),(82,92,-1.49598681600391),(82,110,-0.687017426068911),(82,112,2.38753929258095),(83,87,0.11230811487167),(83,91,-1.8102969450972),(83,93,-1.44749290444655),(83,101,-1.18282113101596),(83,103,1.62793359172338),(83,105,-3.24161503952147),(83,108,-0.152348399304178),(84,85,0.374813074129459),(84,86,-0.26380199591052),(84,89,-1.8005767998291),(84,95,-0.0874813074129459),(84,99,1.68919949949644),(84,104,0.882412182988983),(84,111,-0.418439283425397),(84,113,-0.174260689107944),(84,114,0.896359141819513)]
orgname='BHNEAT_2_14'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()