edge = [(0,85,0.828409680471206),(0,89,-0.574602496414075),(0,90,-0.188528092287973),(0,93,-0.400616473891415),(0,98,0.571581163975951),(0,101,0.861217078157903),(0,105,-0.43649098178045),(0,108,-0.195806756797998),(0,113,0.231788079470199),(0,114,-0.257759331034272),(0,117,0.563676870021668),(0,118,0.397793511764885),(1,86,0.237678151799066),(1,92,0.3037507248146),(1,98,0.928220465712455),(1,102,-0.115787224951933),(1,104,-0.621173741874447),(1,107,-0.318292794579913),(1,108,-0.971861934263131),(1,109,-0.252922147282327),(1,113,0.124088259529405),(2,87,0.0590227973265786),(2,88,0.586565752128666),(2,100,-0.455977050080874),(2,106,-0.696768089846492),(2,108,0.222602008117924),(2,110,-0.704000976592303),(2,113,0.451857051301614),(2,118,0.00302133243812372),(3,89,-0.0844447157200842),(3,92,0.0151371807000946),(3,97,-0.19174779503769),(3,99,-0.700933866389966),(3,101,-0.721533860286264),(3,103,-0.14828943754387),(3,105,0.834406567583239),(3,108,-0.0627765739921262),(3,109,-0.706717123935667),(3,111,-0.69060335093234),(3,112,-0.440397350993378),(3,116,-0.934141056550798),(4,90,-0.606006042664876),(4,91,-0.010528885769219),(4,97,-0.706839197973571),(4,99,0.032624286629841),(4,101,0.0590075380718406),(4,108,-0.112033448286386),(4,113,-0.169576097903378),(4,118,0.0286568803979614),(5,86,-0.187215796380505),(5,87,-0.86642048402356),(5,89,0.0227668080690939),(5,92,-0.30787072359386),(5,93,0.467207861568041),(5,99,0.242591631824702),(5,104,0.0133671071504868),(5,114,0.716727195043794),(5,118,-0.874706259346294),(6,89,0.23673207800531),(6,92,-0.00842310861537524),(6,94,0.0274666585283975),(6,100,0.370555742057558),(6,101,0.0135807367168188),(6,103,-0.423261207922605),(6,107,0.654408398693808),(6,110,0.415433210242012),(6,113,0.0422376171147801),(7,85,0.364391003143406),(7,86,0.530549027985473),(7,90,-0.574312570574053),(7,95,0.10994293038728),(7,99,0.318735312967315),(7,100,0.140034180730613),(7,104,0.181951353495895),(7,106,-0.144566179387799),(7,108,-0.236762596514786),(7,112,-0.0479598376415296),(7,116,0.032624286629841),(8,92,-0.235480819116794),(8,93,-0.13296914578692),(8,95,0.290169988097781),(8,99,0.847087008270516),(8,106,0.444944608905301),(8,107,0.522736289559618),(8,115,0.299325540940581),(8,116,-0.185903500473037),(8,118,-0.605639820551164),(9,85,-0.830957976012451),(9,87,-0.141651661732841),(9,98,-0.220984527115696),(9,101,-0.479171117282632),(9,103,0.785699026459548),(9,105,-0.471083712271493),(9,106,0.553300576799829),(9,113,-0.297952208014161),(10,89,-0.530137028107547),(10,96,0.568453016754662),(10,106,0.619037446211127),(10,108,0.750633259071627),(10,109,0.46134830774865),(10,111,-0.926664021729179),(10,112,-0.723136082033753),(10,114,-0.522736289559618),(10,115,0.550431836909085),(10,116,-0.271614734336375),(10,117,-0.0310068056276132),(11,89,-0.135868404187139),(11,97,0.716971343119602),(11,105,-0.60307626575518),(11,112,0.519699697866756),(11,115,0.783272804956206),(12,92,-0.753837702566607),(12,93,0.908261360515152),(12,94,0.355128635517441),(12,97,-0.617664113284707),(12,98,0.709341715750603),(12,99,0.357707449568163),(12,108,-0.0459913937803278),(12,116,0.214529862361522),(13,86,0.922544022949919),(13,87,0.122013000885037),(13,90,-0.552568132572405),(13,99,0.5925626392407),(13,102,0.683156834620197),(13,104,0.174092837305826),(13,113,-0.45478682821131),(13,116,-0.421033356730857),(13,118,0.516983550523392),(14,90,0.087023529770806),(14,93,-0.131809442426832),(14,95,-0.215414899136326),(14,102,0.0902127140110477),(14,104,0.733634449293497),(14,106,0.662495803704947),(14,109,0.144093142490921),(14,110,0.773094882045961),(14,111,0.516373180333872),(15,85,0.315103610339671),(15,92,-0.365489669484542),(15,99,-0.743095187231056),(15,101,-0.601214636677145),(15,104,-0.757484664448988),(15,108,-0.111026337473678),(15,117,-0.469573046052431),(16,86,-0.11383404034547),(16,87,-0.312479018524735),(16,88,0.130558183538316),(16,90,-0.333445234534745),(16,91,-0.428632465590381),(16,95,0.115802484206671),(16,97,0.0359050263985107),(16,98,0.0854670857875302),(16,99,-0.112247077852718),(16,101,-0.098162785729545),(16,108,-0.735831781975768),(16,110,0.231894894253365),(17,89,0.182683797723319),(17,96,-0.324442274239326),(17,99,-0.900051881466109),(17,101,0.298196356089969),(17,106,0.143620105594043),(17,107,-0.0424512466811121),(17,109,-0.546494949186682),(18,90,0.738822595904416),(18,91,0.2639545884579),(18,93,-0.558549760429701),(18,99,0.329279457991272),(18,102,-0.121677297280801),(18,103,-0.103640858180486),(18,104,0.270134586626789),(18,110,0.789635914181951),(18,111,0.410840174565874),(18,116,-0.771477401043733),(18,117,0.39616077150792),(18,118,0.569139683217872),(19,87,0.802423169652394),(19,89,0.312860499893185),(19,93,-0.0787987914670248),(19,95,-0.185094759971923),(19,101,0.737846003601184),(19,105,-0.279793694875942),(19,115,-0.994872890408033),(20,88,-0.705679494613483),(20,101,-0.133640552995392),(20,103,-0.274086733603931),(20,104,-0.146504104739525),(20,105,-0.275460066530351),(20,106,-0.167607654042177),(20,111,-0.22064882351146),(20,116,0.59241004669332),(21,86,0.752586443678091),(21,87,-0.0305490279854732),(21,94,-0.214194158757286),(21,96,-0.165410321359905),(21,101,0.794122135074923),(21,102,-0.733588671529283),(21,105,0.393658253730888),(21,107,0.0382702108829005),(21,108,-0.732932523575549),(22,86,-0.824274422437208),(22,88,-0.659932248908963),(22,91,-0.416333506271554),(22,92,0.535004730368969),(22,93,-0.231406598101749),(22,98,0.1947233497116),(22,106,-0.664418469801935),(22,115,0.2570879238258),(22,117,0.463728751487777),(23,85,-0.482863856929228),(23,86,-0.963408307138279),(23,88,-0.382885219885861),(23,90,0.219489120151372),(23,97,0.263618884853664),(23,104,-0.532792138431959),(23,112,0.479445783867916),(23,114,0.737479781487472),(23,115,-0.776970732749413),(23,116,-0.394116031373028),(24,89,-0.497604297006134),(24,90,-0.946043275246437),(24,91,-0.0284737693411054),(24,101,0.265419476912748),(24,107,-0.010620441297647),(24,108,-0.25830866420484),(24,110,0.39196447645497),(24,112,-0.424924466689047),(25,90,0.352214117862484),(25,92,0.432477797784356),(25,94,-0.163533433027131),(25,98,-0.15500350962859),(25,105,0.276772362437818),(25,108,0.0674001281777398),(25,109,0.0531937620166631),(25,115,-0.133610034485916),(26,85,0.269005401776177),(26,87,0.244102298043764),(26,89,0.110965300454726),(26,95,-0.533387249366741),(26,98,-0.485000152592547),(26,100,0.270821253089999),(26,101,0.0742210150456252),(26,102,0.118579668568987),(26,103,-0.683339945677053),(26,104,-0.288766136661885),(26,107,0.866481521042512),(26,109,-0.117038483840449),(26,112,-0.408566545609912),(26,113,-0.411618396557512),(26,117,-0.572893459883419),(27,85,0.864452040162358),(27,87,-0.832453382976775),(27,94,0.0428174687948241),(27,100,-0.12862025818659),(27,102,0.210821863460189),(27,103,-0.148472548600726),(27,104,-0.346125675222022),(27,105,0.243247779778436),(27,108,-0.806146427808466),(27,110,-0.0263679921872615),(27,114,0.558122501297037),(28,87,0.423078096865749),(28,88,0.207693716238899),(28,97,-0.497619556260872),(28,99,-0.73787652211066),(28,104,0.852870265816217),(28,113,-0.161351359599597),(28,114,0.634052552873318),(29,88,-0.72103030487991),(29,91,0.61085848567156),(29,102,-0.160924100466933),(29,105,0.12945951719718),(29,116,0.308511612292856),(30,95,0.230903042695395),(30,96,0.273934141056551),(30,99,0.098086489455855),(30,101,-0.186880092776269),(30,104,-0.0746177556688131),(30,109,-0.0889309366130558),(30,110,0.615436262092959),(30,114,-0.135929441206091),(30,118,-0.308114871669668),(31,85,-0.768852809228797),(31,92,0.457869197668386),(31,94,0.158146916104617),(31,96,0.899105807672353),(31,99,0.260719626453444),(31,103,-0.0998413037507248),(31,107,0.165410321359905),(31,108,0.872463148899808),(31,109,0.452772606585894),(31,111,0.273003326517533),(31,112,0.420239875484481),(31,117,-0.58500930814539),(32,86,-0.748924222540971),(32,87,0.150975066377758),(32,89,0.547151097140416),(32,92,-0.729880672627949),(32,98,-0.927915280617695),(32,99,0.30077517014069),(32,104,0.912381359294412),(32,106,0.740638447218238),(32,109,0.926023133030183),(32,116,-0.420148319956053),(32,118,-0.815637684255501),(33,96,0.538315988647114),(33,98,-0.064912869655446),(33,108,-0.780999176000244),(33,110,-0.883236182744835),(33,111,-0.275704214606159),(33,114,-0.466750083925901),(34,85,0.919736320078127),(34,90,-0.47842341380047),(34,99,-0.739310892056032),(34,104,-0.119525742362743),(34,109,0.36634418774987),(35,86,-0.0744651631214332),(35,87,0.684499649037141),(35,97,-0.308801538132878),(35,98,0.749382000183111),(35,100,-0.117404705954161),(35,104,0.822748496963408),(35,107,-0.56953642384106),(35,109,-0.12961210974456),(35,110,-0.553086947233497),(35,112,0.858027893917661),(36,85,0.597842341380047),(36,87,-0.111270485549486),(36,90,0.381344035157323),(36,91,0.708334604937895),(36,104,-0.834849085970641),(36,107,0.346110415967284),(36,109,0.723899044770653),(36,112,-0.334543900875881),(36,115,-0.784813989684744),(36,117,0.313303018280587),(36,118,0.145924253059481),(37,85,0.617709891048921),(37,86,-0.524521622363964),(37,87,0.260200811792352),(37,91,0.454573198644978),(37,99,-0.752220221564379),(37,105,-0.679143650624104),(37,111,0.756965849787896),(37,112,0.93099765007477),(37,118,-0.273400067140721),(38,87,-0.731971190527055),(38,90,0.963835566270943),(38,103,-0.724524674214911),(38,105,0.24466689046907),(38,106,0.955687124240852),(38,111,0.0850703451643422),(38,115,-0.10841700491348),(39,87,-0.580874050111392),(39,89,0.470900601214637),(39,91,-0.732291634876553),(39,94,-0.130802331614124),(39,97,0.815744499038667),(39,98,0.0280617694631794),(39,107,0.28125858333079),(39,108,0.868984038819544),(39,109,0.914548173467208),(39,111,0.924192022461623),(39,113,0.904629657887509),(39,116,0.623828852198859),(39,118,-0.953276161992248),(40,88,-0.1526383251442),(40,92,-0.368358409375286),(40,99,0.481795709097568),(40,104,0.667180394909513),(40,110,0.278878139591662),(40,116,-0.775994140446181),(40,118,0.531327249977111),(41,88,-0.694296090578936),(41,93,-0.348521378215888),(41,96,-0.463759269997253),(41,97,-0.177678762169256),(41,100,-0.668614764854884),(41,101,0.356578264717551),(41,104,-0.346644489883114),(41,105,0.0281380657368694),(41,106,-0.0122379222998749),(41,107,-0.946531571398053),(41,109,0.695883053071688),(41,110,-0.231879634998627),(41,111,-0.861781670583209),(41,112,-0.971312601092563),(42,85,0.316141239661855),(42,86,-0.0117801446577349),(42,87,-0.136982329783013),(42,99,0.282753990295114),(42,100,0.668904690694907),(42,103,-0.2150028992584),(42,109,-0.946043275246437),(42,113,-0.666035950804163),(43,85,0.432874538407544),(43,88,0.0901821955015717),(43,89,0.391644032105472),(43,93,0.188406018250069),(43,97,0.41666920987579),(43,98,-0.685110019226661),(43,101,0.768028809472945),(43,102,0.403210547196875),(43,103,0.557939390240181),(43,105,-0.334177678762169),(43,110,-0.021927549058504),(43,112,0.896877956480606),(43,114,-0.988708151493881),(43,116,0.435712759788812),(44,89,0.907620471816156),(44,98,-0.205938901944029),(44,99,-0.934705648976104),(45,87,0.402478102969451),(45,88,0.277199621570483),(45,90,-0.518570513016144),(45,91,0.694753868221076),(45,95,0.365794854579302),(45,98,-0.28011413922544),(45,108,0.173268837549974),(45,109,-0.370677816095462),(45,112,-0.3435468611713),(45,115,-0.819208349864193),(46,85,0.627384258552812),(46,89,0.276299325540941),(46,91,-0.100833155308695),(46,94,-0.783120212408826),(46,97,-0.151738029114658),(46,100,-0.796288949247719),(46,101,-0.116077150791955),(46,108,0.45844904934843),(46,112,-0.123020111697745),(47,86,-0.541367839594714),(47,91,0.699392681661428),(47,92,0.0833765678884243),(47,94,-0.416409802545244),(47,95,-0.0260475478377636),(47,100,-0.583880123294778),(47,101,0.716727195043794),(47,104,0.541642506179998),(47,105,-0.54765465254677),(47,108,-0.377346110415967),(47,112,0.23734244819483),(47,114,0.0601214636677145),(47,118,0.616992706076235),(48,86,-0.1044495986816),(48,91,0.603900265511032),(48,98,0.673787652211066),(48,99,0.357951597643971),(48,100,0.440015869624928),(48,103,-0.504211554307688),(48,105,-0.52699362163152),(48,106,0.150395214697714),(48,111,0.0305490279854732),(48,115,-0.205999938962981),(49,87,0.572435682241279),(49,89,-0.117526779992065),(49,93,0.309732352671896),(49,94,-0.250373851741081),(49,95,0.45692312387463),(49,102,-0.23787652211066),(49,113,-0.25807977538377),(49,114,-0.154896694845424),(50,89,0.801446577349162),(50,105,0.934720908230842),(50,107,-0.143726920377209),(51,87,0.224524674214911),(51,92,0.27774895474105),(51,97,0.914975432599872),(51,98,-0.501083407086398),(51,103,-0.269692068239387),(51,106,0.117160557878353),(51,112,0.507217627491073),(51,118,0.432416760765404),(52,89,0.451948606830042),(52,97,0.361568041016877),(52,106,-0.805230872524186),(52,110,-0.674764244514298),(52,111,-0.596972563859981),(52,113,0.914120914334544),(52,114,-0.633777886288034),(52,118,-0.190313425092318),(53,88,0.123935666982025),(53,90,-0.711233863338115),(53,92,-0.427655873287149),(53,94,0.909131138035218),(53,104,-0.863170262764367),(53,105,0.289681691946165),(53,109,-0.272545548875393),(54,85,0.27980895413068),(54,91,-0.326731162450026),(54,94,0.962614825891903),(54,96,0.348979155858028),(54,111,0.933408612323374),(54,112,-0.738151188695944),(54,113,-0.125400555436872),(54,118,-0.086901455732902),(55,87,-0.357844782860805),(55,95,-0.365306558427686),(55,107,0.819559312723167),(55,110,0.0613574633014924),(55,117,-0.806512649922178),(56,107,-0.601657155064547),(56,111,-0.62968840601825),(56,113,-0.785973693044832),(56,114,0.273400067140721),(57,87,-0.437726981414228),(57,90,0.681356242561113),(57,91,-0.150303659169286),(57,92,0.764061403241066),(57,93,0.312448500015259),(57,94,0.61314737388226),(57,95,-0.00404370250556962),(57,96,-0.774895474105045),(57,100,0.860957670827357),(57,102,0.801721243934446),(57,103,0.594500564592425),(57,115,-0.0665913876766258),(58,86,-0.690633869441816),(58,87,0.240256965849788),(58,89,0.329844050416578),(58,90,0.32944730979339),(58,95,-0.00328073976866972),(58,96,-0.622104556413465),(58,101,-0.948423718985565),(58,103,0.975615710928678),(58,109,0.332758568071535),(58,110,-0.0097201452681051),(58,113,0.173009430219428),(58,114,-0.0817896053956725),(58,115,-0.627826776940214),(58,118,0.798150578325755),(59,85,0.135288552507096),(59,86,-0.354701376384777),(59,90,0.890865810113834),(59,91,0.746330149235511),(59,93,0.532853175450911),(59,97,0.412366100039674),(59,98,0.0847499008148442),(59,100,0.00193792535172582),(59,102,-0.153569139683218),(59,112,-0.19380779442732),(59,114,-0.442091128269295),(60,85,-0.157963805047761),(60,87,-0.288613544114505),(60,90,0.851954710531938),(60,91,-0.54582354197821),(60,96,0.964659566026795),(60,100,0.0686361278115177),(60,101,0.141743217261269),(60,105,-0.535447248756371),(60,107,-0.398998992889187),(60,109,-0.0277565843684194),(60,110,-0.206671346171453),(60,114,0.136417737357707),(61,89,0.391674550614948),(61,94,-0.536545915097507),(61,96,0.0936307870723594),(61,98,-0.471846675008393),(61,100,-0.523438215277566),(61,102,-0.0531022064882351),(61,103,-0.683156834620197),(61,114,-0.840998565630055),(61,115,-0.010681478316599),(62,93,0.133304849391156),(62,95,-0.284569841608936),(62,107,-0.43168431653798),(62,109,0.47911008026368),(62,110,-0.118015076143681),(62,111,0.0951414532914212),(63,87,-0.565157017731254),(63,90,0.735831781975768),(63,93,0.398907437360759),(63,97,-0.467925046540727),(63,100,0.0661946470534379),(63,103,-0.665395062105167),(63,104,-0.0152897732474746),(63,108,0.0806451612903226),(63,111,-0.602374340037233),(63,114,-0.162785729544969),(63,117,0.696508682515946),(64,87,-0.0254829554124577),(64,94,0.156041138950774),(64,99,0.154942472609638),(64,110,-0.101260414441359),(64,112,-0.149296548356578),(64,116,0.0919217505417035),(65,87,0.6939603869747),(65,88,0.629200109866634),(65,90,-0.0259407330545976),(65,97,-0.469557786797693),(65,99,-0.168675801873836),(65,107,0.47735526596881),(65,110,0.109897152623066),(65,111,-0.0235297708059938),(65,114,0.210974456007569),(65,116,0.520386364329966),(65,117,-0.00914029358806112),(66,85,0.941160313730277),(66,102,-0.512451551866207),(66,105,0.131168553727836),(66,108,0.41819513534959),(66,111,0.635578478347118),(66,115,0.767357402264473),(66,118,0.212622455519272),(67,86,-0.236793115024262),(67,90,0.311410870693075),(67,92,0.855052339243751),(67,104,-0.378917813653981),(67,109,-0.616229743339335),(67,111,0.95440534684286),(68,87,-0.468565935239723),(68,88,0.742362743003632),(68,90,0.687582018494217),(68,93,0.356913968321787),(68,95,0.651051362651448),(68,96,-0.548432874538407),(68,97,-0.611865596484268),(68,103,0.376293221839045),(68,107,-0.140690328684347),(68,112,-0),(68,114,0.725516525772881),(69,87,-0.205313272499771),(69,88,-0.910000915555284),(69,92,-0.200155644398328),(69,94,0.352275154881436),(69,95,-0.479598376415296),(69,97,-0.573824274422437),(69,108,-0.542252876369518),(69,113,-0.82448805200354),(69,114,0.416531876583148),(69,118,0.990844447157201),(70,85,0.250022888882107),(70,86,-0.603411969359416),(70,87,-0.0292062135685293),(70,90,-0.274758140812403),(70,96,-0.00350962858973968),(70,97,0.375591296121097),(70,99,0.743186742759484),(70,105,-0.960997344889676),(70,107,0.283181249427778),(70,109,0.803933835871456),(70,110,0.0257881405072176),(70,111,-0.274117252113407),(71,85,0.136051515243995),(71,93,0.0202337717825861),(71,96,-0.352824488052004),(71,100,-0.132023071993164),(71,104,0.467696157719657),(71,106,-0.206213568529313),(71,111,-0.280617694631794),(71,113,0.0362559892574847),(72,94,-0.515335551011689),(72,96,-0.502243110446486),(72,99,-0.491714224677267),(72,110,-0.184636982329783),(72,112,0.448133793145543),(72,114,0.623676259651479),(72,115,-0.0159916989654225),(72,116,0.718008972441786),(73,88,0.847773674733726),(73,94,-0.338877529221473),(73,99,-0.311136204107791),(73,100,0.697119052705466),(73,106,0.0778221991637928),(73,110,0.158848841822565),(73,115,-0.0560930204168828),(74,90,0.257820368053224),(74,94,-0.45616016113773),(74,99,0.570543534653768),(74,102,-0.518723105563524),(74,106,-0.105075228125858),(74,107,0.142490920743431),(74,110,-0.699499496444594),(74,113,-0.369075594347972),(74,116,-0.509857478560747),(75,85,-0.140415662099063),(75,86,0.292580950346385),(75,93,0.317331461531419),(75,98,0.600970488601337),(75,103,0.271538438062685),(75,105,0.606067079683828),(75,111,0.119602038636433),(75,117,-0.0195471053193762),(76,86,0.0185247352519303),(76,89,0.451857051301614),(76,92,-0.341776787621693),(76,94,-0.0278176213873714),(76,99,-0.307321390423292),(76,101,-0.614932706686605),(76,103,-0.936124759666738),(76,106,0.748832667012543),(76,110,-0.633472701193274),(76,113,0.102496414075137),(77,88,0.467146824549089),(77,91,-0.162785729544969),(77,93,0.463881344035157),(77,98,0.845423749504074),(77,101,-0.831965086825159),(77,102,-0.0571764275032807),(77,103,0.097659230323191),(77,104,-0.666325876644185),(77,105,0.234015930661946),(77,109,0.143925290688803),(78,88,-0.5879848628193),(78,93,0.661275063325907),(78,94,0.521897030549028),(78,101,-0.601947080904569),(78,104,-0.0174260689107944),(78,110,0.0904416028321177),(78,114,-0.494399853511155),(78,116,-0.362941373943297),(78,117,-0.962950529496139),(78,118,0.594561601611377),(79,87,-0.275337992492447),(79,92,-0.119510483108005),(79,94,0.238166447950682),(79,107,-0.170079653309732),(79,108,0.85003204443495),(79,114,0.316949980162969),(79,118,-0.00216681417279581),(80,87,0.363078707235939),(80,88,-0.672261726737266),(80,91,0.17360454115421),(80,99,0.479476302377392),(80,101,0.128498184148686),(80,107,-0.82769249549852),(80,113,0.243079927976318),(81,85,-0.208517715994751),(81,86,-0.456648457289346),(81,90,-0.883297219763787),(81,93,0.316217535935545),(81,96,-0.0426801355021821),(81,97,-0.780907620471816),(81,106,0.500473036896878),(81,107,0.137028107547227),(81,110,-0.284875026703696),(81,115,-0.515396588030641),(82,86,0.132328257087924),(82,92,-0.630878627887814),(82,110,-0.579302346873379),(82,112,0.838831751457259),(83,87,-0.97460860011597),(83,91,0.510513626514481),(83,93,-0.00294503616443373),(83,101,0.0939817499313334),(83,103,-0.301324503311258),(83,105,-0.632114627521592),(83,108,0.221289712210456),(84,85,-0.670567949461348),(84,86,-0.0793481246375927),(84,89,-0.228339487899411),(84,95,0.344431897946104),(84,99,-0.463454084902493),(84,104,0.103015228736229),(84,111,-0.558244575334941),(84,113,-0.465834528641621),(84,114,0.710257271034883)]
orgname='BHNEAT_3_5'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()