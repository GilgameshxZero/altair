edge = [(0,85,2.86930448316904),(0,89,-0.948713644825587),(0,90,2.35801263466292),(0,93,2.09816278572954),(0,98,0.176747947630238),(0,101,2.20259712515641),(0,105,-1.92625202185125),(0,108,1.98934904019288),(0,113,0.238380077517014),(0,114,-1.91761528366955),(0,117,-1.68012024292734),(0,118,-2.08587908566546),(1,86,0.40911587878048),(1,92,-1.54948576311533),(1,98,0.368282113101596),(1,102,-0.935438093203528),(1,104,-1.13563951536607),(1,107,-2.06196783349101),(1,108,-1.66333506271554),(1,109,0.996353038117618),(1,113,-1.90340891750847),(2,87,1.93803216650899),(2,88,-0.942945646534623),(2,100,-2.81635486922819),(2,106,1.43250831629383),(2,108,2.71039460432752),(2,110,0.8947874385815),(2,113,-1.56877346110416),(2,118,0.531830805383465),(3,89,3.67915890987884),(3,92,-1.32113101596118),(3,97,0.240409558397168),(3,99,3.02444532609027),(3,101,0.947386089663381),(3,103,1.59460737937559),(3,105,1.3943449201941),(3,108,-1.94515823847163),(3,109,0.320917386394849),(3,111,-1.7026734214301),(3,112,0.253837702566607),(3,116,-1.95094149601733),(4,90,1.297204504532),(4,91,-0.928205206457717),(4,97,1.11702322458571),(4,99,-1.40258491775262),(4,101,1.37894833216346),(4,108,-0.491042817468795),(4,113,-0.771919919431135),(4,118,-2.06993316446425),(5,86,-1.95408490249336),(5,87,-1.23885311441389),(5,89,1.44584490493484),(5,92,0.867473372600482),(5,93,2.58604693746757),(5,99,-1.37534714804529),(5,104,-1.11726737266152),(5,114,-1.78128910184027),(5,118,-0.787347025971252),(6,89,-1.83138523514512),(6,92,-1.18320261238441),(6,94,-2.15659047212134),(6,100,0.224982451857051),(6,101,0.13068025757622),(6,103,-1.20316171758171),(6,107,-1.30150761436811),(6,110,0.207556382946257),(6,113,-1.72196111941893),(7,85,0.145878475295267),(7,86,2.80806909390545),(7,90,-1.70516067995239),(7,95,2.52652058473464),(7,99,-1.68228705710013),(7,100,1.51110873744926),(7,104,0.902294991912595),(7,106,0.00648518326364933),(7,108,-0.9759056367687),(7,112,1.54211554307688),(7,116,-1.94853053376873),(8,92,-1.33666493728446),(8,93,-0.654911954100162),(8,95,-1.21988586077456),(8,99,1.53805658131657),(8,106,-1.91372417371136),(8,107,-2.06146427808466),(8,115,-3.33333841975158),(8,116,1.66435743278298),(8,118,-3.37458418530839),(9,85,-2.78627887813959),(9,87,-0.640156254768517),(9,98,-0.17169713431196),(9,101,-0.489089632862331),(9,103,0.10788293099765),(9,105,-2.57731864375744),(9,106,0.829615161595508),(9,113,0.220099490340892),(10,89,-2.33179723502304),(10,96,0.292947172460097),(10,106,-0.116840113528855),(10,108,-1.5822016052736),(10,109,0.147465437788018),(10,111,-2.51797540208136),(10,112,1.03602710043641),(10,114,-1.13126010925626),(10,115,0.0249031037324138),(10,116,-1.80822168645283),(10,117,0.61032441175573),(11,89,-2.16931669057283),(11,97,0.363261818292795),(11,105,-1.71967223120823),(11,112,2.03115939817499),(11,115,1.98591570787683),(12,92,-1.59416486098819),(12,93,1.22687459944456),(12,94,-1.63815729239784),(12,97,1.0092776268807),(12,98,1.22273934141057),(12,99,1.51881466109195),(12,108,1.16788232062746),(12,116,1.39753410443434),(13,86,2.76357310708945),(13,87,-1.62771996215705),(13,90,2.70023194067202),(13,99,0.457640308847316),(13,102,2.76085695974609),(13,104,2.07679982909635),(13,113,0.333323160496841),(13,116,-1.89042329172643),(13,118,4.93377483443709),(14,90,-0.429349650563066),(14,93,-1.95239112521744),(14,95,-2.2323526718955),(14,102,3.2101046784875),(14,104,-0.0355540635395368),(14,106,0.803643910031434),(14,109,1.72493667409284),(14,110,2.67600024414808),(14,111,0.981749931333354),(15,85,1.43722342600787),(15,92,1.66162602618488),(15,99,-2.77718436231574),(15,101,0.886181218909268),(15,104,0.644825586718345),(15,108,-2.10892056031983),(15,117,0.554887539292581),(16,86,-0.250328073976867),(16,87,-1.76223029267251),(16,88,2.27935117648854),(16,90,-1.48597674489578),(16,91,0.291146580401013),(16,95,-2.81423383281961),(16,97,0.155293435468612),(16,98,-2.55328531754509),(16,99,-1.702795495468),(16,101,3.11812189092685),(16,108,1.41863765373699),(16,110,3.00532547990356),(17,89,0.462004455702383),(17,96,-0.881038850062563),(17,99,2.72852259895627),(17,101,-0.415173802911466),(17,106,-1.53668324839015),(17,107,1.92545854060488),(17,109,-2.55964842677084),(18,90,1.09512619403668),(18,91,-0.585268715475936),(18,93,-2.14803003021332),(18,99,0.337763603625599),(18,102,0.0458235419782098),(18,103,-2.21477401043733),(18,104,-3.14485610522782),(18,110,-0.807397686696982),(18,111,-1.01620532853175),(18,116,-1.45718253120518),(18,117,1.92854091006195),(18,118,3.12483596301157),(19,87,-0.680242316965239),(19,89,0.771004364146855),(19,93,1.29566331980346),(19,95,-0.584047975096896),(19,101,1.97148045289468),(19,105,-1.98226874599445),(19,115,1.32850123599963),(20,88,-1.18942838831751),(20,101,-0.276528214362011),(20,103,0.842661824396497),(20,104,2.32169560838649),(20,105,-0.553636280404065),(20,106,3.80535294656209),(20,111,-0.751365703299051),(20,116,-2.82610553300577),(21,86,-0.7570879238258),(21,87,1.74831385235145),(21,94,1.38250373851741),(21,96,-3.86860255745109),(21,101,1.37206640827662),(21,102,-2.12675862910855),(21,105,-2.35891293069246),(21,107,-1.4172338023011),(21,108,0.15279091769158),(22,86,-3.10881374553667),(22,88,1.55510116885891),(22,91,-2.65189062166204),(22,92,1.35630359813227),(22,93,0.352961821344646),(22,98,1.59178441724906),(22,106,0.444166386913663),(22,115,1.75814081240272),(22,117,0.554826502273629),(23,85,0.781273842585528),(23,86,-2.65443891720328),(23,88,-1.16475417340617),(23,90,-0.714255195776238),(23,97,2.19597460860012),(23,104,-3.00036622211371),(23,112,0.416043580431532),(23,114,-0.155476546525468),(23,115,1.66321298867763),(23,116,-2.58180486465041),(24,89,1.41746269112217),(24,90,0.334665974913785),(24,91,-0.389202551347392),(24,101,-1.99127170628986),(24,107,2.42382580034791),(24,108,-0.086794640949736),(24,110,0.918744468520158),(24,112,-0.423398541215247),(25,90,0.976165044099246),(25,92,-1.52475051118503),(25,94,-1.6802270577105),(25,98,0.319406720175787),(25,105,3.18662068544572),(25,108,0.448088015381329),(25,109,0.873607593005158),(25,115,1.23308511612293),(26,85,-0.329691457869198),(26,87,-1.31517990661336),(26,89,0.742515335551012),(26,95,-0.317789239173559),(26,98,1.8644672994171),(26,100,-0.138248847926267),(26,101,0.905453657643361),(26,102,-1.67459639271218),(26,103,-2.76088747825556),(26,104,-0.52233954893643),(26,107,0.693365276039918),(26,109,0.499298074282052),(26,112,-2.45535142063662),(26,113,0.73642689291055),(26,117,-0.707022309030427),(27,85,0.743736075930052),(27,87,-1.83010345774712),(27,94,-0.478514969328898),(27,100,2.53913998840297),(27,102,-2.32253486739708),(27,103,0.428937650685141),(27,104,-0.649021881771294),(27,105,0.841227454451125),(27,108,1.06532486953337),(27,110,-0.178624835963012),(27,114,0.0516373180333872),(28,87,-1.12817773979919),(28,88,-0.409527878658406),(28,97,-0.660725730155339),(28,99,-1.27971739860225),(28,104,1.98625141148106),(28,113,1.84516434217353),(28,114,0.309671315652943),(29,88,-2.13983581041902),(29,91,0.734611041596728),(29,102,-1.46215704824976),(29,105,3.3635059663686),(29,116,-0.226172673726615),(30,95,2.32013916440321),(30,96,-1.96436964018677),(30,99,1.77631458479568),(30,101,-1.797204504532),(30,104,0.074465163121433),(30,109,-2.16780602435377),(30,110,-0.790169988097781),(30,114,-2.89526047547838),(30,118,-0.464690084536271),(31,85,-1.88590655232398),(31,92,0.720694601275674),(31,94,1.35241248817408),(31,96,1.06199835200049),(31,99,2.16116824854274),(31,103,1.33600878933073),(31,107,0.165105136265145),(31,108,0.146961882381664),(31,109,-1.90992461928159),(31,111,-0.00711081270790731),(31,112,-0.198065126499222),(31,117,-2.98727378154851),(32,86,0.932950834681234),(32,87,-0.858348338267159),(32,89,-0.867671742912076),(32,92,-0.1097903378399),(32,98,0.425244911038545),(32,99,-0.136402478102969),(32,104,3.30625324259163),(32,106,-0.0298928800317393),(32,109,-1.51126132999664),(32,116,0.418149357585376),(32,118,0.456572161015656),(33,96,4.89246803186132),(33,98,0.843180639057588),(33,108,-3.1776177251503),(33,110,-2.1971343119602),(33,111,-1.01042207098605),(33,114,2.32392345957823),(34,85,2.10927152317881),(34,90,-1.58764915921506),(34,99,0.301065095980712),(34,104,-1.46250801110874),(34,109,0.967329935605945),(35,86,-0.446180608539079),(35,87,2.77272865993225),(35,97,0.562379833368938),(35,98,-0.735724967192602),(35,100,1.50473036896878),(35,104,2.96713156529435),(35,107,-1.69353312784204),(35,109,-3.10550248725852),(35,110,-1.30468153935362),(35,112,0.587328714865566),(36,85,-2.96107364116337),(36,87,-0.304376354258858),(36,90,0.573900570696127),(36,91,-0.0420392468031861),(36,104,3.33986938077944),(36,107,3.02554399243141),(36,109,0.0994903408917507),(36,112,1.07144383068331),(36,115,-2.03024384289071),(36,117,1.89271217993713),(36,118,1.06266975920896),(37,85,2.84589678640095),(37,86,0.663548692281869),(37,87,-1.1863307596057),(37,91,-1.29261146885586),(37,99,-1.92495498519852),(37,105,-0.314981536301767),(37,111,-0.054307687612537),(37,112,3.41817987609485),(37,118,0.998306222724082),(38,87,-0.293984801782281),(38,90,2.19731742301706),(38,103,-1.4838557084872),(38,105,3.18350779747917),(38,106,-0.474028748435926),(38,111,-1.0870998260445),(38,115,1.40501113925596),(39,87,2.22298348948637),(39,89,2.57103183080538),(39,91,-4.77370525223548),(39,94,-0.257683034760582),(39,97,-2.23766289254433),(39,98,1.99151585436567),(39,107,-1.71217993713187),(39,108,2.79607531968139),(39,109,3.2613452558977),(39,111,-3.26296273689993),(39,113,-1.39928891872921),(39,116,0.100009155552843),(39,118,-1.90934476760155),(40,88,-1.08912930692465),(40,92,1.61084322641682),(40,99,1.3031098361156),(40,104,-2.25786614581744),(40,110,0.389431440168462),(40,116,-2.30428479873043),(40,118,-0.767616809595019),(41,88,-0.5413220618305),(41,93,0.63014618366039),(41,96,-1.82953886532182),(41,97,1.41636402478103),(41,100,1.77259132663961),(41,101,-1.93848994415113),(41,104,-0.888424329355754),(41,105,1.91929380169073),(41,106,-1.13219092379528),(41,107,-1.49990844447157),(41,109,3.59002960295419),(41,110,-0.979018524735252),(41,111,-2.0161442915128),(41,112,-0.693288979766228),(42,85,1.60545670949431),(42,86,2.85055085909604),(42,87,2.10093997009186),(42,99,1.54248176519059),(42,100,-1.70647297585986),(42,103,-1.74130985442671),(42,109,-1.58326975310526),(42,113,-0.315454573198645),(43,85,-0.991470076601459),(43,88,0.76403088473159),(43,89,0.281548509170812),(43,93,-2.3787652211066),(43,97,-1.40577410199286),(43,98,-1.68764305551317),(43,101,2.96978667561876),(43,102,1.00552385021516),(43,103,-1.35753959776605),(43,105,-1.90488906521805),(43,110,1.97204504531999),(43,112,-1.33745841853084),(43,114,0.222495193334758),(43,116,2.8949095126194),(44,89,3.00103762932218),(44,98,2.44979705191198),(44,99,-3.13064973906674),(45,87,1.79969176305429),(45,88,2.54853968932157),(45,90,-2.76389355143895),(45,91,2.79139072847682),(45,95,0.840433973204749),(45,98,-0.996841334269234),(45,108,-1.39465010528886),(45,109,1.39947202978607),(45,112,2.98751792962432),(45,115,0.401837214270455),(46,85,0.342814416943876),(46,89,-0.893292031617176),(46,91,-1.85351115451521),(46,94,-0.307153538621174),(46,97,-0.208990752891629),(46,100,0.0296945097201453),(46,101,-2.56048768578143),(46,108,-2.01796014282662),(46,112,1.97161778618732),(47,86,-1.69687490462966),(47,91,2.72605059968871),(47,92,-1.21518601031526),(47,94,2.55977050080874),(47,95,1.97607348857082),(47,100,-2.24782555619983),(47,101,-1.0582293160802),(47,104,1.83492538224433),(47,105,-0.491363261818293),(47,108,2.15117343668935),(47,112,-2.03170873134556),(47,114,0.353099154637288),(47,118,0.697256385998108),(48,86,1.06138798181097),(48,91,1.31238746299631),(48,98,0.233024079103976),(48,99,0.0585650196844386),(48,100,-0.604937894833216),(48,103,-2.81566820276498),(48,105,-2.67297891170995),(48,106,1.65559862056337),(48,111,-1.11668752098148),(48,115,-1.11842707602161),(49,87,-0.00370799890133366),(49,89,2.20882290108951),(49,93,3.83561204870754),(49,94,-0.114825891903439),(49,95,3.53036591692862),(49,102,3.23741874446852),(49,113,0.415799432355724),(49,114,3.64090395825068),(50,89,1.07487716299936),(50,105,1.1866512039552),(50,107,-1.42800683614612),(51,87,-0.945783867915891),(51,92,2.15997802667318),(51,97,-1.049272133549),(51,98,-1.18141727958007),(51,103,2.07969908749657),(51,106,-2.17264320810572),(51,112,0.207602160710471),(51,118,1.579149754326),(52,89,-1.4492019409772),(52,97,-0.289193395794549),(52,106,-0.0788140507217627),(52,110,1.21463667714469),(52,111,1.58500930814539),(52,113,-0.899822992645039),(52,114,-3.079149754326),(52,118,-1.05825983458968),(53,88,0.82982879116184),(53,90,0.827890865810114),(53,92,-0.246452223273415),(53,94,-1.32259590441603),(53,104,0.504745628223517),(53,105,-1.48825037385174),(53,109,0.391460921048616),(54,85,0.775521103549303),(54,91,-0.134891811883907),(54,94,1.71832941679128),(54,96,1.67912839136937),(54,111,1.55262916959136),(54,112,-2.90733054597613),(54,113,0.832193975646229),(54,118,-1.21210364085818),(55,87,-1.80339976195563),(55,95,-1.90885647144993),(55,107,-1.16779076509903),(55,110,2.4588000122074),(55,117,-1.02784813989685),(56,107,-1.06704916531877),(56,111,1.69125949888607),(56,113,-1.32081057161168),(56,114,-2.17191076387829),(57,87,1.73606067079684),(57,90,2.15105136265145),(57,91,-0.631046479689932),(57,92,-0.422803430280465),(57,93,-1.93958861049226),(57,94,1.90676595355083),(57,95,0.738456373790704),(57,96,0.380458998382519),(57,100,2.06872768333995),(57,102,1.28810998870815),(57,103,0.0514236884670553),(57,115,1.30054628131962),(58,86,-2.91091647083956),(58,87,-0.0688650166325876),(58,89,2.50360118411817),(58,90,-1.88138981292154),(58,95,0.0592059083834346),(58,96,0.828577532273324),(58,101,-1.40383617664113),(58,103,-0.614246040223395),(58,109,1.78991058076724),(58,110,0.174001281777398),(58,113,2.51736503189184),(58,114,-2.3619800408948),(58,115,-2.3243507187109),(58,118,-0.21584215826899),(59,85,2.10092471083712),(59,86,-1.16786706137272),(59,90,-0.766975920896023),(59,91,0.599154637287515),(59,93,0.862956633198035),(59,97,2.2694174016541),(59,98,1.17239906002991),(59,100,0.487533188879055),(59,102,-1.92732016968291),(59,112,1.60290841395306),(59,114,-0.771309549241615),(60,85,0.239158299508652),(60,87,0.384472182378613),(60,90,2.67780083620716),(60,91,-0.287789544358654),(60,96,2.46601763969848),(60,100,-1.88706625568407),(60,101,-0.525742362743004),(60,105,-2.11470381786554),(60,107,1.7445600756859),(60,109,2.63939329203162),(60,110,-1.16838587603381),(60,114,-1.79213843195898),(61,89,-0.765663624988556),(61,94,1.14389477217933),(61,96,1.72573015533921),(61,98,-1.56613361003449),(61,100,-1.09317300943022),(61,102,-2.14888454847865),(61,103,-1.61343729972228),(61,114,-1.04165776543474),(61,115,-2.05610827967162),(62,93,-2.97528000732444),(62,95,-3.24861903744621),(62,107,1.91343424787133),(62,109,-2.42764061403241),(62,110,-2.61123996704001),(62,111,-1.30106509598071),(63,87,-3.19579149754326),(63,90,1.11761833552049),(63,93,1.36844996490371),(63,97,-2.01075777459029),(63,100,2.54353465376751),(63,103,1.01235999633778),(63,104,-0.686010315256203),(63,108,-2.56067079683828),(63,111,-0.830271309549242),(63,114,0.110812707907346),(63,117,0.700430310983612),(64,87,-1.7490157780694),(64,94,1.57713553270058),(64,99,1.93127231666005),(64,110,-1.45689260536515),(64,112,-1.38740195928831),(64,116,-1.96176030762658),(65,87,-0.868205816827906),(65,88,1.70595416119877),(65,90,-0.498214667195654),(65,97,0.616595965453047),(65,99,-3.1851252784814),(65,107,4.02829065828425),(65,110,-2.14857936338389),(65,111,-0.461241492965484),(65,114,-0.0582750938444166),(65,116,-1.24135563219092),(65,117,0.250938444166387),(66,85,0.964201788384655),(66,102,-1.6616718039491),(66,105,1.82145146031068),(66,108,2.30355235450301),(66,111,-1.39092684713279),(66,115,-0.750389110995819),(66,118,2.87818536942656),(67,86,-1.40212714011048),(67,90,1.71886349070711),(67,92,-0.592730491042817),(67,104,4.96653645435957),(67,109,-0.616229743339335),(67,111,2.93574327829829),(68,87,-0.112598040711692),(68,88,1.7680898464919),(68,90,-0.166386913663137),(68,93,0.967955565050203),(68,95,0.0625782036805322),(68,96,0.277169103061007),(68,97,-0.123340556047243),(68,103,0.746787926877651),(68,107,0.476622821741386),(68,112,-2.19214453566088),(68,114,2.24181340983306),(69,87,1.9635761589404),(69,88,0.745704519791253),(69,92,1.79433576464125),(69,94,1.25945310831019),(69,95,0.901058992278817),(69,97,-0.288720358897671),(69,108,-2.47697378460036),(69,113,-1.39411603137303),(69,114,4.57625049592578),(69,118,0.990844447157201),(70,85,-1.13144322031312),(70,86,0.533860286263619),(70,87,1.43459883419294),(70,90,-2.43072298348949),(70,96,-0.00350962858973968),(70,97,0.0586565752128666),(70,99,0.259849848933378),(70,105,-1.39863277077548),(70,107,2.19016083254494),(70,109,0.119876705221717),(70,110,0.32128360850856),(70,111,-0.274117252113407),(71,85,-0.936902981658376),(71,93,0.115680410168767),(71,96,-0.838557084871975),(71,100,-0.908612323374126),(71,104,0.467696157719657),(71,106,-1.8157597582934),(71,111,0.767967772453993),(71,113,-1.88795129245888),(72,94,2.94247260963775),(72,96,-0.502243110446486),(72,99,1.71069978942228),(72,110,-2.34305856501968),(72,112,2.7258064516129),(72,114,2.14754173406171),(72,115,1.87299722281564),(72,116,2.11125522629475),(73,88,0.847773674733726),(73,94,-1.26163518173772),(73,99,0.575884273812067),(73,100,-0.293649098178045),(73,106,0.00556962797936948),(73,110,-1.84148686178167),(73,115,-0.118564409314249),(74,90,1.73010956144902),(74,94,-1.36588641010773),(74,99,-1.89588610492264),(74,102,-0.632633442182684),(74,106,-4.06558427686392),(74,107,-1.38428907132176),(74,110,-0.689474166081728),(74,113,1.89580980864895),(74,116,-3.52937406537065),(75,85,-0.140415662099063),(75,86,1.8298135319071),(75,93,0.10986663411359),(75,98,-1.77533799249245),(75,103,-2.18028809472945),(75,105,0.606067079683828),(75,111,-1.2593768120365),(75,117,-0.557496871852779),(76,86,-0.379589220862453),(76,89,-1.06765953550829),(76,92,0.665379802850429),(76,94,-1.63403729361858),(76,99,1.69621875667592),(76,101,1.54644917142247),(76,103,-2.60190130314035),(76,106,0.136860255745109),(76,110,-1.41520432142094),(76,113,0.151066621906186),(77,88,2.28942228461562),(77,91,0.0854213080233161),(77,93,1.25347148045289),(77,98,0.182546464430677),(77,101,-0.831965086825159),(77,102,0.352381969664602),(77,103,-1.51867732779931),(77,104,0.423749504074221),(77,105,-1.19936216315195),(77,109,0.143925290688803),(78,88,-0.534440137943663),(78,93,-1.18045594653157),(78,94,0.521897030549028),(78,101,-1.24398022400586),(78,104,0.102511673329875),(78,110,-2.58328501236),(78,114,0.534073915829951),(78,116,-0.684835352641377),(78,117,-0.962950529496139),(78,118,0.594561601611377),(79,87,0.894375438703574),(79,92,-1.97737052522355),(79,94,0.579363383892331),(79,107,0.798425244911039),(79,108,4.18456068605609),(79,114,0.772301400799585),(79,118,-0.766228217413861),(80,87,-0.0772270882290109),(80,88,-0.941343424787133),(80,91,-0.367961668752098),(80,99,-1.69832453382977),(80,101,0.353740043336283),(80,107,1.9980315561388),(80,113,-1.88428907132176),(81,85,0.204702902310251),(81,86,2.20860927152318),(81,90,-0.883297219763787),(81,93,1.23201696829127),(81,96,-0.311075167088839),(81,97,1.35752433851131),(81,106,0.500473036896878),(81,107,-1.68173772392956),(81,110,-0.613208410901212),(81,115,1.35142063661611),(82,86,0.294259468367565),(82,92,-0.445631275368511),(82,110,-0.852443006683554),(82,112,0.838831751457259),(83,87,-0.307016205328532),(83,91,0.512192144535661),(83,93,-0.101275673696097),(83,101,-1.60435804315317),(83,103,-1.69476912747581),(83,105,0.661214026306955),(83,108,-1.10655537583544),(84,85,-0.752616962187567),(84,86,0.152500991851558),(84,89,1.00865199743645),(84,95,0.344431897946104),(84,99,0.0383770256660665),(84,104,0.287865840632343),(84,111,-1.92451246681112),(84,113,-0.668507950071718),(84,114,0.710257271034883),(35,105,-1.86191900387585)]
orgname='BHNEAT_10_8'
cnodes = 119

import battlecode
import time
import random
import queue

#Start a game
game = battlecode.Game(orgname)

start = time.clock()

# convert to edge list
edgel = [[]] * cnodes
indeg = [0] * cnodes
for a in range(len(edge)):
	edgel[edge[a][0]].append((edge[a][1], edge[a][2]))
	indeg[edge[a][1]] += 1

# establish update order
q = []
qtop = 0
curindeg = indeg.copy ()
for a in range(cnodes):
	if curindeg[a] == 0:
		q.append(a)
while qtop != len(q):
	node = q[qtop]
	qtop += 1
	for a in range(len(edgel[node])):
		curindeg[edgel[node][a][0]] -= 1
		if curindeg[edgel[node][a][0]] == 0:
			q.append(edgel[node][a][0])

# node values
val = [0.0] * cnodes

dirlist = battlecode.Direction.directions()

def EntityAtLoc(state, loc):
	entlist = state.get_entities()
	for entity in entlist:
		if entity.location.distance_to(loc) <= 0.05:
			return entity
	return None

for state in game.turns():
	# Your Code will run within this loop
	for entity in state.get_entities(team=state.my_team): 
		# This line gets all the bots on your team

		# input 1 bias node and 84 feature nodes
		val[0] = 1.0
		val[1] = float(entity.hp)
		if entity.holding == None:
			val[2] = 0.0
		elif entity.holding.team == state.my_team:
			val[2] = 1.0
		elif entity.holding.team == state.other_team:
			val[2] = -1.0
		else:
			val[2] = 0.0
		for a in range(len(dirlist)): # 3-34
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			pre = 3 + a * 4

			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
			elif state.map.tile_at(thisloc) == 'G':
				val[pre + 0] = 1.0
			elif state.map.tile_at(thisloc) == 'D':
				val[pre + 0] = -1.0
			else:
				val[pre + 0] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 1] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 1] = 0.0
			elif locent.team == state.my_team and locent.is_thrower:
				val[pre + 1] = 1.0
			elif locent.team == state.other_team and locent.is_thrower:
				val[pre + 1] = -1.0
			else:
				val[pre + 1] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 2] = 0.0
			locent = EntityAtLoc(state, thisloc)
			if locent == None:
				val[pre + 2] = 0.0
			elif locent.team == state.my_team and locent.is_statue:
				val[pre + 2] = 1.0
			elif locent.team == state.other_team and locent.is_statue:
				val[pre + 2] = -1.0
			else:
				val[pre + 2] = 0.0

			if not state.map.location_on_map(thisloc):
				val[pre + 3] = 1.0
			else:
				val[pre + 3] = 0.0
		for a in range(len(dirlist)): # 35-66
			pre = 35 + a * 4
			thisloc = entity.location
			val[pre+3] = 0.0
			for b in range(7):
				thisloc = thisloc.adjacent_location_in_direction(dirlist[a])
				if not state.map.location_on_map(thisloc):
					val[pre + 0] = 0.0
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					val[pre + 3] = 1.0
					break
				entloc = EntityAtLoc(state, thisloc)
				if entloc != None:
					break
			if not state.map.location_on_map(thisloc):
				pass
			else:
				entloc = EntityAtLoc(state, thisloc)
				if entloc == None:
					val[pre + 1] = 0.0
					val[pre + 2] = 0.0
					if state.map.tile_at(thisloc) == 'G':
						val[pre + 0] = 1.0
					elif state.map.tile_at(thisloc) == 'D':
						val[pre + 0] = -1.0
					else:
						val[pre + 0] = 0.0
				else:
					val[pre + 0] = 0.0
					if entloc.team == state.my_team and entloc.is_thrower:
						val[pre + 1] = 1.0
					elif entloc.team == state.other_team and entloc.is_thrower:
						val[pre + 1] = -1.0
					else:
						val[pre + 1] = 0.0
					if entloc.team == state.my_team and entloc.is_statue:
						val[pre + 2] = 1.0
					elif entloc.team == state.other_team and entloc.is_statue:
						val[pre + 2] = -1.0
					else:
						val[pre + 2] = 0.0
		for a in range(len(dirlist)): # 67-82
			pre = 66 + a * 2
			thisloc = entity.location.adjacent_location_in_direction(dirlist[a])
			if not state.map.location_on_map(thisloc):
				val[pre + 0] = 0.0
				val[pre + 1] = 1.0
			else:
				val[pre + 1] = 0.0
				sector = state.map.sector_at(thisloc)
				if sector.team == state.my_team:
					val[pre + 0] = 1.0
				elif sector.team == state.other_team:
					val[pre + 0] = -1.0
				else:
					val[pre + 0] = 0.0
		val[83] = 0.0
		val[84] = 0.0
		
		# bfs propagate on all nodes

		for a in range(len(q)):
			for b in range(len(edgel[q[a]])):
				val[edgel[q[a]][b][0]] += val[q[a]] * edgel[q[a]][b][1]
					
		# get corresponding max of 34 output nodes
		maxout = val[85]
		maxoutid = 85
		for a in range(85, 119):
			if val[a] > maxout:
				maxout = val[a]
				maxoutid = a

		outval = []
		for a in range(85, 119):
			outval.append((val[a],a))
		stout = sorted(outval, key=lambda curval: curval[0], reverse=True)

		for a in range(len(stout)):
			maxoutid = stout[a][1]
			maxoutid -= 85
			if maxoutid == 0:
				break # do nothing
			elif maxoutid == 1:
				entity.queue_disintegrate()
				break
			elif maxoutid >= 2 and maxoutid <= 9 and entity.can_move(dirlist[maxoutid - 2]):
				entity.queue_move(dirlist[maxoutid - 2])
				break
			elif maxoutid >= 10 and maxoutid <= 17:
				entloc = EntityAtLoc(state, entity.location.adjacent_location_in_direction(dirlist[maxoutid - 10]))
				if entloc != None and entity.can_pickup(entloc):
					entity.queue_pickup(entloc)
					break
			elif maxoutid >= 18 and maxoutid <= 25 and entity.can_throw(dirlist[maxoutid - 18]):
				entity.queue_throw(dirlist[maxoutid - 18])
				break
			elif maxoutid >= 26 and maxoutid <= 33 and entity.can_build(dirlist[maxoutid - 26]):
				entity.queue_build(dirlist[maxoutid - 26])
				break
			else:
				pass

end = time.clock()
# print('clock time: ' + str(end - start))
# print('per round: ' + str((end - start) / 1000))
count = 0
for entity in state.get_entities(team=state.my_team):
	count += 1

file = open('result\\' + orgname + '.txt', 'w')
file.write(str(count - 1))
file.close()